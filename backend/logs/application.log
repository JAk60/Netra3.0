2025-09-21 11:52:42,442 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:53:04,959 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:53:07,717 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:53:07,852 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:53:07,852 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:53:07,852 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:53:07,980 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:53:13,496 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:53:13,630 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:53:13,630 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:53:13,630 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:53:13,756 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:53:53,260 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:53:53,573 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:53:53,573 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:53:53,573 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:53:53,702 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:54:02,982 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:54:03,120 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:54:03,121 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:54:03,121 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:54:03,250 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:54:16,628 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:54:16,765 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:54:16,765 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:54:16,765 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:54:16,893 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:54:25,432 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:54:25,565 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:54:25,566 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:54:25,566 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:54:25,694 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:54:33,590 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:54:33,724 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:54:33,725 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:54:33,725 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:54:33,850 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:54:36,091 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:54:36,237 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:54:36,237 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:54:36,237 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:54:36,381 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:54:44,328 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:54:44,476 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:54:44,476 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:54:44,476 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:54:44,613 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:54:46,967 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:54:47,105 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:54:47,105 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:54:47,105 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:54:47,235 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:54:49,494 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:54:49,635 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:54:49,635 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:54:49,635 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:54:49,767 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:54:57,343 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:54:57,479 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:54:57,479 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:54:57,480 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:54:57,608 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:54:59,813 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:54:59,949 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:54:59,949 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:54:59,949 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:55:00,082 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:55:06,679 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:06,818 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:55:06,818 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:55:06,818 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:55:06,946 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:55:09,320 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:09,463 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:55:09,463 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:55:09,463 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:55:09,596 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:55:18,949 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:19,086 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:55:19,086 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:55:19,086 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:55:19,214 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:55:26,790 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:26,928 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:55:26,928 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:55:26,928 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:55:27,057 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:55:29,289 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:29,424 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:55:29,425 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:55:29,425 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:55:29,549 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:55:33,142 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:33,278 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:55:33,278 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:55:33,278 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:55:33,405 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:55:35,663 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:35,800 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:55:35,800 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:55:35,800 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:55:35,927 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:55:45,804 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:45,939 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:55:45,940 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:55:45,940 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:55:46,068 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:55:46,263 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:55:46,279 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:55:46,279 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:55:46,294 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:55:46,310 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:55:46,319 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:55:46,449 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:55:46,454 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:55:46,457 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:55:46,460 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:55:46,463 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:55:46,465 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:55:46,468 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:55:46,470 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:55:46,473 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:55:46,476 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:55:46,479 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:55:46,482 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:55:46,484 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:55:46,487 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:55:46,493 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:55:46,497 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:46,497 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:55:46,501 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:55:46,501 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:55:46,505 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:46,505 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:55:46,509 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:46,509 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:55:46,513 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:46,513 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:55:46,518 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:55:46,518 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:55:46,522 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:55:46,522 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:55:46,522 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:55:46,526 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:55:46,526 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:55:46,526 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:55:46,531 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:55:46,535 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:55:46,535 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:55:46,535 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:55:46,535 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:55:46,535 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:55:46,539 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:55:46,543 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:55:46,543 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:55:46,543 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:55:46,543 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,543 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:55:46,543 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,543 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,543 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,543 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:55:46,543 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,544 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:55:46,544 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,544 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:55:46,544 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:55:46,544 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:55:46,544 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:55:46,544 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:55:46,544 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 11:55:46,544 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:46,689 - INFO - âœ… Successfully imported LLMService!
2025-09-21 11:55:46,726 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:55:46,741 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:55:46,742 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:55:46,766 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:55:46,770 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:55:46,773 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:55:46,776 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:55:46,778 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:55:46,781 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:55:46,784 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:55:46,786 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:55:46,789 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:55:46,792 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:55:46,795 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:55:46,798 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:55:46,800 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:55:46,803 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:55:46,808 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:55:46,812 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:46,813 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:55:46,817 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:55:46,817 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:55:46,821 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:46,821 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:55:46,825 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:46,825 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:55:46,829 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:46,829 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:55:46,833 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:55:46,833 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:55:46,837 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:55:46,837 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:55:46,838 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:55:46,842 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:55:46,842 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:55:46,842 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:55:46,846 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:55:46,850 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:55:46,850 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:55:46,850 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:55:46,850 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:55:46,850 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:55:46,854 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:55:46,858 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:55:46,858 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:55:46,858 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:55:46,858 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,858 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:55:46,858 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,858 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,858 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,858 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:55:46,859 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,859 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:55:46,859 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:55:46,859 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:55:46,859 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:55:46,859 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:55:46,859 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:55:46,859 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:55:48,829 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:48,968 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:55:48,968 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:55:48,968 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:55:49,099 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:55:49,262 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:55:49,278 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:55:49,278 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:55:49,293 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:55:49,309 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:55:49,318 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:55:49,339 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:55:49,344 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:55:49,347 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:55:49,350 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:55:49,353 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:55:49,356 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:55:49,359 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:55:49,361 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:55:49,365 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:55:49,368 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:55:49,371 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:55:49,374 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:55:49,376 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:55:49,379 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:55:49,385 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:55:49,389 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:49,389 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:55:49,393 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:55:49,393 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:55:49,397 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:49,397 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:55:49,401 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:49,401 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:55:49,405 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:49,405 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:55:49,410 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:55:49,410 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:55:49,414 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:55:49,414 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:55:49,414 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:55:49,419 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:55:49,419 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:55:49,419 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:55:49,423 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:55:49,427 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:55:49,427 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:55:49,427 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:55:49,427 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:55:49,427 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:55:49,432 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:55:49,436 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:55:49,436 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:55:49,436 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:55:49,436 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,436 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:55:49,436 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,436 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,436 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,436 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:55:49,436 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,436 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:55:49,436 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,437 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:55:49,437 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:55:49,437 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:55:49,437 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:55:49,437 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:55:49,437 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 11:55:49,437 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:55:49,538 - INFO - âœ… Successfully imported LLMService!
2025-09-21 11:55:49,576 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:55:49,592 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:55:49,593 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:55:49,605 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:55:49,610 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:55:49,613 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:55:49,616 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:55:49,619 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:55:49,621 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:55:49,624 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:55:49,627 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:55:49,630 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:55:49,633 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:55:49,636 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:55:49,639 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:55:49,642 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:55:49,645 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:55:49,650 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:55:49,654 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:49,654 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:55:49,659 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:55:49,659 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:55:49,663 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:49,663 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:55:49,668 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:49,668 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:55:49,672 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:55:49,672 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:55:49,676 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:55:49,676 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:55:49,680 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:55:49,680 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:55:49,680 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:55:49,685 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:55:49,685 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:55:49,685 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:55:49,689 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:55:49,693 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:55:49,693 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:55:49,693 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:55:49,693 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:55:49,694 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:55:49,697 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:55:49,702 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:55:49,702 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:55:49,702 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:55:49,702 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,702 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:55:49,702 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,702 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,702 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,702 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:55:49,702 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,702 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:55:49,702 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:55:49,702 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:55:49,702 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:55:49,702 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:55:49,702 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:55:49,702 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:57:17,172 - INFO - Database engine created with pool_size=10
2025-09-21 11:57:32,988 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:33,125 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:57:33,125 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:57:33,125 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:57:33,252 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:57:33,413 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:33,429 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:33,429 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:33,444 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:33,459 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:33,468 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:57:33,513 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:57:33,519 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:57:33,522 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:57:33,524 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:57:33,527 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:57:33,530 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:57:33,532 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:57:33,535 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:57:33,538 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:57:33,540 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:57:33,543 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:57:33,546 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:57:33,549 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:57:33,552 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:57:33,557 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:57:33,561 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:33,561 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:33,565 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:57:33,565 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:57:33,569 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:33,569 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:33,573 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:33,574 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:57:33,578 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:33,578 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:57:33,582 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:57:33,582 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:57:33,586 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:57:33,586 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:57:33,586 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:57:33,590 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:57:33,590 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:57:33,590 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:57:33,594 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:57:33,599 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:57:33,599 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:57:33,599 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:57:33,599 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:57:33,599 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:57:33,603 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:57:33,607 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:57:33,607 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:57:33,607 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:57:33,607 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:33,607 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:57:33,607 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:33,607 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:57:33,608 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:57:33,608 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:57:33,608 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:57:33,608 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:57:33,608 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:57:33,608 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:57:33,608 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:57:33,608 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:57:33,608 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:57:33,608 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:57:33,608 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 11:57:33,609 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:35,940 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:36,078 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:57:36,078 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:57:36,078 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:57:36,206 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:57:36,366 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:36,382 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:36,382 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:36,397 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:36,412 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:36,421 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:57:36,442 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:57:36,448 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:57:36,451 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:57:36,454 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:57:36,456 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:57:36,459 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:57:36,462 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:57:36,464 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:57:36,468 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:57:36,470 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:57:36,473 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:57:36,476 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:57:36,478 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:57:36,481 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:57:36,487 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:57:36,491 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:36,491 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:36,495 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:57:36,495 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:57:36,500 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:36,500 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:36,504 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:36,504 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:57:36,508 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:36,508 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:57:36,512 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:57:36,512 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:57:36,516 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:57:36,517 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:57:36,517 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:57:36,521 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:57:36,521 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:57:36,521 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:57:36,525 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:57:36,529 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:57:36,529 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:57:36,530 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:57:36,530 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:57:36,530 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:57:36,534 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:57:36,538 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:57:36,538 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:57:36,538 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:57:36,539 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:36,539 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:57:36,539 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:36,539 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:57:36,539 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:57:36,539 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:57:36,539 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:57:36,539 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:57:36,539 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:57:36,539 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:57:36,539 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:57:36,539 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:57:36,539 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:57:36,539 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:57:36,540 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 11:57:36,540 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:45,062 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:45,201 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:57:45,201 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:57:45,201 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:57:45,329 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:57:45,489 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:45,505 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:45,505 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:45,520 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:45,536 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:45,545 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:57:45,565 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:57:45,571 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:57:45,574 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:57:45,577 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:57:45,580 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:57:45,582 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:57:45,585 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:57:45,588 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:57:45,591 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:57:45,594 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:57:45,597 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:57:45,601 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:57:45,603 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:57:45,606 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:57:45,611 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:57:45,616 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:45,616 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:45,620 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:57:45,620 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:57:45,624 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:45,624 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:45,628 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:45,628 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:57:45,632 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:45,632 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:57:45,636 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:57:45,636 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:57:45,640 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:57:45,641 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:57:45,641 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:57:45,645 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:57:45,645 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:57:45,645 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:57:45,649 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:57:45,654 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:57:45,654 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:57:45,654 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:57:45,654 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:57:45,654 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:57:45,658 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:57:45,662 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:57:45,663 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:57:45,663 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:57:45,663 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,663 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:57:45,663 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,663 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,663 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,663 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:57:45,663 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,663 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:57:45,663 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,663 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:57:45,663 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:57:45,664 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:57:45,664 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:57:45,664 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:57:45,664 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 11:57:45,664 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:45,801 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:45,816 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:45,816 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:57:45,829 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:57:45,834 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:57:45,837 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:57:45,839 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:57:45,842 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:57:45,845 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:57:45,847 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:57:45,850 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:57:45,853 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:57:45,856 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:57:45,859 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:57:45,862 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:57:45,864 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:57:45,867 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:57:45,873 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:57:45,877 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:45,877 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:45,881 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:57:45,881 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:57:45,885 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:45,885 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:45,889 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:45,889 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:57:45,893 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:45,893 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:57:45,897 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:57:45,897 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:57:45,902 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:57:45,902 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:57:45,902 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:57:45,906 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:57:45,906 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:57:45,906 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:57:45,910 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:57:45,914 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:57:45,914 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:57:45,914 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:57:45,915 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:57:45,915 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:57:45,919 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:57:45,924 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:57:45,924 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:57:45,925 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:57:45,925 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,925 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:57:45,925 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,925 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,925 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,925 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:57:45,925 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,925 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:57:45,925 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:57:45,925 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:57:45,925 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:57:45,925 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:57:45,925 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:57:45,925 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:57:49,780 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:49,916 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:57:49,916 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:57:49,916 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:57:50,044 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:57:50,209 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:50,225 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:50,225 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:50,240 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:50,255 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:50,264 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:57:50,316 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:57:50,322 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:57:50,324 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:57:50,327 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:57:50,330 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:57:50,332 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:57:50,335 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:57:50,337 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:57:50,340 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:57:50,343 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:57:50,345 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:57:50,349 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:57:50,351 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:57:50,354 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:57:50,360 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:57:50,364 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:50,364 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:50,368 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:57:50,368 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:57:50,372 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:50,372 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:50,376 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:50,376 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:57:50,380 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:50,380 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:57:50,384 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:57:50,385 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:57:50,389 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:57:50,389 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:57:50,389 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:57:50,393 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:57:50,393 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:57:50,393 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:57:50,398 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:57:50,402 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:57:50,402 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:57:50,402 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:57:50,402 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:57:50,402 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:57:50,407 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:57:50,411 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:57:50,411 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:57:50,411 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:57:50,411 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,411 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:57:50,411 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,411 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,411 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,411 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:57:50,411 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,411 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:57:50,411 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,411 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:57:50,411 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:57:50,412 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:57:50,412 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:57:50,412 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:57:50,412 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 11:57:50,412 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:50,511 - INFO - âœ… Successfully imported LLMService!
2025-09-21 11:57:50,548 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:50,565 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:50,565 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:57:50,577 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:57:50,582 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:57:50,584 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:57:50,587 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:57:50,589 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:57:50,592 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:57:50,595 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:57:50,597 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:57:50,600 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:57:50,603 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:57:50,605 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:57:50,608 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:57:50,610 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:57:50,613 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:57:50,618 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:57:50,622 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:50,622 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:50,626 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:57:50,626 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:57:50,630 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:50,630 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:50,634 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:50,634 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:57:50,638 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:50,638 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:57:50,641 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:57:50,641 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:57:50,646 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:57:50,646 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:57:50,646 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:57:50,650 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:57:50,650 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:57:50,650 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:57:50,654 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:57:50,658 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:57:50,658 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:57:50,658 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:57:50,658 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:57:50,658 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:57:50,662 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:57:50,666 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:57:50,666 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:57:50,666 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:57:50,666 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,666 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:57:50,666 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,666 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,666 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,666 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:57:50,666 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,666 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:57:50,666 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:57:50,666 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:57:50,667 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:57:50,667 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:57:50,667 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:57:50,667 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:57:54,021 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:54,155 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:57:54,155 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:57:54,155 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:57:54,281 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:57:54,440 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:54,456 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:54,456 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:54,470 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:54,485 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:54,494 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:57:54,514 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:57:54,520 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:57:54,523 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:57:54,526 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:57:54,528 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:57:54,531 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:57:54,534 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:57:54,537 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:57:54,540 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:57:54,543 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:57:54,545 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:57:54,548 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:57:54,550 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:57:54,553 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:57:54,559 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:57:54,563 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:54,563 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:54,568 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:57:54,568 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:57:54,572 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:54,572 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:54,576 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:54,576 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:57:54,580 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:54,580 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:57:54,584 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:57:54,584 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:57:54,588 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:57:54,588 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:57:54,588 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:57:54,593 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:57:54,593 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:57:54,593 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:57:54,597 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:57:54,602 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:57:54,602 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:57:54,602 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:57:54,602 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:57:54,602 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:57:54,606 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:57:54,610 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:57:54,610 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:57:54,610 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:57:54,610 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,610 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:57:54,610 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,610 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,610 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,610 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:57:54,610 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,610 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:57:54,610 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,610 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:57:54,610 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:57:54,610 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:57:54,610 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:57:54,610 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:57:54,611 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 11:57:54,611 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:54,711 - INFO - âœ… Successfully imported LLMService!
2025-09-21 11:57:54,747 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:54,763 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:54,763 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:57:54,775 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:57:54,779 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:57:54,782 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:57:54,785 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:57:54,787 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:57:54,790 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:57:54,792 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:57:54,795 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:57:54,798 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:57:54,801 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:57:54,803 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:57:54,806 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:57:54,809 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:57:54,812 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:57:54,817 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:57:54,821 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:54,821 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:54,825 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:57:54,825 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:57:54,829 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:54,829 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:54,833 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:54,833 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:57:54,837 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:54,837 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:57:54,841 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:57:54,841 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:57:54,846 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:57:54,846 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:57:54,846 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:57:54,850 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:57:54,850 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:57:54,850 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:57:54,854 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:57:54,858 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:57:54,858 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:57:54,858 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:57:54,858 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:57:54,858 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:57:54,863 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:57:54,867 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:57:54,867 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:57:54,867 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:57:54,867 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,867 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:57:54,867 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,867 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,868 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,868 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:57:54,868 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,868 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:57:54,868 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:57:54,868 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:57:54,868 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:57:54,868 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:57:54,868 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:57:54,868 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:57:56,804 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:56,940 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:57:56,940 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:57:56,940 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:57:57,069 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:57:57,246 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:57,262 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:57,262 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:57,277 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:57,294 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:57,303 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:57:57,324 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:57:57,330 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:57:57,334 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:57:57,337 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:57:57,340 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:57:57,343 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:57:57,347 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:57:57,352 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:57:57,356 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:57:57,360 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:57:57,364 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:57:57,368 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:57:57,372 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:57:57,376 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:57:57,383 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:57:57,388 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:57,388 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:57,393 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:57:57,393 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:57:57,398 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:57,398 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:57,404 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:57,404 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:57:57,409 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:57,409 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:57:57,414 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:57:57,414 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:57:57,419 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:57:57,419 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:57:57,419 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:57:57,424 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:57:57,424 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:57:57,424 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:57:57,429 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:57:57,434 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:57:57,434 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:57:57,434 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:57:57,434 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:57:57,434 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:57:57,439 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:57:57,445 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:57:57,446 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:57:57,446 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:57:57,446 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,446 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:57:57,446 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,446 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,446 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,446 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:57:57,446 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,446 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:57:57,446 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,446 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:57:57,446 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:57:57,446 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:57:57,446 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:57:57,446 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:57:57,447 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 11:57:57,447 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:57:57,553 - INFO - âœ… Successfully imported LLMService!
2025-09-21 11:57:57,591 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:57:57,610 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:57:57,610 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:57:57,623 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:57:57,627 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:57:57,629 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:57:57,632 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:57:57,635 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:57:57,637 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:57:57,640 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:57:57,642 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:57:57,645 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:57:57,648 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:57:57,650 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:57:57,653 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:57:57,656 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:57:57,659 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:57:57,665 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:57:57,669 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:57,669 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:57,673 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:57:57,673 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:57:57,677 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:57,677 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:57:57,681 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:57,681 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:57:57,685 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:57:57,685 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:57:57,689 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:57:57,689 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:57:57,694 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:57:57,694 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:57:57,694 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:57:57,698 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:57:57,698 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:57:57,698 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:57:57,702 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:57:57,707 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:57:57,707 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:57:57,707 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:57:57,707 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:57:57,707 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:57:57,711 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:57:57,716 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:57:57,716 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:57:57,716 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:57:57,716 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,716 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:57:57,716 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,716 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,716 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,716 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:57:57,716 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,716 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:57:57,716 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:57:57,716 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:57:57,716 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:57:57,716 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:57:57,716 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:57:57,716 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:58:04,619 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:58:04,757 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 11:58:04,757 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 11:58:04,757 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 11:58:04,888 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 11:58:05,052 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:58:05,068 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:58:05,068 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:58:05,084 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:58:05,100 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:58:05,108 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:58:05,129 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:58:05,135 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:58:05,138 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:58:05,141 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:58:05,144 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:58:05,147 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:58:05,150 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:58:05,152 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:58:05,155 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:58:05,158 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:58:05,161 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:58:05,164 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:58:05,167 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:58:05,171 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:58:05,178 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:58:05,182 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:05,182 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:58:05,186 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:58:05,186 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:58:05,190 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:05,190 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:58:05,194 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:05,194 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:58:05,199 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:05,199 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:58:05,203 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:58:05,203 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:58:05,207 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:58:05,207 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:58:05,207 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:58:05,211 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:58:05,211 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:58:05,211 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:58:05,216 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:58:05,220 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:58:05,220 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:58:05,220 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:58:05,220 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:58:05,220 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:58:05,224 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:58:05,228 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:58:05,228 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:58:05,228 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:58:05,229 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,229 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:58:05,229 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,229 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,229 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,229 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:58:05,229 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,229 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:58:05,229 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,229 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:58:05,229 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:58:05,229 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:58:05,229 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:58:05,229 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:58:05,229 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 11:58:05,230 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 11:58:05,330 - INFO - âœ… Successfully imported LLMService!
2025-09-21 11:58:05,368 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:58:05,384 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:58:05,384 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:58:05,396 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:58:05,401 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:58:05,404 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:58:05,406 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:58:05,409 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:58:05,411 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:58:05,414 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:58:05,417 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:58:05,420 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:58:05,423 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:58:05,426 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:58:05,429 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:58:05,432 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:58:05,435 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:58:05,441 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:58:05,445 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:05,445 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:58:05,449 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:58:05,450 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:58:05,454 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:05,454 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:58:05,458 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:05,458 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:58:05,462 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:05,462 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:58:05,466 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:58:05,466 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:58:05,470 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:58:05,470 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:58:05,470 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:58:05,474 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:58:05,474 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:58:05,474 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:58:05,478 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:58:05,483 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:58:05,483 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:58:05,483 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:58:05,483 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:58:05,483 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:58:05,487 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:58:05,491 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:58:05,491 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:58:05,491 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:58:05,491 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,491 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:58:05,491 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,491 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,491 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,491 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:58:05,491 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,492 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:58:05,492 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:58:05,492 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:58:05,492 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:58:05,492 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:58:05,492 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:58:05,492 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:58:12,479 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:58:12,495 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-21 11:58:12,496 - INFO - ðŸ“¨ Chat request: list all ships...
2025-09-21 11:58:12,496 - INFO - ðŸš€ Creating LLMService instance...
2025-09-21 11:58:12,496 - INFO - âœ… LLMService instance created successfully!
2025-09-21 11:58:12,496 - INFO - âœ… Got LLM service
2025-09-21 11:58:12,519 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=5.0 socket_options=None
2025-09-21 11:58:12,520 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x73166dba2b50>
2025-09-21 11:58:12,521 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-09-21 11:58:12,521 - DEBUG - send_request_headers.complete
2025-09-21 11:58:12,521 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-09-21 11:58:12,521 - DEBUG - send_request_body.complete
2025-09-21 11:58:12,521 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-09-21 11:58:12,522 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Sun, 21 Sep 2025 06:28:12 GMT'), (b'Content-Length', b'1373')])
2025-09-21 11:58:12,522 - INFO - HTTP Request: GET http://localhost:11434/api/tags "HTTP/1.1 200 OK"
2025-09-21 11:58:12,522 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-09-21 11:58:12,522 - DEBUG - receive_response_body.complete
2025-09-21 11:58:12,523 - DEBUG - response_closed.started
2025-09-21 11:58:12,523 - DEBUG - response_closed.complete
2025-09-21 11:58:12,523 - DEBUG - close.started
2025-09-21 11:58:12,523 - DEBUG - close.complete
2025-09-21 11:58:12,524 - INFO - Database engine created with pool_size=10
2025-09-21 11:58:13,112 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:58:13,128 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:58:13,128 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:58:13,143 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 11:58:13,158 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 11:58:13,159 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 11:58:13,171 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:58:13,176 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 11:58:13,178 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 11:58:13,181 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 11:58:13,183 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 11:58:13,186 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 11:58:13,189 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 11:58:13,191 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 11:58:13,194 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 11:58:13,197 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 11:58:13,199 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 11:58:13,202 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 11:58:13,205 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 11:58:13,208 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 11:58:13,213 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 11:58:13,217 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:13,217 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 11:58:13,221 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 11:58:13,222 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 11:58:13,226 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:13,226 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 11:58:13,230 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:13,230 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 11:58:13,234 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 11:58:13,234 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 11:58:13,238 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 11:58:13,238 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 11:58:13,242 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 11:58:13,242 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 11:58:13,242 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 11:58:13,247 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 11:58:13,247 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 11:58:13,247 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 11:58:13,251 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 11:58:13,255 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 11:58:13,255 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 11:58:13,256 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 11:58:13,256 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 11:58:13,256 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 11:58:13,260 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 11:58:13,264 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 11:58:13,264 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 11:58:13,264 - DEBUG - ðŸ” Relationship Details:
2025-09-21 11:58:13,264 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:58:13,264 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 11:58:13,264 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 11:58:13,264 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 11:58:13,265 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 11:58:13,265 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 11:58:13,265 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 11:58:13,265 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 11:58:13,265 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 11:58:13,265 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 11:58:13,265 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 11:58:13,265 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 11:58:13,265 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 11:58:13,265 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 11:58:13,265 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 11:58:13,265 - INFO - ðŸ“Œ User input: list all ships
2025-09-21 11:58:13,265 - DEBUG - ðŸ“Œ Full input with context: list all ships
2025-09-21 11:58:13,265 - INFO - ðŸ“Œ Processing query: list all ships
2025-09-21 11:58:13,266 - DEBUG - âœ… Schema available for role Admin/ INSMA: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 11:58:13,266 - INFO - ðŸ“Œ Generating SQL for: list all ships
2025-09-21 11:58:13,266 - DEBUG - ðŸ“Œ Generated Prompt Length: 9102 characters
2025-09-21 11:58:13,266 - INFO - Generating SQL query...
2025-09-21 11:58:13,267 - DEBUG - connect_tcp.started host='127.0.0.1' port=11434 local_address=None timeout=None socket_options=None
2025-09-21 11:58:13,267 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x73166da29c50>
2025-09-21 11:58:13,267 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-21 11:58:13,267 - DEBUG - send_request_headers.complete
2025-09-21 11:58:13,267 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-21 11:58:13,267 - DEBUG - send_request_body.complete
2025-09-21 11:58:13,267 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-21 11:58:19,432 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Sun, 21 Sep 2025 06:28:19 GMT'), (b'Content-Length', b'586')])
2025-09-21 11:58:19,432 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
2025-09-21 11:58:19,432 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-21 11:58:19,433 - DEBUG - receive_response_body.complete
2025-09-21 11:58:19,433 - DEBUG - response_closed.started
2025-09-21 11:58:19,433 - DEBUG - response_closed.complete
2025-09-21 11:58:19,433 - DEBUG - Extracting SQL from response: SELECT s.ship_id, s.ship_name, d.department_name, sc.component_name, sm.sensor_name
FROM ships s
JOIN departments d ON s.ship_id = d.ship_id
JOIN system_configuration sc ON d.department_id = sc.depart...
2025-09-21 11:58:19,433 - INFO - Direct SQL response detected: SELECT s.ship_id, s.ship_name, d.department_name, sc.component_name, sm.sensor_name
FROM ships s
JOIN departments d ON s.ship_id = d.ship_id
JOIN system_configuration sc ON d.department_id = sc.department_id
JOIN sensor_metadata sm ON sc.component_id = sm.component_id;
2025-09-21 11:58:19,433 - INFO - SQL query generation completed
2025-09-21 11:58:19,433 - DEBUG - Generated SQL query: SELECT s.ship_id, s.ship_name, d.department_name, sc.component_name, sm.sensor_name
FROM ships s
JOIN departments d ON s.ship_id = d.ship_id
JOIN system_configuration sc ON d.department_id = sc.department_id
JOIN sensor_metadata sm ON sc.component_id = sm.component_id;
2025-09-21 11:58:19,433 - DEBUG - ðŸ“Œ LLM Raw Response: SELECT s.ship_id, s.ship_name, d.department_name, sc.component_name, sm.sensor_name
FROM ships s
JOIN departments d ON s.ship_id = d.ship_id
JOIN system_configuration sc ON d.department_id = sc.department_id
JOIN sensor_metadata sm ON sc.component_id = sm.component_id;
2025-09-21 11:58:19,434 - DEBUG - ðŸ” Table aliases in FROM/JOIN: {'d', 'sm', 's', 'sc'}
2025-09-21 11:58:19,434 - INFO - âœ… Query passed advanced validation
2025-09-21 11:58:19,434 - INFO - ðŸ“Œ Generated Valid SQL Query: SELECT s.ship_id, s.ship_name, d.department_name, sc.component_name, sm.sensor_name FROM ships s JOIN departments d ON s.ship_id = d.ship_id JOIN system_configuration sc ON d.department_id = sc.department_id JOIN sensor_metadata sm ON sc.component_id = sm.component_id;
2025-09-21 11:58:19,434 - DEBUG - ðŸ” Table aliases in FROM/JOIN: {'d', 'sm', 's', 'sc'}
2025-09-21 11:58:19,434 - INFO - âœ… Query passed advanced validation
2025-09-21 11:58:19,434 - INFO - âœ… Query is safe and authorized!
2025-09-21 11:58:19,434 - INFO - ðŸ“Œ Executing SQL query: SELECT s.ship_id, s.ship_name, d.department_name, sc.component_name, sm.sensor_name FROM ships s JOIN departments d ON s.ship_id = d.ship_id JOIN system_configuration sc ON d.department_id = sc.department_id JOIN sensor_metadata sm ON sc.component_id = sm.component_id;
2025-09-21 11:58:24,795 - INFO - ðŸ“Œ Query executed successfully in 5.361 seconds. Retrieved 3 records.
2025-09-21 11:58:26,142 - INFO - âœ… Got result from LLM service
2025-09-21 12:01:10,312 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 12:01:10,447 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 12:01:10,447 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 12:01:10,447 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 12:01:10,574 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 12:01:10,735 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 12:01:10,751 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 12:01:10,751 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 12:01:10,766 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 12:01:10,781 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 12:01:10,790 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 12:01:10,810 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 12:01:10,816 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 12:01:10,819 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 12:01:10,822 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 12:01:10,824 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 12:01:10,827 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 12:01:10,830 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 12:01:10,833 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 12:01:10,836 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 12:01:10,839 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 12:01:10,842 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 12:01:10,846 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 12:01:10,848 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 12:01:10,851 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 12:01:10,857 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 12:01:10,861 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 12:01:10,861 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 12:01:10,865 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 12:01:10,865 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 12:01:10,869 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 12:01:10,869 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 12:01:10,873 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 12:01:10,874 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 12:01:10,878 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 12:01:10,878 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 12:01:10,882 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 12:01:10,882 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 12:01:10,886 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 12:01:10,886 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 12:01:10,886 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 12:01:10,890 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 12:01:10,890 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 12:01:10,890 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 12:01:10,894 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 12:01:10,899 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 12:01:10,899 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 12:01:10,899 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 12:01:10,899 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 12:01:10,899 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 12:01:10,904 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 12:01:10,908 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 12:01:10,908 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 12:01:10,908 - DEBUG - ðŸ” Relationship Details:
2025-09-21 12:01:10,908 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 12:01:10,908 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 12:01:10,908 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 12:01:10,908 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 12:01:10,908 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 12:01:10,908 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 12:01:10,908 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 12:01:10,908 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 12:01:10,908 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 12:01:10,908 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 12:01:10,908 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 12:01:10,908 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 12:01:10,908 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 12:01:10,908 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 12:01:10,908 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 12:01:10,908 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 12:01:10,909 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 12:01:11,007 - INFO - âœ… Successfully imported LLMService!
2025-09-21 12:01:11,043 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 12:01:11,059 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 12:01:11,059 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 12:01:11,071 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 12:01:11,076 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 12:01:11,078 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 12:01:11,081 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 12:01:11,083 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 12:01:11,086 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 12:01:11,088 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 12:01:11,091 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 12:01:11,094 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 12:01:11,096 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 12:01:11,099 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 12:01:11,102 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 12:01:11,104 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 12:01:11,107 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 12:01:11,112 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 12:01:11,116 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 12:01:11,116 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 12:01:11,120 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 12:01:11,120 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 12:01:11,124 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 12:01:11,124 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 12:01:11,128 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 12:01:11,128 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 12:01:11,132 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 12:01:11,132 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 12:01:11,136 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 12:01:11,136 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 12:01:11,140 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 12:01:11,140 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 12:01:11,140 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 12:01:11,145 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 12:01:11,145 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 12:01:11,145 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 12:01:11,150 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 12:01:11,155 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 12:01:11,155 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 12:01:11,155 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 12:01:11,155 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 12:01:11,155 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 12:01:11,159 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 12:01:11,163 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 12:01:11,163 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 12:01:11,163 - DEBUG - ðŸ” Relationship Details:
2025-09-21 12:01:11,163 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 12:01:11,163 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 12:01:11,163 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 12:01:11,163 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 12:01:11,164 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 12:01:11,164 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 12:01:11,164 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 12:01:11,164 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 12:01:11,164 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 12:01:11,164 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 12:01:11,164 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 12:01:11,164 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 12:01:11,164 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 12:01:11,164 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:00:28,860 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:00:28,999 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:00:29,000 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:00:29,000 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:00:29,131 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:00:29,296 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:29,312 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:29,312 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:29,328 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:29,344 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:29,353 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:00:29,393 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:00:29,432 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:00:29,435 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:00:29,437 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:00:29,440 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:00:29,443 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:00:29,445 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:00:29,448 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:00:29,451 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:00:29,454 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:00:29,457 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:00:29,460 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:00:29,462 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:00:29,466 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:00:29,471 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:00:29,475 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:29,475 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:29,479 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:00:29,479 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:00:29,484 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:29,484 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:29,489 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:29,489 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:00:29,493 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:29,493 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:00:29,497 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:00:29,497 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:00:29,501 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:00:29,501 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:00:29,501 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:00:29,505 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:00:29,505 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:00:29,505 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:00:29,510 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:00:29,514 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:00:29,515 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:00:29,515 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:00:29,515 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:00:29,515 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:00:29,519 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:00:29,523 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:00:29,523 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:00:29,523 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:00:29,524 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,524 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:00:29,524 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,524 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,524 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,524 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:00:29,524 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,524 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:00:29,524 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,524 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:00:29,524 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:00:29,524 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:00:29,524 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:00:29,524 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:00:29,524 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:00:29,524 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:00:29,525 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:00:29,624 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:00:29,662 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:29,678 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:29,678 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:00:29,690 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:00:29,695 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:00:29,698 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:00:29,701 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:00:29,703 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:00:29,706 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:00:29,708 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:00:29,711 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:00:29,714 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:00:29,717 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:00:29,719 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:00:29,722 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:00:29,725 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:00:29,727 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:00:29,733 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:00:29,737 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:29,737 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:29,741 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:00:29,741 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:00:29,745 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:29,745 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:29,749 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:29,749 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:00:29,753 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:29,753 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:00:29,757 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:00:29,757 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:00:29,761 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:00:29,761 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:00:29,761 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:00:29,766 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:00:29,766 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:00:29,766 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:00:29,770 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:00:29,774 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:00:29,774 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:00:29,774 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:00:29,774 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:00:29,774 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:00:29,778 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:00:29,796 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:00:29,796 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:00:29,796 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:00:29,796 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,796 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:00:29,796 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,796 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,796 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,796 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:00:29,796 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,796 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:00:29,796 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:00:29,796 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:00:29,796 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:00:29,796 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:00:29,796 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:00:29,796 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:00:32,732 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:00:32,868 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:00:32,869 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:00:32,869 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:00:32,997 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:00:33,157 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:33,173 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:33,173 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:33,188 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:33,202 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:33,211 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:00:33,231 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:00:33,237 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:00:33,239 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:00:33,243 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:00:33,246 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:00:33,250 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:00:33,254 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:00:33,258 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:00:33,262 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:00:33,266 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:00:33,270 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:00:33,274 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:00:33,278 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:00:33,283 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:00:33,290 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:00:33,295 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:33,296 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:33,301 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:00:33,301 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:00:33,306 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:33,306 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:33,311 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:33,311 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:00:33,314 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:33,315 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:00:33,319 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:00:33,319 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:00:33,323 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:00:33,323 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:00:33,323 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:00:33,327 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:00:33,327 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:00:33,327 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:00:33,331 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:00:33,337 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:00:33,337 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:00:33,337 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:00:33,337 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:00:33,337 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:00:33,344 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:00:33,349 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:00:33,349 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:00:33,349 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:00:33,349 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,349 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:00:33,349 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,350 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,350 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,350 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:00:33,350 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,350 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:00:33,350 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,350 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:00:33,350 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:00:33,350 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:00:33,350 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:00:33,350 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:00:33,350 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:00:33,351 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:00:33,351 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:00:33,457 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:00:33,493 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:33,509 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:33,509 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:00:33,522 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:00:33,526 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:00:33,529 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:00:33,531 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:00:33,534 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:00:33,536 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:00:33,539 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:00:33,542 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:00:33,545 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:00:33,548 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:00:33,550 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:00:33,553 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:00:33,556 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:00:33,559 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:00:33,564 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:00:33,568 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:33,568 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:33,572 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:00:33,572 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:00:33,576 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:33,576 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:33,580 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:33,580 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:00:33,584 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:33,584 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:00:33,588 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:00:33,588 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:00:33,592 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:00:33,592 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:00:33,593 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:00:33,599 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:00:33,599 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:00:33,599 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:00:33,603 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:00:33,607 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:00:33,607 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:00:33,607 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:00:33,607 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:00:33,607 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:00:33,611 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:00:33,615 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:00:33,615 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:00:33,615 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:00:33,616 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,616 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:00:33,616 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,616 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,616 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,616 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:00:33,616 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,616 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:00:33,616 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:00:33,616 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:00:33,616 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:00:33,616 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:00:33,616 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:00:33,616 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:00:36,000 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:00:36,140 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:00:36,140 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:00:36,140 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:00:36,272 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:00:36,438 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:36,454 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:36,454 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:36,469 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:36,485 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:36,494 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:00:36,514 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:00:36,520 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:00:36,523 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:00:36,526 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:00:36,529 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:00:36,531 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:00:36,534 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:00:36,536 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:00:36,539 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:00:36,542 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:00:36,545 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:00:36,548 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:00:36,550 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:00:36,553 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:00:36,558 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:00:36,563 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:36,563 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:36,567 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:00:36,567 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:00:36,571 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:36,572 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:36,576 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:36,576 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:00:36,580 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:36,580 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:00:36,584 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:00:36,584 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:00:36,589 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:00:36,589 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:00:36,589 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:00:36,593 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:00:36,593 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:00:36,593 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:00:36,598 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:00:36,605 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:00:36,605 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:00:36,605 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:00:36,605 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:00:36,605 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:00:36,610 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:00:36,615 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:00:36,615 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:00:36,615 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:00:36,615 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,615 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:00:36,615 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,615 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,615 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,615 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:00:36,615 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,615 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:00:36,615 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,615 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:00:36,615 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:00:36,616 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:00:36,616 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:00:36,616 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:00:36,616 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:00:36,616 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:00:36,616 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:00:36,714 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:00:36,750 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:36,765 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:36,766 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:00:36,778 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:00:36,782 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:00:36,785 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:00:36,788 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:00:36,790 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:00:36,793 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:00:36,795 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:00:36,798 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:00:36,801 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:00:36,803 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:00:36,806 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:00:36,809 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:00:36,811 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:00:36,814 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:00:36,819 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:00:36,823 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:36,823 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:36,827 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:00:36,827 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:00:36,831 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:36,831 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:36,835 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:36,835 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:00:36,839 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:36,839 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:00:36,842 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:00:36,843 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:00:36,846 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:00:36,847 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:00:36,847 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:00:36,850 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:00:36,851 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:00:36,851 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:00:36,854 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:00:36,858 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:00:36,859 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:00:36,859 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:00:36,859 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:00:36,859 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:00:36,863 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:00:36,866 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:00:36,866 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:00:36,867 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:00:36,867 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,867 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:00:36,867 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,867 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,867 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,867 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:00:36,867 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,867 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:00:36,867 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:00:36,867 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:00:36,867 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:00:36,867 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:00:36,867 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:00:36,867 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:00:38,806 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:00:38,938 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:00:38,939 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:00:38,939 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:00:39,070 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:00:39,233 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:39,249 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:39,249 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:39,264 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:39,280 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:39,289 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:00:39,310 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:00:39,318 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:00:39,320 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:00:39,323 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:00:39,326 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:00:39,328 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:00:39,331 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:00:39,333 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:00:39,336 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:00:39,339 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:00:39,341 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:00:39,344 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:00:39,346 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:00:39,349 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:00:39,354 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:00:39,359 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:39,359 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:39,363 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:00:39,363 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:00:39,367 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:39,367 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:39,371 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:39,371 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:00:39,375 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:39,375 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:00:39,379 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:00:39,379 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:00:39,384 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:00:39,384 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:00:39,384 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:00:39,388 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:00:39,388 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:00:39,388 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:00:39,393 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:00:39,397 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:00:39,397 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:00:39,397 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:00:39,397 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:00:39,397 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:00:39,401 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:00:39,405 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:00:39,405 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:00:39,406 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:00:39,406 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,406 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:00:39,406 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,406 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,406 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,406 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:00:39,406 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,406 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:00:39,406 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,406 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:00:39,406 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:00:39,406 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:00:39,406 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:00:39,406 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:00:39,406 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:00:39,406 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:00:39,407 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:00:39,510 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:00:39,547 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:39,563 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:39,564 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:00:39,576 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:00:39,581 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:00:39,584 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:00:39,587 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:00:39,590 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:00:39,592 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:00:39,595 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:00:39,598 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:00:39,601 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:00:39,603 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:00:39,606 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:00:39,609 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:00:39,612 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:00:39,615 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:00:39,620 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:00:39,625 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:39,625 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:39,629 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:00:39,629 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:00:39,633 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:39,633 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:39,637 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:39,637 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:00:39,642 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:39,642 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:00:39,646 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:00:39,646 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:00:39,650 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:00:39,650 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:00:39,650 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:00:39,654 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:00:39,655 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:00:39,655 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:00:39,659 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:00:39,660 - ERROR - âŒ Error getting foreign keys for table system_configuration: (pyodbc.OperationalError) ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')
[SQL: WITH fk_info AS (
    SELECT
        ischema_ref_con.constraint_schema,
        ischema_ref_con.constraint_name,
        ischema_key_col.ordinal_position,
        ischema_key_col.table_schema,
        ischema_key_col.table_name,
        ischema_ref_con.unique_constraint_schema,
        ischema_ref_con.unique_constraint_name,
        ischema_ref_con.match_option,
        ischema_ref_con.update_rule,
        ischema_ref_con.delete_rule,
        ischema_key_col.column_name AS constrained_column
    FROM
        INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS ischema_ref_con
        INNER JOIN
        INFORMATION_SCHEMA.KEY_COLUMN_USAGE ischema_key_col ON
            ischema_key_col.table_schema = ischema_ref_con.constraint_schema
            AND ischema_key_col.constraint_name =
            ischema_ref_con.constraint_name
    WHERE ischema_key_col.table_name = CAST(? AS NVARCHAR(max))
        AND ischema_key_col.table_schema = CAST(? AS NVARCHAR(max))
),
constraint_info AS (
    SELECT
        ischema_key_col.constraint_schema,
        ischema_key_col.constraint_name,
        ischema_key_col.ordinal_position,
        ischema_key_col.table_schema,
        ischema_key_col.table_name,
        ischema_key_col.column_name
    FROM
        INFORMATION_SCHEMA.KEY_COLUMN_USAGE ischema_key_col
),
index_info AS (
    SELECT
        sys.schemas.name AS index_schema,
        sys.indexes.name AS index_name,
        sys.index_columns.key_ordinal AS ordinal_position,
        sys.schemas.name AS table_schema,
        sys.objects.name AS table_name,
        sys.columns.name AS column_name
    FROM
        sys.indexes
        INNER JOIN
        sys.objects ON
            sys.objects.object_id = sys.indexes.object_id
        INNER JOIN
        sys.schemas ON
            sys.schemas.schema_id = sys.objects.schema_id
        INNER JOIN
        sys.index_columns ON
            sys.index_columns.object_id = sys.objects.object_id
            AND sys.index_columns.index_id = sys.indexes.index_id
        INNER JOIN
        sys.columns ON
            sys.columns.object_id = sys.indexes.object_id
            AND sys.columns.column_id = sys.index_columns.column_id
)
    SELECT
        fk_info.constraint_schema,
        fk_info.constraint_name,
        fk_info.ordinal_position,
        fk_info.constrained_column,
        constraint_info.table_schema AS referred_table_schema,
        constraint_info.table_name AS referred_table_name,
        constraint_info.column_name AS referred_column,
        fk_info.match_option,
        fk_info.update_rule,
        fk_info.delete_rule
    FROM
        fk_info INNER JOIN constraint_info ON
            constraint_info.constraint_schema =
                fk_info.unique_constraint_schema
            AND constraint_info.constraint_name =
                fk_info.unique_constraint_name
            AND constraint_info.ordinal_position = fk_info.ordinal_position
    UNION
    SELECT
        fk_info.constraint_schema,
        fk_info.constraint_name,
        fk_info.ordinal_position,
        fk_info.constrained_column,
        index_info.table_schema AS referred_table_schema,
        index_info.table_name AS referred_table_name,
        index_info.column_name AS referred_column,
        fk_info.match_option,
        fk_info.update_rule,
        fk_info.delete_rule
    FROM
        fk_info INNER JOIN index_info ON
            index_info.index_schema = fk_info.unique_constraint_schema
            AND index_info.index_name = fk_info.unique_constraint_name
            AND index_info.ordinal_position = fk_info.ordinal_position

    ORDER BY fk_info.constraint_schema, fk_info.constraint_name,
        fk_info.ordinal_position
]
[parameters: ('system_configuration', 'dbo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-21 13:00:39,761 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:00:39,765 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:00:39,766 - INFO - âœ… Schema loading complete. Found 13 tables and 10 relationships
2025-09-21 13:00:39,766 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:00:39,766 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,766 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:00:39,766 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,766 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,766 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,766 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:00:39,766 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,766 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:00:39,766 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:00:39,766 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:00:41,697 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:00:41,831 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:00:41,832 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:00:41,832 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:00:41,962 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:00:42,124 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:42,139 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:42,139 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:42,154 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:42,169 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:42,177 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:00:42,197 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:00:42,203 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:00:42,206 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:00:42,209 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:00:42,211 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:00:42,214 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:00:42,216 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:00:42,219 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:00:42,222 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:00:42,224 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:00:42,227 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:00:42,230 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:00:42,232 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:00:42,235 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:00:42,240 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:00:42,244 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:42,244 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:42,248 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:00:42,248 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:00:42,252 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:42,252 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:42,256 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:42,256 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:00:42,260 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:42,260 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:00:42,264 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:00:42,264 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:00:42,268 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:00:42,268 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:00:42,269 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:00:42,272 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:00:42,273 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:00:42,273 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:00:42,277 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:00:42,281 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:00:42,281 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:00:42,281 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:00:42,281 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:00:42,281 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:00:42,285 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:00:42,289 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:00:42,289 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:00:42,289 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:00:42,289 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,289 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:00:42,289 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,289 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,289 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,289 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:00:42,289 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,289 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:00:42,289 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,289 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:00:42,290 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:00:42,290 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:00:42,290 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:00:42,290 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:00:42,290 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:00:42,290 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:00:42,290 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:00:42,387 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:00:42,423 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:00:42,438 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:00:42,439 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:00:42,451 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:00:42,456 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:00:42,458 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:00:42,461 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:00:42,464 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:00:42,467 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:00:42,469 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:00:42,472 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:00:42,475 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:00:42,478 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:00:42,480 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:00:42,483 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:00:42,486 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:00:42,489 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:00:42,494 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:00:42,498 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:42,498 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:42,502 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:00:42,502 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:00:42,506 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:42,506 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:00:42,510 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:42,510 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:00:42,514 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:00:42,514 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:00:42,518 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:00:42,518 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:00:42,522 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:00:42,522 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:00:42,522 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:00:42,526 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:00:42,526 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:00:42,526 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:00:42,530 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:00:42,535 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:00:42,535 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:00:42,535 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:00:42,535 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:00:42,535 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:00:42,539 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:00:42,543 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:00:42,543 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:00:42,543 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:00:42,543 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,543 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:00:42,543 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,543 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,543 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,543 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:00:42,543 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,543 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:00:42,543 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:00:42,543 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:00:42,543 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:00:42,543 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:00:42,543 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:00:42,543 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:17,909 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:18,047 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:03:18,047 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:03:18,047 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:03:18,176 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:03:18,342 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:18,358 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:18,358 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:18,374 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:18,389 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:18,398 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:18,418 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:18,424 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:18,427 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:18,429 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:18,432 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:18,435 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:18,437 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:18,440 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:18,443 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:18,446 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:18,448 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:18,451 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:18,454 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:18,457 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:18,462 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:18,468 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:18,468 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:18,473 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:18,473 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:18,477 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:18,477 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:18,481 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:18,481 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:18,485 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:18,485 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:18,489 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:18,489 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:18,493 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:18,493 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:18,493 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:18,497 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:18,498 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:18,498 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:18,502 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:18,506 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:18,506 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:18,506 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:18,506 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:18,507 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:18,511 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:18,515 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:18,515 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:18,515 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:18,515 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,515 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:18,515 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,515 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,515 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,515 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:18,515 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,515 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:18,515 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,515 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:18,515 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:18,515 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:18,515 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:18,515 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:18,516 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:03:18,516 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:03:18,516 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:18,614 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:03:18,651 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:18,666 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:18,667 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:18,679 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:18,684 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:18,686 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:18,689 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:18,692 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:18,694 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:18,697 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:18,700 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:18,703 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:18,705 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:18,708 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:18,711 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:18,714 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:18,717 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:18,724 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:18,728 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:18,728 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:18,732 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:18,732 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:18,736 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:18,736 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:18,740 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:18,740 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:18,744 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:18,744 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:18,748 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:18,748 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:18,752 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:18,752 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:18,752 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:18,756 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:18,756 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:18,757 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:18,761 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:18,767 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:18,767 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:18,767 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:18,767 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:18,767 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:18,772 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:18,776 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:18,776 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:18,776 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:18,776 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,776 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:18,776 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,776 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,776 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,776 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:18,776 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,776 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:18,776 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:18,776 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:18,776 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:18,776 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:18,777 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:18,777 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:23,159 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:23,297 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:03:23,297 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:03:23,297 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:03:23,434 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:03:23,613 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:23,631 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:23,631 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:23,646 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:23,662 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:23,675 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:23,694 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:23,700 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:23,703 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:23,706 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:23,710 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:23,712 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:23,715 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:23,718 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:23,721 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:23,724 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:23,728 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:23,731 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:23,734 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:23,737 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:23,743 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:23,749 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:23,749 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:23,757 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:23,757 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:23,762 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:23,762 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:23,768 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:23,768 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:23,772 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:23,772 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:23,777 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:23,777 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:23,781 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:23,781 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:23,781 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:23,785 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:23,785 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:23,785 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:23,790 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:23,795 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:23,796 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:23,796 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:23,796 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:23,796 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:23,800 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:23,805 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:23,805 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:23,805 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:23,805 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:23,805 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:23,805 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:23,805 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:23,805 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:23,805 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:23,805 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:23,805 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:23,805 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:23,805 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:23,806 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:23,806 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:23,806 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:23,806 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:23,806 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:03:23,806 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:03:23,806 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:23,907 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:03:23,944 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:23,960 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:23,961 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:23,973 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:23,977 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:23,980 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:23,983 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:23,985 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:23,988 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:23,990 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:23,993 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:23,996 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:23,998 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:24,001 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:24,004 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:24,006 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:24,009 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:24,014 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:24,018 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:24,018 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:24,022 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:24,022 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:24,026 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:24,026 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:24,030 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:24,030 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:24,034 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:24,034 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:24,038 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:24,039 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:24,043 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:24,043 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:24,043 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:24,047 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:24,047 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:24,047 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:24,051 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:24,056 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:24,056 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:24,056 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:24,056 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:24,056 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:24,060 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:24,064 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:24,064 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:24,064 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:24,064 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:24,064 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:24,064 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:24,064 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:24,064 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:24,064 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:24,064 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:24,065 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:24,065 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:24,065 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:24,065 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:24,065 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:24,065 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:24,065 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:26,686 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:26,831 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:03:26,831 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:03:26,831 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:03:26,965 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:03:27,132 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:27,147 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:27,148 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:27,163 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:27,179 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:27,189 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:27,211 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:27,217 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:27,219 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:27,222 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:27,225 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:27,227 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:27,230 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:27,232 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:27,235 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:27,238 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:27,241 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:27,244 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:27,246 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:27,250 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:27,255 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:27,259 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:27,259 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:27,263 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:27,263 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:27,267 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:27,268 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:27,272 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:27,272 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:27,276 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:27,276 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:27,280 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:27,280 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:27,284 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:27,284 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:27,284 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:27,288 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:27,288 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:27,288 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:27,293 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:27,297 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:27,297 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:27,297 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:27,297 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:27,297 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:27,301 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:27,305 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:27,305 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:27,305 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:27,305 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,306 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:27,306 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,306 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,306 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,306 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:27,306 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,306 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:27,306 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,306 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:27,306 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:27,306 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:27,306 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:27,306 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:27,306 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:03:27,307 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:03:27,307 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:27,406 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:03:27,445 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:27,461 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:27,461 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:27,474 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:27,479 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:27,482 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:27,486 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:27,489 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:27,491 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:27,494 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:27,497 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:27,500 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:27,502 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:27,505 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:27,508 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:27,511 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:27,514 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:27,519 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:27,523 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:27,523 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:27,528 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:27,528 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:27,532 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:27,532 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:27,536 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:27,536 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:27,540 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:27,540 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:27,544 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:27,544 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:27,548 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:27,548 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:27,548 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:27,552 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:27,552 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:27,552 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:27,556 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:27,560 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:27,560 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:27,560 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:27,560 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:27,560 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:27,565 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:27,569 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:27,569 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:27,569 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:27,569 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,569 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:27,569 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,569 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,569 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,569 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:27,569 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,569 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:27,569 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:27,569 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:27,569 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:27,569 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:27,569 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:27,569 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:29,553 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:29,692 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:03:29,692 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:03:29,692 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:03:29,822 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:03:29,998 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:30,014 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:30,014 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:30,029 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:30,045 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:30,055 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:30,078 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:30,085 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:30,089 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:30,094 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:30,098 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:30,102 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:30,106 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:30,109 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:30,114 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:30,117 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:30,121 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:30,124 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:30,128 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:30,132 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:30,139 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:30,144 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:30,145 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:30,150 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:30,150 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:30,155 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:30,155 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:30,160 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:30,160 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:30,166 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:30,166 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:30,172 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:30,172 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:30,178 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:30,178 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:30,178 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:30,185 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:30,185 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:30,185 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:30,190 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:30,196 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:30,196 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:30,196 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:30,196 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:30,196 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:30,203 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:30,210 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:30,210 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:30,210 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:30,210 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,210 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:30,210 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,210 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,210 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,210 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:30,210 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,211 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:30,211 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,211 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:30,211 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:30,211 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:30,211 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:30,211 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:30,211 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:03:30,211 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:03:30,212 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:30,319 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:03:30,356 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:30,372 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:30,372 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:30,384 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:30,389 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:30,391 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:30,394 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:30,396 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:30,399 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:30,401 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:30,404 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:30,407 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:30,410 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:30,412 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:30,415 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:30,418 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:30,421 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:30,427 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:30,431 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:30,431 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:30,436 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:30,436 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:30,440 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:30,440 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:30,444 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:30,444 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:30,448 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:30,448 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:30,452 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:30,452 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:30,457 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:30,458 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:30,458 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:30,465 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:30,465 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:30,465 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:30,470 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:30,475 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:30,476 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:30,476 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:30,476 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:30,476 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:30,480 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:30,484 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:30,484 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:30,484 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:30,484 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,485 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:30,485 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,485 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,485 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,485 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:30,485 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,485 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:30,485 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:30,485 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:30,485 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:30,485 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:30,485 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:30,485 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:32,535 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:32,676 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:03:32,676 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:03:32,676 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:03:32,808 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:03:32,974 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:32,990 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:32,990 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:33,005 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:33,021 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:33,030 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:33,050 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:33,055 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:33,058 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:33,061 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:33,063 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:33,066 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:33,069 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:33,071 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:33,075 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:33,078 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:33,080 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:33,083 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:33,086 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:33,089 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:33,095 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:33,099 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:33,099 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:33,103 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:33,103 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:33,107 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:33,108 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:33,112 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:33,112 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:33,116 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:33,116 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:33,120 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:33,120 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:33,124 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:33,125 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:33,125 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:33,129 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:33,129 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:33,129 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:33,133 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:33,137 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:33,138 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:33,138 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:33,138 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:33,138 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:33,142 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:33,146 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:33,146 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:33,146 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:33,147 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,147 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:33,147 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,147 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,147 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,147 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:33,147 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,147 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:33,147 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,147 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:33,147 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:33,147 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:33,147 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:33,147 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:33,147 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:03:33,147 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:03:33,148 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:33,249 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:03:33,287 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:33,303 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:33,303 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:33,315 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:33,320 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:33,323 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:33,325 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:33,328 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:33,330 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:33,333 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:33,336 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:33,339 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:33,341 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:33,344 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:33,348 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:33,350 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:33,353 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:33,358 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:33,362 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:33,362 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:33,367 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:33,367 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:33,371 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:33,371 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:33,375 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:33,375 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:33,379 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:33,379 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:33,383 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:33,383 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:33,387 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:33,387 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:33,388 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:33,391 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:33,392 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:33,392 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:33,396 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:33,400 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:33,400 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:33,400 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:33,400 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:33,400 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:33,404 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:33,408 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:33,408 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:33,408 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:33,408 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,408 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:33,408 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,409 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,409 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,409 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:33,409 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,409 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:33,409 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:33,409 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:33,409 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:33,409 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:33,409 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:33,409 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:35,484 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:35,626 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:03:35,626 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:03:35,626 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:03:35,757 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:03:35,922 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:35,938 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:35,938 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:35,953 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:35,969 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:35,978 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:36,000 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:36,006 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:36,008 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:36,011 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:36,014 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:36,016 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:36,019 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:36,021 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:36,024 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:36,027 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:36,030 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:36,033 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:36,035 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:36,038 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:36,044 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:36,048 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:36,048 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:36,052 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:36,052 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:36,056 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:36,056 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:36,060 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:36,060 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:36,064 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:36,064 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:36,068 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:36,068 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:36,072 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:36,072 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:36,072 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:36,077 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:36,077 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:36,077 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:36,081 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:36,085 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:36,085 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:36,085 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:36,086 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:36,086 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:36,089 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:36,094 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:36,094 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:36,094 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:36,094 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,094 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:36,094 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,094 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,094 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,094 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:36,094 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,094 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:36,094 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,094 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:36,094 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:36,094 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:36,094 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:36,094 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:36,094 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:03:36,095 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:03:36,095 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:36,195 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:03:36,233 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:36,249 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:36,249 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:36,262 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:36,266 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:36,269 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:36,271 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:36,274 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:36,277 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:36,280 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:36,284 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:36,287 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:36,291 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:36,296 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:36,301 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:36,306 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:36,310 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:36,319 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:36,326 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:36,326 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:36,332 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:36,333 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:36,340 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:36,340 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:36,346 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:36,347 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:36,354 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:36,354 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:36,359 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:36,359 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:36,364 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:36,364 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:36,364 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:36,369 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:36,369 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:36,370 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:36,375 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:36,380 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:36,380 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:36,380 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:36,380 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:36,380 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:36,385 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:36,390 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:36,390 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:36,390 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:36,390 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,390 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:36,390 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,391 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,391 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,391 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:36,391 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,391 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:36,391 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:36,391 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:36,391 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:36,391 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:36,391 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:36,391 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:38,383 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:38,521 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:03:38,521 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:03:38,521 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:03:38,670 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:03:38,845 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:38,862 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:38,862 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:38,877 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:38,893 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:38,902 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:38,921 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:38,927 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:38,929 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:38,932 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:38,935 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:38,938 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:38,940 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:38,943 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:38,946 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:38,949 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:38,951 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:38,955 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:38,957 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:38,960 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:38,965 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:38,970 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:38,970 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:38,974 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:38,974 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:38,978 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:38,978 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:38,982 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:38,982 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:38,987 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:38,987 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:38,991 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:38,991 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:38,995 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:38,995 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:38,995 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:38,999 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:38,999 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:38,999 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:39,003 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:39,008 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:39,008 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:39,008 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:39,008 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:39,008 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:39,012 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:39,016 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:39,016 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:39,017 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:39,017 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,017 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:39,017 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,017 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,017 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,017 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:39,017 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,017 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:39,017 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,017 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:39,017 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:39,017 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:39,017 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:39,018 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:39,018 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:03:39,018 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:03:39,018 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:39,117 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:03:39,155 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:39,171 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:39,171 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:39,184 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:39,188 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:39,192 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:39,195 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:39,197 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:39,200 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:39,202 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:39,205 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:39,208 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:39,211 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:39,213 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:39,217 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:39,219 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:39,222 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:39,227 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:39,231 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:39,231 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:39,235 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:39,235 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:39,239 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:39,239 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:39,243 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:39,243 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:39,247 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:39,247 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:39,251 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:39,251 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:39,255 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:39,255 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:39,255 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:39,259 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:39,259 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:39,259 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:39,264 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:39,268 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:39,268 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:39,268 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:39,268 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:39,268 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:39,272 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:39,277 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:39,277 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:39,277 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:39,277 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,277 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:39,277 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,277 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,277 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,277 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:39,277 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,277 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:39,277 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:39,277 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:39,277 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:39,277 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:39,277 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:39,277 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:41,249 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:41,388 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:03:41,388 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:03:41,388 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:03:41,518 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:03:41,678 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:41,694 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:41,694 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:41,709 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:41,725 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:41,734 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:41,756 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:41,762 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:41,765 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:41,768 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:41,771 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:41,774 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:41,777 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:41,780 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:41,783 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:41,787 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:41,790 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:41,793 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:41,796 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:41,799 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:41,805 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:41,810 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:41,811 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:41,817 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:41,818 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:41,822 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:41,822 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:41,826 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:41,826 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:41,830 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:41,830 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:41,834 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:41,835 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:41,839 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:41,839 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:41,839 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:41,843 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:41,843 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:41,843 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:41,847 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:41,851 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:41,852 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:41,852 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:41,852 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:41,852 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:41,856 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:41,860 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:41,860 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:41,860 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:41,860 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:41,860 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:41,860 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:41,860 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:41,860 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:41,860 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:41,860 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:41,860 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:41,860 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:41,860 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:41,860 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:41,861 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:41,861 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:41,861 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:41,861 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:03:41,861 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:03:41,861 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:41,960 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:03:41,997 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:42,013 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:42,013 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:42,026 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:42,030 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:42,033 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:42,036 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:42,039 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:42,041 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:42,044 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:42,047 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:42,050 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:42,053 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:42,055 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:42,059 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:42,061 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:42,064 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:42,069 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:42,073 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:42,073 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:42,077 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:42,077 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:42,083 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:42,083 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:42,088 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:42,088 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:42,092 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:42,092 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:42,096 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:42,096 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:42,100 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:42,100 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:42,100 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:42,104 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:42,104 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:42,104 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:42,109 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:42,113 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:42,113 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:42,113 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:42,113 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:42,113 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:42,117 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:42,121 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:42,122 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:42,122 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:42,122 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:42,122 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:42,122 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:42,122 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:42,122 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:42,122 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:42,122 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:42,122 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:42,122 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:42,122 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:42,122 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:42,122 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:42,122 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:42,122 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:44,962 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:45,097 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:03:45,097 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:03:45,097 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:03:45,225 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:03:45,386 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:45,402 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:45,402 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:45,416 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:45,432 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:45,441 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:45,461 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:45,467 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:45,469 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:45,472 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:45,475 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:45,477 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:45,480 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:45,483 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:45,486 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:45,489 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:45,491 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:45,495 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:45,497 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:45,500 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:45,506 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:45,510 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:45,510 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:45,514 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:45,514 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:45,519 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:45,519 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:45,523 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:45,523 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:45,527 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:45,527 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:45,531 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:45,531 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:45,535 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:45,536 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:45,536 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:45,540 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:45,540 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:45,540 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:45,544 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:45,549 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:45,549 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:45,549 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:45,549 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:45,549 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:45,553 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:45,557 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:45,557 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:45,557 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:45,557 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,557 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:45,557 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,557 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,557 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,557 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:45,557 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,557 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:45,557 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,557 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:45,557 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:45,557 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:45,557 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:45,557 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:03:45,558 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:03:45,558 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:03:45,558 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:03:45,660 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:03:45,697 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:03:45,713 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:03:45,713 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:03:45,725 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:03:45,730 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:03:45,732 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:03:45,735 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:03:45,737 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:03:45,740 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:03:45,742 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:03:45,745 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:03:45,748 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:03:45,751 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:03:45,754 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:03:45,757 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:03:45,759 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:03:45,762 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:03:45,767 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:03:45,771 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:45,771 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:45,775 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:03:45,775 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:03:45,779 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:45,779 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:03:45,783 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:45,783 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:03:45,787 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:03:45,787 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:03:45,791 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:03:45,791 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:03:45,795 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:03:45,795 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:03:45,795 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:03:45,799 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:03:45,799 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:03:45,799 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:03:45,803 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:03:45,807 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:03:45,807 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:03:45,807 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:03:45,807 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:03:45,807 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:03:45,812 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:03:45,816 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:03:45,816 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:03:45,816 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:03:45,816 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,816 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:03:45,816 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,816 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,816 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,816 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:03:45,816 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,816 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:03:45,817 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:03:45,817 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:03:45,817 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:03:45,817 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:03:45,817 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:03:45,817 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:04:45,618 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:04:45,754 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:04:45,754 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:04:45,754 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:04:45,883 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:04:46,041 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:46,057 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:04:46,057 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:46,072 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:46,087 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:04:46,096 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:04:46,116 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:04:46,122 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:04:46,124 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:04:46,127 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:04:46,130 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:04:46,132 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:04:46,135 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:04:46,137 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:04:46,140 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:04:46,143 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:04:46,145 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:04:46,148 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:04:46,151 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:04:46,153 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:04:46,159 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:04:46,163 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:46,163 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:46,167 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:04:46,167 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:04:46,171 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:46,171 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:46,175 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:46,175 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:04:46,179 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:46,179 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:04:46,183 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:04:46,183 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:04:46,187 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:04:46,187 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:04:46,187 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:04:46,191 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:04:46,191 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:04:46,191 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:04:46,196 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:04:46,200 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:04:46,200 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:04:46,200 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:04:46,200 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:04:46,200 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:04:46,204 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:04:46,210 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:04:46,210 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:04:46,210 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:04:46,210 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,210 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:04:46,210 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,210 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,210 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,210 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:04:46,210 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,211 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:04:46,211 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,211 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:04:46,211 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:04:46,211 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:04:46,211 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:04:46,211 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:04:46,211 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:04:46,211 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:04:46,211 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:04:46,308 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:04:46,345 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:46,360 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:04:46,361 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:04:46,373 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:04:46,378 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:04:46,380 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:04:46,383 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:04:46,386 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:04:46,389 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:04:46,391 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:04:46,394 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:04:46,397 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:04:46,400 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:04:46,403 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:04:46,406 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:04:46,408 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:04:46,411 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:04:46,417 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:04:46,421 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:46,421 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:46,425 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:04:46,425 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:04:46,429 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:46,429 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:46,433 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:46,433 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:04:46,437 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:46,437 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:04:46,441 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:04:46,441 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:04:46,445 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:04:46,445 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:04:46,445 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:04:46,450 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:04:46,450 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:04:46,450 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:04:46,456 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:04:46,462 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:04:46,462 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:04:46,462 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:04:46,462 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:04:46,463 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:04:46,468 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:04:46,472 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:04:46,473 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:04:46,473 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:04:46,473 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,473 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:04:46,473 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,473 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,473 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,473 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:04:46,473 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,473 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:04:46,473 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:04:46,473 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:04:46,474 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:04:46,474 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:04:46,474 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:04:46,474 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:04:48,429 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:04:48,565 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:04:48,565 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:04:48,565 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:04:48,700 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:04:48,863 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:48,879 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:04:48,879 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:48,894 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:48,910 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:04:48,919 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:04:48,939 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:04:48,945 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:04:48,948 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:04:48,951 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:04:48,953 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:04:48,956 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:04:48,958 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:04:48,961 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:04:48,964 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:04:48,967 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:04:48,970 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:04:48,973 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:04:48,976 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:04:48,979 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:04:48,984 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:04:48,989 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:48,989 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:48,993 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:04:48,993 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:04:48,997 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:48,997 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:49,002 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:49,002 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:04:49,006 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:49,006 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:04:49,010 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:04:49,010 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:04:49,014 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:04:49,015 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:04:49,015 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:04:49,019 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:04:49,019 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:04:49,019 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:04:49,024 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:04:49,028 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:04:49,028 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:04:49,028 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:04:49,028 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:04:49,028 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:04:49,033 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:04:49,037 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:04:49,037 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:04:49,037 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:04:49,037 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,037 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:04:49,037 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,037 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,037 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,037 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:04:49,037 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,037 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:04:49,038 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,038 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:04:49,038 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:04:49,038 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:04:49,038 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:04:49,038 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:04:49,038 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:04:49,038 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:04:49,039 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:04:49,136 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:04:49,172 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:49,188 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:04:49,188 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:04:49,200 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:04:49,205 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:04:49,208 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:04:49,210 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:04:49,213 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:04:49,216 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:04:49,218 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:04:49,221 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:04:49,224 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:04:49,227 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:04:49,230 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:04:49,233 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:04:49,235 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:04:49,238 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:04:49,243 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:04:49,247 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:49,247 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:49,252 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:04:49,252 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:04:49,256 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:49,256 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:49,260 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:49,260 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:04:49,264 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:49,264 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:04:49,268 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:04:49,268 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:04:49,273 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:04:49,273 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:04:49,273 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:04:49,277 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:04:49,277 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:04:49,277 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:04:49,281 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:04:49,286 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:04:49,286 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:04:49,286 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:04:49,286 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:04:49,286 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:04:49,290 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:04:49,294 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:04:49,295 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:04:49,295 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:04:49,295 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,295 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:04:49,295 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,295 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,295 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,295 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:04:49,295 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,295 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:04:49,295 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:04:49,295 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:04:49,295 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:04:49,296 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:04:49,296 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:04:49,296 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:04:51,237 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:04:51,373 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:04:51,373 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:04:51,373 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:04:51,501 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:04:51,659 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:51,675 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:04:51,675 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:51,690 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:51,705 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:04:51,714 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:04:51,734 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:04:51,740 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:04:51,742 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:04:51,745 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:04:51,748 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:04:51,751 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:04:51,753 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:04:51,756 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:04:51,759 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:04:51,761 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:04:51,764 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:04:51,767 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:04:51,770 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:04:51,773 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:04:51,778 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:04:51,783 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:51,783 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:51,787 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:04:51,787 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:04:51,791 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:51,791 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:51,795 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:51,795 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:04:51,799 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:51,799 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:04:51,803 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:04:51,803 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:04:51,807 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:04:51,807 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:04:51,807 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:04:51,812 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:04:51,812 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:04:51,812 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:04:51,816 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:04:51,820 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:04:51,820 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:04:51,820 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:04:51,820 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:04:51,821 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:04:51,825 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:04:51,829 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:04:51,829 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:04:51,829 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:04:51,829 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:51,829 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:04:51,829 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:51,829 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:04:51,829 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:04:51,829 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:04:51,829 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:04:51,829 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:04:51,829 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:04:51,829 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:04:51,829 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:04:51,830 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:04:51,830 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:04:51,830 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:04:51,830 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:04:51,830 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:04:51,830 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:04:51,928 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:04:51,964 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:04:51,979 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:04:51,980 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:04:51,992 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:04:51,996 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:04:51,999 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:04:52,002 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:04:52,004 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:04:52,007 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:04:52,010 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:04:52,012 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:04:52,015 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:04:52,018 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:04:52,021 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:04:52,023 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:04:52,026 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:04:52,029 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:04:52,035 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:04:52,039 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:52,039 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:52,043 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:04:52,043 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:04:52,047 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:52,047 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:04:52,051 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:52,051 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:04:52,055 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:04:52,055 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:04:52,059 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:04:52,059 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:04:52,064 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:04:52,064 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:04:52,064 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:04:52,068 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:04:52,068 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:04:52,068 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:04:52,073 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:04:52,077 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:04:52,077 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:04:52,077 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:04:52,077 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:04:52,077 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:04:52,082 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:04:52,086 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:04:52,086 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:04:52,086 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:04:52,086 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:52,086 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:04:52,086 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:04:52,086 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:04:52,086 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:04:52,086 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:04:52,086 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:04:52,086 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:04:52,087 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:04:52,087 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:04:52,087 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:04:52,087 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:04:52,087 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:04:52,087 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:07,896 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:08,058 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:05:08,058 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:05:08,058 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:05:08,197 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:05:08,356 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:08,373 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:08,373 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:08,388 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:08,403 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:08,412 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:08,431 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:08,437 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:08,439 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:08,442 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:08,445 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:08,448 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:08,451 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:08,453 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:08,456 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:08,459 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:08,462 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:08,465 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:08,467 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:08,470 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:08,476 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:08,503 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:08,504 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:08,508 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:08,508 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:08,512 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:08,512 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:08,517 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:08,517 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:08,521 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:08,521 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:08,525 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:08,525 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:08,529 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:08,529 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:08,529 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:08,533 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:08,533 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:08,533 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:08,537 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:08,542 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:08,542 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:08,542 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:08,543 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:08,543 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:08,547 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:08,551 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:08,551 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:08,552 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:08,552 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,552 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:08,552 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,552 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,552 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,552 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:08,552 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,552 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:08,552 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,552 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:08,552 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:08,552 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:08,552 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:08,552 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:08,552 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:05:08,552 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:05:08,553 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:08,668 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:05:08,714 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:08,734 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:08,734 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:08,746 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:08,750 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:08,753 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:08,756 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:08,759 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:08,761 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:08,764 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:08,766 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:08,769 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:08,772 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:08,775 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:08,778 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:08,780 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:08,784 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:08,789 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:08,793 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:08,793 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:08,798 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:08,798 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:08,804 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:08,804 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:08,809 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:08,809 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:08,815 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:08,815 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:08,820 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:08,821 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:08,827 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:08,827 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:08,827 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:08,832 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:08,833 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:08,833 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:08,838 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:08,843 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:08,843 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:08,843 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:08,843 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:08,843 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:08,848 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:08,854 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:08,854 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:08,854 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:08,854 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,855 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:08,855 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,855 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,855 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,855 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:08,855 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,855 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:08,855 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:08,855 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:08,855 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:08,855 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:08,855 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:08,855 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:10,873 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:11,010 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:05:11,010 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:05:11,011 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:05:11,141 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:05:11,302 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:11,318 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:11,318 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:11,333 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:11,349 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:11,358 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:11,378 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:11,384 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:11,387 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:11,390 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:11,393 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:11,396 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:11,398 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:11,401 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:11,404 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:11,407 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:11,410 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:11,413 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:11,415 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:11,418 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:11,424 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:11,428 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:11,428 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:11,432 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:11,432 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:11,436 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:11,436 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:11,441 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:11,441 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:11,445 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:11,445 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:11,449 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:11,449 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:11,453 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:11,453 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:11,453 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:11,457 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:11,457 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:11,457 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:11,461 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:11,466 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:11,466 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:11,466 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:11,466 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:11,466 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:11,470 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:11,474 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:11,474 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:11,474 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:11,474 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,474 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:11,474 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,474 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,474 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,474 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:11,474 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,474 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:11,474 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,475 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:11,475 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:11,475 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:11,475 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:11,475 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:11,475 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:05:11,475 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:05:11,475 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:11,573 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:05:11,610 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:11,627 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:11,627 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:11,640 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:11,644 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:11,647 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:11,650 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:11,652 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:11,655 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:11,658 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:11,661 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:11,664 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:11,666 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:11,669 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:11,672 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:11,675 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:11,678 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:11,683 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:11,687 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:11,687 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:11,692 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:11,692 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:11,696 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:11,696 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:11,700 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:11,700 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:11,704 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:11,704 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:11,708 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:11,709 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:11,713 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:11,713 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:11,713 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:11,717 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:11,717 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:11,717 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:11,721 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:11,726 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:11,726 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:11,726 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:11,726 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:11,726 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:11,730 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:11,734 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:11,734 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:11,734 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:11,734 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,734 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:11,734 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,734 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,734 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,734 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:11,734 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,734 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:11,734 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:11,734 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:11,734 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:11,734 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:11,735 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:11,735 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:13,719 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:13,855 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:05:13,855 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:05:13,855 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:05:13,987 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:05:14,149 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:14,165 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:14,165 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:14,180 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:14,195 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:14,205 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:14,224 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:14,230 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:14,232 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:14,235 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:14,238 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:14,240 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:14,242 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:14,245 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:14,248 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:14,251 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:14,253 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:14,256 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:14,259 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:14,262 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:14,267 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:14,271 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:14,271 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:14,275 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:14,275 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:14,279 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:14,279 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:14,283 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:14,283 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:14,288 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:14,288 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:14,292 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:14,292 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:14,296 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:14,296 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:14,296 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:14,301 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:14,301 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:14,301 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:14,305 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:14,310 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:14,310 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:14,310 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:14,310 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:14,310 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:14,314 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:14,319 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:14,319 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:14,319 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:14,319 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,319 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:14,319 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,319 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,319 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,319 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:14,319 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,319 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:14,320 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,320 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:14,320 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:14,320 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:14,320 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:14,320 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:14,320 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:05:14,320 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:05:14,320 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:14,442 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:05:14,481 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:14,497 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:14,497 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:14,511 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:14,515 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:14,518 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:14,520 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:14,523 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:14,525 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:14,528 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:14,530 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:14,533 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:14,536 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:14,538 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:14,541 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:14,544 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:14,547 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:14,552 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:14,556 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:14,556 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:14,561 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:14,561 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:14,565 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:14,565 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:14,569 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:14,570 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:14,574 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:14,574 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:14,578 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:14,578 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:14,582 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:14,582 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:14,582 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:14,586 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:14,586 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:14,586 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:14,590 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:14,595 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:14,596 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:14,596 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:14,596 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:14,596 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:14,600 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:14,604 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:14,604 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:14,604 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:14,604 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,604 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:14,604 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,604 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,604 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,604 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:14,604 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,604 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:14,605 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:14,605 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:14,605 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:14,605 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:14,605 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:14,605 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:16,584 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:16,719 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:05:16,720 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:05:16,720 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:05:16,848 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:05:17,017 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:17,032 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:17,032 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:17,047 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:17,062 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:17,071 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:17,090 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:17,096 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:17,099 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:17,101 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:17,104 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:17,106 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:17,109 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:17,112 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:17,115 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:17,117 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:17,120 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:17,123 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:17,125 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:17,128 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:17,133 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:17,137 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:17,138 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:17,142 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:17,142 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:17,146 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:17,146 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:17,150 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:17,150 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:17,154 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:17,154 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:17,158 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:17,158 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:17,162 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:17,162 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:17,162 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:17,166 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:17,166 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:17,166 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:17,170 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:17,175 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:17,175 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:17,175 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:17,175 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:17,175 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:17,179 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:17,183 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:17,183 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:17,183 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:17,183 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,183 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:17,183 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,183 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,183 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,183 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:17,183 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,183 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:17,183 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,183 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:17,183 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:17,183 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:17,183 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:17,184 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:17,184 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:05:17,184 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:05:17,184 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:17,285 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:05:17,322 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:17,337 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:17,338 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:17,350 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:17,355 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:17,357 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:17,360 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:17,363 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:17,365 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:17,368 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:17,371 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:17,374 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:17,376 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:17,379 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:17,382 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:17,385 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:17,388 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:17,393 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:17,397 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:17,397 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:17,402 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:17,402 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:17,406 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:17,406 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:17,410 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:17,410 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:17,414 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:17,414 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:17,418 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:17,418 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:17,422 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:17,422 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:17,423 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:17,427 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:17,427 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:17,427 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:17,431 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:17,435 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:17,435 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:17,435 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:17,436 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:17,436 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:17,440 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:17,444 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:17,444 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:17,444 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:17,444 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,444 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:17,444 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,444 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,444 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,444 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:17,444 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,444 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:17,444 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:17,444 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:17,444 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:17,444 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:17,444 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:17,444 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:19,425 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:19,563 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:05:19,563 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:05:19,563 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:05:19,692 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:05:19,855 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:19,871 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:19,871 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:19,886 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:19,901 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:19,909 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:19,929 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:19,935 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:19,938 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:19,941 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:19,943 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:19,946 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:19,948 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:19,951 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:19,954 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:19,957 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:19,960 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:19,963 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:19,965 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:19,968 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:19,974 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:19,978 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:19,978 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:19,982 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:19,982 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:19,987 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:19,987 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:19,991 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:19,992 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:19,996 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:19,996 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:20,000 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:20,000 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:20,004 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:20,004 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:20,005 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:20,009 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:20,009 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:20,009 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:20,013 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:20,017 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:20,017 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:20,017 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:20,018 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:20,018 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:20,022 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:20,026 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:20,026 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:20,026 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:20,027 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,027 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:20,027 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,027 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,027 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,027 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:20,027 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,027 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:20,027 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,027 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:20,027 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:20,027 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:20,027 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:20,027 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:20,027 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:05:20,027 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:05:20,027 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:20,130 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:05:20,167 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:20,183 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:20,183 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:20,196 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:20,200 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:20,202 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:20,205 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:20,207 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:20,210 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:20,213 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:20,215 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:20,218 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:20,221 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:20,223 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:20,226 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:20,229 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:20,232 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:20,237 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:20,241 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:20,241 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:20,245 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:20,245 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:20,249 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:20,249 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:20,253 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:20,253 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:20,257 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:20,257 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:20,261 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:20,261 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:20,265 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:20,265 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:20,265 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:20,269 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:20,269 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:20,270 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:20,273 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:20,278 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:20,278 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:20,278 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:20,278 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:20,278 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:20,282 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:20,286 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:20,286 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:20,286 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:20,286 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,286 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:20,286 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,286 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,286 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,286 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:20,286 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,286 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:20,286 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:20,286 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:20,286 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:20,287 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:20,287 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:20,287 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:22,217 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:22,351 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:05:22,351 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:05:22,351 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:05:22,477 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:05:22,638 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:22,653 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:22,653 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:22,668 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:22,684 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:22,692 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:22,713 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:22,719 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:22,722 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:22,724 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:22,727 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:22,729 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:22,732 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:22,735 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:22,738 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:22,740 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:22,743 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:22,746 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:22,748 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:22,751 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:22,756 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:22,760 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:22,760 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:22,764 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:22,764 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:22,769 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:22,769 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:22,773 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:22,773 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:22,778 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:22,778 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:22,782 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:22,782 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:22,786 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:22,786 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:22,786 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:22,791 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:22,791 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:22,791 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:22,795 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:22,799 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:22,799 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:22,799 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:22,799 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:22,800 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:22,804 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:22,808 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:22,808 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:22,808 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:22,808 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:22,808 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:22,808 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:22,808 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:22,808 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:22,808 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:22,808 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:22,809 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:22,809 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:22,809 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:22,809 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:22,809 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:22,809 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:22,809 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:05:22,809 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:05:22,809 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:05:22,810 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:05:22,908 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:05:22,944 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:05:22,960 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:05:22,960 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:05:22,972 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:05:22,976 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:05:22,979 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:05:22,982 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:05:22,984 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:05:22,987 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:05:22,989 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:05:22,992 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:05:22,995 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:05:22,997 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:05:23,000 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:05:23,003 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:05:23,006 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:05:23,009 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:05:23,014 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:05:23,018 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:23,018 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:23,022 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:05:23,022 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:05:23,026 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:23,026 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:05:23,030 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:23,030 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:05:23,034 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:05:23,034 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:05:23,038 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:05:23,038 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:05:23,042 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:05:23,042 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:05:23,042 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:05:23,046 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:05:23,046 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:05:23,046 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:05:23,050 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:05:23,054 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:05:23,054 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:05:23,055 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:05:23,055 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:05:23,055 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:05:23,059 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:05:23,063 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:05:23,063 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:05:23,063 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:05:23,063 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:23,063 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:05:23,063 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:05:23,063 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:05:23,063 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:05:23,063 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:05:23,063 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:05:23,063 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:05:23,064 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:05:23,064 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:05:23,064 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:05:23,064 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:05:23,064 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:05:23,064 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:07:07,515 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:07:07,648 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:07:07,648 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:07:07,648 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:07:07,775 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:07:07,937 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:07:07,952 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:07:07,952 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:07:07,967 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:07:07,982 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:07:07,991 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:07:08,011 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:07:08,016 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:07:08,019 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:07:08,022 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:07:08,025 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:07:08,027 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:07:08,030 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:07:08,032 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:07:08,035 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:07:08,038 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:07:08,041 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:07:08,044 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:07:08,046 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:07:08,049 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:07:08,054 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:07:08,059 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:07:08,059 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:07:08,063 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:07:08,063 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:07:08,067 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:07:08,067 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:07:08,071 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:07:08,071 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:07:08,075 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:07:08,075 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:07:08,079 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:07:08,079 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:07:08,084 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:07:08,084 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:07:08,084 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:07:08,088 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:07:08,088 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:07:08,088 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:07:08,092 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:07:08,097 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:07:08,097 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:07:08,097 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:07:08,097 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:07:08,097 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:07:08,101 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:07:08,105 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:07:08,105 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:07:08,105 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:07:08,105 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,105 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:07:08,105 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,105 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,105 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,105 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:07:08,105 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,105 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:07:08,105 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,105 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:07:08,105 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:07:08,105 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:07:08,106 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:07:08,106 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:07:08,106 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:07:08,106 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:07:08,106 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:07:08,258 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:07:08,295 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:07:08,310 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:07:08,310 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:07:08,323 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:07:08,327 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:07:08,330 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:07:08,333 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:07:08,336 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:07:08,338 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:07:08,341 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:07:08,344 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:07:08,347 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:07:08,350 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:07:08,353 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:07:08,356 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:07:08,359 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:07:08,363 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:07:08,369 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:07:08,373 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:07:08,373 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:07:08,377 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:07:08,377 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:07:08,381 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:07:08,381 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:07:08,385 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:07:08,385 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:07:08,389 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:07:08,389 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:07:08,393 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:07:08,394 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:07:08,398 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:07:08,398 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:07:08,398 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:07:08,402 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:07:08,402 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:07:08,402 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:07:08,407 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:07:08,411 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:07:08,411 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:07:08,411 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:07:08,411 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:07:08,411 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:07:08,415 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:07:08,419 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:07:08,419 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:07:08,419 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:07:08,419 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,419 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:07:08,419 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,419 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,419 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,419 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:07:08,419 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,419 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:07:08,420 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:07:08,420 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:07:08,420 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:07:08,420 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:07:08,420 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:07:08,420 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:09:20,289 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:09:20,429 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:09:20,429 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:09:20,430 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:09:20,562 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:09:20,728 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:20,744 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:09:20,744 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:20,759 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:20,775 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:09:20,783 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:09:20,804 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:09:20,810 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:09:20,813 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:09:20,815 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:09:20,818 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:09:20,821 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:09:20,823 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:09:20,826 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:09:20,829 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:09:20,832 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:09:20,835 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:09:20,838 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:09:20,840 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:09:20,843 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:09:20,849 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:09:20,853 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:20,853 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:20,857 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:09:20,857 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:09:20,862 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:20,862 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:20,866 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:20,866 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:09:20,870 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:20,870 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:09:20,874 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:09:20,874 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:09:20,879 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:09:20,879 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:09:20,879 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:09:20,883 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:09:20,883 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:09:20,883 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:09:20,888 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:09:20,892 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:09:20,893 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:09:20,893 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:09:20,893 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:09:20,893 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:09:20,897 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:09:20,901 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:09:20,901 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:09:20,901 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:09:20,901 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:20,901 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:09:20,901 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:20,902 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:09:20,902 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:09:20,902 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:09:20,902 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:09:20,902 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:09:20,902 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:09:20,902 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:09:20,902 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:09:20,902 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:09:20,902 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:09:20,902 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:09:20,903 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:09:20,903 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:09:20,903 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:09:21,003 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:09:21,041 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:21,058 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:09:21,058 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:09:21,116 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:09:21,121 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:09:21,124 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:09:21,126 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:09:21,129 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:09:21,131 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:09:21,134 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:09:21,137 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:09:21,140 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:09:21,142 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:09:21,145 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:09:21,148 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:09:21,150 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:09:21,153 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:09:21,159 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:09:21,164 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:21,164 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:21,168 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:09:21,169 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:09:21,173 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:21,173 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:21,177 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:21,177 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:09:21,181 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:21,181 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:09:21,186 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:09:21,186 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:09:21,190 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:09:21,190 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:09:21,190 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:09:21,194 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:09:21,195 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:09:21,195 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:09:21,199 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:09:21,203 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:09:21,203 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:09:21,203 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:09:21,204 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:09:21,204 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:09:21,208 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:09:21,212 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:09:21,212 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:09:21,212 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:09:21,212 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:21,212 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:09:21,212 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:21,212 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:09:21,212 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:09:21,213 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:09:21,213 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:09:21,213 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:09:21,213 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:09:21,213 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:09:21,213 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:09:21,213 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:09:21,213 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:09:21,213 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:09:23,211 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:09:23,350 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:09:23,350 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:09:23,350 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:09:23,481 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:09:23,645 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:23,661 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:09:23,661 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:23,676 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:23,692 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:09:23,701 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:09:23,721 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:09:23,727 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:09:23,729 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:09:23,732 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:09:23,735 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:09:23,738 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:09:23,740 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:09:23,743 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:09:23,746 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:09:23,749 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:09:23,752 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:09:23,755 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:09:23,758 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:09:23,760 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:09:23,766 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:09:23,770 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:23,770 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:23,774 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:09:23,774 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:09:23,779 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:23,779 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:23,783 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:23,783 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:09:23,787 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:23,787 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:09:23,791 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:09:23,791 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:09:23,796 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:09:23,796 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:09:23,796 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:09:23,800 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:09:23,800 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:09:23,800 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:09:23,805 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:09:23,809 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:09:23,809 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:09:23,809 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:09:23,809 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:09:23,809 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:09:23,813 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:09:23,817 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:09:23,817 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:09:23,817 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:09:23,818 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:23,818 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:09:23,818 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:23,818 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:09:23,818 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:09:23,818 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:09:23,818 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:09:23,818 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:09:23,818 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:09:23,818 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:09:23,818 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:09:23,818 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:09:23,818 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:09:23,818 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:09:23,818 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:09:23,818 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:09:23,819 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:09:23,918 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:09:23,956 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:23,971 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:09:23,971 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:09:23,983 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:09:23,988 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:09:23,991 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:09:23,993 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:09:23,996 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:09:23,998 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:09:24,001 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:09:24,004 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:09:24,007 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:09:24,009 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:09:24,012 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:09:24,015 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:09:24,017 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:09:24,020 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:09:24,025 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:09:24,029 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:24,029 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:24,033 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:09:24,033 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:09:24,037 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:24,037 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:24,041 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:24,041 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:09:24,045 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:24,045 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:09:24,049 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:09:24,049 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:09:24,054 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:09:24,054 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:09:24,054 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:09:24,058 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:09:24,058 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:09:24,058 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:09:24,062 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:09:24,070 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:09:24,070 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:09:24,070 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:09:24,070 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:09:24,070 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:09:24,076 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:09:24,081 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:09:24,081 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:09:24,081 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:09:24,081 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:24,081 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:09:24,081 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:24,081 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:09:24,081 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:09:24,082 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:09:24,082 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:09:24,082 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:09:24,082 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:09:24,082 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:09:24,082 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:09:24,082 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:09:24,082 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:09:24,082 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:09:48,607 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:09:48,769 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:09:48,769 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:09:48,769 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:09:48,902 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:09:49,063 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:49,079 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:09:49,079 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:49,094 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:49,110 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:09:49,118 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:09:49,138 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:09:49,144 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:09:49,146 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:09:49,149 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:09:49,152 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:09:49,154 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:09:49,157 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:09:49,159 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:09:49,162 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:09:49,165 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:09:49,168 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:09:49,171 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:09:49,173 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:09:49,176 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:09:49,181 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:09:49,185 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:49,185 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:49,190 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:09:49,190 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:09:49,194 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:49,194 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:49,198 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:49,199 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:09:49,203 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:49,203 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:09:49,207 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:09:49,207 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:09:49,211 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:09:49,211 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:09:49,212 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:09:49,216 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:09:49,216 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:09:49,216 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:09:49,221 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:09:49,226 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:09:49,226 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:09:49,226 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:09:49,226 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:09:49,226 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:09:49,231 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:09:49,235 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:09:49,235 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:09:49,235 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:09:49,235 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,235 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:09:49,235 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,235 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,235 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,235 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:09:49,235 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,236 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:09:49,236 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,236 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:09:49,236 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:09:49,236 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:09:49,236 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:09:49,236 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:09:49,236 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:09:49,236 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:09:49,237 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:09:49,343 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:09:49,381 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:09:49,396 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:09:49,397 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:09:49,409 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:09:49,414 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:09:49,416 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:09:49,419 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:09:49,421 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:09:49,424 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:09:49,426 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:09:49,429 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:09:49,432 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:09:49,434 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:09:49,437 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:09:49,440 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:09:49,442 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:09:49,445 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:09:49,450 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:09:49,454 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:49,454 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:49,458 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:09:49,458 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:09:49,462 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:49,462 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:09:49,466 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:49,466 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:09:49,470 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:09:49,470 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:09:49,474 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:09:49,474 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:09:49,478 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:09:49,478 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:09:49,478 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:09:49,482 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:09:49,482 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:09:49,482 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:09:49,486 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:09:49,490 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:09:49,491 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:09:49,491 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:09:49,491 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:09:49,491 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:09:49,495 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:09:49,499 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:09:49,499 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:09:49,499 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:09:49,499 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,499 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:09:49,499 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,499 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,499 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,499 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:09:49,499 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,499 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:09:49,499 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:09:49,499 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:09:49,499 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:09:49,499 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:09:49,499 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:09:49,499 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:11:11,650 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:11:11,788 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:11:11,788 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:11:11,788 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:11:11,922 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:11:12,081 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:11:12,097 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:11:12,097 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:11:12,111 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:11:12,126 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:11:12,135 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:11:12,155 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:11:12,161 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:11:12,164 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:11:12,166 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:11:12,169 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:11:12,172 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:11:12,174 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:11:12,177 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:11:12,180 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:11:12,182 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:11:12,185 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:11:12,188 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:11:12,190 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:11:12,193 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:11:12,198 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:11:12,203 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:11:12,203 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:11:12,207 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:11:12,207 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:11:12,211 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:11:12,211 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:11:12,215 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:11:12,215 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:11:12,219 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:11:12,219 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:11:12,223 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:11:12,223 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:11:12,227 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:11:12,227 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:11:12,228 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:11:12,232 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:11:12,232 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:11:12,232 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:11:12,236 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:11:12,240 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:11:12,240 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:11:12,240 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:11:12,240 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:11:12,240 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:11:12,244 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:11:12,249 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:11:12,249 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:11:12,249 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:11:12,249 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,249 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:11:12,249 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,249 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,249 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,249 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:11:12,249 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,249 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:11:12,249 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,249 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:11:12,249 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:11:12,250 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:11:12,250 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:11:12,250 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:11:12,250 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:11:12,250 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:11:12,250 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:11:12,348 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:11:12,385 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:11:12,400 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:11:12,401 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:11:12,413 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:11:12,417 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:11:12,420 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:11:12,422 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:11:12,425 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:11:12,427 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:11:12,430 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:11:12,433 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:11:12,436 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:11:12,439 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:11:12,441 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:11:12,444 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:11:12,447 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:11:12,450 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:11:12,455 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:11:12,459 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:11:12,459 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:11:12,463 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:11:12,463 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:11:12,467 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:11:12,467 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:11:12,471 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:11:12,471 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:11:12,475 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:11:12,475 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:11:12,479 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:11:12,479 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:11:12,483 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:11:12,483 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:11:12,483 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:11:12,488 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:11:12,488 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:11:12,488 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:11:12,492 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:11:12,496 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:11:12,496 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:11:12,497 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:11:12,497 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:11:12,497 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:11:12,501 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:11:12,505 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:11:12,505 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:11:12,505 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:11:12,505 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,505 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:11:12,505 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,505 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,505 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,505 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:11:12,505 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,505 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:11:12,505 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:11:12,505 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:11:12,505 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:11:12,505 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:11:12,505 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:11:12,505 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:24:38,840 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:24:38,979 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:24:38,979 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:24:38,979 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:24:39,110 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:24:39,273 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:24:39,289 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:24:39,289 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:24:39,305 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:24:39,321 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:24:39,330 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:24:39,350 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:24:39,356 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:24:39,358 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:24:39,361 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:24:39,364 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:24:39,366 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:24:39,369 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:24:39,371 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:24:39,374 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:24:39,377 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:24:39,380 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:24:39,383 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:24:39,385 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:24:39,388 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:24:39,393 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:24:39,397 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:24:39,397 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:24:39,401 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:24:39,401 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:24:39,405 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:24:39,405 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:24:39,409 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:24:39,410 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:24:39,414 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:24:39,414 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:24:39,418 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:24:39,418 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:24:39,422 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:24:39,422 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:24:39,422 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:24:39,426 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:24:39,426 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:24:39,426 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:24:39,431 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:24:39,435 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:24:39,435 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:24:39,435 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:24:39,435 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:24:39,435 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:24:39,439 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:24:39,443 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:24:39,443 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:24:39,443 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:24:39,444 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,444 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:24:39,444 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,444 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,444 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,444 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:24:39,444 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,444 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:24:39,444 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,444 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:24:39,444 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:24:39,444 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:24:39,444 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:24:39,444 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:24:39,444 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:24:39,444 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:24:39,445 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:24:39,544 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:24:39,582 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:24:39,597 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:24:39,598 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:24:39,611 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:24:39,615 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:24:39,618 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:24:39,620 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:24:39,623 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:24:39,625 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:24:39,628 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:24:39,630 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:24:39,633 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:24:39,636 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:24:39,638 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:24:39,641 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:24:39,644 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:24:39,646 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:24:39,653 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:24:39,657 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:24:39,657 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:24:39,661 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:24:39,661 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:24:39,665 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:24:39,665 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:24:39,669 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:24:39,669 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:24:39,673 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:24:39,673 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:24:39,677 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:24:39,677 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:24:39,681 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:24:39,681 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:24:39,681 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:24:39,685 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:24:39,685 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:24:39,685 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:24:39,689 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:24:39,693 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:24:39,693 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:24:39,693 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:24:39,693 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:24:39,693 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:24:39,697 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:24:39,701 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:24:39,701 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:24:39,701 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:24:39,701 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,701 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:24:39,701 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,701 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,701 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,701 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:24:39,701 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,701 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:24:39,701 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:24:39,701 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:24:39,701 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:24:39,701 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:24:39,701 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:24:39,701 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:25:01,211 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:25:01,348 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:25:01,348 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:25:01,348 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:25:01,482 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:25:01,642 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:25:01,658 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:25:01,658 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:25:01,673 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:25:01,688 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:25:01,697 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:25:01,717 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:25:01,722 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:25:01,726 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:25:01,728 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:25:01,731 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:25:01,733 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:25:01,736 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:25:01,738 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:25:01,741 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:25:01,744 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:25:01,747 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:25:01,750 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:25:01,752 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:25:01,755 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:25:01,761 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:25:01,765 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:01,765 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:25:01,769 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:25:01,769 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:25:01,773 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:01,773 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:25:01,777 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:01,777 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:25:01,781 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:01,782 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:25:01,786 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:25:01,786 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:25:01,790 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:25:01,790 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:25:01,790 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:25:01,794 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:25:01,794 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:25:01,794 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:25:01,799 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:25:01,803 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:25:01,803 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:25:01,803 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:25:01,803 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:25:01,803 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:25:01,808 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:25:01,812 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:25:01,812 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:25:01,812 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:25:01,812 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:25:01,812 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:25:01,812 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:25:01,812 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:25:01,812 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:25:01,812 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:25:01,812 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:25:01,813 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:25:01,813 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:25:01,813 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:25:01,813 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:25:01,813 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:25:01,813 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:25:01,813 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:25:01,813 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:25:01,813 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:25:01,813 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:25:01,910 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:25:01,946 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:25:01,961 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:25:01,962 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:25:01,974 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:25:01,979 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:25:01,981 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:25:01,984 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:25:01,986 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:25:01,989 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:25:01,992 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:25:01,995 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:25:01,997 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:25:02,000 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:25:02,003 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:25:02,006 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:25:02,009 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:25:02,012 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:25:02,017 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:25:02,021 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:02,021 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:25:02,026 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:25:02,026 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:25:02,030 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:02,030 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:25:02,034 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:02,034 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:25:02,038 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:02,038 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:25:02,042 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:25:02,042 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:25:02,046 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:25:02,046 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:25:02,046 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:25:02,050 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:25:02,051 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:25:02,051 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:25:02,054 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:25:02,059 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:25:02,059 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:25:02,059 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:25:02,059 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:25:02,059 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:25:02,063 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:25:02,067 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:25:02,067 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:25:02,067 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:25:02,067 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:25:02,067 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:25:02,067 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:25:02,067 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:25:02,068 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:25:02,068 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:25:02,068 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:25:02,068 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:25:02,068 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:25:02,068 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:25:02,068 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:25:02,068 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:25:02,068 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:25:02,068 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:25:17,576 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:25:17,710 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:25:17,710 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:25:17,710 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:25:17,840 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:25:18,002 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:25:18,017 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:25:18,018 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:25:18,033 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:25:18,048 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:25:18,057 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:25:18,471 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:25:18,773 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:25:18,776 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:25:18,779 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:25:18,782 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:25:18,785 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:25:18,787 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:25:18,790 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:25:18,793 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:25:18,796 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:25:18,799 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:25:18,802 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:25:18,805 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:25:18,808 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:25:18,903 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:25:18,908 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:18,908 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:25:18,912 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:25:18,912 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:25:18,916 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:18,916 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:25:18,920 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:18,920 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:25:18,924 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:18,924 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:25:18,928 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:25:18,928 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:25:18,932 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:25:18,932 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:25:18,932 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:25:18,936 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:25:18,936 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:25:18,936 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:25:18,941 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:25:18,945 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:25:18,945 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:25:18,945 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:25:18,945 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:25:18,946 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:25:18,950 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:25:18,954 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:25:18,954 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:25:18,954 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:25:18,954 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:25:18,954 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:25:18,955 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:25:18,955 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:25:18,955 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:25:18,955 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:25:18,955 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:25:18,955 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:25:18,955 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:25:18,955 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:25:18,955 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:25:18,955 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:25:18,955 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:25:18,955 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:25:18,955 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:25:18,955 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:25:18,956 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:25:19,055 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:25:19,092 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:25:19,108 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:25:19,108 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:25:19,120 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:25:19,124 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:25:19,127 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:25:19,130 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:25:19,132 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:25:19,135 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:25:19,138 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:25:19,140 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:25:19,143 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:25:19,147 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:25:19,149 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:25:19,152 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:25:19,155 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:25:19,158 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:25:19,163 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:25:19,167 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:19,167 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:25:19,171 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:25:19,171 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:25:19,175 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:19,175 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:25:19,179 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:19,179 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:25:19,183 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:25:19,183 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:25:19,187 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:25:19,187 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:25:19,191 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:25:19,192 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:25:19,192 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:25:19,196 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:25:19,196 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:25:19,196 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:25:19,200 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:25:19,204 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:25:19,204 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:25:19,204 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:25:19,204 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:25:19,204 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:25:19,209 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:25:19,213 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:25:19,213 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:25:19,213 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:25:19,213 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:25:19,213 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:25:19,213 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:25:19,213 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:25:19,213 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:25:19,213 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:25:19,213 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:25:19,213 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:25:19,213 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:25:19,214 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:25:19,214 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:25:19,214 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:25:19,214 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:25:19,214 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:29:33,793 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:29:33,929 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:29:33,929 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:29:33,929 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:29:34,058 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:29:34,218 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:29:34,234 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:29:34,234 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:29:34,249 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:29:34,264 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:29:34,273 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:29:34,294 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:29:34,299 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:29:34,302 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:29:34,305 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:29:34,308 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:29:34,311 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:29:34,313 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:29:34,316 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:29:34,319 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:29:34,321 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:29:34,325 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:29:34,328 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:29:34,330 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:29:34,333 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:29:34,339 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:29:34,343 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:34,343 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:29:34,348 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:29:34,348 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:29:34,354 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:34,354 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:29:34,359 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:34,359 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:29:34,363 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:34,364 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:29:34,368 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:29:34,368 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:29:34,372 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:29:34,372 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:29:34,372 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:29:34,376 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:29:34,377 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:29:34,377 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:29:34,381 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:29:34,385 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:29:34,385 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:29:34,385 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:29:34,385 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:29:34,385 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:29:34,389 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:29:34,393 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:29:34,393 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:29:34,393 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:29:34,393 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,393 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:29:34,393 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,393 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,393 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,393 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:29:34,393 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,394 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:29:34,394 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,394 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:29:34,394 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:29:34,394 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:29:34,394 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:29:34,394 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:29:34,394 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:29:34,394 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:29:34,395 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:29:34,492 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:29:34,529 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:29:34,545 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:29:34,545 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:29:34,582 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:29:34,586 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:29:34,589 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:29:34,591 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:29:34,594 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:29:34,596 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:29:34,599 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:29:34,602 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:29:34,605 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:29:34,607 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:29:34,610 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:29:34,613 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:29:34,615 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:29:34,618 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:29:34,623 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:29:34,627 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:34,627 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:29:34,631 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:29:34,631 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:29:34,635 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:34,635 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:29:34,639 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:34,639 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:29:34,643 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:34,643 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:29:34,647 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:29:34,647 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:29:34,651 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:29:34,651 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:29:34,651 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:29:34,655 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:29:34,655 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:29:34,655 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:29:34,659 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:29:34,663 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:29:34,663 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:29:34,663 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:29:34,663 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:29:34,663 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:29:34,667 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:29:34,671 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:29:34,671 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:29:34,671 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:29:34,671 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,671 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:29:34,671 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,671 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,671 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,671 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:29:34,671 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,671 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:29:34,672 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:29:34,672 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:29:34,672 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:29:34,672 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:29:34,672 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:29:34,672 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:29:36,649 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:29:36,789 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:29:36,789 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:29:36,789 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:29:36,920 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:29:37,085 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:29:37,101 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:29:37,101 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:29:37,116 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:29:37,131 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:29:37,140 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:29:37,162 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:29:37,168 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:29:37,171 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:29:37,174 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:29:37,177 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:29:37,179 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:29:37,182 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:29:37,185 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:29:37,188 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:29:37,191 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:29:37,194 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:29:37,197 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:29:37,200 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:29:37,203 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:29:37,208 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:29:37,213 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:37,213 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:29:37,217 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:29:37,217 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:29:37,221 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:37,221 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:29:37,226 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:37,226 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:29:37,230 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:37,230 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:29:37,234 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:29:37,234 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:29:37,238 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:29:37,238 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:29:37,238 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:29:37,243 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:29:37,243 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:29:37,243 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:29:37,247 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:29:37,251 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:29:37,251 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:29:37,251 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:29:37,251 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:29:37,251 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:29:37,255 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:29:37,259 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:29:37,259 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:29:37,259 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:29:37,259 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,259 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:29:37,259 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,259 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,259 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,259 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:29:37,259 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,259 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:29:37,259 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,260 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:29:37,260 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:29:37,260 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:29:37,260 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:29:37,260 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:29:37,260 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:29:37,260 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:29:37,260 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:29:37,361 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:29:37,399 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:29:37,415 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:29:37,415 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:29:37,427 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:29:37,432 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:29:37,435 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:29:37,438 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:29:37,440 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:29:37,443 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:29:37,445 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:29:37,448 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:29:37,451 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:29:37,455 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:29:37,458 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:29:37,462 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:29:37,464 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:29:37,467 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:29:37,472 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:29:37,477 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:37,477 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:29:37,481 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:29:37,481 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:29:37,485 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:37,485 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:29:37,489 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:37,489 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:29:37,493 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:29:37,494 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:29:37,497 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:29:37,498 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:29:37,502 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:29:37,502 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:29:37,502 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:29:37,506 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:29:37,506 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:29:37,506 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:29:37,510 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:29:37,514 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:29:37,514 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:29:37,514 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:29:37,515 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:29:37,515 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:29:37,519 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:29:37,523 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:29:37,523 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:29:37,523 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:29:37,523 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,523 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:29:37,523 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,523 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,523 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,523 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:29:37,523 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,523 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:29:37,523 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:29:37,523 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:29:37,523 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:29:37,523 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:29:37,523 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:29:37,523 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:42:31,638 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:42:32,066 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:42:32,066 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:42:32,066 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:42:32,544 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:42:32,965 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:42:32,987 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:42:32,987 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:42:33,003 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:42:33,018 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:42:33,621 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:42:34,473 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:42:34,479 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:42:34,482 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:42:34,485 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:42:34,488 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:42:34,491 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:42:34,493 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:42:34,496 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:42:34,499 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:42:34,502 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:42:34,504 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:42:34,508 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:42:34,510 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:42:34,513 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:42:34,519 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:42:34,523 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:34,523 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:42:34,527 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:42:34,527 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:42:34,531 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:34,531 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:42:34,535 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:34,535 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:42:34,539 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:34,539 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:42:34,543 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:42:34,543 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:42:34,547 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:42:34,547 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:42:34,547 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:42:34,551 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:42:34,552 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:42:34,552 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:42:34,556 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:42:34,560 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:42:34,560 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:42:34,560 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:42:34,561 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:42:34,561 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:42:34,565 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:42:34,569 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:42:34,569 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:42:34,569 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:42:34,569 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:42:34,569 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:42:34,569 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:42:34,570 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:42:34,570 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:42:34,570 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:42:34,570 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:42:34,570 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:42:34,570 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:42:34,570 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:42:34,570 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:42:34,570 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:42:34,570 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:42:34,570 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:42:34,570 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:42:34,570 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:42:34,571 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:42:35,212 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:42:35,266 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:42:35,281 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:42:35,282 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:42:35,295 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:42:35,300 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:42:35,303 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:42:35,306 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:42:35,309 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:42:35,311 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:42:35,314 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:42:35,317 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:42:35,320 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:42:35,323 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:42:35,326 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:42:35,329 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:42:35,331 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:42:35,334 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:42:35,339 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:42:35,343 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:35,343 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:42:35,347 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:42:35,347 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:42:35,351 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:35,351 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:42:35,355 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:35,355 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:42:35,359 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:35,359 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:42:35,363 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:42:35,363 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:42:35,367 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:42:35,367 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:42:35,367 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:42:35,371 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:42:35,371 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:42:35,371 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:42:35,375 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:42:35,379 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:42:35,379 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:42:35,380 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:42:35,380 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:42:35,380 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:42:35,384 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:42:35,388 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:42:35,388 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:42:35,388 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:42:35,388 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:42:35,388 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:42:35,388 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:42:35,388 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:42:35,388 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:42:35,388 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:42:35,388 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:42:35,388 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:42:35,388 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:42:35,388 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:42:35,388 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:42:35,388 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:42:35,388 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:42:35,388 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:42:37,352 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:42:37,484 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:42:37,485 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:42:37,485 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:42:37,611 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:42:37,771 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:42:37,786 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:42:37,786 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:42:37,800 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:42:37,815 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:42:37,824 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:42:37,844 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:42:37,849 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:42:37,852 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:42:37,855 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:42:37,857 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:42:37,860 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:42:37,863 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:42:37,866 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:42:37,869 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:42:37,872 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:42:37,875 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:42:37,878 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:42:37,880 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:42:37,883 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:42:37,888 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:42:37,892 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:37,892 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:42:37,896 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:42:37,896 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:42:37,900 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:37,900 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:42:37,904 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:37,904 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:42:37,908 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:37,908 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:42:37,912 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:42:37,912 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:42:37,916 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:42:37,916 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:42:37,917 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:42:37,921 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:42:37,921 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:42:37,921 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:42:37,925 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:42:37,929 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:42:37,929 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:42:37,929 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:42:37,929 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:42:37,929 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:42:37,933 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:42:37,937 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:42:37,938 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:42:37,938 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:42:37,938 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:42:37,938 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:42:37,938 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:42:37,938 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:42:37,938 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:42:37,938 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:42:37,938 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:42:37,938 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:42:37,938 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:42:37,938 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:42:37,938 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:42:37,938 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:42:37,939 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:42:37,939 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:42:37,939 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:42:37,939 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:42:37,939 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:42:38,037 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:42:38,073 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:42:38,088 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:42:38,089 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:42:38,101 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:42:38,105 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:42:38,107 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:42:38,110 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:42:38,112 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:42:38,115 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:42:38,118 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:42:38,120 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:42:38,123 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:42:38,126 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:42:38,128 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:42:38,131 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:42:38,134 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:42:38,136 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:42:38,141 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:42:38,145 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:38,145 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:42:38,149 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:42:38,149 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:42:38,153 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:38,153 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:42:38,157 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:38,157 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:42:38,161 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:42:38,161 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:42:38,165 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:42:38,165 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:42:38,169 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:42:38,169 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:42:38,169 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:42:38,173 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:42:38,173 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:42:38,173 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:42:38,177 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:42:38,181 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:42:38,182 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:42:38,182 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:42:38,182 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:42:38,182 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:42:38,186 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:42:38,190 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:42:38,190 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:42:38,190 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:42:38,190 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:42:38,190 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:42:38,190 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:42:38,190 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:42:38,190 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:42:38,190 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:42:38,190 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:42:38,190 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:42:38,190 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:42:38,190 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:42:38,191 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:42:38,191 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:42:38,191 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:42:38,191 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:43:05,585 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:43:05,718 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:43:05,719 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:43:05,719 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:43:05,844 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:43:06,002 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:43:06,017 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:43:06,017 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:43:06,032 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:43:06,047 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:43:06,055 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:43:06,099 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:43:06,104 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:43:06,107 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:43:06,109 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:43:06,112 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:43:06,115 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:43:06,117 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:43:06,120 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:43:06,123 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:43:06,125 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:43:06,128 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:43:06,131 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:43:06,133 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:43:06,136 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:43:06,141 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:43:06,145 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:43:06,146 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:43:06,149 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:43:06,150 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:43:06,153 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:43:06,153 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:43:06,157 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:43:06,157 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:43:06,161 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:43:06,161 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:43:06,165 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:43:06,165 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:43:06,169 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:43:06,169 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:43:06,169 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:43:06,173 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:43:06,174 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:43:06,174 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:43:06,178 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:43:06,182 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:43:06,182 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:43:06,182 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:43:06,182 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:43:06,182 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:43:06,186 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:43:06,190 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:43:06,190 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:43:06,190 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:43:06,190 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,190 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:43:06,190 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,190 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,190 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,190 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:43:06,190 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,191 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:43:06,191 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,191 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:43:06,191 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:43:06,191 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:43:06,191 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:43:06,191 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:43:06,191 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:43:06,191 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:43:06,191 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:43:06,288 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:43:06,325 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:43:06,340 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:43:06,341 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:43:06,353 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:43:06,357 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:43:06,360 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:43:06,362 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:43:06,365 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:43:06,367 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:43:06,370 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:43:06,373 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:43:06,375 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:43:06,378 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:43:06,381 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:43:06,384 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:43:06,386 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:43:06,389 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:43:06,394 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:43:06,398 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:43:06,398 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:43:06,403 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:43:06,403 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:43:06,407 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:43:06,407 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:43:06,411 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:43:06,411 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:43:06,415 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:43:06,415 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:43:06,419 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:43:06,419 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:43:06,423 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:43:06,424 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:43:06,424 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:43:06,428 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:43:06,428 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:43:06,428 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:43:06,432 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:43:06,437 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:43:06,437 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:43:06,437 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:43:06,437 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:43:06,437 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:43:06,441 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:43:06,445 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:43:06,445 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:43:06,445 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:43:06,445 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,445 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:43:06,445 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,445 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,445 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,445 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:43:06,445 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,445 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:43:06,445 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:43:06,445 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:43:06,445 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:43:06,445 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:43:06,445 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:43:06,445 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:44:33,513 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:44:33,665 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:44:33,665 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:44:33,665 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:44:33,792 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:44:34,002 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:34,017 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:34,017 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:34,032 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:34,048 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:34,056 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:44:34,076 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:44:34,082 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:44:34,084 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:44:34,087 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:44:34,090 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:44:34,092 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:44:34,094 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:44:34,097 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:44:34,100 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:44:34,102 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:44:34,105 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:44:34,108 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:44:34,110 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:44:34,113 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:44:34,118 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:44:34,122 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:34,122 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:34,126 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:44:34,126 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:44:34,130 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:34,130 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:34,134 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:34,134 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:44:34,138 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:34,138 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:44:34,142 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:44:34,142 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:44:34,146 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:44:34,146 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:44:34,146 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:44:34,150 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:44:34,150 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:44:34,150 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:44:34,154 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:44:34,158 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:44:34,158 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:44:34,158 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:44:34,158 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:44:34,158 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:44:34,162 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:44:34,166 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:44:34,166 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:44:34,166 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:44:34,166 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,166 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:44:34,166 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,166 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,166 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,166 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:44:34,166 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,166 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:44:34,166 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,166 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:44:34,166 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:44:34,166 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:44:34,166 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:44:34,167 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:44:34,167 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:44:34,167 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:44:34,167 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:44:34,263 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:44:34,300 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:34,315 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:34,316 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:44:34,327 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:44:34,332 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:44:34,334 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:44:34,337 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:44:34,339 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:44:34,342 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:44:34,344 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:44:34,347 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:44:34,350 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:44:34,352 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:44:34,355 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:44:34,358 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:44:34,360 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:44:34,363 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:44:34,368 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:44:34,372 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:34,372 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:34,377 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:44:34,377 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:44:34,381 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:34,381 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:34,386 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:34,386 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:44:34,390 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:34,390 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:44:34,395 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:44:34,395 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:44:34,399 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:44:34,400 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:44:34,400 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:44:34,404 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:44:34,404 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:44:34,405 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:44:34,409 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:44:34,413 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:44:34,413 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:44:34,414 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:44:34,414 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:44:34,414 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:44:34,418 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:44:34,421 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:44:34,421 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:44:34,422 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:44:34,422 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,422 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:44:34,422 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,422 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,422 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,422 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:44:34,422 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,422 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:44:34,422 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:44:34,422 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:44:34,422 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:44:34,422 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:44:34,422 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:44:34,422 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:44:40,296 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:44:40,439 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:44:40,439 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:44:40,439 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:44:40,566 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:44:40,724 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:40,740 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:40,740 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:40,755 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:40,770 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:40,779 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:44:40,799 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:44:40,805 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:44:40,808 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:44:40,810 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:44:40,813 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:44:40,816 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:44:40,818 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:44:40,821 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:44:40,824 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:44:40,827 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:44:40,830 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:44:40,833 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:44:40,835 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:44:40,838 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:44:40,843 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:44:40,847 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:40,848 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:40,852 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:44:40,852 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:44:40,856 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:40,856 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:40,860 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:40,860 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:44:40,864 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:40,864 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:44:40,868 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:44:40,868 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:44:40,872 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:44:40,872 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:44:40,872 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:44:40,876 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:44:40,876 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:44:40,876 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:44:40,881 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:44:40,885 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:44:40,885 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:44:40,885 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:44:40,885 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:44:40,885 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:44:40,890 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:44:40,894 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:44:40,894 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:44:40,894 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:44:40,894 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:40,894 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:44:40,894 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:40,894 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:44:40,894 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:44:40,894 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:44:40,894 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:44:40,894 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:44:40,894 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:44:40,895 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:44:40,895 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:44:40,895 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:44:40,895 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:44:40,895 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:44:40,895 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:44:40,895 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:44:40,895 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:44:40,996 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:44:41,034 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:41,050 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:41,050 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:44:41,064 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:44:41,069 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:44:41,071 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:44:41,074 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:44:41,077 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:44:41,079 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:44:41,082 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:44:41,085 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:44:41,088 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:44:41,090 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:44:41,093 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:44:41,096 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:44:41,098 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:44:41,101 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:44:41,106 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:44:41,110 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:41,110 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:41,115 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:44:41,116 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:44:41,120 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:41,120 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:41,124 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:41,124 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:44:41,128 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:41,128 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:44:41,132 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:44:41,132 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:44:41,136 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:44:41,137 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:44:41,137 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:44:41,141 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:44:41,141 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:44:41,141 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:44:41,145 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:44:41,149 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:44:41,149 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:44:41,149 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:44:41,150 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:44:41,150 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:44:41,154 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:44:41,158 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:44:41,158 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:44:41,158 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:44:41,158 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:41,158 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:44:41,158 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:41,158 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:44:41,158 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:44:41,158 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:44:41,158 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:44:41,159 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:44:41,159 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:44:41,159 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:44:41,159 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:44:41,159 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:44:41,159 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:44:41,159 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:44:53,141 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:44:53,275 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:44:53,275 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:44:53,275 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:44:53,404 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:44:53,572 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:53,587 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:53,587 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:53,602 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:53,617 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:53,626 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:44:53,645 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:44:53,651 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:44:53,653 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:44:53,656 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:44:53,658 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:44:53,661 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:44:53,663 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:44:53,666 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:44:53,669 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:44:53,671 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:44:53,674 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:44:53,677 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:44:53,679 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:44:53,682 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:44:53,687 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:44:53,692 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:53,692 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:53,696 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:44:53,696 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:44:53,700 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:53,700 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:53,704 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:53,704 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:44:53,708 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:53,708 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:44:53,711 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:44:53,712 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:44:53,716 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:44:53,716 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:44:53,716 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:44:53,720 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:44:53,720 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:44:53,720 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:44:53,724 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:44:53,728 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:44:53,728 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:44:53,728 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:44:53,728 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:44:53,729 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:44:53,732 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:44:53,736 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:44:53,736 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:44:53,736 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:44:53,736 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,736 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:44:53,736 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,736 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,736 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,736 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:44:53,736 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,737 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:44:53,737 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,737 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:44:53,737 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:44:53,737 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:44:53,737 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:44:53,737 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:44:53,737 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:44:53,737 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:44:53,737 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:44:53,834 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:44:53,871 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:53,886 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:53,886 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:44:53,898 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:44:53,902 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:44:53,905 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:44:53,907 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:44:53,910 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:44:53,912 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:44:53,915 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:44:53,917 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:44:53,920 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:44:53,923 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:44:53,925 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:44:53,929 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:44:53,931 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:44:53,934 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:44:53,939 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:44:53,943 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:53,943 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:53,947 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:44:53,947 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:44:53,951 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:53,951 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:53,955 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:53,955 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:44:53,959 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:53,959 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:44:53,962 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:44:53,963 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:44:53,967 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:44:53,967 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:44:53,967 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:44:53,971 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:44:53,971 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:44:53,971 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:44:53,975 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:44:53,979 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:44:53,979 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:44:53,979 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:44:53,979 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:44:53,979 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:44:53,983 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:44:53,987 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:44:53,987 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:44:53,987 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:44:53,987 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,987 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:44:53,987 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,987 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,987 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,987 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:44:53,987 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,987 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:44:53,988 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:44:53,988 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:44:53,988 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:44:53,988 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:44:53,988 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:44:53,988 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:44:57,676 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:44:57,814 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:44:57,814 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:44:57,814 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:44:57,942 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:44:58,105 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:58,121 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:58,121 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:58,136 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:58,151 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:58,160 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:44:58,230 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:44:58,236 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:44:58,238 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:44:58,241 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:44:58,244 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:44:58,246 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:44:58,249 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:44:58,251 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:44:58,254 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:44:58,257 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:44:58,260 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:44:58,263 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:44:58,265 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:44:58,268 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:44:58,274 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:44:58,278 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:58,278 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:58,282 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:44:58,282 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:44:58,286 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:58,286 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:58,290 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:58,290 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:44:58,294 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:58,294 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:44:58,298 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:44:58,298 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:44:58,302 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:44:58,302 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:44:58,302 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:44:58,307 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:44:58,307 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:44:58,307 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:44:58,311 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:44:58,315 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:44:58,315 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:44:58,316 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:44:58,316 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:44:58,316 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:44:58,320 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:44:58,324 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:44:58,324 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:44:58,324 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:44:58,324 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,324 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:44:58,324 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,324 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,324 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,324 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:44:58,324 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,324 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:44:58,324 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,324 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:44:58,325 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:44:58,325 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:44:58,325 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:44:58,325 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:44:58,325 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:44:58,325 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:44:58,325 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:44:58,422 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:44:58,459 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:44:58,474 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:44:58,475 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:44:58,487 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:44:58,491 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:44:58,494 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:44:58,496 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:44:58,499 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:44:58,501 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:44:58,504 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:44:58,507 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:44:58,509 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:44:58,512 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:44:58,514 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:44:58,517 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:44:58,520 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:44:58,523 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:44:58,528 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:44:58,532 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:58,532 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:58,535 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:44:58,536 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:44:58,539 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:58,539 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:44:58,543 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:58,543 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:44:58,547 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:44:58,547 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:44:58,551 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:44:58,551 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:44:58,555 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:44:58,555 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:44:58,555 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:44:58,559 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:44:58,559 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:44:58,559 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:44:58,563 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:44:58,567 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:44:58,567 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:44:58,567 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:44:58,567 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:44:58,567 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:44:58,571 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:44:58,575 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:44:58,575 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:44:58,575 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:44:58,575 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,576 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:44:58,576 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,576 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,576 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,576 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:44:58,576 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,576 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:44:58,576 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:44:58,576 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:44:58,576 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:44:58,576 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:44:58,576 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:44:58,576 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:12,471 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:12,606 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:12,606 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:12,606 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:12,734 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:12,930 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:12,946 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:12,947 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:12,962 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:12,978 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:12,988 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:13,012 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:13,018 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:13,021 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:13,025 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:13,028 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:13,031 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:13,035 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:13,039 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:13,043 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:13,047 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:13,051 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:13,057 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:13,062 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:13,067 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:13,078 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:13,083 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:13,083 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:13,087 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:13,087 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:13,091 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:13,091 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:13,095 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:13,095 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:13,099 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:13,099 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:13,103 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:13,103 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:13,107 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:13,108 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:13,108 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:13,112 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:13,112 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:13,112 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:13,116 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:13,120 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:13,120 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:13,121 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:13,121 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:13,121 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:13,125 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:13,129 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:13,129 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:13,129 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:13,129 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:13,129 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:13,129 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:13,129 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:13,129 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:13,129 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:13,129 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:13,129 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:13,129 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:13,129 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:13,129 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:13,129 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:13,129 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:13,129 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:13,129 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:13,130 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:13,130 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:13,228 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:13,265 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:13,287 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:13,288 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:13,302 - ERROR - âŒ Initialization failed: (pyodbc.OperationalError) ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')
[SQL: SELECT [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] 
FROM [INFORMATION_SCHEMA].[TABLES] 
WHERE [INFORMATION_SCHEMA].[TABLES].[TABLE_SCHEMA] = CAST(? AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[TABLES].[TABLE_TYPE] = CAST(? AS NVARCHAR(max)) ORDER BY [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME]]
[parameters: ('dbo', 'BASE TABLE')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-21 13:45:13,302 - ERROR - âŒ Error type: OperationalError
2025-09-21 13:45:14,415 - ERROR - âŒ Full traceback: Traceback (most recent call last):
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
pyodbc.OperationalError: ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/user/IITB/netra/backend/api/db/schemaAwareSQL.py", line 41, in initialize
    full_schema, relationships = get_schema_information(engine)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/backend/api/db/schemaAwareSQL.py", line 99, in get_schema_information
    table_names = inspector.get_table_names()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/reflection.py", line 406, in get_table_names
    return self.dialect.get_table_names(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in get_table_names
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/reflection.py", line 106, in cache
    ret = fn(self, con, *args, **kw)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mssql/base.py", line 2884, in wrap
    return _switch_db(
           ^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mssql/base.py", line 2926, in _switch_db
    return fn(*arg, **kw)
           ^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mssql/base.py", line 3370, in get_table_names
    table_names = [r[0] for r in connection.execute(s)]
                                 ^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (pyodbc.OperationalError) ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')
[SQL: SELECT [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] 
FROM [INFORMATION_SCHEMA].[TABLES] 
WHERE [INFORMATION_SCHEMA].[TABLES].[TABLE_SCHEMA] = CAST(? AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[TABLES].[TABLE_TYPE] = CAST(? AS NVARCHAR(max)) ORDER BY [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME]]
[parameters: ('dbo', 'BASE TABLE')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-09-21 13:45:16,538 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:16,676 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:16,676 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:16,676 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:16,806 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:16,967 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:16,984 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:16,985 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:17,000 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:17,017 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:17,027 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:17,048 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:17,055 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:17,058 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:17,061 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:17,064 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:17,067 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:17,070 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:17,073 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:17,077 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:17,080 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:17,084 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:17,088 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:17,091 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:17,094 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:17,101 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:17,106 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:17,106 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:17,111 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:17,111 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:17,115 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:17,115 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:17,119 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:17,120 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:17,123 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:17,124 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:17,127 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:17,128 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:17,131 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:17,132 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:17,132 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:17,136 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:17,136 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:17,136 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:17,140 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:17,145 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:17,145 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:17,145 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:17,145 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:17,145 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:17,149 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:17,153 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:17,153 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:17,153 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:17,153 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,153 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:17,153 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,153 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,153 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,154 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:17,154 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,154 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:17,154 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,154 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:17,154 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:17,154 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:17,154 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:17,154 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:17,154 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:17,154 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:17,155 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:17,254 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:17,291 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:17,307 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:17,308 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:17,320 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:17,325 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:17,328 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:17,330 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:17,333 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:17,336 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:17,338 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:17,341 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:17,344 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:17,346 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:17,349 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:17,352 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:17,354 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:17,357 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:17,362 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:17,366 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:17,366 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:17,370 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:17,370 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:17,374 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:17,374 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:17,378 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:17,379 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:17,382 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:17,383 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:17,386 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:17,387 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:17,391 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:17,391 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:17,391 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:17,396 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:17,396 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:17,396 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:17,400 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:17,405 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:17,405 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:17,405 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:17,405 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:17,405 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:17,409 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:17,413 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:17,413 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:17,413 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:17,413 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,413 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:17,413 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,414 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,414 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,414 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:17,414 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,414 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:17,414 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:17,414 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:17,414 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:17,414 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:17,414 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:17,414 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:19,907 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:20,058 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:20,058 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:20,058 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:20,202 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:20,369 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:20,385 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:20,385 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:20,400 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:20,416 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:20,425 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:20,445 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:20,451 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:20,453 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:20,456 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:20,458 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:20,461 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:20,463 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:20,466 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:20,469 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:20,471 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:20,474 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:20,477 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:20,479 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:20,482 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:20,487 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:20,492 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:20,492 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:20,495 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:20,496 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:20,500 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:20,500 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:20,504 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:20,504 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:20,508 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:20,508 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:20,512 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:20,512 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:20,517 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:20,517 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:20,517 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:20,521 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:20,521 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:20,521 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:20,525 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:20,530 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:20,530 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:20,530 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:20,530 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:20,530 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:20,534 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:20,538 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:20,538 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:20,538 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:20,538 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,538 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:20,538 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,539 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,539 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,539 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:20,539 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,539 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:20,539 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,539 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:20,539 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:20,539 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:20,539 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:20,539 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:20,539 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:20,540 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:20,540 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:20,644 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:20,681 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:20,697 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:20,697 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:20,709 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:20,714 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:20,716 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:20,719 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:20,721 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:20,724 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:20,726 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:20,730 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:20,733 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:20,735 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:20,738 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:20,741 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:20,743 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:20,746 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:20,751 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:20,755 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:20,755 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:20,759 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:20,759 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:20,764 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:20,764 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:20,768 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:20,768 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:20,772 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:20,772 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:20,776 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:20,776 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:20,780 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:20,780 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:20,780 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:20,784 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:20,785 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:20,785 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:20,789 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:20,793 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:20,793 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:20,793 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:20,793 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:20,794 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:20,798 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:20,803 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:20,803 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:20,803 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:20,803 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,803 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:20,803 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,803 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,803 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,803 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:20,803 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,803 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:20,803 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:20,803 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:20,803 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:20,803 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:20,803 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:20,803 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:22,909 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:23,051 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:23,051 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:23,051 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:23,184 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:23,349 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:23,364 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:23,364 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:23,379 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:23,395 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:23,404 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:23,425 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:23,430 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:23,434 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:23,437 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:23,439 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:23,442 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:23,445 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:23,448 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:23,451 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:23,454 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:23,456 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:23,459 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:23,462 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:23,465 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:23,470 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:23,474 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:23,474 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:23,478 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:23,478 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:23,482 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:23,482 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:23,486 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:23,486 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:23,490 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:23,490 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:23,494 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:23,494 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:23,498 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:23,498 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:23,498 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:23,502 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:23,502 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:23,502 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:23,506 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:23,511 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:23,511 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:23,511 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:23,511 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:23,511 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:23,515 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:23,519 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:23,519 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:23,520 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:23,520 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,520 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:23,520 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,520 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,520 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,520 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:23,520 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,520 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:23,520 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,520 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:23,520 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:23,520 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:23,521 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:23,521 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:23,521 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:23,521 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:23,521 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:23,618 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:23,655 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:23,671 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:23,671 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:23,683 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:23,687 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:23,690 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:23,693 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:23,695 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:23,698 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:23,700 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:23,703 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:23,706 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:23,709 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:23,711 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:23,715 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:23,717 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:23,720 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:23,726 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:23,730 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:23,730 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:23,734 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:23,734 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:23,738 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:23,738 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:23,742 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:23,742 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:23,746 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:23,746 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:23,750 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:23,750 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:23,754 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:23,754 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:23,755 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:23,759 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:23,759 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:23,759 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:23,763 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:23,767 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:23,767 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:23,767 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:23,767 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:23,767 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:23,771 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:23,775 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:23,775 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:23,775 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:23,775 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,775 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:23,775 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,775 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,775 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,776 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:23,776 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,776 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:23,776 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:23,776 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:23,776 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:23,776 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:23,776 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:23,776 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:25,777 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:25,923 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:25,923 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:25,924 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:26,052 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:26,214 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:26,230 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:26,230 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:26,245 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:26,260 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:26,269 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:26,290 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:26,295 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:26,298 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:26,301 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:26,304 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:26,306 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:26,309 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:26,312 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:26,315 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:26,316 - ERROR - âŒ Error getting columns for table sensor_readings: (pyodbc.OperationalError) ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')
[SQL: SELECT [INFORMATION_SCHEMA].[COLUMNS].[COLUMN_NAME], [INFORMATION_SCHEMA].[COLUMNS].[DATA_TYPE], [INFORMATION_SCHEMA].[COLUMNS].[IS_NULLABLE], [INFORMATION_SCHEMA].[COLUMNS].[CHARACTER_MAXIMUM_LENGTH], [INFORMATION_SCHEMA].[COLUMNS].[NUMERIC_PRECISION], [INFORMATION_SCHEMA].[COLUMNS].[NUMERIC_SCALE], [INFORMATION_SCHEMA].[COLUMNS].[COLUMN_DEFAULT], [INFORMATION_SCHEMA].[COLUMNS].[COLLATION_NAME], sys.computed_columns.definition, sys.computed_columns.is_persisted, sys.identity_columns.is_identity, CAST(sys.identity_columns.seed_value AS NUMERIC(38, 0)) AS seed_value, CAST(sys.identity_columns.increment_value AS NUMERIC(38, 0)) AS increment_value, CAST(sys.extended_properties.value AS NVARCHAR(max)) AS comment 
FROM [INFORMATION_SCHEMA].[COLUMNS] LEFT OUTER JOIN sys.computed_columns ON sys.computed_columns.object_id = object_id([INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] + CAST(? AS NVARCHAR(max)) + [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME]) AND sys.computed_columns.name = ([INFORMATION_SCHEMA].[COLUMNS].[COLUMN_NAME] COLLATE DATABASE_DEFAULT) LEFT OUTER JOIN sys.identity_columns ON sys.identity_columns.object_id = object_id([INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] + CAST(? AS NVARCHAR(max)) + [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME]) AND sys.identity_columns.name = ([INFORMATION_SCHEMA].[COLUMNS].[COLUMN_NAME] COLLATE DATABASE_DEFAULT) LEFT OUTER JOIN sys.extended_properties ON sys.extended_properties.class = ? AND sys.extended_properties.major_id = object_id([INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] + CAST(? AS NVARCHAR(max)) + [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME]) AND sys.extended_properties.minor_id = [INFORMATION_SCHEMA].[COLUMNS].[ORDINAL_POSITION] AND sys.extended_properties.name = CAST(? AS NVARCHAR(max)) 
WHERE [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME] = CAST(? AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] = CAST(? AS NVARCHAR(max)) ORDER BY [INFORMATION_SCHEMA].[COLUMNS].[ORDINAL_POSITION]]
[parameters: ('.', '.', 1, '.', 'MS_Description', 'sensor_readings', 'dbo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-21 13:45:26,325 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:26,328 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:26,331 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:26,335 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:26,341 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:26,345 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:26,345 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:26,349 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:26,350 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:26,354 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:26,354 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:26,358 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:26,358 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:26,362 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:26,362 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:26,366 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:26,366 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:26,370 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:26,371 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:26,371 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:26,375 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:26,375 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:26,375 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:26,379 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:26,384 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:26,384 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:26,384 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:26,384 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:26,384 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:26,389 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:26,394 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:26,394 - INFO - âœ… Schema loading complete. Found 12 tables and 14 relationships
2025-09-21 13:45:26,394 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:26,394 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,394 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:26,394 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,394 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,394 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,395 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:26,395 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,395 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:26,395 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,395 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:26,395 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:26,395 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:26,395 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:26,395 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:26,395 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:26,395 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:26,396 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:26,511 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:26,551 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:26,567 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:26,567 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:26,581 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:26,587 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:26,590 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:26,593 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:26,596 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:26,599 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:26,603 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:26,606 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:26,610 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:26,613 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:26,617 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:26,621 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:26,624 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:26,628 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:26,634 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:26,638 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:26,638 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:26,642 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:26,642 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:26,646 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:26,646 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:26,650 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:26,650 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:26,654 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:26,655 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:26,658 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:26,659 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:26,663 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:26,663 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:26,663 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:26,667 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:26,667 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:26,667 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:26,671 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:26,675 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:26,675 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:26,675 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:26,675 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:26,676 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:26,680 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:26,685 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:26,685 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:26,685 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:26,685 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,685 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:26,685 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,685 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,685 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,685 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:26,685 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,685 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:26,685 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:26,686 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:26,686 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:26,686 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:26,686 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:26,686 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:28,704 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:28,841 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:28,841 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:28,841 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:28,970 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:29,138 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:29,154 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:29,154 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:29,169 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:29,185 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:29,195 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:29,220 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:29,255 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:29,258 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:29,261 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:29,263 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:29,266 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:29,268 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:29,271 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:29,274 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:29,277 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:29,279 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:29,282 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:29,285 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:29,288 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:29,293 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:29,297 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:29,297 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:29,301 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:29,301 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:29,305 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:29,305 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:29,309 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:29,309 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:29,313 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:29,313 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:29,317 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:29,317 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:29,321 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:29,322 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:29,322 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:29,326 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:29,326 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:29,326 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:29,330 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:29,335 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:29,335 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:29,335 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:29,335 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:29,335 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:29,339 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:29,343 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:29,343 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:29,343 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:29,343 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,343 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:29,343 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,343 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,344 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,344 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:29,344 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,344 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:29,344 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,344 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:29,344 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:29,344 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:29,344 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:29,344 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:29,344 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:29,344 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:29,345 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:29,444 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:29,481 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:29,497 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:29,497 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:29,509 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:29,514 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:29,516 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:29,519 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:29,522 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:29,524 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:29,526 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:29,529 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:29,532 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:29,535 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:29,538 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:29,542 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:29,545 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:29,547 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:29,553 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:29,557 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:29,557 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:29,560 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:29,561 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:29,564 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:29,565 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:29,568 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:29,568 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:29,572 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:29,573 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:29,577 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:29,577 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:29,581 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:29,581 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:29,581 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:29,585 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:29,585 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:29,585 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:29,589 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:29,595 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:29,595 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:29,595 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:29,595 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:29,595 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:29,601 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:29,605 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:29,606 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:29,606 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:29,606 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,606 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:29,606 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,606 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,606 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,606 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:29,606 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,606 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:29,606 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:29,606 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:29,606 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:29,606 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:29,606 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:29,606 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:31,593 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:31,730 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:31,730 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:31,730 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:31,856 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:32,016 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:32,031 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:32,031 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:32,046 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:32,062 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:32,071 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:32,091 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:32,096 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:32,099 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:32,102 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:32,104 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:32,107 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:32,110 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:32,112 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:32,115 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:32,118 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:32,121 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:32,124 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:32,126 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:32,129 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:32,134 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:32,138 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:32,138 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:32,142 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:32,142 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:32,146 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:32,146 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:32,150 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:32,150 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:32,154 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:32,154 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:32,158 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:32,158 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:32,162 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:32,162 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:32,162 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:32,166 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:32,166 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:32,166 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:32,170 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:32,174 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:32,175 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:32,175 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:32,175 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:32,175 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:32,179 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:32,183 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:32,183 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:32,183 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:32,183 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,183 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:32,183 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,183 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,183 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,183 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:32,183 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,183 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:32,183 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,183 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:32,183 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:32,183 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:32,183 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:32,183 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:32,183 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:32,183 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:32,184 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:32,281 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:32,317 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:32,332 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:32,333 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:32,345 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:32,349 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:32,352 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:32,354 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:32,357 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:32,359 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:32,362 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:32,364 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:32,367 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:32,370 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:32,372 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:32,375 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:32,377 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:32,380 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:32,385 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:32,389 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:32,389 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:32,393 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:32,393 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:32,398 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:32,398 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:32,402 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:32,402 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:32,406 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:32,406 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:32,410 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:32,410 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:32,414 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:32,414 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:32,414 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:32,418 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:32,418 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:32,419 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:32,423 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:32,427 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:32,427 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:32,427 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:32,427 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:32,427 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:32,431 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:32,435 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:32,435 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:32,436 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:32,436 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,436 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:32,436 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,436 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,436 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,436 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:32,436 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,436 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:32,436 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:32,436 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:32,436 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:32,436 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:32,436 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:32,436 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:34,457 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:34,622 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:34,622 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:34,622 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:34,755 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:34,920 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:34,938 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:34,938 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:34,954 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:34,972 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:34,981 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:35,003 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:35,009 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:35,012 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:35,015 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:35,018 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:35,022 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:35,025 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:35,028 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:35,032 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:35,035 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:35,038 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:35,042 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:35,044 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:35,048 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:35,055 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:35,059 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:35,059 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:35,063 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:35,063 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:35,067 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:35,067 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:35,071 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:35,071 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:35,075 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:35,075 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:35,079 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:35,079 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:35,083 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:35,083 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:35,083 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:35,087 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:35,088 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:35,088 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:35,092 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:35,096 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:35,096 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:35,096 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:35,096 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:35,096 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:35,101 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:35,105 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:35,105 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:35,105 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:35,105 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,105 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:35,105 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,105 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,105 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,106 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:35,106 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,106 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:35,106 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,106 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:35,106 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:35,106 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:35,106 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:35,106 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:35,106 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:35,106 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:35,107 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:35,206 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:35,244 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:35,259 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:35,259 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:35,272 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:35,276 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:35,279 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:35,281 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:35,284 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:35,286 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:35,289 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:35,292 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:35,294 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:35,297 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:35,300 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:35,303 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:35,305 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:35,308 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:35,313 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:35,317 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:35,317 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:35,321 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:35,321 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:35,326 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:35,326 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:35,331 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:35,331 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:35,335 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:35,335 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:35,339 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:35,339 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:35,344 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:35,344 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:35,344 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:35,348 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:35,348 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:35,348 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:35,352 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:35,359 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:35,360 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:35,360 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:35,360 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:35,360 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:35,365 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:35,369 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:35,369 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:35,370 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:35,370 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,370 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:35,370 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,370 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,370 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,370 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:35,370 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,370 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:35,370 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:35,370 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:35,370 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:35,370 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:35,370 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:35,371 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:37,362 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:37,496 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:37,496 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:37,496 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:37,624 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:37,801 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:37,818 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:37,818 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:37,834 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:37,851 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:37,860 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:37,881 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:37,887 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:37,891 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:37,895 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:37,898 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:37,901 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:37,904 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:37,908 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:37,911 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:37,915 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:37,918 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:37,920 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:37,923 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:37,926 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:37,932 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:37,936 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:37,936 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:37,940 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:37,940 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:37,944 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:37,944 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:37,948 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:37,949 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:37,953 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:37,953 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:37,957 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:37,957 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:37,961 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:37,961 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:37,961 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:37,966 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:37,966 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:37,966 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:37,970 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:37,976 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:37,976 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:37,976 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:37,976 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:37,976 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:37,980 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:37,984 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:37,984 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:37,984 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:37,984 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:37,985 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:37,985 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:37,985 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:37,985 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:37,985 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:37,985 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:37,985 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:37,985 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:37,985 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:37,985 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:37,985 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:37,985 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:37,985 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:37,986 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:37,986 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:37,986 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:38,085 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:38,122 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:38,137 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:38,138 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:38,150 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:38,154 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:38,157 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:38,159 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:38,162 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:38,164 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:38,167 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:38,170 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:38,172 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:38,175 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:38,178 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:38,181 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:38,184 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:38,187 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:38,192 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:38,197 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:38,197 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:38,201 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:38,201 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:38,205 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:38,205 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:38,209 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:38,210 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:38,214 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:38,214 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:38,219 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:38,219 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:38,223 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:38,223 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:38,223 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:38,228 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:38,228 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:38,228 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:38,232 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:38,236 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:38,236 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:38,236 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:38,236 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:38,236 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:38,240 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:38,244 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:38,244 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:38,244 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:38,244 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:38,244 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:38,244 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:38,244 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:38,244 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:38,244 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:38,244 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:38,244 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:38,245 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:38,245 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:38,245 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:38,245 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:38,245 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:38,245 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:40,268 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:40,411 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:40,412 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:40,412 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:40,541 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:40,710 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:40,726 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:40,726 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:40,741 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:40,756 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:40,765 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:40,784 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:40,789 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:40,792 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:40,795 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:40,798 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:40,800 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:40,803 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:40,806 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:40,809 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:40,811 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:40,814 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:40,817 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:40,820 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:40,822 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:40,828 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:40,832 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:40,833 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:40,837 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:40,837 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:40,841 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:40,841 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:40,845 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:40,845 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:40,849 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:40,849 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:40,854 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:40,854 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:40,858 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:40,858 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:40,858 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:40,862 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:40,862 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:40,862 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:40,867 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:40,871 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:40,871 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:40,871 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:40,871 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:40,872 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:40,876 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:40,880 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:40,880 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:40,880 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:40,880 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:40,880 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:40,880 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:40,880 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:40,880 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:40,880 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:40,880 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:40,880 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:40,881 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:40,881 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:40,881 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:40,881 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:40,881 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:40,881 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:40,881 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:40,881 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:40,881 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:40,979 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:41,016 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:41,031 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:41,032 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:41,044 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:41,048 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:41,050 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:41,053 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:41,056 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:41,058 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:41,061 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:41,063 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:41,066 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:41,069 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:41,071 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:41,074 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:41,077 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:41,080 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:41,086 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:41,089 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:41,090 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:41,094 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:41,094 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:41,098 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:41,098 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:41,102 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:41,102 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:41,106 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:41,106 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:41,111 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:41,111 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:41,115 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:41,115 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:41,116 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:41,120 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:41,120 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:41,120 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:41,124 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:41,128 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:41,129 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:41,129 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:41,129 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:41,129 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:41,133 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:41,137 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:41,137 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:41,137 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:41,137 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:41,137 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:41,137 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:41,137 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:41,137 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:41,137 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:41,138 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:41,138 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:41,138 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:41,138 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:41,138 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:41,138 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:41,138 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:41,138 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:43,202 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:43,335 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:43,336 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:43,336 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:43,461 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:43,623 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:43,638 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:43,638 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:43,653 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:43,668 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:43,677 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:43,698 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:43,704 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:43,707 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:43,710 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:43,713 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:43,716 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:43,719 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:43,722 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:43,725 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:43,727 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:43,730 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:43,733 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:43,736 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:43,739 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:43,744 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:43,748 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:43,749 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:43,753 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:43,753 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:43,757 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:43,757 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:43,761 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:43,761 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:43,765 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:43,765 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:43,769 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:43,769 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:43,773 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:43,773 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:43,773 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:43,777 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:43,777 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:43,777 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:43,782 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:43,786 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:43,786 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:43,786 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:43,786 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:43,786 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:43,790 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:43,795 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:43,795 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:43,795 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:43,795 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:43,795 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:43,795 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:43,795 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:43,795 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:43,795 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:43,795 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:43,795 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:43,795 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:43,795 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:43,795 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:43,795 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:43,795 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:43,795 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:43,795 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:43,796 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:43,796 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:43,894 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:43,930 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:43,946 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:43,946 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:43,958 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:43,963 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:43,965 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:43,968 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:43,970 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:43,972 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:43,975 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:43,977 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:43,980 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:43,983 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:43,985 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:43,988 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:43,991 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:43,994 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:43,999 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:44,003 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:44,003 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:44,007 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:44,007 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:44,011 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:44,011 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:44,015 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:44,015 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:44,019 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:44,019 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:44,023 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:44,023 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:44,027 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:44,027 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:44,027 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:44,031 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:44,031 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:44,031 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:44,035 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:44,039 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:44,039 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:44,039 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:44,039 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:44,039 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:44,043 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:44,047 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:44,047 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:44,047 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:44,047 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:44,048 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:44,048 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:44,048 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:44,048 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:44,048 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:44,048 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:44,048 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:44,048 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:44,048 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:44,048 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:44,048 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:44,048 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:44,048 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:46,033 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:46,186 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:46,186 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:46,186 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:46,328 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:46,510 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:46,527 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:46,527 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:46,543 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:46,559 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:46,568 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:46,590 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:46,595 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:46,598 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:46,601 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:46,603 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:46,606 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:46,608 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:46,610 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:46,613 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:46,616 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:46,619 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:46,621 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:46,624 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:46,627 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:46,632 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:46,636 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:46,636 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:46,640 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:46,640 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:46,644 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:46,645 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:46,649 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:46,649 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:46,653 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:46,653 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:46,657 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:46,657 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:46,661 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:46,661 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:46,661 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:46,665 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:46,665 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:46,665 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:46,669 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:46,673 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:46,674 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:46,674 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:46,674 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:46,674 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:46,678 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:46,683 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:46,684 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:46,684 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:46,684 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,684 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:46,684 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,684 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,684 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,684 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:46,684 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,684 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:46,684 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,684 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:46,684 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:46,684 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:46,684 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:46,684 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:46,684 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:46,685 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:46,685 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:46,797 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:46,834 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:46,850 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:46,850 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:46,862 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:46,867 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:46,869 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:46,872 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:46,874 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:46,877 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:46,880 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:46,882 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:46,885 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:46,888 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:46,890 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:46,893 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:46,896 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:46,899 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:46,904 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:46,908 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:46,908 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:46,912 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:46,912 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:46,916 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:46,916 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:46,920 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:46,920 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:46,924 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:46,924 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:46,928 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:46,929 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:46,933 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:46,933 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:46,933 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:46,937 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:46,937 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:46,937 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:46,942 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:46,946 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:46,946 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:46,946 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:46,946 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:46,946 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:46,950 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:46,954 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:46,954 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:46,954 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:46,954 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,955 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:46,955 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,955 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,955 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,955 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:46,955 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,955 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:46,955 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:46,955 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:46,955 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:46,955 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:46,955 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:46,955 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:49,515 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:49,663 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:49,663 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:49,663 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:49,800 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:49,967 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:49,982 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:49,983 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:49,997 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:50,014 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:50,023 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:50,042 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:50,048 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:50,050 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:50,053 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:50,055 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:50,058 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:50,060 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:50,063 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:50,066 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:50,068 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:50,071 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:50,074 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:50,076 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:50,079 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:50,084 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:50,088 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:50,089 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:50,092 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:50,093 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:50,096 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:50,096 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:50,101 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:50,101 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:50,105 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:50,105 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:50,108 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:50,109 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:50,113 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:50,113 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:50,113 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:50,117 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:50,117 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:50,117 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:50,121 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:50,125 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:50,125 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:50,125 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:50,126 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:50,126 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:50,129 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:50,133 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:50,133 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:50,133 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:50,133 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,133 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:50,134 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,134 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,134 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,134 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:50,134 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,134 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:50,134 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,134 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:50,134 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:50,134 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:50,134 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:50,134 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:50,134 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:50,134 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:50,134 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:50,238 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:50,277 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:50,297 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:50,297 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:50,309 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:50,314 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:50,316 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:50,319 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:50,321 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:50,324 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:50,326 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:50,329 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:50,331 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:50,334 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:50,337 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:50,339 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:50,342 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:50,345 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:50,350 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:50,354 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:50,354 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:50,359 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:50,359 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:50,363 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:50,363 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:50,367 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:50,367 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:50,371 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:50,371 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:50,375 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:50,375 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:50,380 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:50,380 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:50,380 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:50,385 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:50,385 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:50,385 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:50,391 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:50,396 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:50,396 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:50,396 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:50,396 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:50,396 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:50,401 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:50,406 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:50,406 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:50,406 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:50,406 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,406 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:50,406 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,406 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,406 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,407 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:50,407 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,407 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:50,407 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:50,407 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:50,407 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:50,407 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:50,407 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:50,407 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:54,472 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:54,609 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:54,610 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:54,610 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:54,737 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:54,896 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:54,911 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:54,911 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:54,926 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:54,941 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:54,949 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:54,968 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:54,974 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:54,976 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:54,979 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:54,982 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:54,985 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:54,987 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:54,990 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:54,993 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:54,996 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:54,999 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:55,002 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:55,005 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:55,008 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:55,014 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:55,018 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:55,018 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:55,022 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:55,022 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:55,026 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:55,026 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:55,030 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:55,030 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:55,034 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:55,034 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:55,038 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:55,038 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:55,042 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:55,042 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:55,042 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:55,046 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:55,046 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:55,047 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:55,051 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:55,055 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:55,055 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:55,055 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:55,055 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:55,055 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:55,059 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:55,063 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:55,063 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:55,063 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:55,063 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,063 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:55,063 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,063 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,063 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,063 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:55,063 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,063 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:55,063 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,063 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:55,063 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:55,064 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:55,064 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:55,064 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:55,064 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:55,064 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:55,064 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:55,160 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:55,197 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:55,212 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:55,213 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:55,225 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:55,229 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:55,232 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:55,234 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:55,237 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:55,240 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:55,242 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:55,245 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:55,248 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:55,251 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:55,253 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:55,256 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:55,259 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:55,262 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:55,267 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:55,271 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:55,271 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:55,275 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:55,275 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:55,279 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:55,279 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:55,283 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:55,283 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:55,287 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:55,287 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:55,291 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:55,291 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:55,295 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:55,295 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:55,295 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:55,299 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:55,299 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:55,299 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:55,303 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:55,307 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:55,307 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:55,308 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:55,308 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:55,308 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:55,312 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:55,316 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:55,316 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:55,316 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:55,316 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,316 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:55,316 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,316 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,316 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,316 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:55,316 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,316 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:55,316 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:55,316 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:55,316 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:55,316 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:55,316 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:55,316 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:57,258 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:57,392 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:45:57,392 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:45:57,392 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:45:57,520 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:45:57,679 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:57,695 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:57,695 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:57,710 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:57,725 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:57,734 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:57,753 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:57,759 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:57,762 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:57,765 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:57,767 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:57,770 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:57,772 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:57,775 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:57,778 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:57,781 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:57,783 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:57,786 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:57,789 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:57,792 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:57,797 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:57,801 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:57,801 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:57,805 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:57,805 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:57,809 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:57,809 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:57,814 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:57,814 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:57,818 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:57,818 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:57,822 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:57,822 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:57,826 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:57,826 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:57,826 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:57,830 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:57,830 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:57,830 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:57,835 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:57,839 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:57,839 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:57,839 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:57,839 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:57,839 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:57,843 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:57,847 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:57,847 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:57,847 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:57,847 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:57,847 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:57,847 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:57,847 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:57,847 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:57,848 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:57,848 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:57,848 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:57,848 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:57,848 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:57,848 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:57,848 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:57,848 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:57,848 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:45:57,848 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:45:57,848 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:45:57,848 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:45:57,946 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:45:57,982 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:45:57,998 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:45:57,998 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:45:58,010 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:45:58,014 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:45:58,017 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:45:58,019 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:45:58,022 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:45:58,025 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:45:58,027 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:45:58,030 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:45:58,033 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:45:58,035 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:45:58,038 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:45:58,041 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:45:58,043 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:45:58,046 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:45:58,051 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:45:58,055 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:58,055 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:58,059 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:45:58,059 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:45:58,063 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:58,063 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:45:58,067 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:58,067 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:45:58,071 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:45:58,071 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:45:58,075 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:45:58,075 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:45:58,079 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:45:58,079 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:45:58,079 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:45:58,083 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:45:58,083 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:45:58,083 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:45:58,087 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:45:58,091 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:45:58,091 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:45:58,092 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:45:58,092 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:45:58,092 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:45:58,096 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:45:58,100 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:45:58,100 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:45:58,100 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:45:58,100 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:58,100 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:45:58,100 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:45:58,100 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:45:58,100 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:45:58,100 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:45:58,100 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:45:58,100 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:45:58,100 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:45:58,100 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:45:58,100 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:45:58,100 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:45:58,100 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:45:58,100 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:17,299 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:17,440 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:17,440 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:17,440 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:17,569 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:17,732 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:17,748 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:17,748 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:17,763 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:17,778 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:17,787 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:17,807 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:17,813 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:17,816 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:17,819 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:17,822 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:17,825 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:17,827 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:17,830 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:17,833 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:17,835 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:17,838 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:17,841 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:17,844 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:17,846 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:17,852 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:17,856 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:17,856 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:17,860 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:17,860 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:17,864 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:17,864 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:17,868 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:17,868 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:17,872 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:17,872 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:17,876 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:17,876 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:17,880 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:17,880 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:17,880 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:17,884 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:17,884 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:17,884 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:17,888 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:17,892 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:17,893 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:17,893 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:17,893 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:17,893 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:17,897 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:17,901 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:17,901 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:17,901 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:17,901 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:17,901 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:17,901 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:17,901 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:17,901 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:17,901 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:17,901 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:17,901 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:17,901 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:17,901 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:17,901 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:17,901 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:17,901 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:17,901 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:17,902 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:17,902 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:17,902 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:17,999 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:18,036 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:18,051 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:18,051 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:18,063 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:18,068 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:18,071 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:18,074 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:18,078 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:18,082 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:18,086 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:18,089 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:18,094 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:18,098 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:18,103 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:18,107 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:18,111 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:18,114 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:18,123 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:18,130 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:18,130 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:18,136 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:18,136 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:18,141 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:18,141 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:18,146 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:18,146 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:18,152 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:18,152 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:18,158 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:18,158 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:18,164 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:18,164 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:18,164 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:18,170 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:18,170 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:18,170 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:18,178 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:18,186 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:18,186 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:18,186 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:18,186 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:18,186 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:18,191 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:18,197 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:18,197 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:18,197 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:18,198 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:18,198 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:18,198 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:18,198 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:18,198 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:18,198 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:18,198 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:18,198 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:18,198 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:18,198 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:18,198 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:18,198 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:18,198 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:18,198 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:20,170 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:20,307 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:20,307 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:20,307 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:20,435 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:20,597 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:20,613 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:20,613 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:20,628 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:20,643 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:20,652 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:20,671 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:20,677 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:20,680 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:20,682 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:20,685 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:20,688 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:20,690 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:20,693 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:20,696 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:20,698 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:20,701 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:20,704 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:20,706 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:20,709 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:20,715 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:20,719 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:20,719 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:20,723 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:20,723 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:20,727 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:20,727 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:20,731 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:20,731 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:20,735 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:20,735 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:20,739 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:20,739 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:20,743 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:20,743 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:20,743 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:20,747 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:20,747 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:20,747 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:20,752 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:20,757 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:20,757 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:20,757 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:20,757 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:20,757 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:20,761 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:20,765 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:20,765 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:20,765 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:20,765 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:20,765 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:20,765 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:20,765 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:20,765 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:20,765 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:20,765 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:20,766 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:20,766 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:20,766 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:20,766 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:20,766 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:20,766 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:20,766 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:20,766 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:20,766 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:20,766 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:20,870 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:20,909 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:20,925 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:20,926 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:20,942 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:20,948 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:20,952 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:20,956 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:20,959 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:20,961 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:20,964 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:20,966 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:20,969 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:20,972 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:20,974 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:20,978 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:20,980 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:20,983 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:20,988 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:20,992 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:20,992 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:20,996 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:20,996 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:21,000 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:21,000 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:21,004 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:21,004 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:21,008 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:21,008 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:21,012 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:21,012 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:21,016 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:21,016 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:21,016 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:21,020 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:21,020 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:21,020 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:21,024 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:21,028 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:21,028 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:21,028 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:21,028 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:21,028 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:21,032 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:21,036 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:21,037 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:21,037 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:21,037 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:21,037 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:21,037 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:21,037 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:21,037 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:21,037 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:21,037 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:21,037 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:21,037 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:21,037 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:21,037 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:21,038 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:21,038 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:21,038 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:23,032 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:23,169 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:23,169 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:23,169 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:23,298 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:23,459 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:23,474 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:23,475 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:23,490 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:23,505 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:23,514 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:23,534 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:23,540 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:23,543 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:23,545 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:23,548 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:23,551 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:23,553 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:23,557 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:23,560 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:23,562 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:23,565 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:23,568 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:23,570 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:23,574 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:23,579 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:23,583 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:23,583 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:23,587 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:23,588 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:23,592 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:23,592 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:23,596 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:23,596 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:23,600 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:23,600 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:23,604 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:23,604 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:23,608 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:23,608 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:23,608 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:23,612 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:23,612 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:23,612 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:23,617 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:23,621 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:23,621 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:23,621 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:23,621 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:23,621 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:23,626 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:23,630 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:23,630 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:23,630 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:23,630 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,630 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:23,630 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,630 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,630 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,630 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:23,630 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,630 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:23,631 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,631 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:23,631 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:23,631 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:23,631 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:23,631 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:23,631 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:23,631 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:23,631 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:23,731 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:23,768 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:23,783 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:23,783 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:23,795 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:23,800 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:23,802 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:23,805 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:23,807 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:23,810 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:23,812 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:23,815 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:23,818 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:23,820 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:23,823 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:23,826 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:23,828 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:23,831 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:23,837 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:23,840 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:23,841 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:23,845 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:23,845 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:23,848 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:23,848 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:23,852 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:23,852 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:23,856 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:23,856 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:23,860 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:23,860 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:23,864 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:23,864 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:23,864 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:23,868 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:23,868 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:23,869 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:23,872 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:23,877 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:23,877 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:23,877 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:23,877 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:23,877 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:23,881 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:23,885 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:23,885 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:23,885 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:23,885 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,885 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:23,885 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,885 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,885 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,885 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:23,886 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,886 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:23,886 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:23,886 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:23,886 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:23,886 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:23,886 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:23,886 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:31,582 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:31,720 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:31,720 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:31,720 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:31,851 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:32,027 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:32,044 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:32,044 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:32,060 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:32,076 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:32,085 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:32,104 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:32,110 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:32,112 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:32,115 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:32,118 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:32,120 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:32,123 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:32,125 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:32,128 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:32,131 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:32,133 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:32,136 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:32,139 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:32,141 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:32,147 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:32,151 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:32,151 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:32,155 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:32,155 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:32,159 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:32,159 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:32,163 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:32,163 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:32,167 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:32,167 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:32,171 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:32,171 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:32,175 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:32,175 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:32,176 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:32,180 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:32,180 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:32,180 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:32,184 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:32,188 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:32,188 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:32,188 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:32,189 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:32,189 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:32,193 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:32,197 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:32,197 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:32,197 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:32,197 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,197 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:32,197 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,197 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,197 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,197 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:32,197 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,197 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:32,197 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,197 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:32,197 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:32,197 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:32,197 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:32,197 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:32,197 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:32,197 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:32,198 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:32,298 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:32,334 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:32,350 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:32,350 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:32,362 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:32,367 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:32,369 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:32,372 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:32,374 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:32,377 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:32,379 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:32,382 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:32,385 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:32,387 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:32,390 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:32,393 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:32,396 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:32,398 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:32,404 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:32,407 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:32,408 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:32,411 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:32,412 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:32,415 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:32,415 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:32,420 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:32,420 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:32,424 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:32,424 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:32,451 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:32,451 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:32,455 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:32,455 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:32,455 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:32,459 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:32,459 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:32,459 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:32,463 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:32,468 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:32,468 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:32,468 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:32,468 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:32,468 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:32,472 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:32,476 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:32,476 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:32,476 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:32,476 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,476 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:32,476 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,476 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,476 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,476 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:32,476 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,476 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:32,476 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:32,476 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:32,476 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:32,476 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:32,476 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:32,477 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:34,581 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:34,721 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:34,721 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:34,721 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:34,854 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:35,020 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:35,036 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:35,036 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:35,052 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:35,067 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:35,076 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:35,096 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:35,103 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:35,106 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:35,109 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:35,111 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:35,114 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:35,116 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:35,119 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:35,122 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:35,125 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:35,128 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:35,131 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:35,134 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:35,136 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:35,142 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:35,146 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:35,146 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:35,150 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:35,150 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:35,154 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:35,154 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:35,158 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:35,158 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:35,162 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:35,162 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:35,166 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:35,166 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:35,170 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:35,171 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:35,171 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:35,175 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:35,175 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:35,175 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:35,179 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:35,183 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:35,183 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:35,183 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:35,183 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:35,184 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:35,188 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:35,192 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:35,192 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:35,192 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:35,192 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,192 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:35,192 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,192 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,192 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,192 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:35,192 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,192 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:35,192 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,192 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:35,192 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:35,192 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:35,192 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:35,192 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:35,192 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:35,192 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:35,193 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:35,293 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:35,331 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:35,347 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:35,347 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:35,360 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:35,364 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:35,367 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:35,370 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:35,372 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:35,375 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:35,378 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:35,380 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:35,384 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:35,386 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:35,389 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:35,392 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:35,395 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:35,397 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:35,403 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:35,407 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:35,407 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:35,411 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:35,411 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:35,415 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:35,415 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:35,419 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:35,419 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:35,423 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:35,423 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:35,427 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:35,427 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:35,432 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:35,432 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:35,432 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:35,436 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:35,436 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:35,436 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:35,440 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:35,445 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:35,445 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:35,445 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:35,445 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:35,445 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:35,449 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:35,453 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:35,453 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:35,453 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:35,454 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,454 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:35,454 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,454 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,454 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,454 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:35,454 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,454 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:35,454 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:35,454 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:35,454 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:35,454 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:35,454 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:35,454 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:37,398 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:37,533 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:37,533 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:37,533 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:37,664 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:37,835 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:37,850 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:37,850 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:37,865 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:37,880 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:37,889 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:37,909 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:37,914 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:37,917 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:37,920 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:37,922 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:37,925 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:37,927 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:37,930 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:37,933 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:37,936 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:37,939 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:37,943 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:37,946 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:37,949 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:37,955 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:37,961 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:37,961 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:37,965 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:37,965 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:37,970 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:37,970 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:37,974 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:37,974 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:37,979 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:37,980 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:37,985 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:37,985 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:37,990 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:37,990 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:37,990 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:37,996 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:37,996 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:37,996 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:38,002 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:38,008 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:38,008 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:38,008 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:38,008 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:38,008 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:38,013 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:38,018 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:38,018 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:38,019 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:38,019 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,019 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:38,019 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,019 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,019 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,019 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:38,019 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,019 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:38,019 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,019 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:38,019 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:38,019 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:38,019 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:38,019 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:38,020 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:38,020 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:38,020 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:38,122 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:38,160 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:38,175 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:38,176 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:38,189 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:38,194 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:38,196 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:38,199 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:38,202 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:38,205 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:38,209 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:38,213 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:38,217 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:38,221 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:38,225 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:38,229 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:38,232 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:38,236 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:38,243 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:38,251 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:38,251 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:38,257 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:38,257 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:38,262 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:38,262 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:38,267 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:38,267 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:38,271 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:38,271 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:38,276 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:38,277 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:38,283 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:38,283 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:38,283 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:38,288 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:38,288 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:38,288 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:38,293 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:38,298 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:38,299 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:38,299 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:38,299 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:38,299 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:38,305 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:38,310 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:38,310 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:38,310 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:38,310 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,310 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:38,310 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,310 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,310 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,310 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:38,310 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,311 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:38,311 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:38,311 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:38,311 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:38,311 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:38,311 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:38,311 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:40,927 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:41,071 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:41,071 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:41,071 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:41,201 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:41,368 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:41,384 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:41,384 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:41,400 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:41,415 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:41,424 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:41,444 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:41,449 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:41,452 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:41,455 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:41,460 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:41,463 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:41,467 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:41,471 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:41,476 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:41,479 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:41,483 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:41,487 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:41,490 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:41,495 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:41,503 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:41,509 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:41,510 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:41,516 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:41,516 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:41,521 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:41,521 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:41,526 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:41,526 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:41,531 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:41,531 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:41,535 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:41,535 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:41,540 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:41,540 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:41,540 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:41,545 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:41,546 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:41,546 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:41,551 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:41,556 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:41,556 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:41,556 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:41,556 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:41,556 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:41,562 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:41,568 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:41,568 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:41,568 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:41,568 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,568 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:41,568 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,568 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,568 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,568 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:41,568 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,568 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:41,568 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,569 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:41,569 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:41,569 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:41,569 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:41,569 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:41,569 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:41,569 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:41,569 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:41,671 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:41,709 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:41,725 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:41,725 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:41,737 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:41,741 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:41,744 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:41,747 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:41,749 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:41,752 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:41,754 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:41,757 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:41,760 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:41,762 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:41,765 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:41,768 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:41,770 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:41,773 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:41,778 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:41,783 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:41,783 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:41,787 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:41,787 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:41,791 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:41,791 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:41,795 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:41,795 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:41,799 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:41,799 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:41,803 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:41,803 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:41,807 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:41,807 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:41,807 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:41,811 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:41,812 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:41,812 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:41,816 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:41,820 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:41,820 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:41,820 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:41,820 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:41,820 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:41,825 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:41,829 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:41,829 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:41,829 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:41,829 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,829 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:41,829 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,829 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,829 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,829 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:41,829 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,829 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:41,829 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:41,829 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:41,830 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:41,830 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:41,830 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:41,830 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:43,863 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:44,003 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:44,003 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:44,003 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:44,134 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:44,297 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:44,312 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:44,313 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:44,328 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:44,343 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:44,352 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:44,372 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:44,378 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:44,380 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:44,383 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:44,386 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:44,388 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:44,391 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:44,394 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:44,397 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:44,400 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:44,402 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:44,405 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:44,408 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:44,411 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:44,416 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:44,420 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:44,420 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:44,425 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:44,425 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:44,429 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:44,429 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:44,433 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:44,433 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:44,437 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:44,437 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:44,441 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:44,441 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:44,445 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:44,445 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:44,445 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:44,449 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:44,449 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:44,449 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:44,454 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:44,458 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:44,458 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:44,458 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:44,458 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:44,458 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:44,462 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:44,466 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:44,466 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:44,466 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:44,466 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,466 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:44,466 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,466 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,466 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,467 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:44,467 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,467 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:44,467 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,467 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:44,467 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:44,467 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:44,467 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:44,467 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:44,467 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:44,467 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:44,468 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:44,564 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:44,601 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:44,616 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:44,616 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:44,628 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:44,633 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:44,635 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:44,638 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:44,640 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:44,643 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:44,646 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:44,648 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:44,651 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:44,654 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:44,656 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:44,659 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:44,662 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:44,664 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:44,670 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:44,674 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:44,674 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:44,678 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:44,678 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:44,682 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:44,682 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:44,686 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:44,686 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:44,690 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:44,690 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:44,694 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:44,694 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:44,698 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:44,698 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:44,698 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:44,702 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:44,702 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:44,702 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:44,706 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:44,710 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:44,710 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:44,710 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:44,710 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:44,710 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:44,714 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:44,718 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:44,718 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:44,719 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:44,719 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,719 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:44,719 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,719 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,719 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,719 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:44,719 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,719 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:44,719 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:44,719 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:44,719 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:44,719 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:44,719 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:44,719 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:46,690 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:46,827 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:46,827 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:46,827 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:46,955 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:47,120 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:47,136 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:47,136 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:47,151 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:47,166 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:47,175 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:47,195 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:47,200 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:47,203 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:47,206 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:47,208 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:47,211 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:47,213 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:47,216 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:47,219 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:47,222 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:47,224 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:47,227 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:47,229 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:47,232 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:47,238 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:47,242 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:47,242 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:47,246 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:47,246 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:47,250 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:47,250 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:47,254 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:47,254 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:47,258 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:47,258 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:47,262 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:47,262 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:47,266 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:47,266 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:47,266 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:47,270 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:47,270 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:47,270 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:47,274 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:47,278 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:47,278 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:47,278 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:47,278 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:47,278 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:47,282 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:47,286 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:47,286 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:47,286 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:47,287 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,287 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:47,287 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,287 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,287 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,287 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:47,287 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,287 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:47,287 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,287 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:47,287 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:47,287 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:47,287 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:47,287 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:47,287 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:47,287 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:47,288 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:47,387 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:47,425 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:47,440 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:47,441 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:47,453 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:47,458 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:47,460 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:47,463 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:47,465 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:47,468 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:47,471 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:47,474 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:47,476 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:47,479 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:47,482 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:47,485 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:47,487 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:47,490 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:47,496 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:47,500 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:47,500 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:47,504 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:47,504 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:47,508 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:47,508 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:47,512 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:47,512 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:47,516 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:47,517 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:47,520 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:47,521 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:47,525 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:47,525 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:47,525 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:47,529 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:47,529 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:47,529 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:47,533 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:47,537 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:47,537 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:47,537 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:47,537 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:47,537 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:47,541 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:47,545 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:47,545 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:47,545 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:47,545 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,545 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:47,546 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,546 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,546 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,546 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:47,546 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,546 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:47,546 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:47,546 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:47,546 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:47,546 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:47,546 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:47,546 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:51,974 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:52,113 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:52,113 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:52,113 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:52,252 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:52,431 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:52,448 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:52,448 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:52,464 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:52,481 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:52,491 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:52,513 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:52,520 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:52,524 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:52,528 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:52,531 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:52,535 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:52,538 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:52,542 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:52,547 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:52,550 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:52,555 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:52,560 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:52,564 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:52,570 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:52,581 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:52,586 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:52,586 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:52,590 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:52,590 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:52,594 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:52,594 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:52,598 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:52,598 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:52,602 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:52,603 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:52,606 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:52,606 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:52,610 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:52,611 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:52,611 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:52,615 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:52,615 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:52,615 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:52,619 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:52,624 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:52,624 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:52,624 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:52,624 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:52,624 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:52,628 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:52,632 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:52,632 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:52,632 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:52,632 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,632 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:52,632 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,632 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,632 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,632 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:52,633 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,633 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:52,633 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,633 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:52,633 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:52,633 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:52,633 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:52,633 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:52,633 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:52,633 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:52,633 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:52,733 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:52,771 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:52,787 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:52,787 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:52,799 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:52,804 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:52,806 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:52,809 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:52,812 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:52,814 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:52,817 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:52,820 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:52,823 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:52,826 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:52,828 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:52,831 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:52,834 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:52,837 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:52,842 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:52,846 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:52,846 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:52,850 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:52,850 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:52,854 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:52,854 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:52,858 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:52,858 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:52,862 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:52,862 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:52,866 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:52,866 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:52,870 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:52,870 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:52,870 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:52,874 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:52,874 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:52,875 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:52,879 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:52,883 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:52,883 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:52,883 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:52,883 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:52,883 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:52,887 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:52,891 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:52,891 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:52,891 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:52,891 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,891 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:52,891 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,891 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,891 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,891 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:52,891 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,891 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:52,891 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:52,891 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:52,891 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:52,891 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:52,892 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:52,892 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:55,149 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:55,285 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:55,285 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:55,285 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:55,412 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:55,572 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:55,587 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:55,587 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:55,602 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:55,617 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:55,625 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:55,646 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:55,651 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:55,654 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:55,657 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:55,660 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:55,662 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:55,665 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:55,668 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:55,671 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:55,673 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:55,676 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:55,679 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:55,682 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:55,685 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:55,690 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:55,694 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:55,694 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:55,698 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:55,698 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:55,703 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:55,703 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:55,707 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:55,707 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:55,711 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:55,711 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:55,715 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:55,715 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:55,720 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:55,720 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:55,720 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:55,724 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:55,724 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:55,724 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:55,728 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:55,732 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:55,732 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:55,732 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:55,732 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:55,732 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:55,736 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:55,740 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:55,740 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:55,741 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:55,741 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,741 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:55,741 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,741 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,741 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,741 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:55,741 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,741 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:55,741 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,741 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:55,741 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:55,741 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:55,741 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:55,741 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:55,741 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:55,741 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:55,742 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:55,839 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:55,876 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:55,892 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:55,892 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:55,905 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:55,909 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:55,912 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:55,915 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:55,918 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:55,920 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:55,923 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:55,925 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:55,928 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:55,931 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:55,934 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:55,937 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:55,939 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:55,942 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:55,947 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:55,951 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:55,951 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:55,955 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:55,955 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:55,959 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:55,959 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:55,963 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:55,963 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:55,968 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:55,968 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:55,972 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:55,972 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:55,976 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:55,976 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:55,976 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:55,980 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:55,980 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:55,980 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:55,984 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:55,989 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:55,989 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:55,989 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:55,989 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:55,989 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:55,993 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:55,997 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:55,997 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:55,997 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:55,997 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,997 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:55,997 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,997 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,997 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,997 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:55,997 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,997 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:55,997 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:55,998 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:55,998 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:55,998 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:55,998 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:55,998 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:57,941 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:58,076 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:46:58,076 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:46:58,076 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:46:58,202 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:46:58,363 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:58,379 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:58,379 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:58,394 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:58,410 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:58,419 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:58,439 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:58,445 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:58,447 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:58,450 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:58,453 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:58,456 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:58,458 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:58,461 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:58,464 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:58,466 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:58,469 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:58,472 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:58,474 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:58,477 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:58,482 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:58,486 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:58,487 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:58,491 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:58,491 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:58,495 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:58,495 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:58,499 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:58,499 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:58,503 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:58,503 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:58,507 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:58,507 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:58,511 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:58,511 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:58,511 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:58,515 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:58,515 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:58,515 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:58,520 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:58,524 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:58,524 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:58,524 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:58,524 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:58,524 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:58,528 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:58,532 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:58,532 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:58,532 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:58,532 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,532 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:58,532 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,532 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,532 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,532 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:58,532 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,532 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:58,532 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,532 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:58,533 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:58,533 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:58,533 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:58,533 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:46:58,533 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:46:58,533 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:46:58,533 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:46:58,631 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:46:58,668 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:46:58,684 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:46:58,684 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:46:58,696 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:46:58,701 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:46:58,703 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:46:58,706 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:46:58,708 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:46:58,711 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:46:58,714 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:46:58,716 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:46:58,719 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:46:58,722 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:46:58,724 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:46:58,727 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:46:58,730 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:46:58,733 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:46:58,738 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:46:58,742 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:58,742 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:58,746 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:46:58,746 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:46:58,750 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:58,750 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:46:58,754 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:58,754 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:46:58,758 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:46:58,758 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:46:58,762 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:46:58,763 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:46:58,767 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:46:58,767 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:46:58,767 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:46:58,772 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:46:58,772 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:46:58,772 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:46:58,776 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:46:58,780 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:46:58,780 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:46:58,780 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:46:58,780 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:46:58,780 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:46:58,785 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:46:58,789 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:46:58,789 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:46:58,789 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:46:58,789 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,789 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:46:58,789 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,789 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,789 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,789 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:46:58,789 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,789 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:46:58,789 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:46:58,789 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:46:58,789 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:46:58,789 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:46:58,789 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:46:58,789 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:47:13,095 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:47:13,230 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 13:47:13,230 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 13:47:13,230 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 13:47:13,357 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 13:47:13,517 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:47:13,532 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:47:13,532 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:47:13,547 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:47:13,562 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:47:13,571 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:47:13,591 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:47:13,597 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:47:13,600 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:47:13,602 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:47:13,605 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:47:13,608 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:47:13,610 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:47:13,613 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:47:13,616 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:47:13,619 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:47:13,621 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:47:13,624 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:47:13,626 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:47:13,629 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:47:13,634 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:47:13,638 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:47:13,638 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:47:13,642 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:47:13,642 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:47:13,646 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:47:13,646 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:47:13,650 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:47:13,650 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:47:13,654 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:47:13,654 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:47:13,658 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:47:13,659 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:47:13,663 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:47:13,663 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:47:13,663 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:47:13,667 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:47:13,667 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:47:13,667 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:47:13,672 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:47:13,676 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:47:13,676 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:47:13,676 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:47:13,676 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:47:13,676 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:47:13,680 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:47:13,684 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:47:13,685 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:47:13,685 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:47:13,685 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,685 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:47:13,685 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,685 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,685 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,685 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:47:13,685 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,685 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:47:13,685 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,685 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:47:13,685 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:47:13,685 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:47:13,685 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:47:13,686 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 13:47:13,686 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 13:47:13,686 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 13:47:13,686 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 13:47:13,786 - INFO - âœ… Successfully imported LLMService!
2025-09-21 13:47:13,823 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 13:47:13,839 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 13:47:13,839 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 13:47:13,852 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 13:47:13,856 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 13:47:13,859 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 13:47:13,862 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 13:47:13,864 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 13:47:13,867 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 13:47:13,870 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 13:47:13,872 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 13:47:13,875 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 13:47:13,878 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 13:47:13,881 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 13:47:13,884 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 13:47:13,887 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 13:47:13,890 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 13:47:13,895 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 13:47:13,899 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:47:13,899 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 13:47:13,903 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 13:47:13,903 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 13:47:13,907 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:47:13,907 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 13:47:13,912 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:47:13,912 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 13:47:13,916 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 13:47:13,916 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 13:47:13,920 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 13:47:13,920 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 13:47:13,924 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 13:47:13,924 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 13:47:13,925 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 13:47:13,929 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 13:47:13,929 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 13:47:13,929 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 13:47:13,933 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 13:47:13,937 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 13:47:13,937 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 13:47:13,937 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 13:47:13,938 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 13:47:13,938 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 13:47:13,942 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 13:47:13,946 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 13:47:13,946 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 13:47:13,946 - DEBUG - ðŸ” Relationship Details:
2025-09-21 13:47:13,946 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,946 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 13:47:13,946 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,946 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,946 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,946 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 13:47:13,946 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,947 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 13:47:13,947 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 13:47:13,947 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 13:47:13,947 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 13:47:13,947 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 13:47:13,947 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 13:47:13,947 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:08:09,924 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:08:10,067 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:08:10,067 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:08:10,067 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:08:10,213 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:08:10,379 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:08:10,395 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:08:10,395 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:08:10,411 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:08:10,426 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:08:10,435 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:08:10,455 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:08:10,460 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:08:10,463 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:08:10,466 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:08:10,468 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:08:10,471 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:08:10,474 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:08:10,476 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:08:10,479 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:08:10,482 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:08:10,485 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:08:10,487 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:08:10,490 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:08:10,493 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:08:10,498 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:08:10,502 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:08:10,502 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:08:10,506 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:08:10,506 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:08:10,510 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:08:10,510 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:08:10,514 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:08:10,514 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:08:10,518 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:08:10,518 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:08:10,522 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:08:10,522 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:08:10,526 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:08:10,526 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:08:10,526 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:08:10,530 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:08:10,530 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:08:10,530 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:08:10,534 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:08:10,538 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:08:10,539 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:08:10,539 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:08:10,539 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:08:10,539 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:08:10,543 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:08:10,547 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:08:10,547 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:08:10,547 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:08:10,547 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,547 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:08:10,547 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,547 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,547 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,547 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:08:10,547 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,547 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:08:10,547 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,547 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:08:10,547 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:08:10,547 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:08:10,547 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:08:10,547 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:08:10,547 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:08:10,547 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:08:10,548 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:08:10,651 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:08:10,691 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:08:10,707 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:08:10,708 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:08:10,724 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:08:10,730 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:08:10,733 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:08:10,737 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:08:10,741 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:08:10,744 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:08:10,748 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:08:10,753 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:08:10,757 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:08:10,761 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:08:10,766 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:08:10,770 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:08:10,773 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:08:10,776 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:08:10,781 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:08:10,785 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:08:10,785 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:08:10,789 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:08:10,789 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:08:10,793 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:08:10,793 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:08:10,797 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:08:10,797 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:08:10,801 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:08:10,801 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:08:10,805 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:08:10,805 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:08:10,809 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:08:10,809 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:08:10,810 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:08:10,813 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:08:10,814 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:08:10,814 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:08:10,818 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:08:10,822 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:08:10,823 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:08:10,823 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:08:10,823 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:08:10,823 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:08:10,827 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:08:10,831 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:08:10,831 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:08:10,831 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:08:10,831 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,831 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:08:10,831 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,831 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,831 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,831 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:08:10,831 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,831 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:08:10,832 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:08:10,832 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:08:10,832 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:08:10,832 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:08:10,832 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:08:10,832 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:09:20,312 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:09:20,446 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:09:20,446 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:09:20,447 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:09:20,573 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:09:20,734 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:09:20,749 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:09:20,749 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:09:20,764 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:09:20,779 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:09:20,788 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:09:20,808 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:09:20,813 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:09:20,816 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:09:20,819 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:09:20,821 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:09:20,824 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:09:20,826 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:09:20,829 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:09:20,832 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:09:20,835 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:09:20,837 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:09:20,840 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:09:20,842 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:09:20,845 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:09:20,851 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:09:20,855 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:09:20,855 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:09:20,859 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:09:20,859 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:09:20,863 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:09:20,863 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:09:20,867 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:09:20,867 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:09:20,871 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:09:20,871 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:09:20,875 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:09:20,875 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:09:20,879 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:09:20,879 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:09:20,879 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:09:20,883 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:09:20,883 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:09:20,883 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:09:20,887 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:09:20,891 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:09:20,891 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:09:20,891 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:09:20,892 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:09:20,892 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:09:20,895 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:09:20,899 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:09:20,899 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:09:20,899 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:09:20,899 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:09:20,899 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:09:20,900 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:09:20,900 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:09:20,900 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:09:20,900 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:09:20,900 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:09:20,900 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:09:20,900 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:09:20,900 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:09:20,900 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:09:20,900 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:09:20,900 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:09:20,900 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:09:20,900 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:09:20,900 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:09:20,900 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:09:20,997 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:09:29,152 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:09:29,295 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:09:29,295 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:09:29,295 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:09:29,427 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:09:29,590 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:09:29,606 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:09:29,606 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:09:29,621 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:09:29,637 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:09:29,646 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:09:29,666 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:09:29,671 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:09:29,674 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:09:29,677 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:09:29,680 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:09:29,682 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:09:29,685 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:09:29,688 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:09:29,691 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:09:29,694 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:09:29,697 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:09:29,700 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:09:29,702 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:09:29,705 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:09:29,711 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:09:29,715 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:09:29,715 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:09:29,719 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:09:29,719 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:09:29,723 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:09:29,723 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:09:29,728 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:09:29,728 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:09:29,732 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:09:29,732 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:09:29,736 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:09:29,736 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:09:29,740 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:09:29,740 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:09:29,740 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:09:29,744 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:09:29,745 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:09:29,745 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:09:29,749 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:09:29,753 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:09:29,753 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:09:29,753 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:09:29,753 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:09:29,753 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:09:29,757 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:09:29,761 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:09:29,762 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:09:29,762 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:09:29,762 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:09:29,762 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:09:29,762 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:09:29,762 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:09:29,762 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:09:29,762 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:09:29,762 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:09:29,762 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:09:29,762 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:09:29,762 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:09:29,762 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:09:29,762 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:09:29,762 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:09:29,762 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:09:29,762 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:09:29,762 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:09:29,763 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:09:29,864 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:17:04,050 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:17:04,185 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:17:04,185 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:17:04,185 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:17:04,313 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:17:04,475 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:17:04,491 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:17:04,491 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:17:04,507 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:17:04,522 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:17:04,531 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:17:04,551 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:17:04,557 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:17:04,559 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:17:04,562 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:17:04,565 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:17:04,567 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:17:04,570 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:17:04,572 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:17:04,575 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:17:04,578 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:17:04,581 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:17:04,584 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:17:04,586 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:17:04,589 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:17:04,594 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:17:04,598 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:17:04,598 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:17:04,602 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:17:04,602 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:17:04,606 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:17:04,606 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:17:04,610 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:17:04,610 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:17:04,614 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:17:04,614 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:17:04,618 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:17:04,618 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:17:04,622 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:17:04,622 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:17:04,622 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:17:04,626 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:17:04,626 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:17:04,626 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:17:04,631 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:17:04,635 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:17:04,635 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:17:04,635 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:17:04,635 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:17:04,635 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:17:04,639 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:17:04,643 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:17:04,643 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:17:04,643 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:17:04,643 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:17:04,643 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:17:04,643 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:17:04,643 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:17:04,643 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:17:04,644 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:17:04,644 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:17:04,644 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:17:04,644 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:17:04,644 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:17:04,644 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:17:04,644 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:17:04,644 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:17:04,644 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:17:04,644 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:17:04,644 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:17:04,644 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:17:04,744 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:50:00,146 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:00,281 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:50:00,281 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:50:00,281 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:50:00,407 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:50:00,566 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:00,581 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:00,581 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:00,596 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:00,611 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:00,620 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:50:00,724 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:50:00,730 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:50:00,733 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:50:00,735 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:50:00,739 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:50:00,741 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:50:00,744 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:50:00,747 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:50:00,750 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:50:00,752 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:50:00,755 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:50:00,758 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:50:00,761 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:50:00,764 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:50:00,770 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:50:00,774 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:00,774 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:00,778 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:50:00,778 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:50:00,782 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:00,782 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:00,786 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:00,786 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:50:00,790 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:00,790 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:50:00,794 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:50:00,794 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:50:00,798 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:50:00,798 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:50:00,798 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:50:00,802 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:50:00,802 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:50:00,802 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:50:00,807 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:50:00,811 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:50:00,811 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:50:00,811 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:50:00,811 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:50:00,811 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:50:00,815 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:50:00,819 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:50:00,819 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:50:00,819 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:50:00,819 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:00,819 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:50:00,819 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:00,819 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:50:00,820 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:50:00,820 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:50:00,820 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:50:00,820 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:50:00,820 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:50:00,820 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:50:00,820 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:50:00,820 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:50:00,820 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:50:00,820 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:50:00,820 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:50:00,820 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:50:00,821 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:00,917 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:50:09,266 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:09,402 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:50:09,403 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:50:09,403 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:50:09,532 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:50:09,702 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:09,718 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:09,718 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:09,733 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:09,748 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:09,757 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:50:09,776 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:50:09,782 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:50:09,785 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:50:09,787 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:50:09,790 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:50:09,793 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:50:09,795 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:50:09,798 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:50:09,801 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:50:09,803 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:50:09,806 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:50:09,809 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:50:09,811 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:50:09,814 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:50:09,819 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:50:09,824 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:09,824 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:09,828 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:50:09,828 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:50:09,832 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:09,832 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:09,836 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:09,836 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:50:09,840 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:09,840 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:50:09,844 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:50:09,844 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:50:09,848 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:50:09,848 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:50:09,848 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:50:09,852 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:50:09,852 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:50:09,852 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:50:09,856 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:50:09,860 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:50:09,861 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:50:09,861 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:50:09,861 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:50:09,861 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:50:09,865 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:50:09,869 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:50:09,869 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:50:09,869 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:50:09,869 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:09,869 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:50:09,869 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:09,869 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:50:09,869 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:50:09,869 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:50:09,869 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:50:09,869 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:50:09,869 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:50:09,869 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:50:09,869 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:50:09,869 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:50:09,869 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:50:09,869 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:50:09,869 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:50:09,870 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:50:09,870 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:09,968 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:50:20,139 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:20,276 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:50:20,277 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:50:20,277 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:50:20,405 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:50:20,566 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:20,581 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:20,581 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:20,596 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:20,612 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:20,620 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:50:20,640 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:50:20,645 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:50:20,648 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:50:20,651 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:50:20,653 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:50:20,656 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:50:20,659 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:50:20,662 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:50:20,665 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:50:20,667 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:50:20,670 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:50:20,673 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:50:20,675 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:50:20,678 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:50:20,683 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:50:20,687 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:20,687 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:20,691 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:50:20,691 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:50:20,695 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:20,695 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:20,699 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:20,699 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:50:20,703 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:20,703 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:50:20,707 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:50:20,707 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:50:20,713 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:50:20,713 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:50:20,713 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:50:20,717 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:50:20,717 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:50:20,717 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:50:20,722 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:50:20,728 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:50:20,728 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:50:20,728 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:50:20,728 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:50:20,728 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:50:20,736 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:50:20,743 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:50:20,743 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:50:20,743 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:50:20,743 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:20,743 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:50:20,743 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:20,743 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:50:20,743 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:50:20,743 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:50:20,744 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:50:20,744 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:50:20,744 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:50:20,744 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:50:20,744 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:50:20,744 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:50:20,744 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:50:20,744 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:50:20,744 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:50:20,744 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:50:20,744 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:20,890 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:50:23,464 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:23,604 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:50:23,604 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:50:23,604 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:50:23,736 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:50:23,901 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:23,917 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:23,917 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:23,932 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:23,947 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:23,956 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:50:23,977 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:50:23,982 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:50:23,985 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:50:23,988 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:50:23,991 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:50:23,994 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:50:23,996 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:50:23,999 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:50:24,002 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:50:24,005 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:50:24,008 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:50:24,011 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:50:24,014 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:50:24,017 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:50:24,022 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:50:24,026 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:24,026 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:24,031 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:50:24,031 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:50:24,036 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:24,036 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:24,040 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:24,040 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:50:24,044 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:24,044 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:50:24,049 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:50:24,049 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:50:24,053 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:50:24,053 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:50:24,053 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:50:24,057 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:50:24,057 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:50:24,057 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:50:24,061 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:50:24,066 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:50:24,066 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:50:24,066 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:50:24,066 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:50:24,066 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:50:24,070 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:50:24,074 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:50:24,074 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:50:24,074 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:50:24,074 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:24,074 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:50:24,074 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:24,075 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:50:24,075 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:50:24,075 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:50:24,075 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:50:24,075 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:50:24,075 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:50:24,075 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:50:24,075 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:50:24,075 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:50:24,075 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:50:24,075 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:50:24,075 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:50:24,075 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:50:24,075 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:24,176 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:50:26,502 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:26,639 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:50:26,639 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:50:26,639 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:50:26,768 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:50:26,929 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:26,945 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:26,945 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:26,960 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:26,975 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:26,984 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:50:27,004 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:50:27,009 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:50:27,012 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:50:27,015 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:50:27,018 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:50:27,021 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:50:27,023 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:50:27,026 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:50:27,029 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:50:27,032 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:50:27,035 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:50:27,038 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:50:27,040 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:50:27,043 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:50:27,049 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:50:27,053 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:27,053 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:27,057 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:50:27,057 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:50:27,061 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:27,061 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:27,067 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:27,067 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:50:27,071 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:27,071 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:50:27,075 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:50:27,075 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:50:27,079 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:50:27,079 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:50:27,079 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:50:27,083 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:50:27,083 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:50:27,083 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:50:27,087 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:50:27,092 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:50:27,092 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:50:27,092 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:50:27,092 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:50:27,093 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:50:27,097 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:50:27,101 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:50:27,101 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:50:27,102 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:50:27,102 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:27,102 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:50:27,102 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:27,102 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:50:27,102 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:50:27,102 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:50:27,102 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:50:27,102 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:50:27,102 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:50:27,102 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:50:27,102 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:50:27,102 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:50:27,102 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:50:27,102 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:50:27,102 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:50:27,102 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:50:27,103 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:27,201 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:50:56,829 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:56,971 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:50:56,972 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:50:56,972 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:50:57,101 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:50:57,263 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:57,279 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:57,279 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:57,295 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:50:57,310 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:50:57,319 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:50:57,339 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:50:57,345 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:50:57,347 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:50:57,350 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:50:57,354 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:50:57,357 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:50:57,359 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:50:57,362 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:50:57,365 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:50:57,368 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:50:57,370 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:50:57,373 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:50:57,376 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:50:57,379 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:50:57,384 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:50:57,388 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:57,388 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:57,392 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:50:57,392 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:50:57,396 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:57,396 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:50:57,400 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:57,400 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:50:57,404 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:50:57,404 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:50:57,408 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:50:57,408 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:50:57,412 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:50:57,412 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:50:57,412 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:50:57,416 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:50:57,416 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:50:57,416 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:50:57,420 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:50:57,424 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:50:57,424 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:50:57,424 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:50:57,424 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:50:57,424 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:50:57,428 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:50:57,432 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:50:57,432 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:50:57,433 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:50:57,433 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:57,433 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:50:57,433 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:50:57,433 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:50:57,433 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:50:57,433 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:50:57,433 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:50:57,433 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:50:57,433 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:50:57,433 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:50:57,433 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:50:57,433 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:50:57,433 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:50:57,433 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:50:57,433 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:50:57,433 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:50:57,434 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:50:57,532 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:51:01,962 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:51:02,104 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 14:51:02,105 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 14:51:02,105 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 14:51:02,238 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 14:51:02,408 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:51:02,425 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:51:02,425 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:51:02,440 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:51:02,456 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:51:02,464 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:51:02,485 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:51:02,491 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:51:02,494 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:51:02,496 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:51:02,499 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:51:02,502 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:51:02,504 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:51:02,507 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:51:02,511 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:51:02,513 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:51:02,516 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:51:02,519 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:51:02,522 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:51:02,525 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:51:02,531 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:51:02,535 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:51:02,535 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:51:02,539 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:51:02,539 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:51:02,543 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:51:02,543 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:51:02,547 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:51:02,547 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:51:02,552 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:51:02,552 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:51:02,556 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:51:02,556 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:51:02,560 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:51:02,560 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:51:02,560 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:51:02,564 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:51:02,564 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:51:02,564 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:51:02,568 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:51:02,573 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:51:02,573 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:51:02,573 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:51:02,573 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:51:02,573 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:51:02,577 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:51:02,581 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:51:02,581 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:51:02,581 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:51:02,581 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,581 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:51:02,581 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,581 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,581 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,581 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:51:02,581 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,582 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:51:02,582 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,582 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:51:02,582 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:51:02,582 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:51:02,582 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:51:02,582 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 14:51:02,582 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 14:51:02,582 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 14:51:02,582 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 14:51:02,684 - INFO - âœ… Successfully imported LLMService!
2025-09-21 14:51:02,722 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 14:51:02,738 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 14:51:02,738 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 14:51:02,751 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 14:51:02,756 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 14:51:02,758 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 14:51:02,761 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 14:51:02,764 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 14:51:02,766 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 14:51:02,769 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 14:51:02,772 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 14:51:02,775 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 14:51:02,777 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 14:51:02,780 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 14:51:02,783 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 14:51:02,786 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 14:51:02,789 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 14:51:02,794 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 14:51:02,798 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:51:02,798 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 14:51:02,802 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 14:51:02,802 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 14:51:02,806 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:51:02,806 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 14:51:02,810 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:51:02,810 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 14:51:02,814 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 14:51:02,814 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 14:51:02,818 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 14:51:02,818 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 14:51:02,822 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 14:51:02,822 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 14:51:02,822 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 14:51:02,826 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 14:51:02,826 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 14:51:02,827 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 14:51:02,831 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 14:51:02,835 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 14:51:02,835 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 14:51:02,835 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 14:51:02,835 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 14:51:02,835 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 14:51:02,839 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 14:51:02,844 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 14:51:02,844 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 14:51:02,844 - DEBUG - ðŸ” Relationship Details:
2025-09-21 14:51:02,844 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,844 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 14:51:02,844 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,844 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,844 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,844 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 14:51:02,844 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,844 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 14:51:02,844 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 14:51:02,844 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 14:51:02,845 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 14:51:02,845 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 14:51:02,845 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 14:51:02,845 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 15:25:35,089 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 15:25:35,225 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-21 15:25:35,225 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-21 15:25:35,225 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-21 15:25:35,353 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-21 15:25:35,513 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 15:25:35,529 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 15:25:35,529 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 15:25:35,544 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 15:25:35,559 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 15:25:35,568 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 15:25:35,588 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 15:25:35,593 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 15:25:35,596 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 15:25:35,599 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 15:25:35,602 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 15:25:35,604 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 15:25:35,607 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 15:25:35,609 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 15:25:35,612 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 15:25:35,615 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 15:25:35,618 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 15:25:35,621 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 15:25:35,624 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 15:25:35,627 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 15:25:35,632 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 15:25:35,636 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 15:25:35,637 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 15:25:35,641 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 15:25:35,641 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 15:25:35,645 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 15:25:35,645 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 15:25:35,649 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 15:25:35,649 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 15:25:35,653 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 15:25:35,653 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 15:25:35,657 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 15:25:35,657 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 15:25:35,661 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 15:25:35,661 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 15:25:35,661 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 15:25:35,666 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 15:25:35,666 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 15:25:35,666 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 15:25:35,670 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 15:25:35,674 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 15:25:35,675 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 15:25:35,675 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 15:25:35,675 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 15:25:35,675 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 15:25:35,679 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 15:25:35,683 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 15:25:35,683 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 15:25:35,683 - DEBUG - ðŸ” Relationship Details:
2025-09-21 15:25:35,683 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,683 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 15:25:35,683 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,683 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,683 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,683 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 15:25:35,683 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,683 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 15:25:35,683 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,684 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 15:25:35,684 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 15:25:35,684 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 15:25:35,684 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 15:25:35,684 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-21 15:25:35,684 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-21 15:25:35,684 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-21 15:25:35,684 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-21 15:25:35,782 - INFO - âœ… Successfully imported LLMService!
2025-09-21 15:25:35,819 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-21 15:25:35,835 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-21 15:25:35,836 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-21 15:25:35,849 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-21 15:25:35,855 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-21 15:25:35,858 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-21 15:25:35,862 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-21 15:25:35,865 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-21 15:25:35,869 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-21 15:25:35,872 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-21 15:25:35,875 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-21 15:25:35,878 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-21 15:25:35,881 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-21 15:25:35,883 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-21 15:25:35,887 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-21 15:25:35,889 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-21 15:25:35,892 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-21 15:25:35,897 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-21 15:25:35,901 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 15:25:35,901 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-21 15:25:35,905 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-21 15:25:35,905 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-21 15:25:35,909 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 15:25:35,909 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-21 15:25:35,913 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 15:25:35,913 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-21 15:25:35,917 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-21 15:25:35,917 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-21 15:25:35,921 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-21 15:25:35,921 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-21 15:25:35,925 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-21 15:25:35,925 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-21 15:25:35,925 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-21 15:25:35,929 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-21 15:25:35,929 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-21 15:25:35,929 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-21 15:25:35,933 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-21 15:25:35,938 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-21 15:25:35,938 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-21 15:25:35,938 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-21 15:25:35,938 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-21 15:25:35,938 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-21 15:25:35,942 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-21 15:25:35,946 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-21 15:25:35,946 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-21 15:25:35,946 - DEBUG - ðŸ” Relationship Details:
2025-09-21 15:25:35,946 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,946 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-21 15:25:35,946 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,946 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,946 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,946 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-21 15:25:35,946 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,946 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-21 15:25:35,946 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-21 15:25:35,946 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-21 15:25:35,946 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-21 15:25:35,946 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-21 15:25:35,946 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-21 15:25:35,946 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 01:12:59,425 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 01:12:59,753 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 01:12:59,753 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 01:12:59,753 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 01:13:00,197 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 01:13:00,506 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:13:00,531 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:13:00,531 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:13:00,546 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:13:00,561 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:13:00,636 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 01:13:01,621 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 01:13:01,654 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 01:13:01,657 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 01:13:01,660 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 01:13:01,663 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 01:13:01,666 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 01:13:01,668 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 01:13:01,682 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 01:13:01,685 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 01:13:01,688 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 01:13:01,691 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 01:13:01,694 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 01:13:01,697 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 01:13:01,700 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 01:13:01,707 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 01:13:01,713 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:13:01,713 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 01:13:01,718 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 01:13:01,718 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 01:13:01,723 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:13:01,723 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 01:13:01,728 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:13:01,728 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 01:13:01,734 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:13:01,734 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 01:13:01,740 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 01:13:01,741 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 01:13:01,746 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 01:13:01,746 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 01:13:01,746 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 01:13:01,751 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 01:13:01,751 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 01:13:01,751 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 01:13:01,755 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 01:13:01,760 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 01:13:01,760 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 01:13:01,760 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 01:13:01,760 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 01:13:01,760 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 01:13:01,764 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 01:13:01,768 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 01:13:01,768 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 01:13:01,768 - DEBUG - ðŸ” Relationship Details:
2025-09-23 01:13:01,768 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:13:01,768 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 01:13:01,769 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:13:01,769 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 01:13:01,769 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 01:13:01,769 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 01:13:01,769 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 01:13:01,769 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 01:13:01,769 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 01:13:01,769 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 01:13:01,769 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 01:13:01,769 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 01:13:01,769 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 01:13:01,769 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 01:13:01,770 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 01:13:01,770 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 01:13:01,770 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 01:13:02,313 - INFO - âœ… Successfully imported LLMService!
2025-09-23 01:13:02,368 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:13:02,384 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:13:02,384 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 01:13:02,396 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 01:13:02,400 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 01:13:02,409 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 01:13:02,412 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 01:13:02,414 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 01:13:02,416 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 01:13:02,419 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 01:13:02,422 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 01:13:02,425 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 01:13:02,428 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 01:13:02,430 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 01:13:02,433 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 01:13:02,436 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 01:13:02,439 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 01:13:02,444 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 01:13:02,448 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:13:02,448 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 01:13:02,453 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 01:13:02,453 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 01:13:02,457 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:13:02,457 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 01:13:02,461 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:13:02,461 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 01:13:02,465 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:13:02,465 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 01:13:02,469 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 01:13:02,469 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 01:13:02,473 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 01:13:02,473 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 01:13:02,473 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 01:13:02,477 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 01:13:02,477 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 01:13:02,477 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 01:13:02,481 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 01:13:02,486 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 01:13:02,486 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 01:13:02,486 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 01:13:02,486 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 01:13:02,486 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 01:13:02,490 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 01:13:02,494 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 01:13:02,494 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 01:13:02,494 - DEBUG - ðŸ” Relationship Details:
2025-09-23 01:13:02,494 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:13:02,494 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 01:13:02,494 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:13:02,494 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 01:13:02,495 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 01:13:02,495 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 01:13:02,495 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 01:13:02,495 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 01:13:02,495 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 01:13:02,495 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 01:13:02,495 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 01:13:02,495 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 01:13:02,495 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 01:13:02,495 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 01:37:50,891 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 01:37:51,026 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 01:37:51,026 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 01:37:51,027 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 01:37:51,154 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 01:37:51,313 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:51,329 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:37:51,329 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:51,344 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:51,359 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:37:51,367 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 01:37:51,563 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 01:37:51,569 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 01:37:51,572 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 01:37:51,575 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 01:37:51,578 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 01:37:51,580 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 01:37:51,583 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 01:37:51,586 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 01:37:51,589 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 01:37:51,592 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 01:37:51,594 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 01:37:51,598 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 01:37:51,600 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 01:37:51,603 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 01:37:51,608 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 01:37:51,613 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:51,613 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:51,617 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 01:37:51,617 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 01:37:51,621 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:51,621 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:51,625 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:51,625 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 01:37:51,629 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:51,629 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 01:37:51,633 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 01:37:51,633 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 01:37:51,637 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 01:37:51,637 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 01:37:51,638 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 01:37:51,642 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 01:37:51,642 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 01:37:51,642 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 01:37:51,646 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 01:37:51,650 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 01:37:51,650 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 01:37:51,651 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 01:37:51,651 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 01:37:51,651 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 01:37:51,655 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 01:37:51,659 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 01:37:51,659 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 01:37:51,659 - DEBUG - ðŸ” Relationship Details:
2025-09-23 01:37:51,659 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,659 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 01:37:51,659 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,659 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,659 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,659 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 01:37:51,659 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,659 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 01:37:51,659 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,659 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 01:37:51,659 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 01:37:51,659 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 01:37:51,659 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 01:37:51,660 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 01:37:51,660 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 01:37:51,660 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 01:37:51,660 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 01:37:51,773 - INFO - âœ… Successfully imported LLMService!
2025-09-23 01:37:51,810 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:51,826 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:37:51,826 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 01:37:51,838 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 01:37:51,843 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 01:37:51,845 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 01:37:51,848 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 01:37:51,850 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 01:37:51,853 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 01:37:51,855 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 01:37:51,858 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 01:37:51,861 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 01:37:51,863 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 01:37:51,866 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 01:37:51,870 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 01:37:51,872 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 01:37:51,875 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 01:37:51,880 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 01:37:51,884 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:51,884 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:51,888 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 01:37:51,888 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 01:37:51,892 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:51,892 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:51,896 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:51,896 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 01:37:51,900 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:51,901 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 01:37:51,905 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 01:37:51,905 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 01:37:51,909 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 01:37:51,909 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 01:37:51,909 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 01:37:51,913 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 01:37:51,913 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 01:37:51,913 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 01:37:51,917 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 01:37:51,922 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 01:37:51,922 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 01:37:51,922 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 01:37:51,922 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 01:37:51,922 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 01:37:51,926 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 01:37:51,930 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 01:37:51,930 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 01:37:51,930 - DEBUG - ðŸ” Relationship Details:
2025-09-23 01:37:51,930 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,930 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 01:37:51,930 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,930 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,930 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,930 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 01:37:51,931 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,931 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 01:37:51,931 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 01:37:51,931 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 01:37:51,931 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 01:37:51,931 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 01:37:51,931 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 01:37:51,931 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 01:37:53,900 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 01:37:54,035 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 01:37:54,035 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 01:37:54,036 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 01:37:54,178 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 01:37:54,341 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:54,356 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:37:54,356 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:54,371 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:54,386 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:37:54,395 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 01:37:54,414 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 01:37:54,420 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 01:37:54,422 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 01:37:54,425 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 01:37:54,428 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 01:37:54,431 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 01:37:54,434 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 01:37:54,447 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 01:37:54,450 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 01:37:54,453 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 01:37:54,456 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 01:37:54,460 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 01:37:54,462 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 01:37:54,465 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 01:37:54,470 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 01:37:54,474 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:54,474 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:54,479 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 01:37:54,479 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 01:37:54,482 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:54,483 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:54,486 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:54,486 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 01:37:54,490 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:54,490 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 01:37:54,494 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 01:37:54,494 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 01:37:54,499 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 01:37:54,499 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 01:37:54,499 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 01:37:54,503 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 01:37:54,503 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 01:37:54,503 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 01:37:54,507 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 01:37:54,511 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 01:37:54,511 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 01:37:54,511 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 01:37:54,511 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 01:37:54,511 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 01:37:54,515 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 01:37:54,519 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 01:37:54,519 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 01:37:54,519 - DEBUG - ðŸ” Relationship Details:
2025-09-23 01:37:54,519 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,519 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 01:37:54,519 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,519 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,519 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,519 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 01:37:54,519 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,519 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 01:37:54,519 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,520 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 01:37:54,520 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 01:37:54,520 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 01:37:54,520 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 01:37:54,520 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 01:37:54,520 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 01:37:54,520 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 01:37:54,520 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 01:37:54,618 - INFO - âœ… Successfully imported LLMService!
2025-09-23 01:37:54,654 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:54,669 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:37:54,670 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 01:37:54,682 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 01:37:54,686 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 01:37:54,688 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 01:37:54,691 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 01:37:54,694 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 01:37:54,697 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 01:37:54,700 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 01:37:54,702 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 01:37:54,705 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 01:37:54,708 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 01:37:54,711 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 01:37:54,714 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 01:37:54,717 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 01:37:54,720 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 01:37:54,725 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 01:37:54,726 - ERROR - âŒ Error getting foreign keys for table alphabeta: (pyodbc.OperationalError) ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')
[SQL: WITH fk_info AS (
    SELECT
        ischema_ref_con.constraint_schema,
        ischema_ref_con.constraint_name,
        ischema_key_col.ordinal_position,
        ischema_key_col.table_schema,
        ischema_key_col.table_name,
        ischema_ref_con.unique_constraint_schema,
        ischema_ref_con.unique_constraint_name,
        ischema_ref_con.match_option,
        ischema_ref_con.update_rule,
        ischema_ref_con.delete_rule,
        ischema_key_col.column_name AS constrained_column
    FROM
        INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS ischema_ref_con
        INNER JOIN
        INFORMATION_SCHEMA.KEY_COLUMN_USAGE ischema_key_col ON
            ischema_key_col.table_schema = ischema_ref_con.constraint_schema
            AND ischema_key_col.constraint_name =
            ischema_ref_con.constraint_name
    WHERE ischema_key_col.table_name = CAST(? AS NVARCHAR(max))
        AND ischema_key_col.table_schema = CAST(? AS NVARCHAR(max))
),
constraint_info AS (
    SELECT
        ischema_key_col.constraint_schema,
        ischema_key_col.constraint_name,
        ischema_key_col.ordinal_position,
        ischema_key_col.table_schema,
        ischema_key_col.table_name,
        ischema_key_col.column_name
    FROM
        INFORMATION_SCHEMA.KEY_COLUMN_USAGE ischema_key_col
),
index_info AS (
    SELECT
        sys.schemas.name AS index_schema,
        sys.indexes.name AS index_name,
        sys.index_columns.key_ordinal AS ordinal_position,
        sys.schemas.name AS table_schema,
        sys.objects.name AS table_name,
        sys.columns.name AS column_name
    FROM
        sys.indexes
        INNER JOIN
        sys.objects ON
            sys.objects.object_id = sys.indexes.object_id
        INNER JOIN
        sys.schemas ON
            sys.schemas.schema_id = sys.objects.schema_id
        INNER JOIN
        sys.index_columns ON
            sys.index_columns.object_id = sys.objects.object_id
            AND sys.index_columns.index_id = sys.indexes.index_id
        INNER JOIN
        sys.columns ON
            sys.columns.object_id = sys.indexes.object_id
            AND sys.columns.column_id = sys.index_columns.column_id
)
    SELECT
        fk_info.constraint_schema,
        fk_info.constraint_name,
        fk_info.ordinal_position,
        fk_info.constrained_column,
        constraint_info.table_schema AS referred_table_schema,
        constraint_info.table_name AS referred_table_name,
        constraint_info.column_name AS referred_column,
        fk_info.match_option,
        fk_info.update_rule,
        fk_info.delete_rule
    FROM
        fk_info INNER JOIN constraint_info ON
            constraint_info.constraint_schema =
                fk_info.unique_constraint_schema
            AND constraint_info.constraint_name =
                fk_info.unique_constraint_name
            AND constraint_info.ordinal_position = fk_info.ordinal_position
    UNION
    SELECT
        fk_info.constraint_schema,
        fk_info.constraint_name,
        fk_info.ordinal_position,
        fk_info.constrained_column,
        index_info.table_schema AS referred_table_schema,
        index_info.table_name AS referred_table_name,
        index_info.column_name AS referred_column,
        fk_info.match_option,
        fk_info.update_rule,
        fk_info.delete_rule
    FROM
        fk_info INNER JOIN index_info ON
            index_info.index_schema = fk_info.unique_constraint_schema
            AND index_info.index_name = fk_info.unique_constraint_name
            AND index_info.ordinal_position = fk_info.ordinal_position

    ORDER BY fk_info.constraint_schema, fk_info.constraint_name,
        fk_info.ordinal_position
]
[parameters: ('alphabeta', 'dbo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 01:37:54,736 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 01:37:54,736 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 01:37:54,740 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:54,740 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:54,744 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:54,744 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 01:37:54,748 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:54,748 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 01:37:54,753 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 01:37:54,753 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 01:37:54,757 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 01:37:54,757 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 01:37:54,757 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 01:37:54,761 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 01:37:54,762 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 01:37:54,762 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 01:37:54,766 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 01:37:54,770 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 01:37:54,770 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 01:37:54,770 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 01:37:54,770 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 01:37:54,770 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 01:37:54,775 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 01:37:54,779 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 01:37:54,779 - INFO - âœ… Schema loading complete. Found 13 tables and 13 relationships
2025-09-23 01:37:54,779 - DEBUG - ðŸ” Relationship Details:
2025-09-23 01:37:54,779 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 01:37:54,779 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,779 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,779 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,779 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 01:37:54,780 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,780 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 01:37:54,780 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 01:37:54,780 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 01:37:54,780 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 01:37:54,780 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 01:37:54,780 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 01:37:54,780 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 01:37:56,747 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 01:37:56,881 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 01:37:56,881 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 01:37:56,881 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 01:37:57,008 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 01:37:57,168 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:57,183 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:37:57,184 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:57,198 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:57,214 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:37:57,222 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 01:37:57,241 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 01:37:57,247 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 01:37:57,250 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 01:37:57,252 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 01:37:57,255 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 01:37:57,258 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 01:37:57,260 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 01:37:57,263 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 01:37:57,266 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 01:37:57,268 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 01:37:57,271 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 01:37:57,274 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 01:37:57,276 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 01:37:57,279 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 01:37:57,285 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 01:37:57,289 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:57,289 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:57,293 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 01:37:57,293 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 01:37:57,297 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:57,297 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:57,301 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:57,301 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 01:37:57,305 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:57,305 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 01:37:57,309 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 01:37:57,309 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 01:37:57,313 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 01:37:57,313 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 01:37:57,313 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 01:37:57,317 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 01:37:57,318 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 01:37:57,318 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 01:37:57,322 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 01:37:57,326 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 01:37:57,326 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 01:37:57,326 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 01:37:57,326 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 01:37:57,326 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 01:37:57,330 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 01:37:57,335 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 01:37:57,335 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 01:37:57,335 - DEBUG - ðŸ” Relationship Details:
2025-09-23 01:37:57,335 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,335 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 01:37:57,335 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,335 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,335 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,335 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 01:37:57,335 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,335 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 01:37:57,335 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,335 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 01:37:57,336 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 01:37:57,336 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 01:37:57,336 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 01:37:57,336 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 01:37:57,336 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 01:37:57,336 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 01:37:57,336 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 01:37:57,434 - INFO - âœ… Successfully imported LLMService!
2025-09-23 01:37:57,470 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 01:37:57,485 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 01:37:57,486 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 01:37:57,498 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 01:37:57,502 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 01:37:57,505 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 01:37:57,507 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 01:37:57,510 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 01:37:57,513 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 01:37:57,515 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 01:37:57,518 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 01:37:57,521 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 01:37:57,523 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 01:37:57,526 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 01:37:57,529 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 01:37:57,531 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 01:37:57,534 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 01:37:57,539 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 01:37:57,543 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:57,543 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:57,547 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 01:37:57,547 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 01:37:57,551 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:57,551 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 01:37:57,555 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:57,555 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 01:37:57,559 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 01:37:57,559 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 01:37:57,563 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 01:37:57,563 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 01:37:57,567 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 01:37:57,567 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 01:37:57,567 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 01:37:57,571 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 01:37:57,571 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 01:37:57,571 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 01:37:57,578 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 01:37:57,582 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 01:37:57,582 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 01:37:57,582 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 01:37:57,582 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 01:37:57,582 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 01:37:57,586 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 01:37:57,590 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 01:37:57,590 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 01:37:57,590 - DEBUG - ðŸ” Relationship Details:
2025-09-23 01:37:57,590 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,591 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 01:37:57,591 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,591 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,591 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,591 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 01:37:57,591 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,591 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 01:37:57,591 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 01:37:57,591 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 01:37:57,591 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 01:37:57,591 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 01:37:57,591 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 01:37:57,591 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:35:38,940 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:35:39,811 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:35:39,811 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:35:39,811 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:35:44,454 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:35:46,132 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:35:46,171 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:35:46,171 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:35:46,198 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:35:46,228 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:35:46,582 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:35:47,284 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:35:47,294 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:35:47,299 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:35:47,303 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:35:47,307 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:35:47,310 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:35:47,313 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:35:47,316 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:35:47,320 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:35:47,323 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:35:47,326 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:35:47,329 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:35:47,332 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:35:47,335 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:35:47,341 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:35:47,345 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:35:47,345 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:35:47,350 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:35:47,350 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:35:47,354 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:35:47,354 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:35:47,359 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:35:47,359 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:35:47,363 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:35:47,364 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:35:47,368 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:35:47,368 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:35:47,372 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:35:47,372 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:35:47,372 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:35:47,377 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:35:47,377 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:35:47,377 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:35:47,381 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:35:47,387 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:35:47,387 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:35:47,387 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:35:47,387 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:35:47,387 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:35:47,391 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:35:47,397 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:35:47,397 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:35:47,397 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:35:47,398 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:35:47,398 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:35:47,398 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:35:47,398 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:35:47,398 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:35:47,398 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:35:47,398 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:35:47,398 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:35:47,398 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:35:47,398 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:35:47,398 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:35:47,398 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:35:47,398 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:35:47,398 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:35:47,415 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:35:47,415 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:35:47,415 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:35:51,372 - INFO - âœ… Successfully imported LLMService!
2025-09-23 19:35:51,478 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:35:51,494 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:35:51,495 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:35:51,508 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:35:51,513 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:35:51,516 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:35:51,518 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:35:51,521 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:35:51,525 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:35:51,527 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:35:51,531 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:35:51,534 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:35:51,538 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:35:51,542 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:35:51,545 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:35:51,548 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:35:51,551 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:35:51,557 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:35:51,561 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:35:51,561 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:35:51,565 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:35:51,565 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:35:51,570 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:35:51,570 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:35:51,574 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:35:51,574 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:35:51,578 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:35:51,578 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:35:51,582 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:35:51,582 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:35:51,586 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:35:51,586 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:35:51,586 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:35:51,591 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:35:51,591 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:35:51,591 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:35:51,595 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:35:51,599 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:35:51,599 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:35:51,599 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:35:51,599 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:35:51,599 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:35:51,604 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:35:51,608 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:35:51,608 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:35:51,608 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:35:51,608 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:35:51,608 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:35:51,608 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:35:51,608 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:35:51,608 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:35:51,609 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:35:51,609 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:35:51,609 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:35:51,609 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:35:51,609 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:35:51,609 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:35:51,609 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:35:51,609 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:35:51,609 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:37:10,782 - INFO - Database engine created with pool_size=10
2025-09-23 19:37:24,040 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:37:24,055 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 19:37:24,056 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 19:37:24,056 - INFO - ðŸš€ Creating LLMService instance...
2025-09-23 19:37:24,103 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-23 19:37:24,105 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-23 19:37:24,105 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:37:24,121 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:37:24,121 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:37:24,136 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:37:24,151 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:37:24,151 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:37:24,164 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:37:24,169 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:37:24,171 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:37:24,174 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:37:24,177 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:37:24,179 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:37:24,182 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:37:24,184 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:37:24,187 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:37:24,190 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:37:24,193 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:37:24,196 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:37:24,198 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:37:24,201 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:37:24,207 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:37:24,211 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:37:24,211 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:37:24,215 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:37:24,215 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:37:24,219 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:37:24,219 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:37:24,225 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:37:24,225 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:37:24,229 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:37:24,229 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:37:24,233 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:37:24,234 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:37:24,238 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:37:24,238 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:37:24,238 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:37:24,242 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:37:24,242 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:37:24,242 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:37:24,246 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:37:24,250 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:37:24,250 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:37:24,250 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:37:24,250 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:37:24,250 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:37:24,254 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:37:24,258 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:37:24,258 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:37:24,258 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:37:24,258 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:37:24,258 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:37:24,258 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:37:24,258 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:37:24,258 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:37:24,258 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:37:24,258 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:37:24,258 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:37:24,258 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:37:24,258 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:37:24,258 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:37:24,259 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:37:24,259 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:37:24,259 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:37:24,259 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:37:24,259 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:37:24,259 - INFO - âœ… LLMService instance created successfully!
2025-09-23 19:37:24,259 - INFO - âœ… Got LLM service
2025-09-23 19:37:24,259 - ERROR - ðŸ’¥ Error: ChatOrchestrator.process_message() missing 1 required positional argument: 'message'
2025-09-23 19:37:52,429 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:37:52,444 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 19:37:52,445 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 19:37:52,445 - INFO - âœ… Got LLM service
2025-09-23 19:37:52,445 - ERROR - ðŸ’¥ Error: ChatOrchestrator.process_message() missing 1 required positional argument: 'message'
2025-09-23 19:38:13,261 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:38:13,401 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:38:13,401 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:38:13,401 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:38:13,532 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:38:13,693 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:13,708 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:13,708 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:13,723 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:13,738 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:13,747 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:13,768 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:13,774 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:13,777 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:13,780 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:13,782 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:13,785 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:13,788 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:13,791 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:13,794 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:13,797 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:13,800 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:13,803 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:13,806 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:13,808 - ERROR - âŒ Error getting columns for table users: (pyodbc.OperationalError) ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')
[SQL: SELECT [INFORMATION_SCHEMA].[COLUMNS].[COLUMN_NAME], [INFORMATION_SCHEMA].[COLUMNS].[DATA_TYPE], [INFORMATION_SCHEMA].[COLUMNS].[IS_NULLABLE], [INFORMATION_SCHEMA].[COLUMNS].[CHARACTER_MAXIMUM_LENGTH], [INFORMATION_SCHEMA].[COLUMNS].[NUMERIC_PRECISION], [INFORMATION_SCHEMA].[COLUMNS].[NUMERIC_SCALE], [INFORMATION_SCHEMA].[COLUMNS].[COLUMN_DEFAULT], [INFORMATION_SCHEMA].[COLUMNS].[COLLATION_NAME], sys.computed_columns.definition, sys.computed_columns.is_persisted, sys.identity_columns.is_identity, CAST(sys.identity_columns.seed_value AS NUMERIC(38, 0)) AS seed_value, CAST(sys.identity_columns.increment_value AS NUMERIC(38, 0)) AS increment_value, CAST(sys.extended_properties.value AS NVARCHAR(max)) AS comment 
FROM [INFORMATION_SCHEMA].[COLUMNS] LEFT OUTER JOIN sys.computed_columns ON sys.computed_columns.object_id = object_id([INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] + CAST(? AS NVARCHAR(max)) + [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME]) AND sys.computed_columns.name = ([INFORMATION_SCHEMA].[COLUMNS].[COLUMN_NAME] COLLATE DATABASE_DEFAULT) LEFT OUTER JOIN sys.identity_columns ON sys.identity_columns.object_id = object_id([INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] + CAST(? AS NVARCHAR(max)) + [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME]) AND sys.identity_columns.name = ([INFORMATION_SCHEMA].[COLUMNS].[COLUMN_NAME] COLLATE DATABASE_DEFAULT) LEFT OUTER JOIN sys.extended_properties ON sys.extended_properties.class = ? AND sys.extended_properties.major_id = object_id([INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] + CAST(? AS NVARCHAR(max)) + [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME]) AND sys.extended_properties.minor_id = [INFORMATION_SCHEMA].[COLUMNS].[ORDINAL_POSITION] AND sys.extended_properties.name = CAST(? AS NVARCHAR(max)) 
WHERE [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME] = CAST(? AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] = CAST(? AS NVARCHAR(max)) ORDER BY [INFORMATION_SCHEMA].[COLUMNS].[ORDINAL_POSITION]]
[parameters: ('.', '.', 1, '.', 'MS_Description', 'users', 'dbo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 19:38:13,820 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:13,824 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:13,824 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:13,828 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:13,829 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:13,833 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:13,833 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:13,837 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:13,837 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:13,841 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:13,841 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:13,845 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:13,845 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:13,849 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:13,849 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:13,849 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:13,853 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:13,853 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:13,853 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:13,857 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:13,862 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:13,862 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:13,862 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:13,862 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:13,862 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:13,866 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:13,870 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:13,870 - INFO - âœ… Schema loading complete. Found 12 tables and 14 relationships
2025-09-23 19:38:13,870 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:13,870 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:13,870 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:13,870 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:13,870 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:13,870 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:13,870 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:13,870 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:13,870 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:13,870 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:13,870 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:13,871 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:13,871 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:13,871 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:13,871 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:13,871 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:38:13,871 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:38:13,871 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:38:13,960 - INFO - âœ… Successfully imported LLMService!
2025-09-23 19:38:13,997 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:14,012 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:14,013 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:14,025 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:14,029 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:14,032 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:14,034 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:14,037 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:14,040 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:14,043 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:14,045 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:14,048 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:14,051 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:14,054 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:14,057 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:14,059 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:14,062 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:14,067 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:14,072 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:14,072 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:14,076 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:14,076 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:14,080 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:14,080 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:14,084 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:14,084 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:14,088 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:14,088 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:14,092 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:14,092 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:14,096 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:14,096 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:14,096 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:14,101 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:14,101 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:14,101 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:14,105 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:14,109 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:14,109 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:14,109 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:14,109 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:14,109 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:14,113 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:14,117 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:14,117 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:38:14,117 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:14,117 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:14,117 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:14,118 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:14,118 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:14,118 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:14,118 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:14,118 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:14,118 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:14,118 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:14,118 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:14,118 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:14,118 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:14,118 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:14,118 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:16,074 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:38:16,210 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:38:16,211 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:38:16,211 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:38:16,341 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:38:16,503 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:16,519 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:16,519 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:16,534 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:16,550 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:16,559 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:16,579 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:16,584 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:16,587 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:16,590 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:16,593 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:16,595 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:16,598 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:16,601 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:16,604 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:16,607 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:16,610 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:16,613 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:16,615 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:16,618 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:16,623 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:16,627 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:16,627 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:16,631 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:16,631 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:16,635 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:16,635 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:16,639 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:16,639 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:16,643 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:16,643 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:16,647 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:16,647 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:16,651 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:16,651 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:16,651 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:16,675 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:16,675 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:16,675 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:16,679 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:16,683 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:16,683 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:16,683 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:16,683 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:16,684 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:16,687 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:16,691 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:16,691 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:38:16,692 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:16,692 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,692 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:16,692 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,692 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,692 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,692 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:16,692 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,692 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:16,692 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,692 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:16,692 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:16,692 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:16,692 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:16,692 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:16,692 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:38:16,692 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:38:16,693 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:38:16,780 - INFO - âœ… Successfully imported LLMService!
2025-09-23 19:38:16,817 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:16,833 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:16,834 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:16,890 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:16,894 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:16,897 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:16,900 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:16,902 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:16,905 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:16,908 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:16,911 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:16,914 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:16,916 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:16,919 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:16,922 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:16,924 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:16,927 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:16,932 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:16,937 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:16,937 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:16,941 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:16,941 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:16,945 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:16,945 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:16,949 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:16,949 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:16,952 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:16,953 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:16,957 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:16,957 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:16,961 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:16,961 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:16,961 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:16,965 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:16,965 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:16,965 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:16,969 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:16,973 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:16,973 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:16,973 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:16,973 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:16,973 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:16,977 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:16,981 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:16,981 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:38:16,981 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:16,981 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,981 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:16,981 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,982 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,982 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,982 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:16,982 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,982 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:16,982 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:16,982 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:16,982 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:16,982 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:16,982 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:16,982 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:22,147 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:22,163 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 19:38:22,165 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 19:38:22,165 - INFO - ðŸš€ Creating LLMService instance...
2025-09-23 19:38:22,166 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-23 19:38:22,168 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-23 19:38:22,168 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:22,183 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:22,184 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:22,199 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:22,215 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:22,215 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:22,227 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:22,231 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:22,234 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:22,236 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:22,239 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:22,242 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:22,244 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:22,247 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:22,250 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:22,252 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:22,255 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:22,258 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:22,260 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:22,263 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:22,268 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:22,272 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:22,272 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:22,276 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:22,276 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:22,280 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:22,280 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:22,284 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:22,284 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:22,288 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:22,288 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:22,292 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:22,292 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:22,297 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:22,297 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:22,297 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:22,301 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:22,301 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:22,301 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:22,305 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:22,309 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:22,309 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:22,309 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:22,309 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:22,309 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:22,314 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:22,318 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:22,318 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:38:22,318 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:22,318 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:22,318 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:22,318 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:22,318 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:22,318 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:22,318 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:22,318 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:22,318 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:22,318 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:22,318 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:22,318 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:22,318 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:22,318 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:22,318 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:22,318 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:38:22,319 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:38:22,319 - INFO - âœ… LLMService instance created successfully!
2025-09-23 19:38:22,319 - INFO - âœ… Got LLM service
2025-09-23 19:38:22,319 - ERROR - ðŸ’¥ Error: ChatOrchestrator.process_message() got an unexpected keyword argument 'conversation_history'
2025-09-23 19:38:40,804 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:38:40,940 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:38:40,940 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:38:40,940 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:38:41,068 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:38:41,233 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:41,248 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:41,248 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:41,263 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:41,279 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:41,287 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:41,307 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:41,312 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:41,315 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:41,318 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:41,320 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:41,323 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:41,325 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:41,328 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:41,331 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:41,333 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:41,336 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:41,339 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:41,341 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:41,344 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:41,350 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:41,354 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:41,354 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:41,358 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:41,358 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:41,362 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:41,362 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:41,366 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:41,366 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:41,370 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:41,370 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:41,374 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:41,374 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:41,378 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:41,378 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:41,378 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:41,382 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:41,382 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:41,382 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:41,386 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:41,390 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:41,390 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:41,390 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:41,390 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:41,390 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:41,394 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:41,398 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:41,398 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:38:41,398 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:41,398 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,398 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:41,398 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,398 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,398 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,398 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:41,399 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,399 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:41,399 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,399 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:41,399 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:41,399 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:41,399 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:41,399 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:41,399 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:38:41,399 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:38:41,400 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:38:41,499 - INFO - âœ… Successfully imported LLMService!
2025-09-23 19:38:41,554 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:41,574 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:41,575 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:41,586 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:41,591 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:41,593 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:41,596 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:41,598 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:41,601 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:41,603 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:41,606 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:41,609 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:41,611 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:41,614 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:41,617 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:41,619 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:41,622 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:41,627 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:41,631 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:41,631 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:41,635 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:41,635 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:41,639 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:41,639 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:41,642 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:41,643 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:41,646 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:41,647 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:41,650 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:41,650 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:41,655 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:41,655 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:41,655 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:41,659 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:41,659 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:41,659 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:41,663 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:41,667 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:41,667 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:41,667 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:41,667 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:41,667 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:41,671 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:41,675 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:41,675 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:38:41,675 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:41,675 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,675 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:41,675 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,676 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,676 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,676 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:41,676 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,676 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:41,676 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:41,676 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:41,676 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:41,676 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:41,676 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:41,676 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:43,685 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:38:43,825 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:38:43,825 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:38:43,825 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:38:43,955 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:38:44,116 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:44,132 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:44,132 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:44,147 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:44,163 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:44,172 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:44,197 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:44,204 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:44,207 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:44,211 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:44,215 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:44,217 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:44,219 - ERROR - âŒ Error getting columns for table monthly_utilization: (pyodbc.OperationalError) ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')
[SQL: SELECT [INFORMATION_SCHEMA].[COLUMNS].[COLUMN_NAME], [INFORMATION_SCHEMA].[COLUMNS].[DATA_TYPE], [INFORMATION_SCHEMA].[COLUMNS].[IS_NULLABLE], [INFORMATION_SCHEMA].[COLUMNS].[CHARACTER_MAXIMUM_LENGTH], [INFORMATION_SCHEMA].[COLUMNS].[NUMERIC_PRECISION], [INFORMATION_SCHEMA].[COLUMNS].[NUMERIC_SCALE], [INFORMATION_SCHEMA].[COLUMNS].[COLUMN_DEFAULT], [INFORMATION_SCHEMA].[COLUMNS].[COLLATION_NAME], sys.computed_columns.definition, sys.computed_columns.is_persisted, sys.identity_columns.is_identity, CAST(sys.identity_columns.seed_value AS NUMERIC(38, 0)) AS seed_value, CAST(sys.identity_columns.increment_value AS NUMERIC(38, 0)) AS increment_value, CAST(sys.extended_properties.value AS NVARCHAR(max)) AS comment 
FROM [INFORMATION_SCHEMA].[COLUMNS] LEFT OUTER JOIN sys.computed_columns ON sys.computed_columns.object_id = object_id([INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] + CAST(? AS NVARCHAR(max)) + [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME]) AND sys.computed_columns.name = ([INFORMATION_SCHEMA].[COLUMNS].[COLUMN_NAME] COLLATE DATABASE_DEFAULT) LEFT OUTER JOIN sys.identity_columns ON sys.identity_columns.object_id = object_id([INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] + CAST(? AS NVARCHAR(max)) + [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME]) AND sys.identity_columns.name = ([INFORMATION_SCHEMA].[COLUMNS].[COLUMN_NAME] COLLATE DATABASE_DEFAULT) LEFT OUTER JOIN sys.extended_properties ON sys.extended_properties.class = ? AND sys.extended_properties.major_id = object_id([INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] + CAST(? AS NVARCHAR(max)) + [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME]) AND sys.extended_properties.minor_id = [INFORMATION_SCHEMA].[COLUMNS].[ORDINAL_POSITION] AND sys.extended_properties.name = CAST(? AS NVARCHAR(max)) 
WHERE [INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME] = CAST(? AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA] = CAST(? AS NVARCHAR(max)) ORDER BY [INFORMATION_SCHEMA].[COLUMNS].[ORDINAL_POSITION]]
[parameters: ('.', '.', 1, '.', 'MS_Description', 'monthly_utilization', 'dbo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 19:38:44,228 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:44,231 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:44,233 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:44,236 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:44,239 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:44,241 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:44,245 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:44,250 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:44,255 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:44,255 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:44,259 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:44,259 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:44,264 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:44,264 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:44,268 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:44,269 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:44,273 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:44,273 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:44,277 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:44,277 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:44,281 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:44,281 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:44,281 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:44,285 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:44,286 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:44,286 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:44,289 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:44,294 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:44,294 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:44,294 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:44,294 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:44,294 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:44,299 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:44,303 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:44,303 - INFO - âœ… Schema loading complete. Found 12 tables and 14 relationships
2025-09-23 19:38:44,303 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:44,303 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,303 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:44,303 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,303 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,303 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,303 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:44,303 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,303 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:44,303 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,303 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:44,303 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:44,303 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:44,303 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:44,304 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:44,304 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:38:44,304 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:38:44,304 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:38:44,392 - INFO - âœ… Successfully imported LLMService!
2025-09-23 19:38:44,429 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:44,444 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:44,444 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:44,457 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:44,461 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:44,464 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:44,466 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:44,469 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:44,472 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:44,474 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:44,477 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:44,480 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:44,483 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:44,485 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:44,488 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:44,491 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:44,494 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:44,499 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:44,503 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:44,503 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:44,507 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:44,507 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:44,511 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:44,511 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:44,515 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:44,515 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:44,519 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:44,519 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:44,523 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:44,523 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:44,527 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:44,527 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:44,527 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:44,531 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:44,531 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:44,531 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:44,535 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:44,540 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:44,540 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:44,540 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:44,540 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:44,540 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:44,544 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:44,548 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:44,548 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:38:44,548 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:44,548 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,548 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:44,548 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,548 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,548 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,548 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:44,548 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,548 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:44,548 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:44,548 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:44,548 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:44,548 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:44,548 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:44,548 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:46,511 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:38:46,646 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:38:46,646 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:38:46,646 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:38:46,773 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:38:46,933 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:46,949 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:46,949 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:46,964 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:46,979 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:46,987 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:47,006 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:47,012 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:47,014 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:47,017 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:47,020 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:47,023 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:47,025 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:47,028 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:47,031 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:47,033 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:47,036 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:47,039 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:47,042 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:47,045 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:47,050 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:47,054 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:47,054 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:47,058 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:47,058 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:47,062 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:47,062 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:47,066 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:47,066 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:47,070 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:47,070 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:47,074 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:47,074 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:47,079 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:47,079 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:47,079 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:47,083 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:47,083 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:47,083 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:47,087 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:47,091 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:47,091 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:47,091 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:47,091 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:47,091 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:47,095 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:47,099 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:47,099 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:38:47,099 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:47,099 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,099 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:47,099 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,100 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,100 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,100 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:47,100 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,100 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:47,100 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,100 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:47,100 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:47,100 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:47,100 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:47,100 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:47,100 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:38:47,100 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:38:47,100 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:38:47,187 - INFO - âœ… Successfully imported LLMService!
2025-09-23 19:38:47,223 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:47,239 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:47,240 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:47,251 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:47,256 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:47,258 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:47,261 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:47,263 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:47,266 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:47,268 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:47,271 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:47,274 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:47,276 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:47,279 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:47,282 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:47,284 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:47,287 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:47,292 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:47,296 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:47,296 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:47,300 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:47,300 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:47,304 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:47,304 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:47,308 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:47,308 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:47,312 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:47,312 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:47,316 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:47,316 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:47,320 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:47,320 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:47,320 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:47,324 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:47,324 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:47,324 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:47,329 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:47,333 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:47,333 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:47,333 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:47,333 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:47,333 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:47,337 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:47,341 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:47,341 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:38:47,341 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:47,341 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,341 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:47,341 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,342 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,342 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,342 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:47,342 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,342 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:47,342 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:47,342 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:47,342 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:47,342 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:47,342 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:47,342 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:50,366 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:50,383 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 19:38:50,384 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 19:38:50,384 - INFO - ðŸš€ Creating LLMService instance...
2025-09-23 19:38:50,385 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-23 19:38:50,386 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-23 19:38:50,387 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:50,402 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:50,402 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:50,418 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:38:50,433 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:38:50,433 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:38:50,446 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:38:50,450 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:38:50,452 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:38:50,455 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:38:50,458 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:38:50,461 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:38:50,463 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:38:50,466 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:38:50,469 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:38:50,472 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:38:50,474 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:38:50,477 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:38:50,480 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:38:50,483 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:38:50,488 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:38:50,492 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:50,492 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:50,496 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:38:50,496 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:38:50,500 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:50,500 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:38:50,504 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:50,504 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:38:50,508 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:38:50,508 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:38:50,512 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:38:50,512 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:38:50,516 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:38:50,516 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:38:50,516 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:38:50,520 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:38:50,520 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:38:50,520 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:38:50,524 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:38:50,528 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:38:50,529 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:38:50,529 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:38:50,529 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:38:50,529 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:38:50,533 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:38:50,537 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:38:50,537 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:38:50,537 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:38:50,537 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:50,537 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:38:50,537 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:38:50,537 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:38:50,537 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:38:50,538 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:38:50,538 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:38:50,538 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:38:50,538 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:38:50,538 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:38:50,538 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:38:50,538 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:38:50,538 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:38:50,538 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:38:50,538 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:38:50,538 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:38:50,538 - INFO - âœ… LLMService instance created successfully!
2025-09-23 19:38:50,538 - INFO - âœ… Got LLM service
2025-09-23 19:38:50,562 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-23 19:38:50,563 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7d713b66db50>
2025-09-23 19:38:50,563 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-23 19:38:50,564 - DEBUG - send_request_headers.complete
2025-09-23 19:38:50,564 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-23 19:38:50,564 - DEBUG - send_request_body.complete
2025-09-23 19:38:50,564 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-23 19:39:50,564 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-23 19:39:50,565 - DEBUG - response_closed.started
2025-09-23 19:39:50,585 - DEBUG - response_closed.complete
2025-09-23 19:39:50,614 - INFO - Database engine created with pool_size=10
2025-09-23 19:39:50,701 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-23 19:39:50,702 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7d713b5b4910>
2025-09-23 19:39:50,703 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-23 19:39:50,703 - DEBUG - send_request_headers.complete
2025-09-23 19:39:50,703 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-23 19:39:50,703 - DEBUG - send_request_body.complete
2025-09-23 19:39:50,703 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-23 19:40:50,704 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-23 19:40:51,673 - DEBUG - response_closed.started
2025-09-23 19:40:51,673 - DEBUG - response_closed.complete
2025-09-23 19:40:51,674 - INFO - âœ… Got result from LLM service
2025-09-23 19:40:51,674 - ERROR - ðŸ’¥ Error: 'ChatResponse' object has no attribute 'get'
2025-09-23 19:46:43,935 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:46:44,737 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:46:44,737 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:46:44,737 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:46:45,161 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:46:45,531 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:46:45,559 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:46:45,559 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:46:45,575 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:46:45,590 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:46:45,648 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:46:45,789 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:46:45,795 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:46:45,797 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:46:45,800 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:46:45,803 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:46:45,806 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:46:45,809 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:46:45,827 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:46:45,830 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:46:45,832 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:46:45,835 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:46:45,838 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:46:45,841 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:46:45,844 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:46:45,849 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:46:45,853 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:46:45,853 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:46:45,857 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:46:45,857 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:46:45,861 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:46:45,861 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:46:45,865 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:46:45,865 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:46:45,869 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:46:45,869 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:46:45,873 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:46:45,873 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:46:45,877 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:46:45,877 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:46:45,877 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:46:45,881 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:46:45,881 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:46:45,881 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:46:45,886 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:46:45,890 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:46:45,890 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:46:45,890 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:46:45,890 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:46:45,890 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:46:45,894 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:46:45,898 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:46:45,898 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:46:45,898 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:46:45,898 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:46:45,898 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:46:45,898 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:46:45,898 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:46:45,898 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:46:45,898 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:46:45,898 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:46:45,899 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:46:45,899 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:46:45,899 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:46:45,899 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:46:45,899 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:46:45,899 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:46:45,899 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:46:45,899 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:46:45,899 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:46:45,900 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:46:47,213 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:46:47,265 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:46:47,280 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:46:47,280 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:46:47,293 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:46:47,297 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:46:47,300 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:46:47,302 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:46:47,305 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:46:47,307 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:46:47,310 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:46:47,313 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:46:47,315 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:46:47,318 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:46:47,321 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:46:47,324 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:46:47,326 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:46:47,329 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:46:47,334 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:46:47,339 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:46:47,339 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:46:47,343 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:46:47,343 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:46:47,347 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:46:47,347 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:46:47,351 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:46:47,351 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:46:47,355 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:46:47,355 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:46:47,359 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:46:47,359 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:46:47,363 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:46:47,364 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:46:47,364 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:46:47,368 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:46:47,368 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:46:47,368 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:46:47,372 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:46:47,376 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:46:47,376 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:46:47,376 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:46:47,376 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:46:47,376 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:46:47,380 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:46:47,384 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:46:47,385 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:46:47,385 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:46:47,385 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:46:47,385 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:46:47,385 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:46:47,385 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:46:47,385 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:46:47,385 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:46:47,385 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:46:47,385 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:46:47,385 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:46:47,385 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:46:47,385 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:46:47,386 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:46:47,386 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:46:47,386 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:47:01,937 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:47:01,954 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 19:47:01,955 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 19:47:37,378 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:47:37,514 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:47:37,515 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:47:37,515 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:47:37,647 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:47:37,812 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:47:37,827 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:47:37,828 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:47:37,843 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:47:37,858 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:47:37,867 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:47:37,886 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:47:37,892 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:47:37,895 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:47:37,897 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:47:37,900 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:47:37,902 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:47:37,905 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:47:37,908 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:47:37,911 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:47:37,913 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:47:37,916 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:47:37,919 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:47:37,921 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:47:37,924 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:47:37,930 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:47:37,934 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:47:37,934 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:47:37,938 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:47:37,938 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:47:37,942 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:47:37,942 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:47:37,946 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:47:37,946 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:47:37,950 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:47:37,950 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:47:37,954 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:47:37,954 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:47:37,959 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:47:37,959 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:47:37,959 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:47:37,963 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:47:37,963 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:47:37,963 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:47:37,967 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:47:37,972 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:47:37,972 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:47:37,972 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:47:37,972 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:47:37,972 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:47:37,976 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:47:37,980 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:47:37,980 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:47:37,980 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:47:37,980 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:47:37,980 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:47:37,980 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:47:37,980 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:47:37,980 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:47:37,980 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:47:37,981 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:47:37,981 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:47:37,981 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:47:37,981 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:47:37,981 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:47:37,981 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:47:37,981 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:47:37,981 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:47:37,981 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:47:37,981 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:47:37,982 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:47:38,081 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:47:38,119 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:47:38,135 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:47:38,135 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:47:38,147 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:47:38,152 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:47:38,154 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:47:38,157 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:47:38,159 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:47:38,162 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:47:38,164 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:47:38,167 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:47:38,170 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:47:38,173 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:47:38,175 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:47:38,178 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:47:38,181 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:47:38,183 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:47:38,189 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:47:38,193 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:47:38,193 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:47:38,196 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:47:38,197 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:47:38,201 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:47:38,201 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:47:38,205 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:47:38,205 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:47:38,209 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:47:38,209 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:47:38,212 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:47:38,213 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:47:38,217 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:47:38,217 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:47:38,217 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:47:38,221 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:47:38,221 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:47:38,221 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:47:38,225 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:47:38,229 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:47:38,229 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:47:38,229 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:47:38,229 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:47:38,229 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:47:38,233 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:47:38,237 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:47:38,237 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:47:38,237 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:47:38,237 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:47:38,238 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:47:38,238 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:47:38,238 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:47:38,238 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:47:38,238 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:47:38,238 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:47:38,238 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:47:38,238 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:47:38,238 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:47:38,238 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:47:38,238 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:47:38,238 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:47:38,238 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:48:11,395 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:48:11,532 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:48:11,532 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:48:11,532 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:48:11,662 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:48:11,825 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:48:11,841 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:48:11,841 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:48:11,856 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:48:11,871 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:48:11,880 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:48:11,899 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:48:11,905 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:48:11,908 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:48:11,910 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:48:11,913 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:48:11,916 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:48:11,918 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:48:11,921 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:48:11,924 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:48:11,927 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:48:11,929 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:48:11,933 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:48:11,935 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:48:11,938 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:48:11,943 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:48:11,948 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:48:11,948 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:48:11,952 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:48:11,952 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:48:11,956 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:48:11,956 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:48:11,960 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:48:11,960 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:48:11,964 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:48:11,964 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:48:11,968 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:48:11,968 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:48:11,972 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:48:11,972 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:48:11,972 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:48:11,976 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:48:11,976 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:48:11,976 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:48:11,980 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:48:11,985 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:48:11,985 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:48:11,985 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:48:11,985 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:48:11,985 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:48:11,990 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:48:11,994 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:48:11,994 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:48:11,994 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:48:11,994 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:48:11,994 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:48:11,994 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:48:11,994 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:48:11,994 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:48:11,994 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:48:11,994 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:48:11,994 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:48:11,994 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:48:11,994 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:48:11,995 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:48:11,995 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:48:11,995 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:48:11,995 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:48:11,995 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:48:11,995 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:48:11,995 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:48:12,095 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:48:12,133 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:48:12,149 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:48:12,149 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:48:12,161 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:48:12,165 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:48:12,168 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:48:12,171 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:48:12,174 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:48:12,176 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:48:12,179 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:48:12,181 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:48:12,184 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:48:12,187 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:48:12,189 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:48:12,192 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:48:12,195 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:48:12,197 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:48:12,202 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:48:12,207 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:48:12,207 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:48:12,211 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:48:12,211 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:48:12,214 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:48:12,215 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:48:12,219 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:48:12,220 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:48:12,226 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:48:12,226 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:48:12,230 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:48:12,230 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:48:12,234 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:48:12,234 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:48:12,234 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:48:12,238 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:48:12,238 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:48:12,238 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:48:12,242 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:48:12,247 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:48:12,247 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:48:12,247 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:48:12,247 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:48:12,247 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:48:12,251 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:48:12,255 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:48:12,255 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:48:12,256 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:48:12,256 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:48:12,256 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:48:12,256 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:48:12,256 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:48:12,256 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:48:12,256 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:48:12,256 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:48:12,256 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:48:12,256 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:48:12,256 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:48:12,256 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:48:12,256 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:48:12,256 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:48:12,256 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:48:29,392 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:48:29,408 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 19:48:29,409 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 19:51:07,544 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:51:07,681 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:51:07,681 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:51:07,681 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:51:07,818 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:51:07,981 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:51:07,997 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:51:07,997 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:51:08,011 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:51:08,027 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:51:08,035 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:51:08,055 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:51:08,061 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:51:08,064 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:51:08,067 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:51:08,070 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:51:08,073 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:51:08,075 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:51:08,078 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:51:08,081 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:51:08,084 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:51:08,087 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:51:08,090 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:51:08,093 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:51:08,095 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:51:08,101 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:51:08,105 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:08,106 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:51:08,110 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:51:08,110 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:51:08,114 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:08,114 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:51:08,118 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:08,118 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:51:08,122 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:08,122 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:51:08,126 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:51:08,126 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:51:08,130 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:51:08,130 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:51:08,130 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:51:08,134 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:51:08,134 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:51:08,134 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:51:08,139 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:51:08,143 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:51:08,143 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:51:08,143 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:51:08,143 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:51:08,143 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:51:08,147 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:51:08,151 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:51:08,151 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:51:08,152 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:51:08,152 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,152 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:51:08,152 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,152 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,152 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,152 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:51:08,152 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,152 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:51:08,152 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,152 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:51:08,152 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:51:08,152 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:51:08,152 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:51:08,152 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:51:08,152 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:51:08,152 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:51:08,153 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:51:08,254 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:51:08,293 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:51:08,308 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:51:08,309 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:51:08,320 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:51:08,325 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:51:08,328 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:51:08,330 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:51:08,333 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:51:08,335 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:51:08,338 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:51:08,341 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:51:08,344 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:51:08,346 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:51:08,349 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:51:08,352 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:51:08,354 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:51:08,357 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:51:08,362 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:51:08,366 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:08,366 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:51:08,370 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:51:08,370 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:51:08,374 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:08,375 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:51:08,378 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:08,379 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:51:08,383 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:08,383 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:51:08,387 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:51:08,387 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:51:08,391 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:51:08,391 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:51:08,391 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:51:08,395 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:51:08,395 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:51:08,395 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:51:08,399 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:51:08,403 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:51:08,403 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:51:08,403 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:51:08,403 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:51:08,403 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:51:08,407 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:51:08,411 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:51:08,411 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:51:08,411 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:51:08,411 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,411 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:51:08,412 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,412 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,412 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,412 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:51:08,412 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,412 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:51:08,412 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:51:08,412 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:51:08,412 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:51:08,412 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:51:08,412 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:51:08,412 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:51:10,386 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:51:10,521 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:51:10,521 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:51:10,521 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:51:10,650 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:51:10,812 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:51:10,827 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:51:10,828 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:51:10,842 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:51:10,858 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:51:10,866 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:51:10,886 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:51:10,891 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:51:10,894 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:51:10,897 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:51:10,900 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:51:10,902 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:51:10,905 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:51:10,907 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:51:10,910 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:51:10,913 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:51:10,916 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:51:10,919 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:51:10,921 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:51:10,924 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:51:10,930 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:51:10,935 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:10,935 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:51:10,939 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:51:10,939 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:51:10,943 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:10,943 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:51:10,947 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:10,947 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:51:10,951 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:10,951 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:51:10,955 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:51:10,955 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:51:10,960 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:51:10,960 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:51:10,960 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:51:10,964 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:51:10,964 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:51:10,964 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:51:10,968 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:51:10,972 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:51:10,973 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:51:10,973 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:51:10,973 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:51:10,973 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:51:10,977 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:51:10,981 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:51:10,981 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:51:10,981 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:51:10,981 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:51:10,981 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:51:10,981 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:51:10,981 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:51:10,981 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:51:10,981 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:51:10,981 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:51:10,981 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:51:10,982 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:51:10,982 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:51:10,982 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:51:10,982 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:51:10,982 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:51:10,982 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:51:10,982 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:51:10,982 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:51:10,982 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:51:11,079 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:51:11,119 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:51:11,134 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:51:11,135 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:51:11,147 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:51:11,151 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:51:11,153 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:51:11,156 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:51:11,158 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:51:11,161 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:51:11,163 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:51:11,166 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:51:11,169 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:51:11,171 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:51:11,174 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:51:11,177 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:51:11,179 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:51:11,182 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:51:11,187 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:51:11,191 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:11,191 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:51:11,195 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:51:11,195 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:51:11,199 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:11,199 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:51:11,203 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:11,203 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:51:11,207 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:51:11,207 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:51:11,212 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:51:11,212 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:51:11,216 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:51:11,216 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:51:11,216 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:51:11,220 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:51:11,220 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:51:11,220 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:51:11,224 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:51:11,228 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:51:11,228 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:51:11,228 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:51:11,228 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:51:11,228 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:51:11,232 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:51:11,236 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:51:11,236 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:51:11,237 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:51:11,237 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:51:11,237 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:51:11,237 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:51:11,237 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:51:11,237 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:51:11,237 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:51:11,237 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:51:11,237 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:51:11,237 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:51:11,237 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:51:11,237 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:51:11,237 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:51:11,237 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:51:11,237 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:51:45,231 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:51:45,247 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 19:51:45,248 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 19:52:16,127 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:52:16,267 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:52:16,268 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:52:16,268 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:52:16,398 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:52:16,566 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:52:16,583 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:52:16,583 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:52:16,599 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:52:16,616 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:52:16,625 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:52:17,298 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:52:17,304 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:52:17,307 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:52:17,310 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:52:17,313 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:52:17,316 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:52:17,319 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:52:17,321 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:52:17,325 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:52:17,327 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:52:17,330 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:52:17,333 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:52:17,335 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:52:17,338 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:52:17,344 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:52:17,348 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:17,348 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:52:17,352 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:52:17,352 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:52:17,356 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:17,356 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:52:17,360 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:17,360 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:52:17,364 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:17,364 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:52:17,368 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:52:17,368 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:52:17,372 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:52:17,372 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:52:17,372 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:52:17,376 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:52:17,376 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:52:17,376 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:52:17,381 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:52:17,385 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:52:17,385 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:52:17,385 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:52:17,385 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:52:17,385 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:52:17,389 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:52:17,393 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:52:17,394 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:52:17,394 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:52:17,394 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,394 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:52:17,394 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,394 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,394 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,394 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:52:17,394 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,394 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:52:17,394 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,394 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:52:17,394 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:52:17,394 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:52:17,394 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:52:17,395 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:52:17,395 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:52:17,395 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:52:17,395 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:52:17,497 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:52:17,535 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:52:17,552 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:52:17,552 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:52:17,565 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:52:17,570 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:52:17,573 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:52:17,576 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:52:17,579 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:52:17,582 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:52:17,585 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:52:17,588 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:52:17,591 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:52:17,594 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:52:17,597 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:52:17,602 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:52:17,606 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:52:17,609 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:52:17,617 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:52:17,624 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:17,624 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:52:17,631 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:52:17,631 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:52:17,637 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:17,638 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:52:17,644 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:17,644 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:52:17,651 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:17,651 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:52:17,657 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:52:17,657 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:52:17,664 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:52:17,664 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:52:17,664 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:52:17,668 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:52:17,669 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:52:17,669 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:52:17,673 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:52:17,677 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:52:17,677 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:52:17,677 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:52:17,677 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:52:17,677 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:52:17,681 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:52:17,685 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:52:17,686 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:52:17,686 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:52:17,686 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,686 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:52:17,686 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,686 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,686 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,686 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:52:17,686 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,686 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:52:17,686 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:52:17,686 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:52:17,687 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:52:17,687 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:52:17,687 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:52:17,687 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:52:19,680 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:52:19,820 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:52:19,820 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:52:19,820 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:52:19,950 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:52:20,118 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:52:20,134 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:52:20,134 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:52:20,149 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:52:20,165 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:52:20,174 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:52:20,194 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:52:20,200 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:52:20,202 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:52:20,205 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:52:20,208 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:52:20,211 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:52:20,213 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:52:20,216 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:52:20,219 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:52:20,223 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:52:20,225 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:52:20,229 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:52:20,231 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:52:20,234 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:52:20,239 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:52:20,244 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:20,244 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:52:20,248 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:52:20,248 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:52:20,252 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:20,252 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:52:20,257 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:20,257 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:52:20,261 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:20,261 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:52:20,265 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:52:20,265 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:52:20,269 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:52:20,270 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:52:20,270 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:52:20,274 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:52:20,274 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:52:20,274 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:52:20,278 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:52:20,283 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:52:20,283 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:52:20,283 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:52:20,283 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:52:20,283 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:52:20,287 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:52:20,291 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:52:20,291 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:52:20,291 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:52:20,292 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,292 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:52:20,292 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,292 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,292 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,292 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:52:20,292 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,292 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:52:20,292 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,292 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:52:20,292 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:52:20,292 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:52:20,292 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:52:20,292 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:52:20,293 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:52:20,293 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:52:20,293 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:52:20,393 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:52:20,431 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:52:20,447 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:52:20,447 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:52:20,459 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:52:20,464 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:52:20,466 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:52:20,469 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:52:20,471 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:52:20,474 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:52:20,476 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:52:20,479 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:52:20,482 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:52:20,485 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:52:20,487 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:52:20,490 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:52:20,492 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:52:20,495 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:52:20,500 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:52:20,504 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:20,504 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:52:20,508 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:52:20,508 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:52:20,512 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:20,513 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:52:20,516 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:20,516 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:52:20,521 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:52:20,521 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:52:20,525 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:52:20,525 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:52:20,529 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:52:20,529 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:52:20,529 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:52:20,533 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:52:20,533 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:52:20,533 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:52:20,537 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:52:20,541 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:52:20,541 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:52:20,541 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:52:20,542 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:52:20,542 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:52:20,546 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:52:20,550 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:52:20,550 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:52:20,550 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:52:20,550 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,550 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:52:20,550 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,550 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,550 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,550 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:52:20,550 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,550 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:52:20,550 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:52:20,550 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:52:20,550 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:52:20,550 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:52:20,550 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:52:20,550 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:54:12,504 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:54:12,641 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:54:12,642 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:54:12,642 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:54:12,771 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:54:12,935 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:12,950 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:54:12,950 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:12,966 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:12,982 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:54:12,990 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:54:13,011 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:54:13,017 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:54:13,020 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:54:13,023 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:54:13,026 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:54:13,028 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:54:13,031 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:54:13,033 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:54:13,036 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:54:13,039 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:54:13,042 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:54:13,046 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:54:13,048 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:54:13,051 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:54:13,056 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:54:13,060 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:13,061 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:13,064 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:54:13,065 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:54:13,068 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:13,069 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:13,073 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:13,073 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:54:13,077 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:13,077 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:54:13,081 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:54:13,081 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:54:13,086 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:54:13,087 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:54:13,087 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:54:13,091 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:54:13,091 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:54:13,091 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:54:13,095 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:54:13,102 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:54:13,102 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:54:13,102 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:54:13,102 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:54:13,102 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:54:13,107 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:54:13,113 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:54:13,113 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:54:13,113 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:54:13,113 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,113 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:54:13,113 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,113 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,113 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,113 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:54:13,113 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,113 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:54:13,114 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,114 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:54:13,114 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:54:13,114 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:54:13,114 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:54:13,114 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:54:13,114 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:54:13,114 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:54:13,114 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:54:13,216 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:54:13,254 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:13,269 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:54:13,270 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:54:13,282 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:54:13,286 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:54:13,289 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:54:13,291 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:54:13,294 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:54:13,296 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:54:13,299 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:54:13,302 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:54:13,305 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:54:13,308 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:54:13,311 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:54:13,314 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:54:13,316 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:54:13,319 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:54:13,324 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:54:13,328 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:13,328 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:13,332 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:54:13,332 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:54:13,336 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:13,336 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:13,340 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:13,340 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:54:13,345 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:13,345 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:54:13,349 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:54:13,349 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:54:13,353 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:54:13,353 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:54:13,353 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:54:13,357 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:54:13,357 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:54:13,357 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:54:13,362 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:54:13,366 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:54:13,366 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:54:13,366 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:54:13,367 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:54:13,367 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:54:13,371 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:54:13,375 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:54:13,375 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:54:13,375 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:54:13,375 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,375 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:54:13,375 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,375 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,375 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,375 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:54:13,375 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,375 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:54:13,375 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:54:13,375 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:54:13,375 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:54:13,375 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:54:13,375 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:54:13,375 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:54:34,702 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:54:34,849 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:54:34,849 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:54:34,849 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:54:34,988 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:54:35,151 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:35,167 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:54:35,167 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:35,182 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:35,197 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:54:35,206 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:54:35,225 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:54:35,231 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:54:35,233 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:54:35,236 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:54:35,239 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:54:35,241 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:54:35,244 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:54:35,247 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:54:35,250 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:54:35,253 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:54:35,255 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:54:35,259 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:54:35,261 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:54:35,264 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:54:35,270 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:54:35,274 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:35,274 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:35,278 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:54:35,278 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:54:35,282 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:35,282 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:35,285 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:35,285 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:54:35,289 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:35,289 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:54:35,293 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:54:35,293 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:54:35,297 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:54:35,297 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:54:35,297 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:54:35,301 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:54:35,301 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:54:35,301 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:54:35,305 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:54:35,309 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:54:35,310 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:54:35,310 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:54:35,310 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:54:35,310 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:54:35,314 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:54:35,318 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:54:35,318 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:54:35,318 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:54:35,318 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,318 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:54:35,318 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,318 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,318 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,318 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:54:35,318 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,318 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:54:35,318 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,318 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:54:35,319 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:54:35,319 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:54:35,319 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:54:35,319 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:54:35,319 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:54:35,319 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:54:35,319 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:54:35,418 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:54:35,456 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:35,472 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:54:35,472 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:54:35,483 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:54:35,488 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:54:35,490 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:54:35,492 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:54:35,495 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:54:35,497 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:54:35,500 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:54:35,502 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:54:35,505 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:54:35,508 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:54:35,511 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:54:35,514 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:54:35,516 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:54:35,519 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:54:35,524 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:54:35,528 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:35,528 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:35,532 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:54:35,532 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:54:35,536 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:35,536 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:35,540 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:35,540 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:54:35,544 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:35,544 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:54:35,548 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:54:35,548 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:54:35,552 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:54:35,552 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:54:35,552 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:54:35,556 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:54:35,556 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:54:35,556 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:54:35,560 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:54:35,565 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:54:35,565 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:54:35,565 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:54:35,565 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:54:35,565 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:54:35,569 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:54:35,573 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:54:35,574 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:54:35,574 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:54:35,574 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,574 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:54:35,574 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,574 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,574 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,574 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:54:35,574 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,574 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:54:35,574 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:54:35,574 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:54:35,574 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:54:35,574 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:54:35,574 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:54:35,575 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:54:37,533 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:54:37,666 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:54:37,666 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:54:37,666 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:54:37,794 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:54:37,956 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:37,971 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:54:37,971 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:37,986 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:38,002 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:54:38,010 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:54:38,030 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:54:38,035 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:54:38,038 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:54:38,041 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:54:38,043 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:54:38,046 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:54:38,048 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:54:38,051 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:54:38,054 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:54:38,057 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:54:38,059 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:54:38,063 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:54:38,065 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:54:38,068 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:54:38,073 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:54:38,077 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:38,077 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:38,081 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:54:38,081 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:54:38,085 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:38,085 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:38,089 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:38,089 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:54:38,093 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:38,093 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:54:38,097 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:54:38,097 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:54:38,101 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:54:38,101 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:54:38,101 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:54:38,105 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:54:38,105 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:54:38,106 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:54:38,110 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:54:38,114 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:54:38,114 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:54:38,114 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:54:38,114 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:54:38,114 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:54:38,118 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:54:38,122 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:54:38,122 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:54:38,122 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:54:38,123 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,123 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:54:38,123 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,123 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,123 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,123 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:54:38,123 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,123 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:54:38,123 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,123 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:54:38,123 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:54:38,123 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:54:38,123 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:54:38,123 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:54:38,124 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:54:38,124 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:54:38,124 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:54:38,222 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:54:38,260 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:38,276 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:54:38,276 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:54:38,288 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:54:38,292 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:54:38,295 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:54:38,298 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:54:38,300 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:54:38,303 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:54:38,306 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:54:38,308 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:54:38,311 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:54:38,314 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:54:38,316 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:54:38,319 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:54:38,322 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:54:38,325 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:54:38,330 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:54:38,334 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:38,334 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:38,338 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:54:38,338 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:54:38,342 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:38,342 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:54:38,346 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:38,346 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:54:38,350 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:54:38,350 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:54:38,354 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:54:38,354 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:54:38,358 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:54:38,358 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:54:38,358 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:54:38,362 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:54:38,362 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:54:38,362 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:54:38,367 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:54:38,371 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:54:38,371 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:54:38,371 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:54:38,371 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:54:38,371 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:54:38,376 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:54:38,380 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:54:38,380 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:54:38,380 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:54:38,380 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,381 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:54:38,381 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,381 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,381 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,381 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:54:38,381 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,381 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:54:38,381 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:54:38,381 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:54:38,381 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:54:38,381 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:54:38,381 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:54:38,381 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:54:46,772 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:54:46,788 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 19:54:46,789 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 19:54:46,789 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-23 19:54:46,789 - ERROR - âŒ Failed to create ChatOrchestrator: name 'ChatOrchestrator' is not defined
2025-09-23 19:55:05,113 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:55:05,248 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:55:05,248 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:55:05,248 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:55:05,377 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:55:05,538 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:05,554 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:55:05,554 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:05,569 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:05,585 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:55:05,594 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:55:05,617 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:55:05,622 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:55:05,626 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:55:05,628 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:55:05,631 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:55:05,634 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:55:05,636 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:55:05,639 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:55:05,642 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:55:05,645 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:55:05,647 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:55:05,651 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:55:05,654 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:55:05,657 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:55:05,663 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:55:05,667 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:05,667 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:05,671 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:55:05,671 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:55:05,675 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:05,675 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:05,679 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:05,679 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:55:05,683 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:05,683 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:55:05,687 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:55:05,687 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:55:05,691 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:55:05,692 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:55:05,692 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:55:05,695 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:55:05,696 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:55:05,696 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:55:05,700 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:55:05,704 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:55:05,705 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:55:05,705 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:55:05,705 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:55:05,705 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:55:05,709 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:55:05,713 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:55:05,713 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:55:05,713 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:55:05,713 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,713 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:55:05,713 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,713 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,713 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,713 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:55:05,713 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,713 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:55:05,713 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,713 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:55:05,713 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:55:05,714 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:55:05,714 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:55:05,714 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:55:05,714 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:55:05,714 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:55:05,714 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:55:05,814 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:55:05,852 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:05,868 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:55:05,869 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:55:05,881 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:55:05,885 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:55:05,887 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:55:05,890 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:55:05,893 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:55:05,895 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:55:05,897 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:55:05,900 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:55:05,903 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:55:05,905 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:55:05,908 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:55:05,911 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:55:05,913 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:55:05,916 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:55:05,921 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:55:05,925 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:05,925 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:05,930 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:55:05,930 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:55:05,934 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:05,934 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:05,938 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:05,938 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:55:05,943 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:05,943 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:55:05,947 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:55:05,947 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:55:05,951 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:55:05,951 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:55:05,951 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:55:05,955 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:55:05,955 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:55:05,955 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:55:05,959 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:55:05,964 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:55:05,964 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:55:05,964 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:55:05,964 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:55:05,964 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:55:05,968 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:55:05,972 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:55:05,972 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:55:05,972 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:55:05,972 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,972 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:55:05,972 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,972 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,972 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,972 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:55:05,973 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,973 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:55:05,973 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:55:05,973 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:55:05,973 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:55:05,973 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:55:05,973 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:55:05,973 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:55:07,953 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:55:08,088 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:55:08,088 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:55:08,089 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:55:08,217 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:55:08,384 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:08,407 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:55:08,407 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:08,422 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:08,437 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:55:08,446 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:55:08,465 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:55:08,471 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:55:08,474 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:55:08,476 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:55:08,479 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:55:08,481 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:55:08,484 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:55:08,487 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:55:08,490 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:55:08,492 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:55:08,495 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:55:08,498 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:55:08,500 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:55:08,503 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:55:08,509 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:55:08,512 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:08,513 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:08,517 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:55:08,517 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:55:08,521 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:08,521 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:08,525 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:08,525 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:55:08,529 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:08,529 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:55:08,533 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:55:08,533 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:55:08,537 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:55:08,537 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:55:08,537 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:55:08,541 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:55:08,541 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:55:08,541 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:55:08,545 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:55:08,549 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:55:08,549 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:55:08,549 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:55:08,549 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:55:08,549 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:55:08,553 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:55:08,558 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:55:08,558 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:55:08,558 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:55:08,558 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,558 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:55:08,558 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,558 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,558 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,558 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:55:08,558 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,558 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:55:08,558 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,558 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:55:08,558 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:55:08,558 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:55:08,558 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:55:08,558 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:55:08,558 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:55:08,558 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:55:08,559 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:55:08,658 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:55:08,696 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:08,712 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:55:08,712 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:55:08,724 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:55:08,728 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:55:08,731 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:55:08,733 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:55:08,736 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:55:08,738 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:55:08,741 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:55:08,744 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:55:08,746 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:55:08,749 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:55:08,752 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:55:08,754 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:55:08,757 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:55:08,760 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:55:08,765 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:55:08,769 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:08,769 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:08,773 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:55:08,773 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:55:08,777 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:08,777 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:08,781 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:08,781 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:55:08,785 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:08,785 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:55:08,789 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:55:08,789 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:55:08,793 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:55:08,794 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:55:08,794 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:55:08,798 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:55:08,798 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:55:08,798 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:55:08,802 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:55:08,806 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:55:08,806 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:55:08,806 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:55:08,806 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:55:08,806 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:55:08,810 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:55:08,814 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:55:08,814 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:55:08,814 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:55:08,814 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,814 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:55:08,814 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,814 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,814 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,814 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:55:08,815 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,815 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:55:08,815 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:55:08,815 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:55:08,815 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:55:08,815 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:55:08,815 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:55:08,815 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:55:10,769 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:55:10,919 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:55:10,920 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:55:10,920 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:55:11,049 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:55:11,210 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:11,226 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:55:11,226 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:11,240 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:11,256 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:55:11,264 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:55:11,284 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:55:11,289 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:55:11,292 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:55:11,295 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:55:11,297 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:55:11,300 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:55:11,302 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:55:11,305 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:55:11,309 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:55:11,312 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:55:11,315 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:55:11,318 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:55:11,320 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:55:11,323 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:55:11,329 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:55:11,333 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:11,333 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:11,337 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:55:11,337 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:55:11,341 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:11,341 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:11,346 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:11,346 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:55:11,350 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:11,350 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:55:11,354 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:55:11,354 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:55:11,358 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:55:11,358 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:55:11,358 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:55:11,362 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:55:11,362 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:55:11,362 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:55:11,366 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:55:11,370 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:55:11,370 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:55:11,370 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:55:11,370 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:55:11,370 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:55:11,374 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:55:11,379 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:55:11,379 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:55:11,379 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:55:11,379 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,379 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:55:11,379 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,379 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,379 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,379 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:55:11,379 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,379 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:55:11,379 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,379 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:55:11,379 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:55:11,379 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:55:11,379 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:55:11,379 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:55:11,379 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:55:11,379 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:55:11,380 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:55:11,485 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:55:11,523 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:55:11,538 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:55:11,538 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:55:11,550 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:55:11,555 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:55:11,557 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:55:11,560 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:55:11,562 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:55:11,565 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:55:11,567 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:55:11,570 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:55:11,573 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:55:11,575 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:55:11,578 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:55:11,581 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:55:11,583 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:55:11,586 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:55:11,591 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:55:11,595 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:11,595 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:11,599 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:55:11,599 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:55:11,603 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:11,603 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:55:11,607 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:11,607 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:55:11,611 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:55:11,611 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:55:11,615 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:55:11,615 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:55:11,619 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:55:11,619 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:55:11,619 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:55:11,623 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:55:11,624 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:55:11,624 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:55:11,628 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:55:11,632 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:55:11,632 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:55:11,632 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:55:11,632 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:55:11,632 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:55:11,636 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:55:11,640 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:55:11,640 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:55:11,640 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:55:11,640 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,640 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:55:11,640 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,640 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,640 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,640 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:55:11,640 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,641 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:55:11,641 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:55:11,641 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:55:11,641 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:55:11,641 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:55:11,641 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:55:11,641 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:56:08,138 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:56:08,276 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:56:08,276 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:56:08,276 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:56:08,419 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:56:08,610 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:56:08,627 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:56:08,627 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:56:08,643 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:56:08,660 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:56:08,670 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:56:08,691 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:56:08,698 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:56:08,701 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:56:08,704 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:56:08,707 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:56:08,710 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:56:08,713 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:56:08,718 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:56:08,722 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:56:08,726 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:56:08,729 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:56:08,733 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:56:08,737 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:56:08,740 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:56:08,748 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:56:08,753 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:08,753 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:56:08,758 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:56:08,758 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:56:08,763 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:08,763 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:56:08,769 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:08,769 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:56:08,773 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:08,774 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:56:08,778 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:56:08,778 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:56:08,783 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:56:08,783 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:56:08,783 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:56:08,788 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:56:08,788 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:56:08,789 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:56:08,794 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:56:08,799 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:56:08,800 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:56:08,800 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:56:08,800 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:56:08,800 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:56:08,806 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:56:08,811 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:56:08,811 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:56:08,811 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:56:08,811 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:56:08,811 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:56:08,811 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:56:08,811 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:56:08,811 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:56:08,811 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:56:08,811 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:56:08,812 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:56:08,812 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:56:08,812 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:56:08,812 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:56:08,812 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:56:08,812 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:56:08,812 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:56:08,812 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:56:08,812 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:56:08,812 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:56:20,081 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:56:20,218 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:56:20,218 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:56:20,218 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:56:20,348 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:56:20,511 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:56:20,527 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:56:20,527 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:56:20,542 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:56:20,558 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:56:20,566 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:56:20,585 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:56:20,591 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:56:20,594 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:56:20,596 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:56:20,599 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:56:20,602 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:56:20,604 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:56:20,607 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:56:20,610 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:56:20,612 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:56:20,615 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:56:20,618 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:56:20,620 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:56:20,623 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:56:20,629 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:56:20,633 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:20,633 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:56:20,637 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:56:20,637 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:56:20,641 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:20,641 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:56:20,645 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:20,645 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:56:20,649 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:20,649 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:56:20,653 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:56:20,653 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:56:20,657 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:56:20,657 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:56:20,657 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:56:20,661 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:56:20,661 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:56:20,661 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:56:20,666 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:56:20,670 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:56:20,670 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:56:20,670 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:56:20,670 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:56:20,670 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:56:20,674 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:56:20,678 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:56:20,678 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:56:20,678 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:56:20,678 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,678 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:56:20,678 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,678 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,678 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,678 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:56:20,678 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,679 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:56:20,679 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,679 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:56:20,679 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:56:20,679 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:56:20,679 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:56:20,679 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:56:20,679 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:56:20,679 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:56:20,680 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:56:20,781 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:56:20,819 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:56:20,834 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:56:20,835 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:56:20,847 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:56:20,851 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:56:20,853 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:56:20,856 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:56:20,858 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:56:20,861 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:56:20,863 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:56:20,866 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:56:20,869 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:56:20,871 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:56:20,874 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:56:20,877 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:56:20,879 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:56:20,882 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:56:20,887 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:56:20,891 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:20,891 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:56:20,895 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:56:20,895 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:56:20,899 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:20,899 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:56:20,903 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:20,903 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:56:20,907 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:56:20,907 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:56:20,911 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:56:20,911 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:56:20,915 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:56:20,915 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:56:20,915 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:56:20,920 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:56:20,920 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:56:20,920 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:56:20,924 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:56:20,928 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:56:20,928 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:56:20,928 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:56:20,928 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:56:20,928 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:56:20,933 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:56:20,937 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:56:20,937 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:56:20,937 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:56:20,937 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,937 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:56:20,937 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,937 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,937 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,937 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:56:20,937 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,937 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:56:20,938 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:56:20,938 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:56:20,938 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:56:20,938 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:56:20,938 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:56:20,938 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:59:17,933 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:59:18,071 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:59:18,071 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:59:18,072 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:59:18,202 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:59:18,365 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:18,381 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:18,381 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:18,396 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:18,412 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:18,421 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:59:18,441 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:59:18,446 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:59:18,449 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:59:18,452 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:59:18,454 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:59:18,457 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:59:18,459 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:59:18,462 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:59:18,465 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:59:18,468 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:59:18,470 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:59:18,473 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:59:18,476 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:59:18,479 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:59:18,484 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:59:18,488 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:18,488 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:18,492 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:59:18,492 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:59:18,496 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:18,496 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:18,500 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:18,500 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:59:18,505 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:18,505 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:59:18,509 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:59:18,509 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:59:18,514 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:59:18,514 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:59:18,514 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:59:18,518 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:59:18,518 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:59:18,518 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:59:18,523 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:59:18,527 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:59:18,527 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:59:18,527 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:59:18,527 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:59:18,527 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:59:18,531 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:59:18,536 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:59:18,536 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:59:18,536 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:59:18,536 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,536 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:59:18,536 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,536 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,536 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,536 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:59:18,536 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,536 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:59:18,536 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,536 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:59:18,536 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:59:18,536 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:59:18,536 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:59:18,536 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:59:18,537 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:59:18,537 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:59:18,537 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:59:18,636 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:59:18,675 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:18,690 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:18,690 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:59:18,703 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:59:18,707 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:59:18,710 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:59:18,712 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:59:18,715 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:59:18,718 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:59:18,720 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:59:18,723 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:59:18,726 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:59:18,728 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:59:18,731 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:59:18,734 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:59:18,736 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:59:18,739 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:59:18,744 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:59:18,748 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:18,748 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:18,752 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:59:18,752 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:59:18,756 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:18,756 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:18,760 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:18,760 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:59:18,765 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:18,765 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:59:18,769 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:59:18,769 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:59:18,773 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:59:18,773 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:59:18,773 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:59:18,777 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:59:18,777 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:59:18,777 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:59:18,782 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:59:18,786 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:59:18,786 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:59:18,786 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:59:18,786 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:59:18,786 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:59:18,790 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:59:18,794 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:59:18,794 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:59:18,795 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:59:18,795 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,795 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:59:18,795 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,795 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,795 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,795 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:59:18,795 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,795 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:59:18,795 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:59:18,795 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:59:18,795 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:59:18,795 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:59:18,795 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:59:18,795 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:59:23,171 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:59:23,308 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:59:23,308 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:59:23,308 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:59:23,437 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:59:23,601 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:23,617 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:23,617 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:23,632 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:23,647 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:23,656 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:59:23,676 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:59:23,681 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:59:23,684 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:59:23,687 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:59:23,689 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:59:23,692 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:59:23,694 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:59:23,697 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:59:23,700 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:59:23,703 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:59:23,705 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:59:23,709 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:59:23,711 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:59:23,714 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:59:23,719 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:59:23,723 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:23,723 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:23,727 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:59:23,727 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:59:23,731 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:23,731 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:23,735 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:23,735 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:59:23,739 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:23,739 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:59:23,743 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:59:23,743 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:59:23,747 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:59:23,747 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:59:23,747 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:59:23,752 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:59:23,752 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:59:23,752 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:59:23,756 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:59:23,760 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:59:23,760 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:59:23,760 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:59:23,760 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:59:23,760 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:59:23,764 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:59:23,768 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:59:23,768 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:59:23,769 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:59:23,769 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:23,769 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:59:23,769 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:23,769 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:59:23,769 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:59:23,769 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:59:23,769 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:59:23,769 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:59:23,769 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:59:23,769 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:59:23,769 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:59:23,769 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:59:23,769 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:59:23,769 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:59:23,769 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:59:23,769 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:59:23,770 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:59:23,868 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:59:23,906 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:23,922 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:23,923 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:59:23,935 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:59:23,939 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:59:23,942 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:59:23,945 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:59:23,947 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:59:23,949 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:59:23,952 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:59:23,955 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:59:23,957 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:59:23,960 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:59:23,962 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:59:23,966 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:59:23,968 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:59:23,971 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:59:23,976 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:59:23,980 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:23,980 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:23,984 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:59:23,984 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:59:23,988 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:23,988 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:23,992 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:23,992 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:59:23,996 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:23,997 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:59:24,000 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:59:24,001 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:59:24,005 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:59:24,005 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:59:24,005 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:59:24,009 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:59:24,009 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:59:24,009 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:59:24,013 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:59:24,017 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:59:24,017 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:59:24,017 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:59:24,017 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:59:24,017 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:59:24,021 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:59:24,025 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:59:24,025 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:59:24,025 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:59:24,025 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:24,025 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:59:24,025 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:24,025 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:59:24,026 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:59:24,026 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:59:24,026 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:59:24,026 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:59:24,026 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:59:24,026 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:59:24,026 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:59:24,026 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:59:24,026 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:59:24,026 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:59:27,585 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:59:27,720 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:59:27,720 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:59:27,720 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:59:27,847 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:59:28,009 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:28,025 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:28,025 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:28,040 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:28,055 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:28,064 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:59:28,084 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:59:28,089 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:59:28,092 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:59:28,094 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:59:28,097 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:59:28,099 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:59:28,102 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:59:28,104 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:59:28,107 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:59:28,110 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:59:28,112 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:59:28,115 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:59:28,117 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:59:28,120 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:59:28,125 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:59:28,129 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:28,129 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:28,133 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:59:28,133 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:59:28,137 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:28,137 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:28,140 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:28,140 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:59:28,144 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:28,145 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:59:28,148 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:59:28,148 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:59:28,153 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:59:28,153 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:59:28,153 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:59:28,157 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:59:28,157 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:59:28,157 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:59:28,161 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:59:28,165 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:59:28,165 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:59:28,165 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:59:28,165 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:59:28,165 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:59:28,169 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:59:28,173 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:59:28,173 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:59:28,173 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:59:28,173 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,173 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:59:28,173 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,173 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,173 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,173 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:59:28,173 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,173 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:59:28,173 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,173 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:59:28,173 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:59:28,173 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:59:28,173 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:59:28,173 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:59:28,174 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:59:28,174 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:59:28,174 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:59:28,272 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:59:28,310 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:28,325 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:28,326 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:59:28,338 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:59:28,343 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:59:28,345 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:59:28,348 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:59:28,351 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:59:28,355 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:59:28,359 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:59:28,363 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:59:28,367 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:59:28,371 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:59:28,373 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:59:28,377 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:59:28,379 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:59:28,382 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:59:28,387 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:59:28,391 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:28,392 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:28,395 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:59:28,395 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:59:28,400 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:28,400 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:28,404 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:28,404 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:59:28,408 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:28,408 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:59:28,412 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:59:28,412 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:59:28,416 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:59:28,416 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:59:28,416 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:59:28,420 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:59:28,420 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:59:28,420 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:59:28,424 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:59:28,428 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:59:28,428 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:59:28,428 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:59:28,428 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:59:28,428 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:59:28,432 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:59:28,436 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:59:28,436 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:59:28,436 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:59:28,436 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,437 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:59:28,437 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,437 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,437 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,437 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:59:28,437 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,437 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:59:28,437 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:59:28,437 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:59:28,437 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:59:28,437 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:59:28,437 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:59:28,437 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:59:31,791 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:59:31,924 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 19:59:31,924 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 19:59:31,924 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 19:59:32,053 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 19:59:32,214 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:32,229 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:32,229 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:32,244 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:32,259 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:32,268 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:59:32,288 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:59:32,293 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:59:32,296 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:59:32,299 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:59:32,301 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:59:32,304 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:59:32,306 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:59:32,309 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:59:32,312 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:59:32,315 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:59:32,317 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:59:32,321 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:59:32,323 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:59:32,326 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:59:32,331 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:59:32,335 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:32,335 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:32,339 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:59:32,339 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:59:32,343 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:32,343 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:32,347 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:32,348 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:59:32,352 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:32,352 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:59:32,357 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:59:32,357 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:59:32,361 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:59:32,361 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:59:32,361 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:59:32,365 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:59:32,365 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:59:32,365 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:59:32,369 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:59:32,374 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:59:32,374 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:59:32,374 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:59:32,374 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:59:32,374 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:59:32,378 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:59:32,382 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:59:32,382 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:59:32,382 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:59:32,382 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,383 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:59:32,383 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,383 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,383 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,383 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:59:32,383 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,383 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:59:32,383 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,383 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:59:32,383 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:59:32,383 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:59:32,383 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:59:32,383 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 19:59:32,383 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 19:59:32,383 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 19:59:32,384 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 19:59:32,480 - ERROR - âŒ Failed to import ChatOrchestrator: cannot import name 'ChatOrchestrator' from 'mcp.llm_service' (/home/user/IITB/netra/backend/mcp/llm_service.py)
2025-09-23 19:59:32,517 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 19:59:32,533 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 19:59:32,533 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 19:59:32,546 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 19:59:32,550 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 19:59:32,552 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 19:59:32,555 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 19:59:32,557 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 19:59:32,560 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 19:59:32,562 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 19:59:32,565 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 19:59:32,568 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 19:59:32,571 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 19:59:32,573 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 19:59:32,576 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 19:59:32,578 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 19:59:32,581 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 19:59:32,586 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 19:59:32,590 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:32,590 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:32,594 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 19:59:32,594 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 19:59:32,598 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:32,598 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 19:59:32,602 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:32,602 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 19:59:32,606 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 19:59:32,606 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 19:59:32,610 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 19:59:32,610 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 19:59:32,614 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 19:59:32,614 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 19:59:32,614 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 19:59:32,618 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 19:59:32,618 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 19:59:32,618 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 19:59:32,622 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 19:59:32,626 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 19:59:32,626 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 19:59:32,626 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 19:59:32,626 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 19:59:32,626 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 19:59:32,630 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 19:59:32,634 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 19:59:32,634 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 19:59:32,634 - DEBUG - ðŸ” Relationship Details:
2025-09-23 19:59:32,634 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,634 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 19:59:32,635 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,635 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,635 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,635 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 19:59:32,635 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,635 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 19:59:32,635 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 19:59:32,635 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 19:59:32,635 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 19:59:32,635 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 19:59:32,635 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 19:59:32,635 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 20:00:11,091 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:00:11,108 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 20:00:11,109 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 20:00:35,063 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:00:35,078 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 20:00:35,079 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 20:01:20,698 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:20,835 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 20:01:20,835 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 20:01:20,835 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 20:01:20,966 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 20:01:21,130 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:21,146 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:21,146 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:21,161 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:21,176 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:21,185 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 20:01:21,206 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 20:01:21,212 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 20:01:21,215 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 20:01:21,218 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 20:01:21,220 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 20:01:21,223 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 20:01:21,226 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 20:01:21,228 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 20:01:21,231 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 20:01:21,234 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 20:01:21,237 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 20:01:21,239 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 20:01:21,242 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 20:01:21,245 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 20:01:21,250 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 20:01:21,254 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:21,254 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:21,258 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 20:01:21,258 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 20:01:21,262 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:21,262 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:21,266 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:21,266 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 20:01:21,271 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:21,271 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 20:01:21,275 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 20:01:21,275 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 20:01:21,279 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 20:01:21,279 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 20:01:21,279 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 20:01:21,283 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 20:01:21,283 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 20:01:21,283 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 20:01:21,287 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 20:01:21,291 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 20:01:21,291 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 20:01:21,291 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 20:01:21,291 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 20:01:21,291 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 20:01:21,295 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 20:01:21,299 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 20:01:21,299 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 20:01:21,299 - DEBUG - ðŸ” Relationship Details:
2025-09-23 20:01:21,299 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:21,299 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 20:01:21,299 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:21,299 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 20:01:21,299 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 20:01:21,300 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 20:01:21,300 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 20:01:21,300 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 20:01:21,300 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 20:01:21,300 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 20:01:21,300 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 20:01:21,300 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 20:01:21,300 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 20:01:21,300 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 20:01:21,300 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 20:01:21,300 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 20:01:21,300 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:23,592 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:23,735 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 20:01:23,735 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 20:01:23,735 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 20:01:23,864 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 20:01:24,026 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:24,041 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:24,041 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:24,057 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:24,073 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:24,082 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 20:01:24,102 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 20:01:24,107 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 20:01:24,110 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 20:01:24,113 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 20:01:24,116 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 20:01:24,118 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 20:01:24,121 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 20:01:24,123 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 20:01:24,126 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 20:01:24,129 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 20:01:24,131 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 20:01:24,134 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 20:01:24,137 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 20:01:24,140 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 20:01:24,145 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 20:01:24,148 - ERROR - âŒ Error getting foreign keys for table alphabeta: (pyodbc.OperationalError) ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')
[SQL: WITH fk_info AS (
    SELECT
        ischema_ref_con.constraint_schema,
        ischema_ref_con.constraint_name,
        ischema_key_col.ordinal_position,
        ischema_key_col.table_schema,
        ischema_key_col.table_name,
        ischema_ref_con.unique_constraint_schema,
        ischema_ref_con.unique_constraint_name,
        ischema_ref_con.match_option,
        ischema_ref_con.update_rule,
        ischema_ref_con.delete_rule,
        ischema_key_col.column_name AS constrained_column
    FROM
        INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS ischema_ref_con
        INNER JOIN
        INFORMATION_SCHEMA.KEY_COLUMN_USAGE ischema_key_col ON
            ischema_key_col.table_schema = ischema_ref_con.constraint_schema
            AND ischema_key_col.constraint_name =
            ischema_ref_con.constraint_name
    WHERE ischema_key_col.table_name = CAST(? AS NVARCHAR(max))
        AND ischema_key_col.table_schema = CAST(? AS NVARCHAR(max))
),
constraint_info AS (
    SELECT
        ischema_key_col.constraint_schema,
        ischema_key_col.constraint_name,
        ischema_key_col.ordinal_position,
        ischema_key_col.table_schema,
        ischema_key_col.table_name,
        ischema_key_col.column_name
    FROM
        INFORMATION_SCHEMA.KEY_COLUMN_USAGE ischema_key_col
),
index_info AS (
    SELECT
        sys.schemas.name AS index_schema,
        sys.indexes.name AS index_name,
        sys.index_columns.key_ordinal AS ordinal_position,
        sys.schemas.name AS table_schema,
        sys.objects.name AS table_name,
        sys.columns.name AS column_name
    FROM
        sys.indexes
        INNER JOIN
        sys.objects ON
            sys.objects.object_id = sys.indexes.object_id
        INNER JOIN
        sys.schemas ON
            sys.schemas.schema_id = sys.objects.schema_id
        INNER JOIN
        sys.index_columns ON
            sys.index_columns.object_id = sys.objects.object_id
            AND sys.index_columns.index_id = sys.indexes.index_id
        INNER JOIN
        sys.columns ON
            sys.columns.object_id = sys.indexes.object_id
            AND sys.columns.column_id = sys.index_columns.column_id
)
    SELECT
        fk_info.constraint_schema,
        fk_info.constraint_name,
        fk_info.ordinal_position,
        fk_info.constrained_column,
        constraint_info.table_schema AS referred_table_schema,
        constraint_info.table_name AS referred_table_name,
        constraint_info.column_name AS referred_column,
        fk_info.match_option,
        fk_info.update_rule,
        fk_info.delete_rule
    FROM
        fk_info INNER JOIN constraint_info ON
            constraint_info.constraint_schema =
                fk_info.unique_constraint_schema
            AND constraint_info.constraint_name =
                fk_info.unique_constraint_name
            AND constraint_info.ordinal_position = fk_info.ordinal_position
    UNION
    SELECT
        fk_info.constraint_schema,
        fk_info.constraint_name,
        fk_info.ordinal_position,
        fk_info.constrained_column,
        index_info.table_schema AS referred_table_schema,
        index_info.table_name AS referred_table_name,
        index_info.column_name AS referred_column,
        fk_info.match_option,
        fk_info.update_rule,
        fk_info.delete_rule
    FROM
        fk_info INNER JOIN index_info ON
            index_info.index_schema = fk_info.unique_constraint_schema
            AND index_info.index_name = fk_info.unique_constraint_name
            AND index_info.ordinal_position = fk_info.ordinal_position

    ORDER BY fk_info.constraint_schema, fk_info.constraint_name,
        fk_info.ordinal_position
]
[parameters: ('alphabeta', 'dbo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 20:01:24,158 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 20:01:24,158 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 20:01:24,162 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:24,162 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:24,166 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:24,166 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 20:01:24,170 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:24,170 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 20:01:24,174 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 20:01:24,174 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 20:01:24,178 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 20:01:24,178 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 20:01:24,178 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 20:01:24,182 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 20:01:24,182 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 20:01:24,183 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 20:01:24,186 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 20:01:24,191 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 20:01:24,191 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 20:01:24,191 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 20:01:24,191 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 20:01:24,191 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 20:01:24,195 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 20:01:24,199 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 20:01:24,199 - INFO - âœ… Schema loading complete. Found 13 tables and 13 relationships
2025-09-23 20:01:24,199 - DEBUG - ðŸ” Relationship Details:
2025-09-23 20:01:24,199 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 20:01:24,199 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:24,199 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 20:01:24,199 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 20:01:24,199 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 20:01:24,199 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 20:01:24,199 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 20:01:24,199 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 20:01:24,199 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 20:01:24,199 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 20:01:24,200 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 20:01:24,200 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 20:01:24,200 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 20:01:24,200 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 20:01:24,200 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 20:01:24,200 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:26,582 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:26,717 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 20:01:26,718 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 20:01:26,718 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 20:01:26,846 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 20:01:27,007 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:27,023 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:27,023 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:27,037 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:27,053 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:27,061 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 20:01:27,081 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 20:01:27,087 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 20:01:27,089 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 20:01:27,092 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 20:01:27,095 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 20:01:27,097 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 20:01:27,100 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 20:01:27,102 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 20:01:27,105 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 20:01:27,108 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 20:01:27,110 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 20:01:27,113 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 20:01:27,116 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 20:01:27,119 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 20:01:27,124 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 20:01:27,128 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:27,128 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:27,132 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 20:01:27,132 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 20:01:27,136 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:27,136 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:27,140 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:27,140 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 20:01:27,144 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:27,144 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 20:01:27,148 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 20:01:27,148 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 20:01:27,152 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 20:01:27,152 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 20:01:27,152 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 20:01:27,156 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 20:01:27,156 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 20:01:27,156 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 20:01:27,161 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 20:01:27,165 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 20:01:27,165 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 20:01:27,165 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 20:01:27,165 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 20:01:27,165 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 20:01:27,169 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 20:01:27,173 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 20:01:27,173 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 20:01:27,173 - DEBUG - ðŸ” Relationship Details:
2025-09-23 20:01:27,173 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:27,173 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 20:01:27,173 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:27,173 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 20:01:27,173 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 20:01:27,173 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 20:01:27,174 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 20:01:27,174 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 20:01:27,174 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 20:01:27,174 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 20:01:27,174 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 20:01:27,174 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 20:01:27,174 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 20:01:27,174 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 20:01:27,174 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 20:01:27,174 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 20:01:27,175 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:38,714 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:38,849 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 20:01:38,849 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 20:01:38,849 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 20:01:38,977 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 20:01:39,138 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:39,154 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:39,154 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:39,169 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:39,184 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:39,192 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 20:01:39,212 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 20:01:39,218 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 20:01:39,221 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 20:01:39,223 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 20:01:39,226 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 20:01:39,228 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 20:01:39,231 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 20:01:39,234 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 20:01:39,237 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 20:01:39,239 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 20:01:39,242 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 20:01:39,245 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 20:01:39,247 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 20:01:39,250 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 20:01:39,256 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 20:01:39,259 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:39,260 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:39,263 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 20:01:39,264 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 20:01:39,268 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:39,268 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:39,272 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:39,272 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 20:01:39,275 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:39,276 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 20:01:39,279 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 20:01:39,280 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 20:01:39,284 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 20:01:39,284 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 20:01:39,284 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 20:01:39,288 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 20:01:39,288 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 20:01:39,288 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 20:01:39,292 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 20:01:39,296 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 20:01:39,296 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 20:01:39,296 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 20:01:39,296 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 20:01:39,297 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 20:01:39,301 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 20:01:39,305 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 20:01:39,305 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 20:01:39,305 - DEBUG - ðŸ” Relationship Details:
2025-09-23 20:01:39,305 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:39,305 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 20:01:39,305 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:39,305 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 20:01:39,305 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 20:01:39,305 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 20:01:39,305 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 20:01:39,305 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 20:01:39,305 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 20:01:39,305 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 20:01:39,305 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 20:01:39,306 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 20:01:39,306 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 20:01:39,306 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 20:01:39,306 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 20:01:39,306 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 20:01:39,306 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:47,668 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:47,810 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 20:01:47,810 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 20:01:47,810 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 20:01:47,938 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 20:01:48,100 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:48,116 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:48,116 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:48,131 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:48,146 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:48,154 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 20:01:48,174 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 20:01:48,180 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 20:01:48,182 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 20:01:48,185 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 20:01:48,188 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 20:01:48,190 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 20:01:48,193 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 20:01:48,195 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 20:01:48,198 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 20:01:48,201 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 20:01:48,204 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 20:01:48,207 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 20:01:48,209 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 20:01:48,212 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 20:01:48,217 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 20:01:48,221 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:48,221 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:48,225 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 20:01:48,225 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 20:01:48,230 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:48,230 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:48,234 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:48,234 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 20:01:48,238 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:48,238 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 20:01:48,242 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 20:01:48,242 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 20:01:48,246 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 20:01:48,246 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 20:01:48,246 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 20:01:48,250 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 20:01:48,250 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 20:01:48,250 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 20:01:48,254 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 20:01:48,258 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 20:01:48,258 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 20:01:48,258 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 20:01:48,258 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 20:01:48,258 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 20:01:48,262 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 20:01:48,266 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 20:01:48,266 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 20:01:48,266 - DEBUG - ðŸ” Relationship Details:
2025-09-23 20:01:48,266 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,267 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 20:01:48,267 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,267 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,267 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,267 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 20:01:48,267 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,267 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 20:01:48,267 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,267 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 20:01:48,267 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 20:01:48,267 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 20:01:48,267 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 20:01:48,267 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 20:01:48,267 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 20:01:48,267 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 20:01:48,268 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:48,317 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:48,332 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:48,333 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 20:01:48,345 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 20:01:48,349 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 20:01:48,352 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 20:01:48,354 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 20:01:48,357 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 20:01:48,359 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 20:01:48,362 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 20:01:48,365 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 20:01:48,368 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 20:01:48,370 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 20:01:48,373 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 20:01:48,376 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 20:01:48,378 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 20:01:48,381 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 20:01:48,386 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 20:01:48,390 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:48,390 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:48,394 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 20:01:48,394 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 20:01:48,398 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:48,398 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:48,402 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:48,402 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 20:01:48,406 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:48,406 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 20:01:48,410 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 20:01:48,410 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 20:01:48,414 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 20:01:48,414 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 20:01:48,414 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 20:01:48,418 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 20:01:48,418 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 20:01:48,418 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 20:01:48,423 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 20:01:48,427 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 20:01:48,427 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 20:01:48,427 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 20:01:48,427 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 20:01:48,427 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 20:01:48,431 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 20:01:48,435 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 20:01:48,435 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 20:01:48,436 - DEBUG - ðŸ” Relationship Details:
2025-09-23 20:01:48,436 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,436 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 20:01:48,436 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,436 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,436 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,436 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 20:01:48,436 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,436 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 20:01:48,436 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 20:01:48,436 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 20:01:48,436 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 20:01:48,436 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 20:01:48,436 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 20:01:48,436 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 20:01:55,704 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:55,842 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-23 20:01:55,842 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-23 20:01:55,842 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-23 20:01:55,972 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-23 20:01:56,135 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:56,151 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:56,151 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:56,166 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:56,181 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:56,190 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 20:01:56,210 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 20:01:56,216 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 20:01:56,218 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 20:01:56,221 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 20:01:56,224 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 20:01:56,226 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 20:01:56,229 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 20:01:56,232 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 20:01:56,235 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 20:01:56,237 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 20:01:56,240 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 20:01:56,243 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 20:01:56,246 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 20:01:56,249 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 20:01:56,254 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 20:01:56,258 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:56,258 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:56,262 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 20:01:56,262 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 20:01:56,266 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:56,266 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:56,270 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:56,270 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 20:01:56,274 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:56,274 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 20:01:56,278 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 20:01:56,278 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 20:01:56,282 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 20:01:56,282 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 20:01:56,282 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 20:01:56,286 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 20:01:56,286 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 20:01:56,286 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 20:01:56,290 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 20:01:56,294 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 20:01:56,294 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 20:01:56,294 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 20:01:56,294 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 20:01:56,294 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 20:01:56,298 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 20:01:56,302 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 20:01:56,302 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 20:01:56,302 - DEBUG - ðŸ” Relationship Details:
2025-09-23 20:01:56,302 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,302 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 20:01:56,303 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,303 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,303 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,303 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 20:01:56,303 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,303 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 20:01:56,303 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,303 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 20:01:56,303 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 20:01:56,303 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 20:01:56,303 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 20:01:56,303 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 20:01:56,303 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 20:01:56,303 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 20:01:56,303 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-23 20:01:56,745 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:01:56,760 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:01:56,760 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 20:01:56,773 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 20:01:56,777 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 20:01:56,780 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 20:01:56,782 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 20:01:56,785 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 20:01:56,788 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 20:01:56,790 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 20:01:56,793 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 20:01:56,796 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 20:01:56,798 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 20:01:56,801 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 20:01:56,804 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 20:01:56,807 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 20:01:56,810 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 20:01:56,815 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 20:01:56,819 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:56,819 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:56,823 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 20:01:56,823 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 20:01:56,827 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:56,827 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 20:01:56,831 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:56,831 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 20:01:56,835 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:01:56,835 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 20:01:56,839 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 20:01:56,839 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 20:01:56,843 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 20:01:56,843 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 20:01:56,843 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 20:01:56,847 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 20:01:56,847 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 20:01:56,847 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 20:01:56,851 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 20:01:56,855 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 20:01:56,855 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 20:01:56,855 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 20:01:56,855 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 20:01:56,855 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 20:01:56,859 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 20:01:56,863 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 20:01:56,863 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 20:01:56,863 - DEBUG - ðŸ” Relationship Details:
2025-09-23 20:01:56,863 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,863 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 20:01:56,863 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,863 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,863 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,863 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 20:01:56,863 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,863 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 20:01:56,863 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 20:01:56,864 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 20:01:56,864 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 20:01:56,864 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 20:01:56,864 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 20:01:56,864 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 20:02:03,074 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:02:03,090 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-23 20:02:03,091 - INFO - ðŸ“¨ Chat request: what is the reliability of gt 1 on ins one...
2025-09-23 20:02:03,091 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-23 20:02:03,179 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-23 20:02:03,440 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-23 20:02:03,440 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:02:03,455 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:02:03,456 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:02:03,471 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-23 20:02:03,486 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-23 20:02:03,487 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-23 20:02:03,500 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-23 20:02:03,504 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-23 20:02:03,507 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-23 20:02:03,510 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-23 20:02:03,513 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-23 20:02:03,516 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-23 20:02:03,518 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-23 20:02:03,521 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-23 20:02:03,524 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-23 20:02:03,527 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-23 20:02:03,529 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-23 20:02:03,532 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-23 20:02:03,535 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-23 20:02:03,537 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-23 20:02:03,542 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-23 20:02:03,546 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:02:03,546 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-23 20:02:03,551 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-23 20:02:03,551 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-23 20:02:03,555 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:02:03,555 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-23 20:02:03,559 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:02:03,559 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-23 20:02:03,563 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-23 20:02:03,563 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-23 20:02:03,567 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-23 20:02:03,567 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-23 20:02:03,571 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-23 20:02:03,571 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-23 20:02:03,571 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-23 20:02:03,576 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-23 20:02:03,576 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-23 20:02:03,576 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-23 20:02:03,580 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-23 20:02:03,585 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-23 20:02:03,585 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-23 20:02:03,585 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-23 20:02:03,585 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-23 20:02:03,585 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-23 20:02:03,589 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-23 20:02:03,593 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-23 20:02:03,593 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-23 20:02:03,593 - DEBUG - ðŸ” Relationship Details:
2025-09-23 20:02:03,593 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:02:03,593 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-23 20:02:03,593 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-23 20:02:03,593 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-23 20:02:03,593 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-23 20:02:03,593 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-23 20:02:03,593 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-23 20:02:03,593 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-23 20:02:03,593 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-23 20:02:03,594 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-23 20:02:03,594 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-23 20:02:03,594 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-23 20:02:03,594 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-23 20:02:03,594 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-23 20:02:03,594 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-23 20:02:03,594 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-23 20:02:03,594 - INFO - âœ… ChatOrchestrator instance created successfully!
2025-09-23 20:02:03,594 - INFO - âœ… Got ChatOrchestrator
2025-09-23 20:02:03,617 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-23 20:02:03,618 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7918c9495a90>
2025-09-23 20:02:03,618 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-23 20:02:03,618 - DEBUG - send_request_headers.complete
2025-09-23 20:02:03,618 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-23 20:02:03,618 - DEBUG - send_request_body.complete
2025-09-23 20:02:03,619 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-23 20:03:03,619 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-23 20:03:03,628 - DEBUG - response_closed.started
2025-09-23 20:03:03,628 - DEBUG - response_closed.complete
2025-09-23 20:03:03,629 - INFO - Database engine created with pool_size=10
2025-09-23 20:03:03,765 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-23 20:03:03,766 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7918c93e00d0>
2025-09-23 20:03:03,766 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-23 20:03:03,766 - DEBUG - send_request_headers.complete
2025-09-23 20:03:03,766 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-23 20:03:03,766 - DEBUG - send_request_body.complete
2025-09-23 20:03:03,767 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-23 20:04:03,768 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-23 20:04:03,811 - DEBUG - response_closed.started
2025-09-23 20:04:03,811 - DEBUG - response_closed.complete
2025-09-23 20:04:03,872 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 14:00:40,326 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 14:00:41,926 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 14:00:41,926 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 14:00:41,926 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 14:00:42,614 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 14:00:43,022 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:00:43,046 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 14:00:43,046 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:00:43,061 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:00:43,076 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 14:00:43,139 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 14:00:43,428 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 14:00:43,434 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 14:00:43,437 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 14:00:43,440 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 14:00:43,443 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 14:00:43,445 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 14:00:43,448 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 14:00:43,451 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 14:00:43,454 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 14:00:43,457 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 14:00:43,460 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 14:00:43,463 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 14:00:43,466 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 14:00:43,469 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 14:00:43,474 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 14:00:43,478 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:00:43,478 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 14:00:43,482 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 14:00:43,483 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 14:00:43,487 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:00:43,487 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 14:00:43,490 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:00:43,491 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 14:00:43,494 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:00:43,494 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 14:00:43,499 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 14:00:43,499 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 14:00:43,503 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 14:00:43,503 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 14:00:43,503 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 14:00:43,507 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 14:00:43,507 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 14:00:43,507 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 14:00:43,511 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 14:00:43,516 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 14:00:43,516 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 14:00:43,516 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 14:00:43,516 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 14:00:43,516 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 14:00:43,520 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 14:00:43,524 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 14:00:43,524 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 14:00:43,524 - DEBUG - ðŸ” Relationship Details:
2025-09-24 14:00:43,524 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:00:43,524 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 14:00:43,524 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:00:43,524 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 14:00:43,524 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 14:00:43,524 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 14:00:43,524 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 14:00:43,524 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 14:00:43,524 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 14:00:43,524 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 14:00:43,524 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 14:00:43,524 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 14:00:43,525 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 14:00:43,525 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 14:00:43,525 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 14:00:43,525 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 14:00:43,525 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 14:00:44,078 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:00:44,093 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 14:00:44,094 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 14:00:44,106 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 14:00:44,110 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 14:00:44,113 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 14:00:44,117 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 14:00:44,120 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 14:00:44,122 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 14:00:44,125 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 14:00:44,129 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 14:00:44,132 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 14:00:44,134 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 14:00:44,138 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 14:00:44,141 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 14:00:44,143 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 14:00:44,146 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 14:00:44,152 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 14:00:44,156 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:00:44,157 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 14:00:44,161 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 14:00:44,161 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 14:00:44,165 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:00:44,165 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 14:00:44,169 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:00:44,169 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 14:00:44,173 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:00:44,173 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 14:00:44,178 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 14:00:44,178 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 14:00:44,182 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 14:00:44,182 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 14:00:44,182 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 14:00:44,186 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 14:00:44,186 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 14:00:44,186 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 14:00:44,191 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 14:00:44,195 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 14:00:44,195 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 14:00:44,195 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 14:00:44,195 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 14:00:44,195 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 14:00:44,200 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 14:00:44,204 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 14:00:44,204 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 14:00:44,204 - DEBUG - ðŸ” Relationship Details:
2025-09-24 14:00:44,204 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:00:44,204 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 14:00:44,204 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:00:44,204 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 14:00:44,204 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 14:00:44,204 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 14:00:44,204 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 14:00:44,204 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 14:00:44,205 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 14:00:44,205 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 14:00:44,205 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 14:00:44,205 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 14:00:44,205 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 14:00:44,205 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 14:00:48,678 - INFO - Database engine created with pool_size=10
2025-09-24 14:01:10,692 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:01:10,709 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 14:01:10,710 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 14:01:10,710 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-24 14:01:10,733 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-24 14:01:10,734 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-24 14:01:10,735 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:01:10,751 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 14:01:10,751 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:01:10,767 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:01:10,782 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 14:01:10,783 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 14:01:10,795 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 14:01:10,799 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 14:01:10,801 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 14:01:10,804 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 14:01:10,806 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 14:01:10,809 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 14:01:10,811 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 14:01:10,814 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 14:01:10,816 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 14:01:10,819 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 14:01:10,822 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 14:01:10,824 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 14:01:10,827 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 14:01:10,830 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 14:01:10,835 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 14:01:10,839 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:01:10,839 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 14:01:10,843 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 14:01:10,843 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 14:01:10,847 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:01:10,847 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 14:01:10,851 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:01:10,851 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 14:01:10,855 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:01:10,855 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 14:01:10,859 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 14:01:10,859 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 14:01:10,863 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 14:01:10,863 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 14:01:10,863 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 14:01:10,867 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 14:01:10,868 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 14:01:10,868 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 14:01:10,872 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 14:01:10,876 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 14:01:10,876 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 14:01:10,876 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 14:01:10,876 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 14:01:10,876 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 14:01:10,880 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 14:01:10,884 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 14:01:10,884 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 14:01:10,885 - DEBUG - ðŸ” Relationship Details:
2025-09-24 14:01:10,885 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:01:10,885 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 14:01:10,885 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:01:10,885 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 14:01:10,885 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 14:01:10,885 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 14:01:10,885 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 14:01:10,885 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 14:01:10,885 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 14:01:10,885 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 14:01:10,885 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 14:01:10,885 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 14:01:10,885 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 14:01:10,885 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 14:01:10,885 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 14:01:10,885 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 14:01:10,885 - INFO - âœ… ChatOrchestrator instance created successfully!
2025-09-24 14:01:10,885 - INFO - âœ… Got ChatOrchestrator
2025-09-24 14:01:10,908 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:01:10,909 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7c1f49521cd0>
2025-09-24 14:01:10,909 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:01:10,909 - DEBUG - send_request_headers.complete
2025-09-24 14:01:10,909 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:01:10,909 - DEBUG - send_request_body.complete
2025-09-24 14:01:10,909 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:02:10,911 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 14:02:11,126 - DEBUG - response_closed.started
2025-09-24 14:02:11,161 - DEBUG - response_closed.complete
2025-09-24 14:02:12,853 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:02:12,854 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7c1f48b53f90>
2025-09-24 14:02:12,855 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:02:12,855 - DEBUG - send_request_headers.complete
2025-09-24 14:02:12,855 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:02:12,855 - DEBUG - send_request_body.complete
2025-09-24 14:02:12,855 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:03:40,768 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 14:03:41,195 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 14:03:41,195 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 14:03:41,195 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 14:03:41,684 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 14:03:42,093 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:03:42,117 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 14:03:42,117 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:03:42,133 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:03:42,149 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 14:03:42,206 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 14:03:42,395 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 14:03:42,401 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 14:03:42,404 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 14:03:42,406 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 14:03:42,409 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 14:03:42,412 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 14:03:42,414 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 14:03:42,417 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 14:03:42,420 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 14:03:42,423 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 14:03:42,425 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 14:03:42,429 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 14:03:42,431 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 14:03:42,434 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 14:03:42,441 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 14:03:42,445 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:03:42,445 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 14:03:42,449 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 14:03:42,449 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 14:03:42,453 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:03:42,453 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 14:03:42,457 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:03:42,457 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 14:03:42,462 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:03:42,462 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 14:03:42,466 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 14:03:42,466 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 14:03:42,470 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 14:03:42,470 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 14:03:42,470 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 14:03:42,474 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 14:03:42,475 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 14:03:42,475 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 14:03:42,479 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 14:03:42,483 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 14:03:42,483 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 14:03:42,483 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 14:03:42,483 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 14:03:42,483 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 14:03:42,487 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 14:03:42,491 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 14:03:42,492 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 14:03:42,492 - DEBUG - ðŸ” Relationship Details:
2025-09-24 14:03:42,492 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:03:42,492 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 14:03:42,492 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:03:42,492 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 14:03:42,492 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 14:03:42,492 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 14:03:42,492 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 14:03:42,492 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 14:03:42,492 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 14:03:42,492 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 14:03:42,492 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 14:03:42,492 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 14:03:42,493 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 14:03:42,493 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 14:03:42,493 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 14:03:42,493 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 14:03:42,493 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 14:03:43,266 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:03:43,282 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 14:03:43,283 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 14:03:43,295 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 14:03:43,299 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 14:03:43,302 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 14:03:43,305 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 14:03:43,308 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 14:03:43,310 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 14:03:43,313 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 14:03:43,316 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 14:03:43,319 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 14:03:43,322 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 14:03:43,325 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 14:03:43,328 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 14:03:43,330 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 14:03:43,334 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 14:03:43,339 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 14:03:43,344 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:03:43,344 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 14:03:43,348 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 14:03:43,348 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 14:03:43,353 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:03:43,353 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 14:03:43,357 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:03:43,357 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 14:03:43,362 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:03:43,362 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 14:03:43,366 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 14:03:43,366 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 14:03:43,371 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 14:03:43,371 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 14:03:43,371 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 14:03:43,376 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 14:03:43,376 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 14:03:43,376 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 14:03:43,380 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 14:03:43,385 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 14:03:43,385 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 14:03:43,385 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 14:03:43,385 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 14:03:43,385 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 14:03:43,389 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 14:03:43,393 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 14:03:43,394 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 14:03:43,394 - DEBUG - ðŸ” Relationship Details:
2025-09-24 14:03:43,394 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:03:43,394 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 14:03:43,394 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:03:43,394 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 14:03:43,394 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 14:03:43,394 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 14:03:43,394 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 14:03:43,394 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 14:03:43,394 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 14:03:43,394 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 14:03:43,394 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 14:03:43,395 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 14:03:43,395 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 14:03:43,395 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 14:03:56,161 - INFO - Database engine created with pool_size=10
2025-09-24 14:04:02,806 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:04:02,821 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 14:04:02,822 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 14:04:02,822 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-24 14:04:03,105 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-24 14:04:03,308 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-24 14:04:03,309 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:04:03,325 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 14:04:03,325 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:04:03,341 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:04:03,357 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 14:04:03,357 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 14:04:03,369 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 14:04:03,373 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 14:04:03,375 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 14:04:03,378 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 14:04:03,380 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 14:04:03,383 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 14:04:03,385 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 14:04:03,388 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 14:04:03,391 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 14:04:03,394 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 14:04:03,397 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 14:04:03,399 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 14:04:03,402 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 14:04:03,405 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 14:04:03,410 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 14:04:03,414 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:04:03,414 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 14:04:03,418 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 14:04:03,418 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 14:04:03,422 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:04:03,422 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 14:04:03,426 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:04:03,426 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 14:04:03,430 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 14:04:03,431 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 14:04:03,435 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 14:04:03,435 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 14:04:03,439 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 14:04:03,439 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 14:04:03,439 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 14:04:03,443 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 14:04:03,443 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 14:04:03,443 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 14:04:03,447 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 14:04:03,452 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 14:04:03,452 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 14:04:03,452 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 14:04:03,452 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 14:04:03,452 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 14:04:03,457 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 14:04:03,461 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 14:04:03,461 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 14:04:03,461 - DEBUG - ðŸ” Relationship Details:
2025-09-24 14:04:03,461 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:04:03,462 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 14:04:03,462 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 14:04:03,462 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 14:04:03,462 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 14:04:03,462 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 14:04:03,462 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 14:04:03,462 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 14:04:03,462 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 14:04:03,462 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 14:04:03,462 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 14:04:03,462 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 14:04:03,462 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 14:04:03,462 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 14:04:03,463 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 14:04:03,463 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 14:04:03,463 - INFO - âœ… ChatOrchestrator instance created successfully!
2025-09-24 14:04:03,463 - INFO - âœ… Got ChatOrchestrator
2025-09-24 14:04:03,487 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:04:03,488 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058f28fa10>
2025-09-24 14:04:03,488 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:04:03,489 - DEBUG - send_request_headers.complete
2025-09-24 14:04:03,489 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:04:03,489 - DEBUG - send_request_body.complete
2025-09-24 14:04:03,489 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:05:03,490 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 14:05:03,490 - DEBUG - response_closed.started
2025-09-24 14:05:03,491 - DEBUG - response_closed.complete
2025-09-24 14:05:03,521 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:05:03,522 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058f242f90>
2025-09-24 14:05:03,522 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:05:03,523 - DEBUG - send_request_headers.complete
2025-09-24 14:05:03,523 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:05:03,523 - DEBUG - send_request_body.complete
2025-09-24 14:05:03,523 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:06:04,083 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 14:06:04,510 - DEBUG - response_closed.started
2025-09-24 14:06:04,716 - DEBUG - response_closed.complete
2025-09-24 14:06:05,008 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 14:09:05,198 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:09:05,240 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 14:09:05,240 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 14:09:05,240 - INFO - âœ… Got ChatOrchestrator
2025-09-24 14:09:05,368 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:09:05,369 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058f10ee50>
2025-09-24 14:09:05,369 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:09:05,369 - DEBUG - send_request_headers.complete
2025-09-24 14:09:05,369 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:09:05,370 - DEBUG - send_request_body.complete
2025-09-24 14:09:05,370 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:09:53,519 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:09:53,547 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 14:09:53,547 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 14:09:53,547 - INFO - âœ… Got ChatOrchestrator
2025-09-24 14:09:53,585 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:09:53,586 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058e763390>
2025-09-24 14:09:53,587 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:09:53,587 - DEBUG - send_request_headers.complete
2025-09-24 14:09:53,587 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:09:53,587 - DEBUG - send_request_body.complete
2025-09-24 14:09:53,587 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:09:57,600 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 08:39:57 GMT'), (b'Content-Length', b'357')])
2025-09-24 14:09:57,600 - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-09-24 14:09:57,600 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 14:09:57,600 - DEBUG - receive_response_body.complete
2025-09-24 14:09:57,600 - DEBUG - response_closed.started
2025-09-24 14:09:57,601 - DEBUG - response_closed.complete
2025-09-24 14:09:57,601 - DEBUG - close.started
2025-09-24 14:09:57,601 - DEBUG - close.complete
2025-09-24 14:09:57,644 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:09:57,646 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058e72e950>
2025-09-24 14:09:57,646 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:09:57,646 - DEBUG - send_request_headers.complete
2025-09-24 14:09:57,646 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:09:57,646 - DEBUG - send_request_body.complete
2025-09-24 14:09:57,647 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:10:02,281 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 08:40:02 GMT'), (b'Content-Length', b'354')])
2025-09-24 14:10:02,282 - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-09-24 14:10:02,282 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 14:10:02,282 - DEBUG - receive_response_body.complete
2025-09-24 14:10:02,282 - DEBUG - response_closed.started
2025-09-24 14:10:02,283 - DEBUG - response_closed.complete
2025-09-24 14:10:02,283 - DEBUG - close.started
2025-09-24 14:10:02,283 - DEBUG - close.complete
2025-09-24 14:10:02,309 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:10:02,309 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058e761490>
2025-09-24 14:10:02,310 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:10:02,310 - DEBUG - send_request_headers.complete
2025-09-24 14:10:02,310 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:10:02,310 - DEBUG - send_request_body.complete
2025-09-24 14:10:02,310 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:10:57,648 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 14:10:57,801 - DEBUG - response_closed.started
2025-09-24 14:10:57,802 - DEBUG - response_closed.complete
2025-09-24 14:10:57,802 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 14:10:59,318 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 500, b'Internal Server Error', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 08:40:59 GMT'), (b'Content-Length', b'62')])
2025-09-24 14:10:59,318 - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 500 Internal Server Error"
2025-09-24 14:10:59,318 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 14:10:59,319 - DEBUG - receive_response_body.complete
2025-09-24 14:10:59,319 - DEBUG - response_closed.started
2025-09-24 14:10:59,319 - DEBUG - response_closed.complete
2025-09-24 14:10:59,319 - DEBUG - close.started
2025-09-24 14:10:59,319 - DEBUG - close.complete
2025-09-24 14:10:59,319 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 14:12:32,843 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:12:32,884 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 14:12:32,885 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 14:12:32,885 - INFO - âœ… Got ChatOrchestrator
2025-09-24 14:12:32,987 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:12:32,988 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058e749090>
2025-09-24 14:12:32,988 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:12:32,988 - DEBUG - send_request_headers.complete
2025-09-24 14:12:32,988 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:12:32,989 - DEBUG - send_request_body.complete
2025-09-24 14:12:32,989 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:13:32,989 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 14:13:32,990 - DEBUG - response_closed.started
2025-09-24 14:13:32,990 - DEBUG - response_closed.complete
2025-09-24 14:13:33,015 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:13:33,015 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058e74ad50>
2025-09-24 14:13:33,015 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:13:33,016 - DEBUG - send_request_headers.complete
2025-09-24 14:13:33,016 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:13:33,016 - DEBUG - send_request_body.complete
2025-09-24 14:13:33,016 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:14:11,333 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:14:11,350 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 14:14:11,350 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 14:14:11,350 - INFO - âœ… Got ChatOrchestrator
2025-09-24 14:14:11,380 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:14:11,381 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058e754c90>
2025-09-24 14:14:11,381 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:14:11,382 - DEBUG - send_request_headers.complete
2025-09-24 14:14:11,382 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:14:11,382 - DEBUG - send_request_body.complete
2025-09-24 14:14:11,382 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:14:33,017 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 14:14:33,017 - DEBUG - response_closed.started
2025-09-24 14:14:33,017 - DEBUG - response_closed.complete
2025-09-24 14:14:33,018 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 14:15:11,383 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 14:15:11,383 - DEBUG - response_closed.started
2025-09-24 14:15:11,383 - DEBUG - response_closed.complete
2025-09-24 14:15:11,827 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:15:11,827 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058e70fe50>
2025-09-24 14:15:11,828 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:15:11,828 - DEBUG - send_request_headers.complete
2025-09-24 14:15:11,828 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:15:11,828 - DEBUG - send_request_body.complete
2025-09-24 14:15:11,828 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:16:02,970 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 14:16:03,014 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 14:16:03,015 - INFO - ðŸ“¨ Chat request: what is the value of p1 on gt 1 of ship ins one??...
2025-09-24 14:16:03,015 - INFO - âœ… Got ChatOrchestrator
2025-09-24 14:16:03,037 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 14:16:03,038 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x76058e7832d0>
2025-09-24 14:16:03,038 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:16:03,038 - DEBUG - send_request_headers.complete
2025-09-24 14:16:03,038 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:16:03,038 - DEBUG - send_request_body.complete
2025-09-24 14:16:03,038 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 14:16:11,830 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 14:16:11,830 - DEBUG - response_closed.started
2025-09-24 14:16:11,830 - DEBUG - response_closed.complete
2025-09-24 14:16:11,831 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 14:17:03,039 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 14:17:03,039 - DEBUG - response_closed.started
2025-09-24 14:17:03,039 - DEBUG - response_closed.complete
2025-09-24 14:17:03,082 - INFO - ðŸ“Œ User input: what is the value of p1 on gt 1 of ship ins one??
2025-09-24 14:17:03,082 - DEBUG - ðŸ“Œ Full input with context: Previous conversation:
[HumanMessage(content='list all ships', additional_kwargs={}, response_metadata={}), AIMessage(content='', additional_kwargs={}, response_metadata={})]

User: what is the value of p1 on gt 1 of ship ins one??
2025-09-24 14:17:03,082 - INFO - ðŸ“Œ Processing query: Previous conversation:
[HumanMessage(content='list all ships', additional_kwargs={}, response_metadata={}), AIMessage(content='', additional_kwargs={}, response_metadata={})]

User: what is the value of p1 on gt 1 of ship ins one??
2025-09-24 14:17:03,082 - DEBUG - âœ… Schema available for role Admin/ INSMA: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 14:17:03,083 - INFO - ðŸ“Œ Generating SQL for: Previous conversation:
[HumanMessage(content='list all ships', additional_kwargs={}, response_metadata={}), AIMessage(content='', additional_kwargs={}, response_metadata={})]

User: what is the value of p1 on gt 1 of ship ins one??
2025-09-24 14:17:03,083 - DEBUG - ðŸ“Œ Generated Prompt Length: 9319 characters
2025-09-24 14:17:03,083 - INFO - Generating SQL query...
2025-09-24 14:17:03,187 - DEBUG - connect_tcp.started host='127.0.0.1' port=11434 local_address=None timeout=None socket_options=None
2025-09-24 14:17:03,187 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x76058e70fdd0>
2025-09-24 14:17:03,188 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 14:17:03,188 - DEBUG - send_request_headers.complete
2025-09-24 14:17:03,188 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 14:17:03,188 - DEBUG - send_request_body.complete
2025-09-24 14:17:03,188 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 15:34:25,529 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 15:34:25,890 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 15:34:25,890 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 15:34:25,890 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 15:34:26,336 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 15:34:29,472 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 15:34:29,752 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 15:34:29,752 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 15:34:29,768 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 15:34:29,784 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 15:34:30,539 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 15:34:34,938 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 15:34:35,016 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 15:34:35,019 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 15:34:35,022 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 15:34:35,025 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 15:34:35,027 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 15:34:35,030 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 15:34:35,033 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 15:34:35,036 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 15:34:35,038 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 15:34:35,041 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 15:34:35,044 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 15:34:35,046 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 15:34:35,049 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 15:34:35,417 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 15:34:35,520 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:34:35,520 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 15:34:35,524 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 15:34:35,524 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 15:34:35,528 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:34:35,528 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 15:34:35,532 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:34:35,533 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 15:34:35,538 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:34:35,538 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 15:34:35,544 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 15:34:35,544 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 15:34:35,549 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 15:34:35,549 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 15:34:35,549 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 15:34:35,554 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 15:34:35,554 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 15:34:35,554 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 15:34:35,558 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 15:34:35,563 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 15:34:35,563 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 15:34:35,563 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 15:34:35,563 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 15:34:35,563 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 15:34:35,567 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 15:34:35,571 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 15:34:35,571 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 15:34:35,572 - DEBUG - ðŸ” Relationship Details:
2025-09-24 15:34:35,572 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 15:34:35,572 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 15:34:35,572 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 15:34:35,572 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 15:34:35,572 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 15:34:35,572 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 15:34:35,572 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 15:34:35,572 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 15:34:35,572 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 15:34:35,572 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 15:34:35,572 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 15:34:35,572 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 15:34:35,572 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 15:34:35,572 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 15:34:35,573 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 15:34:35,573 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 15:34:35,573 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 15:34:42,643 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 15:34:42,659 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 15:34:42,659 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 15:34:42,672 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 15:34:42,677 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 15:34:42,680 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 15:34:42,682 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 15:34:42,685 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 15:34:42,688 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 15:34:42,691 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 15:34:42,694 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 15:34:42,697 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 15:34:42,699 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 15:34:42,702 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 15:34:42,706 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 15:34:42,708 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 15:34:42,711 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 15:34:42,717 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 15:34:42,722 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:34:42,722 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 15:34:42,726 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 15:34:42,726 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 15:34:42,730 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:34:42,730 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 15:34:42,734 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:34:42,734 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 15:34:42,738 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:34:42,738 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 15:34:42,742 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 15:34:42,742 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 15:34:42,746 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 15:34:42,746 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 15:34:42,746 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 15:34:42,751 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 15:34:42,751 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 15:34:42,751 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 15:34:42,755 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 15:34:42,760 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 15:34:42,760 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 15:34:42,760 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 15:34:42,760 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 15:34:42,760 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 15:34:42,764 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 15:34:42,768 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 15:34:42,768 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 15:34:42,768 - DEBUG - ðŸ” Relationship Details:
2025-09-24 15:34:42,768 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 15:34:42,769 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 15:34:42,769 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 15:34:42,769 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 15:34:42,769 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 15:34:42,769 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 15:34:42,769 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 15:34:42,769 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 15:34:42,769 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 15:34:42,769 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 15:34:42,769 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 15:34:42,769 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 15:34:42,769 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 15:34:42,769 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 15:35:42,779 - INFO - Database engine created with pool_size=10
2025-09-24 15:36:48,030 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 15:36:48,046 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 15:36:48,047 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 15:36:48,047 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-24 15:36:48,076 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-24 15:36:48,077 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-24 15:36:48,078 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 15:36:48,093 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 15:36:48,094 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 15:36:48,109 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 15:36:48,124 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 15:36:48,125 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 15:36:48,137 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 15:36:48,141 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 15:36:48,144 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 15:36:48,146 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 15:36:48,149 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 15:36:48,151 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 15:36:48,154 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 15:36:48,156 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 15:36:48,159 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 15:36:48,162 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 15:36:48,164 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 15:36:48,167 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 15:36:48,170 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 15:36:48,173 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 15:36:48,178 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 15:36:48,182 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:36:48,182 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 15:36:48,186 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 15:36:48,186 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 15:36:48,190 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:36:48,190 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 15:36:48,194 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:36:48,195 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 15:36:48,198 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 15:36:48,198 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 15:36:48,202 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 15:36:48,202 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 15:36:48,207 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 15:36:48,207 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 15:36:48,207 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 15:36:48,211 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 15:36:48,211 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 15:36:48,211 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 15:36:48,215 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 15:36:48,220 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 15:36:48,220 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 15:36:48,220 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 15:36:48,220 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 15:36:48,220 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 15:36:48,224 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 15:36:48,228 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 15:36:48,228 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 15:36:48,228 - DEBUG - ðŸ” Relationship Details:
2025-09-24 15:36:48,228 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 15:36:48,228 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 15:36:48,228 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 15:36:48,228 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 15:36:48,228 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 15:36:48,228 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 15:36:48,228 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 15:36:48,228 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 15:36:48,228 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 15:36:48,228 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 15:36:48,228 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 15:36:48,228 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 15:36:48,228 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 15:36:48,229 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 15:36:48,229 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 15:36:48,229 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 15:36:48,229 - INFO - âœ… ChatOrchestrator instance created successfully!
2025-09-24 15:36:48,229 - INFO - âœ… Got ChatOrchestrator
2025-09-24 15:36:48,251 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 15:36:48,252 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x78e8862a0450>
2025-09-24 15:36:48,252 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 15:36:48,253 - DEBUG - send_request_headers.complete
2025-09-24 15:36:48,253 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 15:36:48,253 - DEBUG - send_request_body.complete
2025-09-24 15:36:48,253 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 15:37:48,254 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 15:37:48,254 - DEBUG - response_closed.started
2025-09-24 15:37:48,254 - DEBUG - response_closed.complete
2025-09-24 15:37:48,310 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 15:37:48,311 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x78e885703d90>
2025-09-24 15:37:48,311 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 15:37:48,311 - DEBUG - send_request_headers.complete
2025-09-24 15:37:48,312 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 15:37:48,312 - DEBUG - send_request_body.complete
2025-09-24 15:37:48,312 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 15:38:48,313 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 15:38:48,393 - DEBUG - response_closed.started
2025-09-24 15:38:48,393 - DEBUG - response_closed.complete
2025-09-24 15:38:48,394 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 15:41:22,727 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 15:41:22,743 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 15:41:22,743 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 15:41:22,743 - INFO - âœ… Got ChatOrchestrator
2025-09-24 15:41:22,765 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 15:41:22,766 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x78e88571f4d0>
2025-09-24 15:41:22,767 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 15:41:22,767 - DEBUG - send_request_headers.complete
2025-09-24 15:41:22,767 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 15:41:22,767 - DEBUG - send_request_body.complete
2025-09-24 15:41:22,767 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 15:42:22,768 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 15:42:22,768 - DEBUG - response_closed.started
2025-09-24 15:42:22,768 - DEBUG - response_closed.complete
2025-09-24 15:42:22,794 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 15:42:22,795 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x78e88571d850>
2025-09-24 15:42:22,796 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 15:42:22,796 - DEBUG - send_request_headers.complete
2025-09-24 15:42:22,796 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 15:42:22,796 - DEBUG - send_request_body.complete
2025-09-24 15:42:22,796 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 15:43:22,797 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 15:43:22,797 - DEBUG - response_closed.started
2025-09-24 15:43:22,797 - DEBUG - response_closed.complete
2025-09-24 15:43:22,798 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 16:14:38,519 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 16:14:38,535 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 16:14:38,535 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 16:14:38,535 - INFO - âœ… Got ChatOrchestrator
2025-09-24 16:14:38,557 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 16:14:38,558 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x78e8861fec90>
2025-09-24 16:14:38,558 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 16:14:38,558 - DEBUG - send_request_headers.complete
2025-09-24 16:14:38,558 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 16:14:38,558 - DEBUG - send_request_body.complete
2025-09-24 16:14:38,558 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 16:15:35,412 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 10:45:35 GMT'), (b'Content-Length', b'358')])
2025-09-24 16:15:35,439 - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-09-24 16:15:35,455 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 16:15:35,455 - DEBUG - receive_response_body.complete
2025-09-24 16:15:35,466 - DEBUG - response_closed.started
2025-09-24 16:15:35,466 - DEBUG - response_closed.complete
2025-09-24 16:15:35,484 - DEBUG - close.started
2025-09-24 16:15:35,484 - DEBUG - close.complete
2025-09-24 16:15:35,590 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 16:15:35,591 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x78e885715990>
2025-09-24 16:15:35,591 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 16:15:35,592 - DEBUG - send_request_headers.complete
2025-09-24 16:15:35,592 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 16:15:35,592 - DEBUG - send_request_body.complete
2025-09-24 16:15:35,592 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 16:16:35,592 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 16:16:35,592 - DEBUG - response_closed.started
2025-09-24 16:16:35,593 - DEBUG - response_closed.complete
2025-09-24 16:16:35,593 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 16:30:01,042 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 16:30:01,746 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 16:30:01,747 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 16:30:01,747 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 16:30:02,241 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 16:30:02,732 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 16:30:02,778 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 16:30:02,789 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 16:30:02,804 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 16:30:02,820 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 16:30:02,957 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 16:30:04,785 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 16:30:04,917 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 16:30:04,928 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 16:30:04,940 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 16:30:04,943 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 16:30:04,945 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 16:30:04,949 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 16:30:04,993 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 16:30:05,013 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 16:30:05,016 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 16:30:05,020 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 16:30:05,024 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 16:30:05,027 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 16:30:05,030 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 16:30:05,056 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 16:30:05,305 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:30:05,305 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 16:30:05,529 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 16:30:05,529 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 16:30:05,534 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:30:05,534 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 16:30:05,538 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:30:05,538 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 16:30:05,786 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:30:05,786 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 16:30:05,790 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 16:30:05,790 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 16:30:05,794 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 16:30:05,795 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 16:30:05,795 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 16:30:05,866 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 16:30:05,866 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 16:30:05,867 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 16:30:05,871 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 16:30:05,930 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 16:30:05,930 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 16:30:05,930 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 16:30:05,930 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 16:30:05,930 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 16:30:05,935 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 16:30:06,186 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 16:30:06,186 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 16:30:06,186 - DEBUG - ðŸ” Relationship Details:
2025-09-24 16:30:06,186 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 16:30:06,187 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 16:30:06,187 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 16:30:06,187 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 16:30:06,187 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 16:30:06,187 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 16:30:06,187 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 16:30:06,187 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 16:30:06,187 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 16:30:06,187 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 16:30:06,187 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 16:30:06,187 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 16:30:06,187 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 16:30:06,187 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 16:30:06,280 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 16:30:06,280 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 16:30:06,280 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 16:30:09,678 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 16:30:09,694 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 16:30:09,695 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 16:30:09,996 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 16:30:10,064 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 16:30:10,070 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 16:30:10,073 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 16:30:10,077 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 16:30:10,080 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 16:30:10,084 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 16:30:10,097 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 16:30:10,100 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 16:30:10,104 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 16:30:10,107 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 16:30:10,125 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 16:30:10,129 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 16:30:10,144 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 16:30:10,163 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 16:30:10,168 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:30:10,168 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 16:30:10,173 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 16:30:10,173 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 16:30:10,178 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:30:10,178 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 16:30:10,183 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:30:10,183 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 16:30:10,188 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:30:10,188 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 16:30:10,193 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 16:30:10,193 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 16:30:10,198 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 16:30:10,198 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 16:30:10,198 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 16:30:10,203 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 16:30:10,203 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 16:30:10,203 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 16:30:10,208 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 16:30:10,213 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 16:30:10,213 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 16:30:10,213 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 16:30:10,213 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 16:30:10,213 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 16:30:10,218 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 16:30:10,222 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 16:30:10,223 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 16:30:10,223 - DEBUG - ðŸ” Relationship Details:
2025-09-24 16:30:10,223 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 16:30:10,223 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 16:30:10,223 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 16:30:10,223 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 16:30:10,223 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 16:30:10,223 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 16:30:10,223 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 16:30:10,223 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 16:30:10,223 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 16:30:10,223 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 16:30:10,223 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 16:30:10,223 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 16:30:10,224 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 16:30:10,224 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 16:31:21,323 - INFO - Database engine created with pool_size=10
2025-09-24 16:31:32,559 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 16:31:32,575 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 16:31:32,576 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 16:31:32,576 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-24 16:31:33,616 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-24 16:31:36,149 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-24 16:31:36,149 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 16:31:36,165 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 16:31:36,165 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 16:31:36,181 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 16:31:36,198 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 16:31:36,198 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 16:31:39,802 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 16:31:40,063 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 16:31:40,067 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 16:31:40,071 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 16:31:40,074 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 16:31:40,078 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 16:31:40,081 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 16:31:40,085 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 16:31:40,088 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 16:31:40,092 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 16:31:40,096 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 16:31:40,101 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 16:31:40,104 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 16:31:40,107 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 16:31:40,185 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 16:31:40,191 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:31:40,191 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 16:31:40,195 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 16:31:40,195 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 16:31:40,199 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:31:40,199 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 16:31:40,203 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:31:40,203 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 16:31:40,208 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 16:31:40,208 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 16:31:40,212 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 16:31:40,212 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 16:31:40,223 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 16:31:40,223 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 16:31:40,223 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 16:31:40,227 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 16:31:40,227 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 16:31:40,227 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 16:31:40,231 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 16:31:40,236 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 16:31:40,236 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 16:31:40,236 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 16:31:40,236 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 16:31:40,236 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 16:31:40,240 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 16:31:40,245 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 16:31:40,245 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 16:31:40,245 - DEBUG - ðŸ” Relationship Details:
2025-09-24 16:31:40,245 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 16:31:40,245 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 16:31:40,245 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 16:31:40,245 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 16:31:40,245 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 16:31:40,245 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 16:31:40,245 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 16:31:40,245 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 16:31:40,246 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 16:31:40,246 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 16:31:40,246 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 16:31:40,246 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 16:31:40,246 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 16:31:40,246 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 16:31:40,246 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 16:31:40,246 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 16:31:40,246 - INFO - âœ… ChatOrchestrator instance created successfully!
2025-09-24 16:31:40,246 - INFO - âœ… Got ChatOrchestrator
2025-09-24 16:31:40,270 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 16:31:40,271 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7ce94b73bd50>
2025-09-24 16:31:40,271 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 16:31:40,272 - DEBUG - send_request_headers.complete
2025-09-24 16:31:40,272 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 16:31:40,272 - DEBUG - send_request_body.complete
2025-09-24 16:31:40,272 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 16:32:40,272 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 16:32:40,272 - DEBUG - response_closed.started
2025-09-24 16:32:40,273 - DEBUG - response_closed.complete
2025-09-24 16:32:40,417 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 16:32:40,418 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7ce94ad692d0>
2025-09-24 16:32:40,418 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 16:32:40,418 - DEBUG - send_request_headers.complete
2025-09-24 16:32:40,418 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 16:32:40,419 - DEBUG - send_request_body.complete
2025-09-24 16:32:40,419 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 16:33:40,419 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 16:33:40,420 - DEBUG - response_closed.started
2025-09-24 16:33:40,420 - DEBUG - response_closed.complete
2025-09-24 16:33:40,421 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 16:35:50,316 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 16:35:50,332 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 16:35:50,333 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 16:35:50,333 - INFO - âœ… Got ChatOrchestrator
2025-09-24 16:35:50,357 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 16:35:50,357 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7ce94ad89d90>
2025-09-24 16:35:50,358 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 16:35:50,358 - DEBUG - send_request_headers.complete
2025-09-24 16:35:50,358 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 16:35:50,358 - DEBUG - send_request_body.complete
2025-09-24 16:35:50,358 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 16:36:50,359 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 16:36:50,359 - DEBUG - response_closed.started
2025-09-24 16:36:50,359 - DEBUG - response_closed.complete
2025-09-24 16:36:50,596 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 16:36:50,597 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7ce94ad88c10>
2025-09-24 16:36:50,597 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 16:36:50,597 - DEBUG - send_request_headers.complete
2025-09-24 16:36:50,598 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 16:36:50,598 - DEBUG - send_request_body.complete
2025-09-24 16:36:50,598 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 16:37:31,138 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 11:07:31 GMT'), (b'Content-Length', b'520')])
2025-09-24 16:37:31,138 - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-09-24 16:37:31,138 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 16:37:31,138 - DEBUG - receive_response_body.complete
2025-09-24 16:37:31,138 - DEBUG - response_closed.started
2025-09-24 16:37:31,139 - DEBUG - response_closed.complete
2025-09-24 16:37:31,139 - DEBUG - close.started
2025-09-24 16:37:31,139 - DEBUG - close.complete
2025-09-24 16:37:32,254 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 17:17:17,775 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:17:17,790 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 17:17:17,791 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 17:17:17,791 - INFO - âœ… Got ChatOrchestrator
2025-09-24 17:17:17,813 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 17:17:17,814 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7ce94ad61890>
2025-09-24 17:17:17,814 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 17:17:17,814 - DEBUG - send_request_headers.complete
2025-09-24 17:17:17,814 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 17:17:17,814 - DEBUG - send_request_body.complete
2025-09-24 17:17:17,814 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 17:18:17,817 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 17:18:17,817 - DEBUG - response_closed.started
2025-09-24 17:18:17,817 - DEBUG - response_closed.complete
2025-09-24 17:18:17,973 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 17:18:17,974 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7ce94b8ed710>
2025-09-24 17:18:17,974 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 17:18:17,974 - DEBUG - send_request_headers.complete
2025-09-24 17:18:17,974 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 17:18:17,975 - DEBUG - send_request_body.complete
2025-09-24 17:18:17,975 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 17:18:29,417 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 11:48:29 GMT'), (b'Content-Length', b'520')])
2025-09-24 17:18:29,417 - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-09-24 17:18:29,417 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 17:18:29,417 - DEBUG - receive_response_body.complete
2025-09-24 17:18:29,417 - DEBUG - response_closed.started
2025-09-24 17:18:29,417 - DEBUG - response_closed.complete
2025-09-24 17:18:29,418 - DEBUG - close.started
2025-09-24 17:18:29,418 - DEBUG - close.complete
2025-09-24 17:18:29,714 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 17:19:41,202 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:19:41,662 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:19:41,662 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:19:41,662 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:19:42,193 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:19:42,581 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:19:42,606 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:19:42,606 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:19:42,622 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:19:42,637 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:19:42,750 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:19:43,000 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:19:43,013 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:19:43,016 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:19:43,019 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:19:43,023 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:19:43,034 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:19:43,037 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:19:43,040 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:19:43,043 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:19:43,046 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:19:43,048 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:19:43,051 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:19:43,054 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:19:43,057 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:19:43,062 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:19:43,066 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:43,066 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:19:43,070 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:19:43,070 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:19:43,074 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:43,074 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:19:43,078 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:43,078 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:19:43,082 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:43,082 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:19:43,086 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:19:43,086 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:19:43,090 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:19:43,090 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:19:43,090 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:19:43,094 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:19:43,095 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:19:43,095 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:19:43,099 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:19:43,103 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:19:43,103 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:19:43,103 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:19:43,103 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:19:43,103 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:19:43,120 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:19:43,125 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:19:43,125 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:19:43,125 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:19:43,125 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:19:43,125 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:19:43,125 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:19:43,125 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:19:43,125 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:19:43,125 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:19:43,125 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:19:43,125 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:19:43,126 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:19:43,126 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:19:43,126 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:19:43,126 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:19:43,126 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:19:43,126 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:19:43,126 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:19:43,126 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:19:43,127 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:19:47,254 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:19:47,269 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:19:47,270 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:19:47,362 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:19:47,367 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:19:47,369 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:19:47,372 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:19:47,374 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:19:47,377 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:19:47,379 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:19:47,382 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:19:47,385 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:19:47,388 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:19:47,391 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:19:47,394 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:19:47,396 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:19:47,399 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:19:47,404 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:19:47,408 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:47,408 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:19:47,412 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:19:47,412 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:19:47,416 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:47,416 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:19:47,419 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:47,420 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:19:47,424 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:47,424 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:19:47,428 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:19:47,428 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:19:47,432 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:19:47,432 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:19:47,432 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:19:47,436 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:19:47,436 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:19:47,436 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:19:47,440 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:19:47,444 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:19:47,444 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:19:47,445 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:19:47,445 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:19:47,445 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:19:47,449 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:19:47,453 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:19:47,453 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:19:47,453 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:19:47,453 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:19:47,453 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:19:47,453 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:19:47,453 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:19:47,453 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:19:47,453 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:19:47,453 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:19:47,453 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:19:47,453 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:19:47,453 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:19:47,453 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:19:47,453 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:19:47,454 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:19:47,454 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:19:49,523 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:19:49,658 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:19:49,658 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:19:49,658 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:19:49,786 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:19:49,947 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:19:49,963 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:19:49,963 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:19:49,979 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:19:49,994 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:19:50,003 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:19:51,421 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:19:51,484 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:19:51,486 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:19:51,489 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:19:51,492 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:19:51,494 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:19:51,497 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:19:51,500 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:19:51,503 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:19:51,506 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:19:51,508 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:19:51,511 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:19:51,514 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:19:51,545 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:19:51,551 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:19:51,555 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:51,555 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:19:51,559 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:19:51,559 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:19:51,563 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:51,563 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:19:51,567 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:51,567 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:19:51,571 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:51,571 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:19:51,575 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:19:51,575 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:19:51,579 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:19:51,579 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:19:51,579 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:19:51,583 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:19:51,583 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:19:51,583 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:19:51,587 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:19:51,591 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:19:51,592 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:19:51,592 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:19:51,592 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:19:51,592 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:19:51,595 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:19:51,599 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:19:51,599 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:19:51,599 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:19:51,599 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,600 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:19:51,600 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,600 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,600 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,600 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:19:51,600 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,600 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:19:51,600 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,600 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:19:51,600 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:19:51,600 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:19:51,600 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:19:51,600 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:19:51,600 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:19:51,600 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:19:51,601 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:19:51,725 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:19:51,740 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:19:51,741 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:19:51,856 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:19:51,860 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:19:51,863 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:19:51,866 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:19:51,869 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:19:51,872 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:19:51,874 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:19:51,877 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:19:51,880 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:19:51,883 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:19:51,886 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:19:51,889 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:19:51,892 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:19:51,895 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:19:51,900 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:19:51,904 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:51,904 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:19:51,909 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:19:51,909 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:19:51,913 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:51,913 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:19:51,917 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:51,918 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:19:51,922 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:19:51,922 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:19:51,926 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:19:51,926 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:19:51,931 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:19:51,931 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:19:51,931 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:19:51,935 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:19:51,935 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:19:51,935 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:19:51,939 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:19:51,944 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:19:51,944 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:19:51,944 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:19:51,944 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:19:51,944 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:19:51,948 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:19:51,952 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:19:51,953 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:19:51,953 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:19:51,953 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,953 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:19:51,953 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,953 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,953 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,953 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:19:51,953 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,953 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:19:51,953 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:19:51,953 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:19:51,953 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:19:51,953 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:19:51,953 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:19:51,954 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:20:52,305 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:20:52,445 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:20:52,445 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:20:52,445 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:20:52,580 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:20:52,745 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:20:52,760 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:20:52,760 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:20:52,775 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:20:52,790 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:20:52,799 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:20:53,351 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:20:53,408 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:20:53,411 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:20:53,414 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:20:53,417 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:20:53,419 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:20:53,422 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:20:53,425 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:20:53,429 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:20:53,432 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:20:53,435 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:20:53,438 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:20:53,440 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:20:53,443 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:20:53,449 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:20:53,454 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:53,454 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:20:53,458 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:20:53,458 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:20:53,462 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:53,462 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:20:53,467 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:53,467 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:20:53,473 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:53,473 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:20:53,477 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:20:53,477 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:20:53,481 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:20:53,481 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:20:53,481 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:20:53,485 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:20:53,485 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:20:53,485 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:20:53,490 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:20:53,494 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:20:53,494 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:20:53,494 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:20:53,494 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:20:53,494 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:20:53,498 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:20:53,502 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:20:53,502 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:20:53,502 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:20:53,502 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,502 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:20:53,502 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,503 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,503 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,503 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:20:53,503 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,503 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:20:53,503 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,503 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:20:53,503 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:20:53,503 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:20:53,503 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:20:53,503 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:20:53,503 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:20:53,503 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:20:53,503 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:20:53,631 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:20:53,646 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:20:53,647 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:20:53,874 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:20:53,878 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:20:53,881 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:20:53,884 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:20:53,887 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:20:53,889 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:20:53,892 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:20:53,895 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:20:53,898 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:20:53,901 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:20:53,904 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:20:53,909 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:20:53,911 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:20:53,915 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:20:53,920 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:20:53,924 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:53,924 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:20:53,929 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:20:53,929 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:20:53,933 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:53,934 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:20:53,939 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:53,939 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:20:53,943 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:53,943 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:20:53,948 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:20:53,948 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:20:53,954 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:20:53,954 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:20:53,954 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:20:53,959 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:20:53,959 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:20:53,959 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:20:53,964 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:20:53,968 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:20:53,968 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:20:53,968 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:20:53,968 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:20:53,968 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:20:53,973 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:20:53,977 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:20:53,977 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:20:53,978 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:20:53,978 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,978 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:20:53,978 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,978 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,978 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,978 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:20:53,978 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,978 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:20:53,978 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:20:53,978 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:20:53,978 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:20:53,978 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:20:53,979 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:20:53,979 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:20:57,584 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:20:57,724 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:20:57,725 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:20:57,725 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:20:57,855 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:20:58,016 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:20:58,032 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:20:58,032 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:20:58,048 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:20:58,063 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:20:58,072 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:20:58,413 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:20:58,418 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:20:58,421 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:20:58,564 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:20:58,568 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:20:58,570 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:20:58,573 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:20:58,576 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:20:58,580 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:20:58,583 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:20:58,585 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:20:58,588 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:20:58,592 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:20:58,597 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:20:58,608 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:20:58,618 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:58,618 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:20:58,623 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:20:58,624 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:20:58,628 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:58,628 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:20:58,632 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:58,632 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:20:58,637 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:58,637 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:20:58,641 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:20:58,641 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:20:58,645 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:20:58,645 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:20:58,645 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:20:58,650 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:20:58,650 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:20:58,650 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:20:58,654 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:20:58,658 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:20:58,658 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:20:58,659 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:20:58,659 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:20:58,659 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:20:58,663 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:20:58,667 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:20:58,667 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:20:58,667 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:20:58,667 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:20:58,667 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:20:58,667 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:20:58,667 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:20:58,668 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:20:58,668 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:20:58,668 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:20:58,668 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:20:58,668 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:20:58,668 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:20:58,668 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:20:58,668 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:20:58,668 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:20:58,668 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:20:58,668 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:20:58,668 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:20:58,668 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:20:58,797 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:20:58,827 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:20:58,828 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:20:59,203 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:20:59,207 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:20:59,210 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:20:59,213 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:20:59,215 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:20:59,218 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:20:59,221 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:20:59,224 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:20:59,226 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:20:59,229 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:20:59,232 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:20:59,235 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:20:59,238 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:20:59,241 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:20:59,246 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:20:59,250 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:59,250 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:20:59,254 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:20:59,254 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:20:59,258 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:59,258 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:20:59,262 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:59,262 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:20:59,266 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:20:59,266 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:20:59,271 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:20:59,271 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:20:59,275 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:20:59,275 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:20:59,275 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:20:59,279 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:20:59,279 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:20:59,279 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:20:59,283 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:20:59,288 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:20:59,288 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:20:59,288 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:20:59,288 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:20:59,288 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:20:59,293 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:20:59,297 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:20:59,297 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:20:59,297 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:20:59,298 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:20:59,298 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:20:59,298 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:20:59,298 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:20:59,298 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:20:59,298 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:20:59,298 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:20:59,298 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:20:59,298 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:20:59,298 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:20:59,298 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:20:59,298 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:20:59,298 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:20:59,298 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:03,789 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:21:03,928 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:21:03,928 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:21:03,928 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:21:04,058 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:21:04,222 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:04,238 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:04,238 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:04,253 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:04,269 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:04,278 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:04,463 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:04,468 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:04,471 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:04,474 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:04,476 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:04,479 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:04,481 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:04,484 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:04,487 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:04,490 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:04,493 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:04,496 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:04,498 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:04,501 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:04,506 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:04,510 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:04,510 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:04,515 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:04,515 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:04,519 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:04,519 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:04,523 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:04,523 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:04,527 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:04,527 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:04,531 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:04,531 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:04,559 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:04,560 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:04,560 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:04,564 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:04,564 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:04,564 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:04,568 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:04,572 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:04,572 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:04,573 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:04,573 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:04,573 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:04,577 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:04,581 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:04,581 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:04,581 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:04,581 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:04,581 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:04,581 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:04,581 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:04,581 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:04,581 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:04,582 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:04,582 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:04,582 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:04,582 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:04,582 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:04,582 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:04,582 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:04,582 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:04,582 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:21:04,582 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:21:04,582 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:21:04,708 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:04,724 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:04,724 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:04,820 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:04,824 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:04,827 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:04,829 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:04,832 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:04,834 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:04,837 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:04,840 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:04,842 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:04,845 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:04,848 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:04,851 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:04,853 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:04,856 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:04,861 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:04,865 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:04,865 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:04,869 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:04,869 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:04,873 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:04,873 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:04,877 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:04,877 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:04,882 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:04,882 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:04,886 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:04,886 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:04,968 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:04,968 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:04,968 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:04,972 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:04,973 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:04,973 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:04,977 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:04,981 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:04,981 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:04,981 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:04,981 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:04,981 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:05,026 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:05,030 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:05,030 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:05,031 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:05,031 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:05,031 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:05,031 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:05,031 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:05,031 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:05,031 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:05,031 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:05,031 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:05,031 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:05,031 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:05,031 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:05,031 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:05,031 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:05,031 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:06,992 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:21:07,130 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:21:07,130 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:21:07,130 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:21:07,276 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:21:07,460 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:07,476 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:07,476 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:07,491 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:07,507 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:07,517 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:07,538 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:07,544 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:07,548 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:07,551 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:07,554 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:07,557 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:07,560 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:07,563 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:07,566 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:07,569 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:07,572 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:07,576 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:07,578 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:07,582 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:07,588 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:07,593 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:07,593 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:07,598 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:07,598 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:07,603 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:07,603 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:07,608 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:07,609 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:07,613 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:07,614 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:07,619 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:07,619 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:07,624 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:07,624 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:07,624 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:07,629 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:07,629 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:07,629 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:07,634 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:07,639 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:07,639 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:07,639 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:07,639 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:07,639 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:07,644 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:07,649 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:07,649 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:07,649 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:07,649 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,649 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:07,649 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,649 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,649 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,649 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:07,650 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,650 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:07,650 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,650 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:07,650 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:07,650 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:07,650 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:07,650 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:07,650 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:21:07,650 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:21:07,651 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:21:07,788 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:07,804 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:07,804 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:07,836 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:07,840 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:07,843 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:07,845 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:07,848 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:07,851 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:07,854 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:07,857 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:07,860 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:07,862 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:07,865 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:07,868 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:07,870 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:07,873 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:07,878 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:07,882 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:07,882 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:07,886 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:07,887 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:07,891 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:07,891 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:07,895 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:07,895 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:07,899 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:07,899 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:07,903 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:07,903 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:07,907 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:07,907 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:07,907 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:07,911 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:07,912 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:07,912 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:07,916 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:07,920 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:07,920 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:07,920 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:07,920 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:07,921 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:07,925 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:07,929 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:07,929 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:07,929 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:07,929 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,929 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:07,929 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,929 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,929 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,929 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:07,929 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,929 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:07,929 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:07,929 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:07,929 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:07,929 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:07,929 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:07,929 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:10,533 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:21:10,674 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:21:10,674 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:21:10,674 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:21:10,811 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:21:10,975 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:10,991 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:10,991 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:11,006 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:11,022 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:11,030 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:11,050 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:11,055 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:11,058 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:11,061 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:11,064 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:11,066 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:11,069 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:11,071 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:11,300 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:11,303 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:11,305 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:11,309 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:11,312 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:11,315 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:11,322 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:11,326 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:11,327 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:11,331 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:11,331 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:11,366 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:11,366 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:11,370 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:11,370 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:11,374 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:11,375 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:11,379 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:11,379 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:11,383 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:11,383 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:11,383 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:11,387 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:11,387 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:11,387 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:11,392 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:11,441 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:11,441 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:11,441 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:11,441 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:11,442 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:11,446 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:11,450 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:11,450 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:11,450 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:11,450 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,450 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:11,450 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,450 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,450 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,450 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:11,450 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,450 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:11,450 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,451 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:11,451 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:11,451 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:11,451 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:11,451 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:11,451 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:21:11,451 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:21:11,451 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:21:11,578 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:11,594 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:11,594 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:11,681 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:11,685 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:11,688 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:11,690 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:11,693 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:11,695 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:11,697 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:11,700 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:11,703 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:11,706 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:11,708 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:11,711 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:11,714 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:11,716 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:11,722 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:11,726 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:11,726 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:11,730 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:11,730 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:11,734 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:11,734 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:11,738 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:11,738 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:11,742 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:11,742 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:11,746 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:11,746 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:11,750 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:11,750 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:11,750 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:11,754 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:11,754 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:11,754 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:11,758 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:11,763 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:11,763 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:11,763 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:11,763 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:11,763 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:11,767 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:11,771 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:11,771 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:11,771 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:11,771 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,771 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:11,772 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,772 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,772 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,772 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:11,772 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,772 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:11,772 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:11,772 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:11,772 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:11,772 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:11,772 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:11,772 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:13,819 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:21:13,961 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:21:13,961 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:21:13,961 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:21:14,090 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:21:14,254 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:14,269 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:14,269 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:14,284 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:14,299 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:14,307 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:14,493 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:14,499 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:14,501 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:14,504 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:14,507 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:14,509 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:14,512 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:14,515 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:14,518 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:14,520 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:14,523 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:14,526 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:14,529 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:14,532 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:14,538 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:14,542 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:14,542 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:14,547 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:14,547 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:14,551 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:14,551 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:14,555 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:14,555 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:14,559 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:14,559 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:14,564 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:14,564 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:14,568 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:14,568 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:14,568 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:14,572 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:14,572 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:14,572 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:14,576 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:14,581 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:14,581 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:14,581 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:14,581 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:14,581 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:14,585 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:14,589 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:14,589 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:14,589 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:14,589 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:14,589 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:14,589 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:14,589 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:14,589 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:14,589 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:14,589 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:14,589 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:14,589 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:14,589 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:14,590 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:14,590 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:14,590 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:14,590 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:14,590 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:21:14,590 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:21:14,590 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:21:14,718 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:14,733 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:14,734 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:15,153 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:15,157 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:15,160 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:15,163 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:15,165 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:15,168 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:15,171 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:15,173 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:15,176 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:15,179 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:15,181 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:15,184 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:15,187 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:15,190 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:15,195 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:15,199 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:15,199 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:15,203 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:15,203 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:15,207 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:15,207 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:15,211 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:15,211 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:15,215 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:15,215 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:15,219 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:15,219 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:15,224 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:15,224 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:15,224 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:15,228 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:15,228 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:15,228 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:15,232 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:15,237 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:15,237 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:15,237 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:15,237 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:15,237 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:15,241 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:15,464 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:15,464 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:15,464 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:15,464 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:15,464 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:15,464 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:15,465 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:15,465 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:15,465 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:15,465 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:15,465 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:15,465 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:15,465 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:15,465 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:15,465 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:15,465 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:15,465 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:17,629 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:21:17,769 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:21:17,769 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:21:17,770 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:21:17,903 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:21:18,068 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:18,083 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:18,084 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:18,099 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:18,114 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:18,123 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:18,143 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:18,148 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:18,151 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:18,154 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:18,156 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:18,159 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:18,161 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:18,164 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:18,167 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:18,170 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:18,172 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:18,175 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:18,178 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:18,198 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:18,204 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:18,208 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:18,208 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:18,212 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:18,212 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:18,216 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:18,216 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:18,220 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:18,220 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:18,224 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:18,224 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:18,228 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:18,228 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:18,232 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:18,233 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:18,233 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:18,237 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:18,237 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:18,237 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:18,242 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:18,246 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:18,246 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:18,246 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:18,246 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:18,246 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:18,250 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:18,254 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:18,254 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:18,254 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:18,254 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,255 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:18,255 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,255 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,255 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,255 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:18,255 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,255 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:18,255 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,255 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:18,255 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:18,255 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:18,255 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:18,255 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:18,255 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:21:18,255 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:21:18,256 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:21:18,382 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:18,398 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:18,398 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:18,582 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:18,587 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:18,589 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:18,592 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:18,595 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:18,598 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:18,601 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:18,604 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:18,606 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:18,609 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:18,613 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:18,616 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:18,619 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:18,622 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:18,627 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:18,632 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:18,632 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:18,636 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:18,636 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:18,640 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:18,640 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:18,645 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:18,645 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:18,649 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:18,649 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:18,654 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:18,654 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:18,658 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:18,658 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:18,658 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:18,735 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:18,735 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:18,735 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:18,739 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:18,743 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:18,743 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:18,743 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:18,743 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:18,743 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:18,747 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:18,751 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:18,752 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:18,752 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:18,752 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,752 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:18,752 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,752 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,752 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,752 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:18,752 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,752 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:18,752 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:18,752 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:18,752 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:18,752 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:18,752 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:18,752 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:26,473 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:26,489 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 17:21:26,490 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 17:21:26,490 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-24 17:21:26,498 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-24 17:21:26,524 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-24 17:21:26,524 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:26,539 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:26,539 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:26,555 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:21:26,571 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:21:26,571 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:21:26,602 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:21:26,608 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:21:26,610 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:21:26,613 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:21:26,616 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:21:26,618 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:21:26,620 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:21:26,623 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:21:26,626 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:21:26,629 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:21:26,631 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:21:26,634 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:21:26,637 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:21:26,640 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:21:26,645 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:21:26,649 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:26,649 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:26,653 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:21:26,653 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:21:26,657 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:26,657 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:21:26,662 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:26,662 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:21:26,666 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:21:26,666 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:21:26,670 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:21:26,670 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:21:26,674 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:21:26,674 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:21:26,674 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:21:26,679 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:21:26,679 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:21:26,679 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:21:26,683 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:21:26,687 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:21:26,687 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:21:26,687 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:21:26,687 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:21:26,688 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:21:26,692 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:21:26,696 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:21:26,696 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:21:26,696 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:21:26,696 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:26,696 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:21:26,696 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:21:26,696 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:21:26,696 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:21:26,696 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:21:26,696 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:21:26,696 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:21:26,696 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:21:26,696 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:21:26,696 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:21:26,696 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:21:26,696 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:21:26,696 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:21:26,696 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:21:26,697 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:21:26,697 - INFO - âœ… ChatOrchestrator instance created successfully!
2025-09-24 17:21:26,697 - INFO - âœ… Got ChatOrchestrator
2025-09-24 17:21:26,719 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 17:21:26,720 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x78312281a610>
2025-09-24 17:21:26,721 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 17:21:26,721 - DEBUG - send_request_headers.complete
2025-09-24 17:21:26,721 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 17:21:26,721 - DEBUG - send_request_body.complete
2025-09-24 17:21:26,721 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 17:22:15,646 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 11:52:15 GMT'), (b'Content-Length', b'357')])
2025-09-24 17:22:15,672 - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-09-24 17:22:15,672 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 17:22:15,672 - DEBUG - receive_response_body.complete
2025-09-24 17:22:15,672 - DEBUG - response_closed.started
2025-09-24 17:22:15,673 - DEBUG - response_closed.complete
2025-09-24 17:22:15,673 - DEBUG - close.started
2025-09-24 17:22:15,673 - DEBUG - close.complete
2025-09-24 17:22:15,673 - INFO - Database engine created with pool_size=10
2025-09-24 17:22:15,771 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 17:22:15,772 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x78312124db90>
2025-09-24 17:22:15,772 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 17:22:15,772 - DEBUG - send_request_headers.complete
2025-09-24 17:22:15,772 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 17:22:15,772 - DEBUG - send_request_body.complete
2025-09-24 17:22:15,772 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 17:23:15,774 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 17:23:15,774 - DEBUG - response_closed.started
2025-09-24 17:23:15,774 - DEBUG - response_closed.complete
2025-09-24 17:23:15,775 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 17:28:18,717 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:28:19,167 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:28:19,167 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:28:19,167 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:28:19,672 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:28:20,141 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:28:20,166 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:28:20,166 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:28:20,181 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:28:20,196 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:28:20,336 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:28:20,596 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:28:20,602 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:28:20,605 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:28:20,608 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:28:20,611 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:28:20,614 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:28:20,617 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:28:20,620 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:28:20,623 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:28:20,626 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:28:20,629 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:28:20,632 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:28:20,635 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:28:20,638 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:28:20,644 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:28:20,648 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:20,648 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:28:20,653 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:28:20,653 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:28:20,670 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:20,670 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:28:20,675 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:20,675 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:28:20,679 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:20,679 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:28:20,683 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:28:20,683 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:28:20,687 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:28:20,687 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:28:20,687 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:28:20,692 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:28:20,692 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:28:20,692 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:28:20,696 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:28:20,700 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:28:20,700 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:28:20,700 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:28:20,701 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:28:20,701 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:28:20,705 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:28:20,710 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:28:20,710 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:28:20,710 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:28:20,710 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:28:20,710 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:28:20,710 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:28:20,710 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:28:20,710 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:28:20,710 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:28:20,710 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:28:20,710 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:28:20,710 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:28:20,710 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:28:20,710 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:28:20,710 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:28:20,710 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:28:20,710 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:28:20,711 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:28:20,711 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:28:20,711 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:28:21,448 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:28:21,464 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:28:21,464 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:28:21,488 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:28:21,492 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:28:21,495 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:28:21,498 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:28:21,500 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:28:21,503 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:28:21,505 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:28:21,508 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:28:21,511 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:28:21,513 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:28:21,516 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:28:21,519 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:28:21,522 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:28:21,524 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:28:21,530 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:28:21,534 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:21,534 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:28:21,538 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:28:21,538 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:28:21,542 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:21,542 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:28:21,546 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:21,546 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:28:21,550 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:21,551 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:28:21,555 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:28:21,555 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:28:21,559 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:28:21,559 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:28:21,559 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:28:21,563 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:28:21,563 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:28:21,563 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:28:21,567 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:28:21,572 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:28:21,572 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:28:21,572 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:28:21,572 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:28:21,572 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:28:21,576 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:28:21,580 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:28:21,580 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:28:21,581 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:28:21,581 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:28:21,581 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:28:21,581 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:28:21,581 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:28:21,581 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:28:21,581 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:28:21,581 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:28:21,581 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:28:21,581 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:28:21,581 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:28:21,581 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:28:21,581 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:28:21,581 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:28:21,582 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:28:35,404 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:28:35,420 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 17:28:35,421 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 17:28:35,421 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-24 17:28:35,506 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-24 17:28:35,697 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-24 17:28:35,698 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:28:35,713 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:28:35,713 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:28:35,728 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:28:35,743 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:28:35,744 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:28:35,757 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:28:35,761 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:28:35,764 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:28:35,767 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:28:35,770 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:28:35,772 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:28:35,775 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:28:35,778 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:28:35,781 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:28:35,783 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:28:35,786 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:28:35,789 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:28:35,791 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:28:35,794 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:28:35,799 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:28:35,803 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:35,803 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:28:35,807 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:28:35,807 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:28:35,811 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:35,811 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:28:35,815 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:35,815 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:28:35,819 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:28:35,819 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:28:35,823 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:28:35,823 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:28:35,827 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:28:35,827 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:28:35,827 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:28:35,831 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:28:35,831 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:28:35,831 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:28:35,835 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:28:35,840 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:28:35,840 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:28:35,840 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:28:35,840 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:28:35,840 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:28:35,845 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:28:35,854 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:28:35,854 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:28:35,855 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:28:35,855 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:28:35,855 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:28:35,855 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:28:35,855 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:28:35,855 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:28:35,855 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:28:35,855 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:28:35,855 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:28:35,855 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:28:35,855 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:28:35,855 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:28:35,855 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:28:35,855 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:28:35,855 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:28:35,856 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:28:35,856 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:28:35,856 - INFO - âœ… ChatOrchestrator instance created successfully!
2025-09-24 17:28:35,856 - INFO - âœ… Got ChatOrchestrator
2025-09-24 17:28:35,879 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 17:28:35,880 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x75d6eef27f50>
2025-09-24 17:28:35,880 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 17:28:35,880 - DEBUG - send_request_headers.complete
2025-09-24 17:28:35,880 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 17:28:35,880 - DEBUG - send_request_body.complete
2025-09-24 17:28:35,880 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 17:28:38,837 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 11:58:38 GMT'), (b'Content-Length', b'355')])
2025-09-24 17:28:38,837 - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-09-24 17:28:38,837 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 17:28:38,838 - DEBUG - receive_response_body.complete
2025-09-24 17:28:38,838 - DEBUG - response_closed.started
2025-09-24 17:28:38,838 - DEBUG - response_closed.complete
2025-09-24 17:28:38,838 - DEBUG - close.started
2025-09-24 17:28:38,838 - DEBUG - close.complete
2025-09-24 17:28:38,839 - INFO - Database engine created with pool_size=10
2025-09-24 17:28:38,932 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 17:28:38,933 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x75d6eee922d0>
2025-09-24 17:28:38,933 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 17:28:38,934 - DEBUG - send_request_headers.complete
2025-09-24 17:28:38,934 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 17:28:38,934 - DEBUG - send_request_body.complete
2025-09-24 17:28:38,934 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 17:29:14,440 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 11:59:14 GMT'), (b'Content-Length', b'484')])
2025-09-24 17:29:14,596 - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-09-24 17:29:14,596 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 17:29:14,596 - DEBUG - receive_response_body.complete
2025-09-24 17:29:14,596 - DEBUG - response_closed.started
2025-09-24 17:29:14,596 - DEBUG - response_closed.complete
2025-09-24 17:29:14,597 - DEBUG - close.started
2025-09-24 17:29:14,597 - DEBUG - close.complete
2025-09-24 17:29:15,265 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 17:31:07,851 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:31:08,234 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:31:08,234 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:31:08,234 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:31:08,668 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:31:09,121 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:09,145 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:31:09,145 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:09,160 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:09,176 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:31:09,698 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:31:12,073 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:31:12,080 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:31:12,083 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:31:12,086 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:31:12,089 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:31:12,092 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:31:12,094 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:31:12,097 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:31:12,100 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:31:12,103 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:31:12,135 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:31:12,139 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:31:12,141 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:31:12,145 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:31:12,151 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:31:12,155 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:12,155 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:31:12,160 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:31:12,160 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:31:12,164 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:12,164 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:31:12,170 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:12,170 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:31:12,174 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:12,174 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:31:12,178 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:31:12,178 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:31:12,182 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:31:12,183 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:31:12,183 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:31:12,187 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:31:12,187 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:31:12,187 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:31:12,191 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:31:12,195 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:31:12,195 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:31:12,195 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:31:12,196 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:31:12,196 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:31:12,200 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:31:12,204 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:31:12,204 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:31:12,204 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:31:12,204 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:31:12,204 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:31:12,204 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:31:12,204 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:31:12,205 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:31:12,205 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:31:12,205 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:31:12,205 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:31:12,205 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:31:12,205 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:31:12,205 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:31:12,205 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:31:12,205 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:31:12,205 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:31:12,206 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:31:12,206 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:31:12,206 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:31:16,565 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:16,581 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:31:16,581 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:31:16,595 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:31:16,600 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:31:16,602 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:31:16,605 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:31:16,608 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:31:16,611 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:31:16,613 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:31:16,616 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:31:16,619 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:31:16,622 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:31:16,625 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:31:16,628 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:31:16,631 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:31:16,634 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:31:16,640 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:31:16,645 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:16,645 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:31:16,649 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:31:16,649 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:31:16,654 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:16,654 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:31:16,658 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:16,658 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:31:16,663 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:16,663 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:31:16,667 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:31:16,667 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:31:16,672 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:31:16,672 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:31:16,672 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:31:16,676 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:31:16,676 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:31:16,676 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:31:16,680 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:31:16,684 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:31:16,684 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:31:16,685 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:31:16,685 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:31:16,685 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:31:16,689 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:31:16,693 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:31:16,693 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:31:16,693 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:31:16,693 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:31:16,693 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:31:16,693 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:31:16,693 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:31:16,693 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:31:16,693 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:31:16,693 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:31:16,693 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:31:16,694 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:31:16,694 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:31:16,694 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:31:16,694 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:31:16,694 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:31:16,694 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:31:23,892 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:31:24,030 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 17:31:24,030 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 17:31:24,030 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 17:31:24,160 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 17:31:24,321 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:24,337 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:31:24,337 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:24,353 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:24,369 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:31:24,378 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:31:24,624 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:31:24,630 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:31:24,632 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:31:24,635 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:31:24,637 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:31:24,640 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:31:24,642 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:31:24,645 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:31:24,648 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:31:24,650 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:31:24,653 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:31:24,656 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:31:24,659 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:31:24,661 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:31:24,667 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:31:24,671 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:24,671 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:31:24,675 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:31:24,675 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:31:24,679 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:24,679 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:31:24,683 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:24,683 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:31:24,687 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:24,687 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:31:24,692 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:31:24,692 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:31:24,696 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:31:24,696 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:31:24,696 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:31:24,700 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:31:24,700 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:31:24,700 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:31:24,705 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:31:24,712 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:31:24,712 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:31:24,712 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:31:24,712 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:31:24,712 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:31:24,718 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:31:24,723 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:31:24,723 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:31:24,723 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:31:24,723 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:31:24,723 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:31:24,723 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:31:24,723 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:31:24,723 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:31:24,724 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:31:24,724 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:31:24,724 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:31:24,724 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:31:24,724 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:31:24,724 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:31:24,724 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:31:24,724 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:31:24,724 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:31:24,724 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:31:24,724 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:31:24,725 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 17:31:24,850 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:24,866 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:31:24,867 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:31:25,100 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:31:25,105 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:31:25,107 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:31:25,110 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:31:25,113 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:31:25,115 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:31:25,118 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:31:25,121 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:31:25,124 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:31:25,127 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:31:25,130 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:31:25,133 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:31:25,136 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:31:25,139 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:31:25,144 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:31:25,149 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:25,149 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:31:25,153 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:31:25,153 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:31:25,158 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:25,158 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:31:25,170 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:25,170 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:31:25,174 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:25,174 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:31:25,178 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:31:25,179 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:31:25,183 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:31:25,183 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:31:25,183 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:31:25,187 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:31:25,187 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:31:25,187 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:31:25,191 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:31:25,195 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:31:25,195 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:31:25,196 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:31:25,196 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:31:25,196 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:31:25,200 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:31:25,204 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:31:25,204 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:31:25,204 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:31:25,204 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:31:25,204 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:31:25,204 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:31:25,204 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:31:25,204 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:31:25,204 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:31:25,205 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:31:25,205 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:31:25,205 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:31:25,205 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:31:25,205 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:31:25,205 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:31:25,205 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:31:25,205 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:31:33,867 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:33,883 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 17:31:33,884 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 17:31:33,884 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-24 17:31:33,891 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-24 17:31:33,950 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-24 17:31:33,950 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:33,966 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:31:33,966 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:33,981 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 17:31:33,996 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 17:31:33,997 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 17:31:34,041 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 17:31:34,045 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 17:31:34,048 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 17:31:34,050 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 17:31:34,053 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 17:31:34,056 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 17:31:34,059 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 17:31:34,061 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 17:31:34,064 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 17:31:34,067 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 17:31:34,069 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 17:31:34,073 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 17:31:34,075 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 17:31:34,078 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 17:31:34,083 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 17:31:34,087 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:34,087 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 17:31:34,091 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 17:31:34,092 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 17:31:34,096 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:34,096 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 17:31:34,100 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:34,100 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 17:31:34,104 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 17:31:34,104 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 17:31:34,108 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 17:31:34,108 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 17:31:34,112 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 17:31:34,112 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 17:31:34,112 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 17:31:34,117 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 17:31:34,117 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 17:31:34,117 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 17:31:34,121 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 17:31:34,125 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 17:31:34,125 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 17:31:34,125 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 17:31:34,125 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 17:31:34,126 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 17:31:34,130 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 17:31:34,134 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 17:31:34,134 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 17:31:34,134 - DEBUG - ðŸ” Relationship Details:
2025-09-24 17:31:34,134 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:31:34,134 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 17:31:34,134 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 17:31:34,134 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 17:31:34,134 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 17:31:34,134 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 17:31:34,134 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 17:31:34,135 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 17:31:34,135 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 17:31:34,135 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 17:31:34,135 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 17:31:34,135 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 17:31:34,135 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 17:31:34,135 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 17:31:34,135 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 17:31:34,135 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 17:31:34,135 - INFO - âœ… ChatOrchestrator instance created successfully!
2025-09-24 17:31:34,135 - INFO - âœ… Got ChatOrchestrator
2025-09-24 17:31:34,160 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 17:31:34,161 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7d67c5b42c50>
2025-09-24 17:31:34,161 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 17:31:34,161 - DEBUG - send_request_headers.complete
2025-09-24 17:31:34,162 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 17:31:34,162 - DEBUG - send_request_body.complete
2025-09-24 17:31:34,162 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 17:32:34,163 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 17:32:34,163 - DEBUG - response_closed.started
2025-09-24 17:32:34,163 - DEBUG - response_closed.complete
2025-09-24 17:32:34,165 - INFO - Database engine created with pool_size=10
2025-09-24 17:32:34,459 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 17:32:34,460 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7d67c5bb9a50>
2025-09-24 17:32:34,461 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 17:32:34,461 - DEBUG - send_request_headers.complete
2025-09-24 17:32:34,461 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 17:32:34,461 - DEBUG - send_request_body.complete
2025-09-24 17:32:34,461 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 17:33:11,799 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 12:03:11 GMT'), (b'Content-Length', b'520')])
2025-09-24 17:33:11,799 - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-09-24 17:33:11,799 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 17:33:11,799 - DEBUG - receive_response_body.complete
2025-09-24 17:33:11,800 - DEBUG - response_closed.started
2025-09-24 17:33:11,800 - DEBUG - response_closed.complete
2025-09-24 17:33:11,800 - DEBUG - close.started
2025-09-24 17:33:11,800 - DEBUG - close.complete
2025-09-24 17:33:11,852 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 19:29:34,206 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:29:34,383 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 19:29:34,383 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 19:29:34,383 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 19:29:34,543 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 19:29:34,759 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:34,775 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:29:34,775 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:34,790 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:34,807 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:29:34,821 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:29:35,774 - ERROR - âŒ Initialization failed: This Connection is closed
2025-09-24 19:29:35,774 - ERROR - âŒ Error type: ResourceClosedError
2025-09-24 19:29:36,022 - ERROR - âŒ Full traceback: Traceback (most recent call last):
  File "/home/user/IITB/netra/backend/api/db/schemaAwareSQL.py", line 41, in initialize
    full_schema, relationships = get_schema_information(engine)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/backend/api/db/schemaAwareSQL.py", line 94, in get_schema_information
    inspector = inspect(engine)
                ^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/inspection.py", line 140, in inspect
    ret = reg(subject)
          ^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/reflection.py", line 313, in _engine_insp
    return Inspector._construct(Inspector._init_engine, bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/reflection.py", line 246, in _construct
    init(self, bind)
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/reflection.py", line 257, in _init_engine
    engine.connect().close()
    ^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3273, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3297, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 713, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 675, in __init__
    self.__connect()
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 915, in __connect
    )._exec_w_sync_on_first_run(self.dbapi_connection, self)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/event/attr.py", line 483, in _exec_w_sync_on_first_run
    self(*args, **kw)
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/event/attr.py", line 497, in __call__
    fn(*args, **kw)
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 1997, in go
    return once_fn(*arg, **kw)
           ^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/create.py", line 752, in first_connect
    dialect.initialize(c)
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mssql/base.py", line 3250, in initialize
    self._setup_supports_comments(connection)
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mssql/base.py", line 3289, in _setup_supports_comments
    connection.scalar(
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1304, in scalar
    return meth(
           ^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 541, in _execute_on_scalar
    return self._execute_on_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1809, in _execute_context
    conn = self._revalidate_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/IITB/netra/.venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 678, in _revalidate_connection
    raise exc.ResourceClosedError("This Connection is closed")
sqlalchemy.exc.ResourceClosedError: This Connection is closed

2025-09-24 19:29:38,993 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:29:39,131 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 19:29:39,131 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 19:29:39,131 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 19:29:39,261 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 19:29:39,425 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:39,441 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:29:39,441 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:39,458 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:39,475 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:29:39,484 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:29:39,618 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:29:39,624 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:29:39,626 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:29:39,629 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:29:39,632 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:29:39,634 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:29:39,637 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:29:39,640 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:29:39,642 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:29:39,645 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:29:39,647 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:29:39,650 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:29:39,653 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:29:39,655 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:29:39,661 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:29:39,665 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:39,665 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:29:39,669 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:29:39,669 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:29:39,673 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:39,673 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:29:39,677 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:39,677 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:29:39,681 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:39,681 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:29:39,685 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:29:39,685 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:29:39,689 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:29:39,689 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:29:39,690 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:29:39,694 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:29:39,694 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:29:39,694 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:29:39,698 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:29:39,702 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:29:39,703 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:29:39,703 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:29:39,703 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:29:39,703 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:29:39,707 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:29:39,711 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:29:39,711 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:29:39,711 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:29:39,711 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:29:39,711 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:29:39,711 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:29:39,711 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:29:39,711 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:29:39,711 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:29:39,711 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:29:39,711 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:29:39,711 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:29:39,711 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:29:39,711 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:29:39,711 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:29:39,711 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:29:39,711 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:29:39,712 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 19:29:39,712 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 19:29:39,712 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:29:40,240 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:40,256 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:29:40,257 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:29:40,269 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:29:40,273 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:29:40,276 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:29:40,279 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:29:40,281 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:29:40,284 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:29:40,286 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:29:40,289 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:29:40,292 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:29:40,294 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:29:40,297 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:29:40,300 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:29:40,302 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:29:40,305 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:29:40,310 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:29:40,314 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:40,314 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:29:40,319 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:29:40,319 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:29:40,323 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:40,323 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:29:40,327 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:40,327 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:29:40,331 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:40,331 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:29:40,336 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:29:40,336 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:29:40,340 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:29:40,340 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:29:40,341 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:29:40,346 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:29:40,346 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:29:40,346 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:29:40,351 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:29:40,357 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:29:40,357 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:29:40,357 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:29:40,357 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:29:40,357 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:29:40,364 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:29:40,370 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:29:40,370 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:29:40,370 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:29:40,370 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:29:40,370 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:29:40,370 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:29:40,370 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:29:40,371 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:29:40,371 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:29:40,371 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:29:40,371 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:29:40,371 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:29:40,371 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:29:40,371 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:29:40,371 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:29:40,371 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:29:40,371 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:29:56,424 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:56,440 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 19:29:56,442 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 19:29:56,442 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-24 19:29:56,443 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-24 19:29:56,586 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-24 19:29:56,587 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:56,602 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:29:56,602 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:56,617 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:29:56,633 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:29:56,633 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:29:56,737 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:29:56,788 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:29:56,791 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:29:56,794 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:29:56,796 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:29:56,799 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:29:56,801 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:29:56,804 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:29:56,807 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:29:56,810 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:29:56,813 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:29:56,816 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:29:56,818 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:29:56,821 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:29:56,826 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:29:56,859 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:56,859 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:29:56,863 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:29:56,863 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:29:56,867 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:56,868 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:29:56,872 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:56,872 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:29:56,876 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:29:56,876 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:29:56,880 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:29:56,880 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:29:56,884 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:29:56,884 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:29:56,884 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:29:56,888 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:29:56,888 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:29:56,888 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:29:56,892 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:29:56,896 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:29:56,896 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:29:56,896 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:29:56,897 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:29:56,897 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:29:56,901 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:29:56,905 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:29:56,905 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:29:56,905 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:29:56,906 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:29:56,906 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:29:56,906 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:29:56,906 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:29:56,906 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:29:56,906 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:29:56,906 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:29:56,906 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:29:56,906 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:29:56,906 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:29:56,906 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:29:56,906 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:29:56,906 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:29:56,906 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:29:56,907 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 19:29:56,907 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 19:29:56,907 - INFO - âœ… ChatOrchestrator instance created successfully!
2025-09-24 19:29:56,907 - INFO - âœ… Got ChatOrchestrator
2025-09-24 19:29:56,930 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 19:29:56,931 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fb5bcee3b50>
2025-09-24 19:29:56,931 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 19:29:56,931 - DEBUG - send_request_headers.complete
2025-09-24 19:29:56,931 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 19:29:56,931 - DEBUG - send_request_body.complete
2025-09-24 19:29:56,932 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 19:30:56,932 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 19:30:57,059 - DEBUG - response_closed.started
2025-09-24 19:30:57,059 - DEBUG - response_closed.complete
2025-09-24 19:30:58,190 - INFO - Database engine created with pool_size=10
2025-09-24 19:31:00,528 - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=60.0 socket_options=None
2025-09-24 19:31:00,529 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fb5bcd15cd0>
2025-09-24 19:31:00,529 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 19:31:00,529 - DEBUG - send_request_headers.complete
2025-09-24 19:31:00,530 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 19:31:00,530 - DEBUG - send_request_body.complete
2025-09-24 19:31:00,530 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 19:32:00,530 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-09-24 19:32:00,531 - DEBUG - response_closed.started
2025-09-24 19:32:00,531 - DEBUG - response_closed.complete
2025-09-24 19:32:00,532 - INFO - âœ… Got response from ChatOrchestrator - Intent: reliability
2025-09-24 19:34:34,301 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:34:37,259 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 19:34:37,259 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 19:34:37,259 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 19:34:37,789 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 19:34:38,241 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:38,270 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:38,270 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:38,287 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:38,303 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:40,032 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:34:42,414 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:34:42,421 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:34:42,424 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:34:42,427 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:34:42,431 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:34:42,434 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:34:42,436 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:34:42,439 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:34:42,443 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:34:42,446 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:34:42,450 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:34:42,453 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:34:42,456 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:34:42,459 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:34:42,465 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:34:42,470 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:42,470 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:42,475 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:34:42,475 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:34:42,480 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:42,480 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:42,484 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:42,485 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:34:42,489 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:42,489 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:34:42,495 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:34:42,495 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:34:42,499 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:34:42,500 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:34:42,500 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:34:42,505 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:34:42,505 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:34:42,505 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:34:42,510 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:34:42,515 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:34:42,515 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:34:42,515 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:34:42,515 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:34:42,515 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:34:42,520 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:34:42,525 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:34:42,525 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:34:42,525 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:34:42,525 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:42,525 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:34:42,525 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:42,525 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:34:42,525 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:34:42,525 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:34:42,525 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:34:42,526 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:34:42,526 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:34:42,526 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:34:42,526 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:34:42,526 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:34:42,526 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:34:42,526 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:34:42,532 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 19:34:42,532 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 19:34:42,532 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:34:46,097 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:46,112 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:46,113 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:34:46,142 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:34:46,147 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:34:46,150 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:34:46,153 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:34:46,156 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:34:46,160 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:34:46,163 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:34:46,166 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:34:46,169 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:34:46,172 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:34:46,175 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:34:46,178 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:34:46,180 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:34:46,183 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:34:46,188 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:34:46,192 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:46,192 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:46,197 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:34:46,197 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:34:46,201 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:46,201 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:46,206 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:46,206 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:34:46,210 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:46,210 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:34:46,215 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:34:46,215 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:34:46,219 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:34:46,219 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:34:46,219 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:34:46,223 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:34:46,223 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:34:46,223 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:34:46,227 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:34:46,231 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:34:46,232 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:34:46,232 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:34:46,232 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:34:46,232 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:34:46,236 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:34:46,240 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:34:46,240 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:34:46,240 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:34:46,240 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:46,240 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:34:46,240 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:46,240 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:34:46,240 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:34:46,240 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:34:46,241 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:34:46,241 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:34:46,241 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:34:46,241 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:34:46,241 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:34:46,241 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:34:46,241 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:34:46,241 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:34:48,574 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:34:49,244 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 19:34:49,245 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 19:34:49,245 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 19:34:49,376 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 19:34:49,538 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:49,554 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:49,554 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:49,569 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:49,585 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:49,594 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:34:49,614 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:34:49,620 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:34:49,622 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:34:49,625 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:34:49,628 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:34:49,630 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:34:49,633 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:34:49,635 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:34:49,638 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:34:49,641 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:34:49,643 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:34:49,646 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:34:49,648 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:34:49,651 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:34:49,656 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:34:49,731 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:49,731 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:49,735 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:34:49,736 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:34:49,739 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:49,740 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:49,743 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:49,744 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:34:49,747 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:49,748 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:34:49,751 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:34:49,751 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:34:49,755 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:34:49,755 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:34:49,755 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:34:49,759 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:34:49,759 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:34:49,760 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:34:49,764 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:34:49,768 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:34:49,768 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:34:49,768 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:34:49,768 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:34:49,768 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:34:49,772 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:34:49,776 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:34:49,776 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:34:49,776 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:34:49,776 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:49,776 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:34:49,776 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:49,776 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:34:49,777 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:34:49,777 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:34:49,777 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:34:49,777 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:34:49,777 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:34:49,777 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:34:49,777 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:34:49,777 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:34:49,777 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:34:49,777 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:34:49,777 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 19:34:49,777 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 19:34:49,777 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:34:49,905 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:49,920 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:49,920 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:34:49,933 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:34:49,937 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:34:49,940 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:34:49,943 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:34:49,945 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:34:49,948 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:34:49,950 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:34:49,953 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:34:49,956 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:34:49,959 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:34:49,962 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:34:49,965 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:34:49,967 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:34:49,971 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:34:49,976 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:34:49,980 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:49,980 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:49,984 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:34:49,984 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:34:49,988 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:49,988 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:49,992 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:49,992 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:34:49,998 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:49,998 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:34:50,003 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:34:50,003 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:34:50,008 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:34:50,008 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:34:50,008 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:34:50,012 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:34:50,012 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:34:50,012 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:34:50,016 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:34:50,021 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:34:50,021 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:34:50,022 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:34:50,022 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:34:50,022 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:34:50,026 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:34:50,030 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:34:50,030 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:34:50,030 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:34:50,030 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:50,030 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:34:50,030 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:50,031 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:34:50,031 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:34:50,031 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:34:50,031 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:34:50,031 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:34:50,031 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:34:50,031 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:34:50,031 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:34:50,031 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:34:50,031 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:34:50,031 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:34:52,773 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:34:52,913 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 19:34:52,913 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 19:34:52,913 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 19:34:53,043 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 19:34:53,207 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:53,223 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:53,223 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:53,239 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:53,254 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:53,264 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:34:53,320 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:34:53,325 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:34:53,328 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:34:53,331 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:34:53,334 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:34:53,336 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:34:53,339 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:34:53,342 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:34:53,345 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:34:53,348 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:34:53,350 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:34:53,354 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:34:53,356 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:34:53,359 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:34:53,365 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:34:53,370 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:53,370 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:53,374 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:34:53,374 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:34:53,378 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:53,378 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:53,385 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:53,385 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:34:53,390 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:53,390 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:34:53,395 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:34:53,396 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:34:53,400 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:34:53,400 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:34:53,400 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:34:53,404 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:34:53,404 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:34:53,404 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:34:53,409 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:34:53,413 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:34:53,413 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:34:53,413 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:34:53,413 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:34:53,413 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:34:53,418 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:34:53,422 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:34:53,422 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:34:53,422 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:34:53,422 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,422 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:34:53,422 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,422 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,422 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,422 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:34:53,422 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,423 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:34:53,423 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,423 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:34:53,423 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:34:53,423 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:34:53,423 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:34:53,423 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:34:53,423 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 19:34:53,423 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 19:34:53,424 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:34:53,551 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:53,567 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:53,567 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:34:53,579 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:34:53,583 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:34:53,586 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:34:53,588 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:34:53,590 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:34:53,593 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:34:53,596 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:34:53,598 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:34:53,601 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:34:53,604 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:34:53,606 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:34:53,609 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:34:53,611 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:34:53,614 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:34:53,619 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:34:53,623 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:53,623 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:53,627 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:34:53,627 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:34:53,631 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:53,631 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:53,634 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:53,635 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:34:53,638 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:53,638 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:34:53,642 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:34:53,642 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:34:53,647 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:34:53,647 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:34:53,647 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:34:53,651 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:34:53,651 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:34:53,651 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:34:53,655 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:34:53,659 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:34:53,660 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:34:53,660 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:34:53,660 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:34:53,660 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:34:53,664 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:34:53,668 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:34:53,668 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:34:53,668 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:34:53,668 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,668 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:34:53,669 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,669 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,669 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,669 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:34:53,669 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,669 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:34:53,669 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:34:53,669 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:34:53,669 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:34:53,669 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:34:53,669 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:34:53,669 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:34:55,609 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:34:55,744 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 19:34:55,744 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 19:34:55,744 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 19:34:55,872 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 19:34:56,033 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:56,048 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:56,048 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:56,063 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:56,078 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:56,087 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:34:56,188 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:34:56,193 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:34:56,196 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:34:56,199 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:34:56,201 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:34:56,204 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:34:56,206 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:34:56,209 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:34:56,212 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:34:56,215 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:34:56,217 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:34:56,220 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:34:56,223 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:34:56,226 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:34:56,231 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:34:56,235 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:56,235 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:56,239 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:34:56,239 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:34:56,244 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:56,244 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:56,247 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:56,248 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:34:56,251 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:56,251 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:34:56,255 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:34:56,255 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:34:56,259 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:34:56,259 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:34:56,259 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:34:56,263 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:34:56,263 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:34:56,263 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:34:56,267 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:34:56,296 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:34:56,296 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:34:56,297 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:34:56,297 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:34:56,297 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:34:56,300 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:34:56,304 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:34:56,304 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:34:56,304 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:34:56,304 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,304 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:34:56,304 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,304 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,305 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,305 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:34:56,305 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,305 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:34:56,305 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,305 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:34:56,305 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:34:56,305 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:34:56,305 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:34:56,305 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:34:56,305 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 19:34:56,305 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 19:34:56,305 - INFO - ðŸ“Œ Logging initialized. Logs will be saved in 'logs/application.log'
2025-09-24 19:34:56,430 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:34:56,445 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:34:56,446 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:34:56,547 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:34:56,552 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:34:56,554 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:34:56,557 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:34:56,559 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:34:56,562 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:34:56,564 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:34:56,567 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:34:56,570 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:34:56,573 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:34:56,576 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:34:56,579 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:34:56,582 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:34:56,585 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:34:56,627 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:34:56,632 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:56,632 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:56,636 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:34:56,636 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:34:56,640 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:56,640 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:34:56,644 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:56,644 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:34:56,648 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:34:56,648 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:34:56,652 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:34:56,652 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:34:56,656 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:34:56,656 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:34:56,656 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:34:56,660 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:34:56,660 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:34:56,660 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:34:56,665 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:34:56,670 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:34:56,670 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:34:56,670 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:34:56,670 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:34:56,670 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:34:56,675 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:34:56,679 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:34:56,679 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:34:56,679 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:34:56,679 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,680 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:34:56,680 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,680 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,680 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,680 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:34:56,680 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,680 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:34:56,680 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:34:56,680 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:34:56,680 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:34:56,680 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:34:56,680 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:34:56,680 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:36:45,648 - INFO - Database engine created with pool_size=10
2025-09-24 19:36:51,638 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:36:51,656 - INFO - ðŸ“Œ User authenticated: {'role': 'Admin/ INSMA', 'user_id': 'f47ac10b-58cc-4372-a567-0e02b2c3d479', 'username': 'jake'}
2025-09-24 19:36:51,657 - INFO - ðŸ“¨ Chat request: what is the reliability of Gt 1 on ins one ?...
2025-09-24 19:36:51,657 - INFO - ðŸš€ Creating ChatOrchestrator instance...
2025-09-24 19:36:51,686 - DEBUG - Starting new HTTP connection (1): localhost:11434
2025-09-24 19:36:51,822 - DEBUG - http://localhost:11434 "GET /api/tags HTTP/1.1" 200 1373
2025-09-24 19:36:51,822 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:36:51,838 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:36:51,839 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:36:51,854 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:36:51,869 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:36:51,869 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:36:51,882 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:36:51,886 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:36:51,889 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:36:51,892 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:36:51,894 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:36:51,897 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:36:51,899 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:36:51,902 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:36:51,905 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:36:51,908 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:36:51,910 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:36:51,913 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:36:51,916 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:36:51,919 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:36:51,924 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:36:51,927 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:36:51,928 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:36:51,932 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:36:51,932 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:36:51,936 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:36:51,936 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:36:51,940 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:36:51,940 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:36:51,943 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:36:51,944 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:36:51,947 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:36:51,947 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:36:51,951 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:36:51,951 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:36:51,951 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:36:51,955 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:36:51,955 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:36:51,955 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:36:51,959 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:36:51,963 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:36:51,964 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:36:51,964 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:36:51,964 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:36:51,964 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:36:51,968 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:36:51,971 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:36:51,971 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:36:51,972 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:36:51,972 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:36:51,972 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:36:51,972 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:36:51,972 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:36:51,972 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:36:51,972 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:36:51,972 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:36:51,972 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:36:51,972 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:36:51,972 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:36:51,972 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:36:51,972 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:36:51,972 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:36:51,972 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:36:51,972 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 19:36:51,972 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 19:36:51,972 - INFO - âœ… ChatOrchestrator instance created successfully!
2025-09-24 19:36:51,972 - INFO - âœ… Got ChatOrchestrator
2025-09-24 19:36:51,973 - INFO - ðŸ“Œ User input: what is the reliability of Gt 1 on ins one ?
2025-09-24 19:36:51,973 - DEBUG - ðŸ“Œ Full input with context: Previous conversation:
[HumanMessage(content='list all ships', additional_kwargs={}, response_metadata={}), AIMessage(content='', additional_kwargs={}, response_metadata={})]

User: what is the reliability of Gt 1 on ins one ?
2025-09-24 19:36:51,973 - INFO - ðŸ“Œ Processing query: Previous conversation:
[HumanMessage(content='list all ships', additional_kwargs={}, response_metadata={}), AIMessage(content='', additional_kwargs={}, response_metadata={})]

User: what is the reliability of Gt 1 on ins one ?
2025-09-24 19:36:51,973 - DEBUG - âœ… Schema available for role Admin/ INSMA: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:36:51,973 - INFO - ðŸ“Œ Generating SQL for: Previous conversation:
[HumanMessage(content='list all ships', additional_kwargs={}, response_metadata={}), AIMessage(content='', additional_kwargs={}, response_metadata={})]

User: what is the reliability of Gt 1 on ins one ?
2025-09-24 19:36:51,973 - DEBUG - ðŸ“Œ Generated Prompt Length: 9314 characters
2025-09-24 19:36:51,973 - INFO - Generating SQL query...
2025-09-24 19:36:51,974 - DEBUG - connect_tcp.started host='127.0.0.1' port=11434 local_address=None timeout=None socket_options=None
2025-09-24 19:36:51,974 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe5f2d42dd0>
2025-09-24 19:36:51,974 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-24 19:36:51,974 - DEBUG - send_request_headers.complete
2025-09-24 19:36:51,974 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-24 19:36:51,974 - DEBUG - send_request_body.complete
2025-09-24 19:36:51,974 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-24 19:37:01,065 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Wed, 24 Sep 2025 14:07:01 GMT'), (b'Content-Length', b'604')])
2025-09-24 19:37:01,066 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
2025-09-24 19:37:01,066 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-24 19:37:01,066 - DEBUG - receive_response_body.complete
2025-09-24 19:37:01,066 - DEBUG - response_closed.started
2025-09-24 19:37:01,066 - DEBUG - response_closed.complete
2025-09-24 19:37:01,066 - DEBUG - Extracting SQL from response: SELECT eb.reliability
FROM ships s
JOIN departments d ON s.ship_id = d.ship_id
JOIN system_configuration sc ON d.department_id = sc.department_id
JOIN etabeta eb ON sc.component_id = eb.component_id
W...
2025-09-24 19:37:01,067 - INFO - Direct SQL response detected: SELECT eb.reliability
FROM ships s
JOIN departments d ON s.ship_id = d.ship_id
JOIN system_configuration sc ON d.department_id = sc.department_id
JOIN etabeta eb ON sc.component_id = eb.component_id
WHERE UPPER(sc.nomenclature) = UPPER('GT 1') AND UPPER(s.ship_name) = UPPER('INS ONE')
2025-09-24 19:37:01,067 - INFO - SQL query generation completed
2025-09-24 19:37:01,067 - DEBUG - Generated SQL query: SELECT eb.reliability
FROM ships s
JOIN departments d ON s.ship_id = d.ship_id
JOIN system_configuration sc ON d.department_id = sc.department_id
JOIN etabeta eb ON sc.component_id = eb.component_id
WHERE UPPER(sc.nomenclature) = UPPER('GT 1') AND UPPER(s.ship_name) = UPPER('INS ONE')
2025-09-24 19:37:01,067 - DEBUG - ðŸ“Œ LLM Raw Response: SELECT eb.reliability
FROM ships s
JOIN departments d ON s.ship_id = d.ship_id
JOIN system_configuration sc ON d.department_id = sc.department_id
JOIN etabeta eb ON sc.component_id = eb.component_id
WHERE UPPER(sc.nomenclature) = UPPER('GT 1') AND UPPER(s.ship_name) = UPPER('INS ONE')
2025-09-24 19:37:01,068 - DEBUG - ðŸ” Table aliases in FROM/JOIN: {'eb', 'sc', 'd', 's'}
2025-09-24 19:37:01,068 - DEBUG - ðŸ” Table aliases in WHERE: {'sc', 's'}
2025-09-24 19:37:01,069 - INFO - âœ… Query passed advanced validation
2025-09-24 19:37:01,069 - INFO - ðŸ“Œ Generated Valid SQL Query: SELECT eb.reliability FROM ships s JOIN departments d ON s.ship_id = d.ship_id JOIN system_configuration sc ON d.department_id = sc.department_id JOIN etabeta eb ON sc.component_id = eb.component_id WHERE UPPER(sc.nomenclature) = UPPER('GT 1') AND UPPER(s.ship_name) = UPPER('INS ONE')
2025-09-24 19:37:01,069 - DEBUG - ðŸ” Table aliases in FROM/JOIN: {'eb', 'sc', 'd', 's'}
2025-09-24 19:37:01,069 - DEBUG - ðŸ” Table aliases in WHERE: {'sc', 's'}
2025-09-24 19:37:01,069 - INFO - âœ… Query passed advanced validation
2025-09-24 19:37:01,069 - INFO - âœ… Query is safe and authorized!
2025-09-24 19:37:01,069 - INFO - ðŸ“Œ Executing SQL query: SELECT eb.reliability FROM ships s JOIN departments d ON s.ship_id = d.ship_id JOIN system_configuration sc ON d.department_id = sc.department_id JOIN etabeta eb ON sc.component_id = eb.component_id WHERE UPPER(sc.nomenclature) = UPPER('GT 1') AND UPPER(s.ship_name) = UPPER('INS ONE')
2025-09-24 19:37:02,025 - ERROR - âŒ SQL Execution Error: (pyodbc.ProgrammingError) ('42S22', "[42S22] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]Invalid column name 'reliability'. (207) (SQLExecDirectW)")
[SQL: SELECT eb.reliability FROM ships s JOIN departments d ON s.ship_id = d.ship_id JOIN system_configuration sc ON d.department_id = sc.department_id JOIN etabeta eb ON sc.component_id = eb.component_id WHERE UPPER(sc.nomenclature) = UPPER('GT 1') AND UPPER(s.ship_name) = UPPER('INS ONE')]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-09-24 19:37:02,074 - INFO - âœ… Got response from ChatOrchestrator - Intent: GENERAL
2025-09-24 19:42:30,739 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-09-24 19:42:30,739 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-09-24 19:42:30,740 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-09-24 19:42:30,869 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-09-24 19:42:31,038 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:42:31,054 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:42:31,054 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:42:31,069 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:42:31,084 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:42:31,093 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:42:31,278 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:42:31,284 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:42:31,286 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:42:31,289 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:42:31,292 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:42:31,294 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:42:31,297 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:42:31,299 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:42:31,302 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:42:31,305 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:42:31,307 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:42:31,311 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:42:31,313 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:42:31,316 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:42:31,322 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:42:31,326 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:42:31,326 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:42:31,330 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:42:31,330 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:42:31,335 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:42:31,335 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:42:31,339 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:42:31,339 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:42:31,344 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:42:31,344 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:42:31,348 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:42:31,348 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:42:31,352 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:42:31,352 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:42:31,352 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:42:31,356 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:42:31,356 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:42:31,356 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:42:31,437 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:42:31,442 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:42:31,443 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:42:31,443 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:42:31,443 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:42:31,443 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:42:31,448 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:42:31,454 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:42:31,454 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:42:31,454 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:42:31,454 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,454 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:42:31,454 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,454 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,454 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,454 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:42:31,454 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,455 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:42:31,455 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,455 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:42:31,455 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:42:31,455 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:42:31,455 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:42:31,455 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-09-24 19:42:31,455 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-09-24 19:42:31,455 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-09-24 19:42:31,753 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-09-24 19:42:31,769 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-09-24 19:42:31,769 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-09-24 19:42:31,781 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'failure_modes', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-09-24 19:42:31,786 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-09-24 19:42:31,788 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-09-24 19:42:31,791 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-09-24 19:42:31,793 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-09-24 19:42:31,796 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-09-24 19:42:31,798 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-09-24 19:42:31,801 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-09-24 19:42:31,804 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-09-24 19:42:31,806 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-09-24 19:42:31,809 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-09-24 19:42:31,812 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-09-24 19:42:31,815 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-09-24 19:42:31,817 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-09-24 19:42:31,822 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-09-24 19:42:31,826 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:42:31,827 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-09-24 19:42:31,831 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-09-24 19:42:31,831 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-09-24 19:42:31,835 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:42:31,835 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-09-24 19:42:31,839 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:42:31,839 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-09-24 19:42:31,843 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-09-24 19:42:31,843 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-09-24 19:42:31,847 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-09-24 19:42:31,847 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-09-24 19:42:31,852 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-09-24 19:42:31,852 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-09-24 19:42:31,852 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-09-24 19:42:31,857 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-09-24 19:42:31,857 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-09-24 19:42:31,857 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-09-24 19:42:31,862 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-09-24 19:42:31,866 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-09-24 19:42:31,867 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-09-24 19:42:31,867 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-09-24 19:42:31,867 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-09-24 19:42:31,867 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-09-24 19:42:31,872 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-09-24 19:42:31,876 - DEBUG - ðŸ”— Foreign keys for users: []
2025-09-24 19:42:31,876 - INFO - âœ… Schema loading complete. Found 13 tables and 14 relationships
2025-09-24 19:42:31,876 - DEBUG - ðŸ” Relationship Details:
2025-09-24 19:42:31,876 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,876 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-09-24 19:42:31,877 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,877 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,877 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,877 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-09-24 19:42:31,877 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,877 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-09-24 19:42:31,877 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-09-24 19:42:31,877 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-09-24 19:42:31,877 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-09-24 19:42:31,877 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-09-24 19:42:31,877 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-09-24 19:42:31,877 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
