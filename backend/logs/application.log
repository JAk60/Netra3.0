2025-11-26 22:01:51,828 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:01:52,256 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:01:52,261 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:01:52,264 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:01:52,267 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:01:52,270 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:01:52,274 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:01:52,277 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:01:52,279 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:01:52,282 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:01:52,285 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:01:52,288 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:01:52,290 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:01:52,293 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:01:52,296 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:01:52,299 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:01:52,301 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:01:52,305 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:01:52,310 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:01:52,314 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:52,314 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:52,319 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:52,319 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:01:52,323 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:52,323 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:52,328 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:52,328 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:01:52,332 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:52,332 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:01:52,337 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:52,337 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:01:52,342 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:52,342 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:01:52,346 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:52,346 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:01:52,351 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:01:52,351 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:01:52,355 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:01:52,355 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:01:52,355 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:01:52,359 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:01:52,359 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:01:52,360 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:01:52,364 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:01:52,368 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:01:52,368 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:01:52,368 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:01:52,368 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:01:52,368 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:01:52,373 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:01:52,377 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:01:52,377 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:01:52,377 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:01:52,377 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:52,377 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:01:52,377 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:52,378 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:01:52,378 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:01:52,378 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:01:52,378 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:01:52,378 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:01:52,378 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:01:52,378 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:01:52,378 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:01:52,378 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:01:52,378 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:01:52,378 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:01:52,378 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:01:52,378 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:01:52,378 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:01:53,301 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:01:53,301 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:01:53,301 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:01:53,487 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:01:53,721 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:53,739 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:01:53,740 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:53,756 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:53,772 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:01:53,782 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:01:53,803 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:01:53,810 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:01:53,813 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:01:53,817 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:01:53,820 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:01:53,824 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:01:53,828 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:01:53,831 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:01:53,835 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:01:53,838 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:01:53,842 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:01:53,846 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:01:53,849 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:01:53,853 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:01:53,857 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:01:53,860 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:01:53,864 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:01:53,871 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:01:53,876 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:53,876 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:53,881 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:53,882 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:01:53,887 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:53,887 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:53,893 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:53,893 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:01:53,898 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:53,898 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:01:53,903 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:53,903 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:01:53,908 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:53,908 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:01:53,914 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:53,914 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:01:53,919 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:01:53,919 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:01:53,926 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:01:53,926 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:01:53,927 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:01:53,934 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:01:53,934 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:01:53,934 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:01:53,941 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:01:53,948 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:01:53,949 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:01:53,949 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:01:53,949 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:01:53,949 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:01:53,956 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:01:53,962 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:01:53,962 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:01:53,963 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:01:53,963 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:53,963 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:01:53,963 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:53,963 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:01:53,963 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:01:53,963 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:01:53,963 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:01:53,963 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:01:53,963 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:01:53,963 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:01:53,963 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:01:53,963 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:01:53,963 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:01:53,964 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:01:53,964 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:01:53,964 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:01:53,964 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:01:53,965 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:01:53,965 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:01:54,690 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:54,706 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:01:54,707 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:01:54,720 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:01:54,725 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:01:54,728 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:01:54,731 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:01:54,734 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:01:54,738 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:01:54,741 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:01:54,745 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:01:54,748 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:01:54,752 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:01:54,755 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:01:54,758 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:01:54,762 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:01:54,767 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:01:54,772 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:01:54,776 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:01:54,779 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:01:54,785 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:01:54,790 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:54,790 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:54,795 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:54,795 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:01:54,800 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:54,800 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:54,805 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:54,805 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:01:54,810 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:54,810 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:01:54,816 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:54,816 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:01:54,821 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:54,821 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:01:54,825 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:54,825 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:01:54,830 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:01:54,830 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:01:54,836 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:01:54,836 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:01:54,836 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:01:54,841 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:01:54,841 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:01:54,841 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:01:54,846 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:01:54,851 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:01:54,851 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:01:54,851 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:01:54,852 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:01:54,852 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:01:54,856 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:01:54,862 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:01:54,862 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:01:54,862 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:01:54,862 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:54,862 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:01:54,862 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:54,862 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:01:54,862 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:01:54,862 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:01:54,862 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:01:54,862 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:01:54,862 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:01:54,862 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:01:54,862 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:01:54,862 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:01:54,862 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:01:54,862 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:01:54,862 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:01:54,863 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:01:54,863 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:01:56,840 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:01:56,840 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:01:56,840 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:01:57,027 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:01:57,260 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:57,277 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:01:57,277 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:57,292 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:57,307 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:01:57,316 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:01:57,336 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:01:57,341 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:01:57,344 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:01:57,347 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:01:57,349 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:01:57,353 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:01:57,356 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:01:57,359 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:01:57,361 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:01:57,364 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:01:57,367 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:01:57,370 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:01:57,372 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:01:57,375 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:01:57,378 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:01:57,381 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:01:57,384 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:01:57,390 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:01:57,394 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:57,394 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:57,398 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:57,398 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:01:57,403 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:57,403 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:57,407 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:57,407 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:01:57,411 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:57,411 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:01:57,416 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:57,416 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:01:57,420 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:57,420 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:01:57,424 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:57,424 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:01:57,429 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:01:57,429 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:01:57,433 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:01:57,433 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:01:57,433 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:01:57,438 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:01:57,438 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:01:57,438 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:01:57,443 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:01:57,448 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:01:57,448 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:01:57,448 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:01:57,448 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:01:57,448 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:01:57,452 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:01:57,457 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:01:57,458 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:01:57,458 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:01:57,458 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:57,458 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:01:57,458 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:57,458 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:01:57,458 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:01:57,458 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:01:57,458 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:01:57,458 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:01:57,458 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:01:57,458 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:01:57,458 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:01:57,458 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:01:57,458 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:01:57,458 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:01:57,458 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:01:57,458 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:01:57,458 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:01:57,459 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:01:57,459 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:01:58,121 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:58,137 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:01:58,137 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:01:58,150 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:01:58,154 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:01:58,157 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:01:58,160 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:01:58,163 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:01:58,166 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:01:58,169 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:01:58,172 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:01:58,174 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:01:58,177 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:01:58,180 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:01:58,183 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:01:58,185 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:01:58,188 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:01:58,191 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:01:58,193 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:01:58,196 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:01:58,202 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:01:58,206 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:58,206 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:58,210 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:58,210 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:01:58,215 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:58,215 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:58,219 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:58,219 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:01:58,223 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:58,223 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:01:58,228 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:58,228 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:01:58,232 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:58,232 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:01:58,236 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:58,237 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:01:58,241 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:01:58,241 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:01:58,245 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:01:58,245 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:01:58,245 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:01:58,250 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:01:58,250 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:01:58,250 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:01:58,254 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:01:58,258 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:01:58,258 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:01:58,259 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:01:58,259 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:01:58,259 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:01:58,263 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:01:58,267 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:01:58,267 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:01:58,267 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:01:58,267 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:58,267 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:01:58,267 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:58,267 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:01:58,268 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:01:58,268 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:01:58,268 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:01:58,268 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:01:58,268 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:01:58,268 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:01:58,268 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:01:58,268 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:01:58,268 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:01:58,268 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:01:58,268 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:01:58,268 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:01:58,268 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:01:59,193 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:01:59,194 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:01:59,194 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:01:59,383 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:01:59,617 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:59,633 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:01:59,634 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:59,648 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:01:59,663 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:01:59,672 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:01:59,691 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:01:59,697 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:01:59,699 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:01:59,702 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:01:59,705 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:01:59,708 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:01:59,711 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:01:59,714 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:01:59,716 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:01:59,719 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:01:59,721 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:01:59,725 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:01:59,727 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:01:59,730 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:01:59,733 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:01:59,735 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:01:59,738 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:01:59,743 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:01:59,748 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:59,748 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:59,752 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:59,752 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:01:59,756 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:59,756 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:01:59,761 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:59,761 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:01:59,765 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:59,765 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:01:59,769 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:59,769 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:01:59,773 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:01:59,773 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:01:59,777 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:01:59,777 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:01:59,782 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:01:59,782 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:01:59,786 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:01:59,786 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:01:59,786 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:01:59,790 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:01:59,790 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:01:59,790 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:01:59,794 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:01:59,798 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:01:59,798 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:01:59,798 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:01:59,798 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:01:59,798 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:01:59,803 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:01:59,807 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:01:59,807 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:01:59,807 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:01:59,807 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:59,807 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:01:59,807 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:01:59,807 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:01:59,807 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:01:59,807 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:01:59,807 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:01:59,807 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:01:59,807 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:01:59,807 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:01:59,807 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:01:59,807 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:01:59,807 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:01:59,808 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:01:59,808 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:01:59,808 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:01:59,808 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:01:59,808 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:01:59,809 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:02:00,480 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:00,496 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:02:00,497 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:02:00,509 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:02:00,514 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:02:00,517 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:02:00,519 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:02:00,522 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:02:00,525 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:02:00,528 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:02:00,531 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:02:00,534 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:02:00,537 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:02:00,539 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:02:00,542 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:02:00,545 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:02:00,548 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:02:00,551 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:02:00,553 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:02:00,556 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:02:00,561 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:02:00,565 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:00,566 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:00,570 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:00,570 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:02:00,574 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:00,574 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:00,578 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:00,578 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:02:00,582 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:00,582 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:02:00,586 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:00,587 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:02:00,591 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:00,591 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:02:00,595 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:00,595 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:02:00,599 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:02:00,599 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:02:00,603 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:02:00,603 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:02:00,603 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:02:00,608 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:02:00,608 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:02:00,608 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:02:00,612 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:02:00,616 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:02:00,616 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:02:00,616 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:02:00,616 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:02:00,616 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:02:00,620 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:02:00,624 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:02:00,624 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:02:00,624 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:02:00,624 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:00,624 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:02:00,624 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:00,624 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:02:00,624 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:02:00,624 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:02:00,625 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:02:00,625 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:02:00,625 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:02:00,625 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:02:00,625 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:02:00,625 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:02:00,625 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:02:00,625 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:02:00,625 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:02:00,625 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:02:00,625 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:02:01,582 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:02:01,582 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:02:01,582 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:02:01,766 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:02:01,999 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:02,015 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:02:02,016 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:02,030 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:02,045 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:02:02,054 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:02:02,073 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:02:02,079 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:02:02,081 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:02:02,084 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:02:02,087 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:02:02,090 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:02:02,093 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:02:02,095 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:02:02,098 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:02:02,100 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:02:02,103 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:02:02,106 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:02:02,109 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:02:02,111 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:02:02,114 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:02:02,117 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:02:02,120 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:02:02,125 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:02:02,129 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,129 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:02,134 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:02,134 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:02:02,138 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,138 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:02,142 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,142 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:02:02,146 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,146 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:02:02,150 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,150 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:02:02,154 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:02,154 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:02:02,158 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,158 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:02:02,162 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:02:02,163 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:02:02,167 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:02:02,167 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:02:02,167 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:02:02,171 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:02:02,172 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:02:02,172 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:02:02,176 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:02:02,181 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:02:02,181 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:02:02,181 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:02:02,181 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:02:02,181 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:02:02,185 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:02:02,189 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:02:02,189 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:02:02,190 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:02:02,190 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:02,190 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:02:02,190 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:02,190 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:02:02,190 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:02:02,190 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:02:02,190 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:02:02,190 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:02:02,190 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:02:02,190 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:02:02,190 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:02:02,190 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:02:02,190 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:02:02,191 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:02:02,191 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:02:02,191 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:02:02,191 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:02:02,191 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:02:02,192 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:02:02,854 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:02,870 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:02:02,871 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:02:02,883 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:02:02,888 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:02:02,890 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:02:02,893 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:02:02,896 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:02:02,899 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:02:02,902 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:02:02,905 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:02:02,907 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:02:02,910 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:02:02,913 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:02:02,915 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:02:02,918 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:02:02,921 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:02:02,924 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:02:02,926 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:02:02,929 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:02:02,934 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:02:02,939 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,939 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:02,943 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:02,943 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:02:02,948 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,948 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:02,952 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,952 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:02:02,956 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,956 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:02:02,961 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,961 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:02:02,965 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:02,965 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:02:02,970 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:02,970 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:02:02,974 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:02:02,974 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:02:02,978 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:02:02,978 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:02:02,979 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:02:02,983 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:02:02,983 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:02:02,983 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:02:02,987 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:02:02,991 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:02:02,992 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:02:02,992 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:02:02,992 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:02:02,992 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:02:02,996 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:02:03,000 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:02:03,000 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:02:03,000 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:02:03,000 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:03,000 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:02:03,000 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:03,000 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:02:03,000 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:02:03,000 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:02:03,001 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:02:03,001 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:02:03,001 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:02:03,001 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:02:03,001 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:02:03,001 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:02:03,001 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:02:03,001 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:02:03,001 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:02:03,001 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:02:03,001 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:02:06,826 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:02:06,826 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:02:06,826 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:02:07,010 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:02:07,251 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:07,267 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:02:07,267 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:07,282 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:07,297 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:02:07,306 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:02:07,325 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:02:07,330 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:02:07,333 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:02:07,336 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:02:07,338 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:02:07,341 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:02:07,344 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:02:07,347 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:02:07,349 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:02:07,352 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:02:07,355 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:02:07,357 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:02:07,360 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:02:07,362 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:02:07,365 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:02:07,368 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:02:07,370 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:02:07,376 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:02:07,380 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:07,380 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:07,384 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:07,384 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:02:07,388 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:07,388 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:07,392 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:07,392 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:02:07,397 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:07,397 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:02:07,401 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:07,401 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:02:07,405 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:07,405 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:02:07,409 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:07,409 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:02:07,413 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:02:07,413 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:02:07,418 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:02:07,418 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:02:07,418 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:02:07,422 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:02:07,422 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:02:07,422 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:02:07,426 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:02:07,430 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:02:07,430 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:02:07,430 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:02:07,430 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:02:07,430 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:02:07,434 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:02:07,438 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:02:07,438 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:02:07,439 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:02:07,439 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:07,439 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:02:07,439 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:07,439 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:02:07,439 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:02:07,439 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:02:07,439 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:02:07,439 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:02:07,439 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:02:07,439 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:02:07,439 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:02:07,439 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:02:07,439 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:02:07,439 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:02:07,439 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:02:07,439 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:02:07,439 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:02:07,440 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:02:07,440 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:02:08,100 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:08,115 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:02:08,116 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:02:08,129 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:02:08,134 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:02:08,136 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:02:08,139 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:02:08,142 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:02:08,145 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:02:08,148 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:02:08,151 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:02:08,154 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:02:08,156 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:02:08,159 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:02:08,162 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:02:08,165 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:02:08,167 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:02:08,171 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:02:08,173 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:02:08,176 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:02:08,182 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:02:08,186 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:08,186 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:08,190 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:08,190 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:02:08,194 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:08,194 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:08,198 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:08,199 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:02:08,203 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:08,203 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:02:08,207 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:08,207 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:02:08,211 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:08,211 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:02:08,215 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:08,215 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:02:08,219 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:02:08,219 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:02:08,223 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:02:08,223 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:02:08,224 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:02:08,228 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:02:08,228 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:02:08,228 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:02:08,232 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:02:08,237 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:02:08,237 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:02:08,237 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:02:08,237 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:02:08,237 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:02:08,241 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:02:08,245 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:02:08,245 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:02:08,245 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:02:08,245 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:08,246 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:02:08,246 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:08,246 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:02:08,246 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:02:08,246 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:02:08,246 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:02:08,246 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:02:08,246 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:02:08,246 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:02:08,246 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:02:08,246 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:02:08,246 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:02:08,246 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:02:08,246 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:02:08,247 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:02:08,247 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:02:09,176 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:02:09,176 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:02:09,177 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:02:09,359 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:02:09,596 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:09,612 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:02:09,612 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:09,627 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:09,642 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:02:09,651 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:02:09,670 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:02:09,676 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:02:09,679 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:02:09,681 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:02:09,684 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:02:09,687 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:02:09,690 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:02:09,693 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:02:09,695 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:02:09,698 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:02:09,701 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:02:09,703 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:02:09,706 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:02:09,709 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:02:09,712 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:02:09,714 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:02:09,717 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:02:09,723 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:02:09,727 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:09,727 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:09,732 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:09,732 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:02:09,736 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:09,736 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:09,740 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:09,740 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:02:09,745 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:09,745 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:02:09,749 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:09,749 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:02:09,753 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:09,753 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:02:09,758 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:09,758 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:02:09,762 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:02:09,762 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:02:09,766 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:02:09,766 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:02:09,767 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:02:09,771 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:02:09,771 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:02:09,771 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:02:09,775 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:02:09,779 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:02:09,779 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:02:09,780 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:02:09,780 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:02:09,780 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:02:09,784 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:02:09,788 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:02:09,788 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:02:09,788 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:02:09,788 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:09,788 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:02:09,788 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:09,788 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:02:09,788 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:02:09,788 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:02:09,788 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:02:09,788 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:02:09,788 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:02:09,788 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:02:09,788 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:02:09,788 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:02:09,789 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:02:09,789 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:02:09,789 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:02:09,789 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:02:09,789 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:02:09,790 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:02:09,790 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:02:10,452 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:02:10,468 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:02:10,469 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:02:10,481 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:02:10,486 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:02:10,488 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:02:10,491 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:02:10,493 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:02:10,496 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:02:10,499 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:02:10,502 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:02:10,505 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:02:10,507 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:02:10,510 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:02:10,512 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:02:10,515 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:02:10,518 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:02:10,521 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:02:10,523 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:02:10,526 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:02:10,532 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:02:10,536 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:10,536 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:10,541 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:10,541 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:02:10,545 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:10,545 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:02:10,549 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:10,549 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:02:10,553 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:10,554 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:02:10,558 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:10,558 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:02:10,562 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:02:10,562 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:02:10,566 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:02:10,566 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:02:10,570 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:02:10,570 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:02:10,575 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:02:10,575 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:02:10,575 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:02:10,579 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:02:10,579 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:02:10,579 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:02:10,584 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:02:10,588 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:02:10,588 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:02:10,588 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:02:10,588 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:02:10,589 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:02:10,593 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:02:10,597 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:02:10,597 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:02:10,597 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:02:10,597 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:10,597 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:02:10,597 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:02:10,597 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:02:10,597 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:02:10,597 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:02:10,597 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:02:10,597 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:02:10,597 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:02:10,598 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:02:10,598 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:02:10,598 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:02:10,598 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:02:10,598 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:02:10,598 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:02:10,598 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:02:10,598 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:07:22,932 - INFO - Database engine created with pool_size=10
2025-11-26 22:13:03,672 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:13:03,672 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:13:03,673 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:13:03,853 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:13:04,084 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:13:04,100 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:13:04,101 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:13:04,115 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:13:04,130 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:13:04,139 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:13:04,158 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:13:04,164 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:13:04,167 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:13:04,169 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:13:04,172 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:13:04,175 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:13:04,178 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:13:04,180 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:13:04,183 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:13:04,186 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:13:04,188 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:13:04,191 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:13:04,194 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:13:04,197 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:13:04,199 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:13:04,202 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:13:04,204 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:13:04,210 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:13:04,214 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:04,214 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:13:04,219 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:13:04,219 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:13:04,223 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:04,223 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:13:04,227 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:04,227 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:13:04,231 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:04,231 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:13:04,235 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:04,235 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:13:04,240 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:13:04,240 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:13:04,244 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:04,244 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:13:04,248 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:13:04,248 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:13:04,253 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:13:04,253 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:13:04,253 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:13:04,257 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:13:04,257 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:13:04,257 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:13:04,262 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:13:04,266 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:13:04,266 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:13:04,266 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:13:04,266 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:13:04,266 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:13:04,271 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:13:04,275 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:13:04,275 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:13:04,275 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:13:04,275 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:13:04,275 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:13:04,275 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:13:04,276 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:13:04,276 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:13:04,276 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:13:04,276 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:13:04,276 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:13:04,276 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:13:04,276 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:13:04,276 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:13:04,276 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:13:04,276 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:13:04,276 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:13:04,276 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:13:04,276 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:13:04,276 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:13:04,277 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:13:04,277 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:13:04,934 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:13:04,949 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:13:04,950 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:13:04,963 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:13:04,968 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:13:04,971 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:13:04,973 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:13:04,976 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:13:04,980 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:13:04,983 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:13:04,985 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:13:04,988 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:13:04,991 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:13:04,994 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:13:04,996 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:13:04,999 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:13:05,002 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:13:05,005 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:13:05,008 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:13:05,011 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:13:05,016 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:13:05,020 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:05,020 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:13:05,025 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:13:05,025 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:13:05,029 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:05,029 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:13:05,033 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:05,033 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:13:05,037 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:05,038 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:13:05,043 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:05,043 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:13:05,048 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:13:05,048 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:13:05,052 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:05,053 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:13:05,057 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:13:05,058 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:13:05,063 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:13:05,063 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:13:05,063 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:13:05,069 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:13:05,069 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:13:05,069 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:13:05,075 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:13:05,081 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:13:05,082 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:13:05,082 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:13:05,082 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:13:05,082 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:13:05,087 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:13:05,092 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:13:05,092 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:13:05,092 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:13:05,092 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:13:05,093 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:13:05,093 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:13:05,093 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:13:05,093 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:13:05,093 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:13:05,093 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:13:05,093 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:13:05,093 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:13:05,093 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:13:05,093 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:13:05,093 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:13:05,093 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:13:05,093 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:13:05,093 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:13:05,093 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:13:05,093 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:13:06,919 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:13:06,919 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:13:06,919 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:13:07,105 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:13:07,350 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:13:07,366 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:13:07,367 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:13:07,381 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:13:07,396 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:13:07,405 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:13:07,425 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:13:07,431 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:13:07,433 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:13:07,436 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:13:07,439 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:13:07,442 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:13:07,445 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:13:07,448 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:13:07,451 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:13:07,453 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:13:07,456 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:13:07,459 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:13:07,462 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:13:07,464 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:13:07,467 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:13:07,469 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:13:07,472 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:13:07,478 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:13:07,482 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:07,482 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:13:07,487 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:13:07,487 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:13:07,491 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:07,491 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:13:07,495 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:07,495 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:13:07,499 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:07,499 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:13:07,503 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:07,503 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:13:07,507 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:13:07,507 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:13:07,512 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:07,512 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:13:07,516 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:13:07,516 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:13:07,520 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:13:07,520 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:13:07,520 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:13:07,524 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:13:07,524 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:13:07,524 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:13:07,528 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:13:07,533 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:13:07,533 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:13:07,533 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:13:07,533 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:13:07,533 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:13:07,538 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:13:07,542 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:13:07,542 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:13:07,542 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:13:07,542 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:13:07,542 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:13:07,542 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:13:07,542 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:13:07,542 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:13:07,542 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:13:07,542 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:13:07,542 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:13:07,542 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:13:07,542 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:13:07,542 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:13:07,542 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:13:07,542 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:13:07,542 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:13:07,542 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:13:07,543 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:13:07,543 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:13:07,543 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:13:07,543 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:13:08,212 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:13:08,228 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:13:08,229 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:13:08,241 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:13:08,245 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:13:08,248 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:13:08,250 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:13:08,253 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:13:08,256 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:13:08,259 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:13:08,261 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:13:08,264 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:13:08,266 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:13:08,269 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:13:08,272 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:13:08,274 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:13:08,277 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:13:08,280 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:13:08,282 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:13:08,285 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:13:08,290 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:13:08,295 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:08,295 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:13:08,299 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:13:08,299 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:13:08,303 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:08,303 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:13:08,307 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:08,308 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:13:08,312 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:08,312 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:13:08,316 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:08,316 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:13:08,320 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:13:08,320 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:13:08,324 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:13:08,324 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:13:08,328 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:13:08,328 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:13:08,333 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:13:08,333 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:13:08,333 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:13:08,337 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:13:08,337 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:13:08,337 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:13:08,341 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:13:08,345 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:13:08,346 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:13:08,346 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:13:08,346 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:13:08,346 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:13:08,350 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:13:08,354 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:13:08,354 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:13:08,354 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:13:08,354 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:13:08,354 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:13:08,354 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:13:08,354 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:13:08,354 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:13:08,354 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:13:08,354 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:13:08,354 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:13:08,354 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:13:08,354 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:13:08,354 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:13:08,354 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:13:08,354 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:13:08,355 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:13:08,355 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:13:08,355 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:13:08,355 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:13:14,045 - ERROR - Error listing Mission configurations: 'Mission_ConfigService' object has no attribute 'list_all'
2025-11-26 22:13:14,496 - ERROR - Error listing Mission configurations: 'Mission_ConfigService' object has no attribute 'list_all'
2025-11-26 22:13:24,907 - ERROR - Error listing Mission configurations: 'Mission_ConfigService' object has no attribute 'list_all'
2025-11-26 22:14:16,626 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:14:16,626 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:14:16,626 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:14:16,825 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:14:17,064 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:14:17,080 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:14:17,080 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:14:17,095 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:14:17,109 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:14:17,118 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:14:17,138 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:14:17,143 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:14:17,146 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:14:17,149 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:14:17,151 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:14:17,154 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:14:17,157 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:14:17,160 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:14:17,162 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:14:17,165 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:14:17,168 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:14:17,170 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:14:17,173 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:14:17,176 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:14:17,178 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:14:17,181 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:14:17,183 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:14:17,189 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:14:17,193 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:17,193 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:14:17,197 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:14:17,197 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:14:17,201 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:17,202 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:14:17,206 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:17,206 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:14:17,210 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:17,210 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:14:17,214 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:17,214 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:14:17,218 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:14:17,218 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:14:17,222 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:17,223 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:14:17,227 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:14:17,227 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:14:17,231 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:14:17,231 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:14:17,231 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:14:17,235 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:14:17,235 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:14:17,235 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:14:17,239 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:14:17,244 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:14:17,244 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:14:17,244 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:14:17,244 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:14:17,244 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:14:17,248 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:14:17,252 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:14:17,252 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:14:17,252 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:14:17,252 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:14:17,252 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:14:17,252 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:14:17,252 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:14:17,252 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:14:17,252 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:14:17,252 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:14:17,252 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:14:17,253 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:14:17,253 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:14:17,253 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:14:17,253 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:14:17,253 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:14:17,253 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:14:17,253 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:14:17,253 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:14:17,253 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:14:17,253 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:14:17,253 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:14:17,907 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:14:17,922 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:14:17,923 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:14:17,937 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:14:17,941 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:14:17,944 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:14:17,947 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:14:17,949 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:14:17,953 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:14:17,956 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:14:17,959 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:14:17,962 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:14:17,964 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:14:17,967 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:14:17,970 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:14:17,972 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:14:17,975 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:14:17,978 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:14:17,981 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:14:17,983 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:14:17,989 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:14:17,993 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:17,993 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:14:17,997 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:14:17,998 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:14:18,002 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:18,002 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:14:18,006 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:18,006 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:14:18,010 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:18,011 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:14:18,015 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:18,015 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:14:18,022 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:14:18,022 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:14:18,026 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:14:18,026 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:14:18,030 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:14:18,030 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:14:18,034 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:14:18,034 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:14:18,034 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:14:18,039 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:14:18,039 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:14:18,039 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:14:18,043 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:14:18,047 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:14:18,048 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:14:18,048 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:14:18,048 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:14:18,048 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:14:18,052 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:14:18,056 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:14:18,056 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:14:18,056 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:14:18,056 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:14:18,056 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:14:18,056 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:14:18,056 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:14:18,056 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:14:18,056 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:14:18,057 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:14:18,057 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:14:18,057 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:14:18,057 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:14:18,057 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:14:18,057 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:14:18,057 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:14:18,057 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:14:18,057 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:14:18,057 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:14:18,057 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:14:25,664 - INFO - Database engine created with pool_size=10
2025-11-26 22:14:25,698 - INFO - Retrieved 1 configurations
2025-11-26 22:14:26,109 - INFO - Retrieved 1 configurations
2025-11-26 22:17:52,497 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:17:52,497 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:17:52,497 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:17:52,684 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:17:52,913 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:17:52,930 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:17:52,930 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:17:52,945 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:17:52,960 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:17:52,969 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:17:52,988 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:17:52,994 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:17:52,997 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:17:52,999 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:17:53,002 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:17:53,005 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:17:53,008 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:17:53,010 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:17:53,013 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:17:53,015 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:17:53,018 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:17:53,021 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:17:53,023 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:17:53,026 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:17:53,029 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:17:53,031 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:17:53,034 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:17:53,039 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:17:53,043 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,044 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:17:53,048 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:17:53,048 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:17:53,052 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,052 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:17:53,056 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,056 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:17:53,060 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,060 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:17:53,064 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,065 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:17:53,069 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:17:53,069 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:17:53,073 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,073 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:17:53,077 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:17:53,077 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:17:53,081 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:17:53,081 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:17:53,081 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:17:53,085 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:17:53,085 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:17:53,085 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:17:53,089 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:17:53,094 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:17:53,094 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:17:53,094 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:17:53,094 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:17:53,094 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:17:53,098 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:17:53,102 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:17:53,102 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:17:53,103 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:17:53,103 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,103 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:17:53,103 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,103 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,103 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,103 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,103 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:17:53,103 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,103 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:17:53,103 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,103 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:17:53,103 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,103 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:17:53,103 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:17:53,103 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:17:53,103 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:17:53,103 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:17:53,104 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:17:53,104 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:17:53,764 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:17:53,780 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:17:53,781 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:17:53,794 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:17:53,798 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:17:53,801 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:17:53,804 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:17:53,806 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:17:53,810 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:17:53,812 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:17:53,815 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:17:53,818 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:17:53,820 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:17:53,823 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:17:53,826 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:17:53,828 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:17:53,831 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:17:53,834 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:17:53,836 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:17:53,839 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:17:53,845 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:17:53,849 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,849 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:17:53,853 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:17:53,853 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:17:53,857 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,857 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:17:53,862 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,862 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:17:53,866 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,866 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:17:53,870 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,870 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:17:53,875 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:17:53,875 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:17:53,879 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:17:53,879 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:17:53,883 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:17:53,883 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:17:53,887 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:17:53,887 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:17:53,887 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:17:53,891 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:17:53,891 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:17:53,892 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:17:53,896 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:17:53,900 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:17:53,900 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:17:53,900 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:17:53,900 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:17:53,900 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:17:53,905 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:17:53,909 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:17:53,909 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:17:53,909 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:17:53,909 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,909 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:17:53,909 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,909 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,909 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,909 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,909 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:17:53,909 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,909 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:17:53,909 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,909 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:17:53,909 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:17:53,909 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:17:53,910 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:17:53,910 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:17:53,910 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:17:53,910 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:18:08,899 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:18:08,899 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:18:08,899 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:18:09,109 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:18:11,163 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:18:11,163 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:18:11,163 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:18:11,341 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:18:11,570 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:18:11,586 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:18:11,586 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:18:11,601 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:18:11,615 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:18:11,624 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:18:11,643 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:18:11,649 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:18:11,651 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:18:11,654 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:18:11,656 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:18:11,659 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:18:11,662 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:18:11,664 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:18:11,667 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:18:11,670 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:18:11,672 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:18:11,675 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:18:11,677 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:18:11,680 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:18:11,684 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:18:11,687 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:18:11,690 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:18:11,695 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:18:11,699 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:11,700 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:18:11,704 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:18:11,704 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:18:11,708 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:11,708 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:18:11,712 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:11,712 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:18:11,716 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:11,716 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:18:11,720 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:11,721 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:18:11,725 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:18:11,725 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:18:11,729 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:11,729 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:18:11,733 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:18:11,733 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:18:11,737 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:18:11,737 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:18:11,737 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:18:11,741 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:18:11,741 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:18:11,741 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:18:11,745 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:18:11,750 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:18:11,750 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:18:11,750 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:18:11,750 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:18:11,750 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:18:11,754 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:18:11,758 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:18:11,758 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:18:11,759 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:18:11,759 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:18:11,759 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:18:11,759 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:18:11,759 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:18:11,759 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:18:11,759 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:18:11,759 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:18:11,759 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:18:11,759 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:18:11,759 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:18:11,759 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:18:11,759 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:18:11,759 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:18:11,759 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:18:11,759 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:18:11,759 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:18:11,759 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:18:11,760 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:18:11,760 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:18:12,419 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:18:12,435 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:18:12,435 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:18:12,447 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:18:12,451 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:18:12,454 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:18:12,456 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:18:12,459 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:18:12,462 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:18:12,465 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:18:12,467 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:18:12,470 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:18:12,472 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:18:12,475 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:18:12,478 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:18:12,480 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:18:12,483 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:18:12,486 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:18:12,488 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:18:12,491 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:18:12,496 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:18:12,500 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:12,500 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:18:12,504 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:18:12,504 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:18:12,508 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:12,508 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:18:12,512 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:12,512 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:18:12,516 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:12,516 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:18:12,520 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:12,521 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:18:12,524 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:18:12,525 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:18:12,529 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:12,529 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:18:12,533 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:18:12,533 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:18:12,537 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:18:12,537 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:18:12,537 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:18:12,541 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:18:12,541 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:18:12,541 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:18:12,545 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:18:12,550 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:18:12,550 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:18:12,550 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:18:12,550 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:18:12,550 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:18:12,554 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:18:12,558 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:18:12,558 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:18:12,559 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:18:12,559 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:18:12,559 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:18:12,559 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:18:12,559 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:18:12,559 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:18:12,559 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:18:12,559 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:18:12,559 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:18:12,559 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:18:12,559 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:18:12,559 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:18:12,559 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:18:12,559 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:18:12,559 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:18:12,560 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:18:12,560 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:18:12,560 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:18:48,711 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:18:48,712 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:18:48,712 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:18:48,897 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:18:54,274 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:18:54,274 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:18:54,274 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:18:54,458 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:18:54,695 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:18:54,712 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:18:54,712 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:18:54,727 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:18:54,742 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:18:54,751 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:18:54,771 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:18:54,777 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:18:54,779 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:18:54,782 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:18:54,785 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:18:54,788 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:18:54,791 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:18:54,793 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:18:54,796 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:18:54,798 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:18:54,801 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:18:54,804 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:18:54,806 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:18:54,809 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:18:54,812 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:18:54,814 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:18:54,817 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:18:54,823 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:18:54,827 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:54,827 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:18:54,831 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:18:54,831 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:18:54,835 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:54,835 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:18:54,839 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:54,839 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:18:54,843 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:54,843 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:18:54,847 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:54,847 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:18:54,851 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:18:54,851 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:18:54,855 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:54,856 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:18:54,859 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:18:54,860 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:18:54,865 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:18:54,865 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:18:54,865 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:18:54,870 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:18:54,870 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:18:54,870 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:18:54,874 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:18:54,879 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:18:54,879 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:18:54,879 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:18:54,879 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:18:54,879 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:18:54,884 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:18:54,888 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:18:54,888 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:18:54,889 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:18:54,889 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:18:54,889 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:18:54,889 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:18:54,889 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:18:54,889 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:18:54,889 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:18:54,889 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:18:54,889 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:18:54,889 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:18:54,889 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:18:54,889 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:18:54,889 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:18:54,890 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:18:54,890 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:18:54,890 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:18:54,890 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:18:54,890 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:18:54,891 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:18:54,891 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:18:55,567 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:18:55,583 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:18:55,583 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:18:55,596 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:18:55,601 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:18:55,603 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:18:55,606 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:18:55,608 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:18:55,612 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:18:55,614 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:18:55,617 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:18:55,620 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:18:55,622 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:18:55,625 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:18:55,628 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:18:55,630 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:18:55,633 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:18:55,636 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:18:55,639 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:18:55,641 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:18:55,647 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:18:55,651 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:55,652 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:18:55,656 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:18:55,656 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:18:55,660 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:55,660 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:18:55,665 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:55,665 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:18:55,669 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:55,669 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:18:55,673 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:55,673 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:18:55,677 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:18:55,678 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:18:55,682 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:18:55,682 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:18:55,686 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:18:55,686 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:18:55,690 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:18:55,691 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:18:55,691 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:18:55,695 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:18:55,695 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:18:55,695 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:18:55,699 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:18:55,703 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:18:55,704 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:18:55,704 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:18:55,704 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:18:55,704 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:18:55,708 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:18:55,712 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:18:55,712 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:18:55,712 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:18:55,712 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:18:55,713 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:18:55,713 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:18:55,713 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:18:55,713 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:18:55,713 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:18:55,713 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:18:55,713 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:18:55,713 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:18:55,713 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:18:55,713 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:18:55,713 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:18:55,713 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:18:55,713 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:18:55,713 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:18:55,713 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:18:55,714 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:19:01,542 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:19:01,542 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:19:01,542 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:19:01,720 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:19:01,950 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:19:01,966 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:19:01,966 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:19:01,981 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:19:01,995 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:19:02,004 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:19:02,024 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:19:02,030 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:19:02,033 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:19:02,036 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:19:02,039 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:19:02,042 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:19:02,045 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:19:02,047 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:19:02,050 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:19:02,053 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:19:02,056 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:19:02,059 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:19:02,061 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:19:02,064 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:19:02,067 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:19:02,069 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:19:02,073 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:19:02,078 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:19:02,083 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,083 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:19:02,087 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:19:02,087 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:19:02,092 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,092 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:19:02,096 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,096 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:19:02,100 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,100 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:19:02,105 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,105 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:19:02,109 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:19:02,109 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:19:02,113 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,114 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:19:02,118 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:19:02,118 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:19:02,122 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:19:02,122 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:19:02,122 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:19:02,127 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:19:02,127 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:19:02,127 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:19:02,131 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:19:02,136 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:19:02,136 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:19:02,136 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:19:02,136 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:19:02,136 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:19:02,140 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:19:02,144 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:19:02,144 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:19:02,145 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:19:02,145 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,145 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:19:02,145 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,145 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,145 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,145 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,145 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:19:02,145 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,145 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:19:02,145 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,145 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:19:02,145 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,145 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:19:02,145 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:19:02,145 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:19:02,145 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:19:02,145 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:19:02,146 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:19:02,146 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:19:02,817 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:19:02,832 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:19:02,833 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:19:02,846 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:19:02,850 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:19:02,853 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:19:02,855 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:19:02,858 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:19:02,861 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:19:02,864 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:19:02,867 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:19:02,869 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:19:02,872 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:19:02,874 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:19:02,877 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:19:02,880 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:19:02,883 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:19:02,885 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:19:02,888 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:19:02,891 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:19:02,896 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:19:02,901 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,901 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:19:02,905 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:19:02,905 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:19:02,909 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,909 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:19:02,914 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,914 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:19:02,918 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,918 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:19:02,922 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,922 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:19:02,927 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:19:02,927 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:19:02,931 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:19:02,931 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:19:02,935 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:19:02,935 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:19:02,940 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:19:02,940 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:19:02,940 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:19:02,944 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:19:02,944 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:19:02,944 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:19:02,948 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:19:02,953 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:19:02,953 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:19:02,953 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:19:02,953 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:19:02,953 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:19:02,957 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:19:02,961 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:19:02,962 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:19:02,962 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:19:02,962 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,962 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:19:02,962 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,962 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,962 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,962 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,962 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:19:02,962 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,962 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:19:02,962 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,962 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:19:02,962 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:19:02,962 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:19:02,962 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:19:02,962 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:19:02,962 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:19:02,962 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:19:11,073 - INFO - Database engine created with pool_size=10
2025-11-26 22:19:11,107 - INFO - Retrieved 1 configurations
2025-11-26 22:19:11,107 - DEBUG - Sample config: {'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'ship_name': 'INS ONE', 'config_name': 'jjk', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}}
2025-11-26 22:19:11,108 - DEBUG - Async get_all returned 1 configurations
2025-11-26 22:19:11,521 - INFO - Retrieved 1 configurations
2025-11-26 22:19:11,521 - DEBUG - Sample config: {'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'ship_name': 'INS ONE', 'config_name': 'jjk', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}}
2025-11-26 22:19:11,522 - DEBUG - Async get_all returned 1 configurations
2025-11-26 22:19:35,111 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-11-26 22:19:35,112 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-11-26 22:19:35,116 - INFO - SQLModel query returned 55 rows
2025-11-26 22:19:35,116 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-11-26 22:19:35,116 - DEBUG - Starting to process and group results
2025-11-26 22:19:35,116 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-11-26 22:19:35,116 - DEBUG - Creating new command group: Western Naval Command
2025-11-26 22:19:35,116 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-11-26 22:19:35,116 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-26 22:19:35,116 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-26 22:19:35,116 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-11-26 22:19:35,116 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-11-26 22:19:35,116 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-11-26 22:19:35,116 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-26 22:19:35,116 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-11-26 22:19:35,116 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-11-26 22:19:35,116 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-11-26 22:19:35,117 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-11-26 22:19:35,117 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-11-26 22:19:35,117 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-26 22:19:35,117 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-11-26 22:19:35,117 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-11-26 22:19:35,117 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-11-26 22:19:35,117 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-11-26 22:19:35,117 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-11-26 22:19:35,117 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-11-26 22:19:35,117 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-11-26 22:19:35,117 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-11-26 22:19:35,117 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-11-26 22:19:35,117 - INFO - Processed 4 unique ships into 1 command groups
2025-11-26 22:19:35,117 - DEBUG - Converting to final data structure
2025-11-26 22:19:35,117 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-11-26 22:19:35,117 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 21 total items
2025-11-26 22:19:35,117 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-11-26 22:19:35,117 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-11-26 22:19:35,117 - INFO - Final data structure: 1 command groups, 4 total ships
2025-11-26 22:19:35,117 - DEBUG - Command groups: ['Western Naval Command']
2025-11-26 22:19:35,118 - INFO - Successfully retrieved hierarchical ship data
2025-11-26 22:19:58,706 - INFO - Retrieved 1 configurations
2025-11-26 22:19:58,707 - DEBUG - Sample config: {'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'ship_name': 'INS ONE', 'config_name': 'jjk', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}}
2025-11-26 22:19:58,707 - DEBUG - Async get_all returned 1 configurations
2025-11-26 22:19:59,039 - INFO - Retrieved 1 configurations
2025-11-26 22:19:59,039 - DEBUG - Sample config: {'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'ship_name': 'INS ONE', 'config_name': 'jjk', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}}
2025-11-26 22:19:59,040 - DEBUG - Async get_all returned 1 configurations
2025-11-26 22:21:11,678 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:21:11,679 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:21:11,679 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:21:11,879 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:21:12,965 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:21:12,966 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:21:12,966 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:21:13,145 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:21:19,072 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:21:19,073 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:21:19,073 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:21:19,260 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:21:22,623 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-26 22:21:22,623 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-26 22:21:22,623 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-26 22:21:22,801 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-26 22:21:23,029 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:21:23,045 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:21:23,045 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:21:23,060 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:21:23,075 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:21:23,084 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:21:23,104 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:21:23,109 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:21:23,112 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:21:23,115 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:21:23,117 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:21:23,121 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:21:23,123 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:21:23,126 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:21:23,129 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:21:23,131 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:21:23,134 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:21:23,136 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:21:23,139 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:21:23,142 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:21:23,145 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:21:23,148 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:21:23,151 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:21:23,156 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:21:23,160 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,161 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:21:23,165 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:21:23,165 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:21:23,169 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,169 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:21:23,173 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,173 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:21:23,177 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,178 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:21:23,182 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,182 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:21:23,186 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:21:23,186 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:21:23,190 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,190 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:21:23,194 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:21:23,194 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:21:23,198 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:21:23,199 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:21:23,199 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:21:23,203 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:21:23,203 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:21:23,203 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:21:23,207 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:21:23,212 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:21:23,212 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:21:23,212 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:21:23,212 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:21:23,212 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:21:23,216 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:21:23,220 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:21:23,220 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:21:23,220 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:21:23,220 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:21:23,220 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:21:23,220 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:21:23,221 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:21:23,221 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:21:23,221 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:21:23,221 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:21:23,221 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:21:23,221 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:21:23,221 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:21:23,221 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:21:23,221 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:21:23,221 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:21:23,221 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:21:23,221 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:21:23,221 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:21:23,221 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:21:23,221 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-26 22:21:23,221 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-26 22:21:23,883 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-26 22:21:23,899 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-26 22:21:23,900 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-26 22:21:23,912 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-26 22:21:23,917 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-26 22:21:23,919 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-26 22:21:23,922 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-26 22:21:23,925 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-26 22:21:23,928 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-26 22:21:23,931 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-26 22:21:23,934 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-26 22:21:23,936 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-26 22:21:23,939 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-26 22:21:23,942 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-26 22:21:23,945 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-26 22:21:23,947 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-26 22:21:23,950 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-26 22:21:23,953 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-26 22:21:23,955 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-26 22:21:23,958 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-26 22:21:23,964 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-26 22:21:23,968 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,968 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-26 22:21:23,972 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:21:23,972 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-26 22:21:23,976 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,976 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-26 22:21:23,980 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,981 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-26 22:21:23,985 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,985 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-26 22:21:23,989 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,989 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-26 22:21:23,993 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-26 22:21:23,993 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-26 22:21:23,997 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-26 22:21:23,997 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-26 22:21:24,001 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-26 22:21:24,002 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-26 22:21:24,006 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-26 22:21:24,006 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-26 22:21:24,006 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-26 22:21:24,010 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-26 22:21:24,010 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-26 22:21:24,010 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-26 22:21:24,014 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-26 22:21:24,018 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-26 22:21:24,018 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-26 22:21:24,018 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-26 22:21:24,018 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-26 22:21:24,018 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-26 22:21:24,023 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-26 22:21:24,026 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-26 22:21:24,027 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-26 22:21:24,027 - DEBUG - ðŸ” Relationship Details:
2025-11-26 22:21:24,027 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:21:24,027 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-26 22:21:24,027 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-26 22:21:24,027 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-26 22:21:24,027 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-26 22:21:24,027 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-26 22:21:24,027 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-26 22:21:24,027 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-26 22:21:24,027 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-26 22:21:24,027 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-26 22:21:24,027 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-26 22:21:24,027 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-26 22:21:24,027 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-26 22:21:24,027 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-26 22:21:24,027 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-26 22:21:24,027 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-26 22:21:24,027 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-26 22:21:29,840 - INFO - Database engine created with pool_size=10
2025-11-26 22:21:29,873 - INFO - Retrieved 1 configurations
2025-11-26 22:21:29,873 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 22:21:29,873 - DEBUG - Async get_all returned 1 configurations
2025-11-26 22:21:30,072 - INFO - Retrieved 1 configurations
2025-11-26 22:21:30,072 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 22:21:30,073 - DEBUG - Async get_all returned 1 configurations
2025-11-26 22:21:33,318 - INFO - Retrieved system hierarchy for ship 33f13701-849f-4030-8d71-a0f65eac992e: 4 systems, 16 components, 2 departments
2025-11-26 23:10:43,062 - INFO - Retrieved 1 configurations
2025-11-26 23:10:43,063 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:10:43,094 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:11:10,596 - INFO - Retrieved 1 configurations
2025-11-26 23:11:10,596 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:11:10,597 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:13:10,488 - INFO - Retrieved 1 configurations
2025-11-26 23:13:10,488 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:13:10,489 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:13:23,755 - INFO - Retrieved 1 configurations
2025-11-26 23:13:23,755 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:13:23,756 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:13:24,249 - INFO - Retrieved 1 configurations
2025-11-26 23:13:24,249 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:13:24,249 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:13:34,044 - INFO - Retrieved 1 configurations
2025-11-26 23:13:34,044 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:13:34,045 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:13:44,059 - INFO - Retrieved 1 configurations
2025-11-26 23:13:44,059 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:13:44,060 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:13:55,109 - INFO - Retrieved 1 configurations
2025-11-26 23:13:55,109 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:13:55,110 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:13:55,444 - INFO - Retrieved 1 configurations
2025-11-26 23:13:55,444 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:13:55,445 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:32:45,387 - INFO - Retrieved 1 configurations
2025-11-26 23:32:45,387 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:32:45,419 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:33:30,082 - INFO - Retrieved 1 configurations
2025-11-26 23:33:30,082 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:33:30,083 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:33:30,569 - INFO - Retrieved 1 configurations
2025-11-26 23:33:30,569 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:33:30,569 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:35:10,935 - INFO - Retrieved 1 configurations
2025-11-26 23:35:10,935 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:35:10,936 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:36:19,020 - INFO - Retrieved 1 configurations
2025-11-26 23:36:19,020 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:36:19,021 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:36:19,445 - INFO - Retrieved 1 configurations
2025-11-26 23:36:19,446 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:36:19,446 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:36:21,947 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-11-26 23:36:21,947 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-11-26 23:36:21,951 - INFO - SQLModel query returned 55 rows
2025-11-26 23:36:21,951 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-11-26 23:36:21,952 - DEBUG - Starting to process and group results
2025-11-26 23:36:21,952 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-11-26 23:36:21,952 - DEBUG - Creating new command group: Western Naval Command
2025-11-26 23:36:21,952 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-11-26 23:36:21,952 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-26 23:36:21,952 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-26 23:36:21,952 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-11-26 23:36:21,952 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-11-26 23:36:21,952 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-11-26 23:36:21,952 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-26 23:36:21,952 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-11-26 23:36:21,952 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-11-26 23:36:21,952 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-11-26 23:36:21,953 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-11-26 23:36:21,953 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-11-26 23:36:21,953 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-26 23:36:21,953 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-11-26 23:36:21,953 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-11-26 23:36:21,953 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-11-26 23:36:21,953 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-11-26 23:36:21,953 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-11-26 23:36:21,953 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-11-26 23:36:21,953 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-11-26 23:36:21,953 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-11-26 23:36:21,953 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-11-26 23:36:21,954 - INFO - Processed 4 unique ships into 1 command groups
2025-11-26 23:36:21,954 - DEBUG - Converting to final data structure
2025-11-26 23:36:21,954 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-11-26 23:36:21,954 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 21 total items
2025-11-26 23:36:21,954 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-11-26 23:36:21,954 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-11-26 23:36:21,954 - INFO - Final data structure: 1 command groups, 4 total ships
2025-11-26 23:36:21,954 - DEBUG - Command groups: ['Western Naval Command']
2025-11-26 23:36:21,955 - INFO - Successfully retrieved hierarchical ship data
2025-11-26 23:36:28,888 - INFO - Retrieved 1 configurations
2025-11-26 23:36:28,888 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:36:28,888 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:36:29,208 - INFO - Retrieved 1 configurations
2025-11-26 23:36:29,208 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:36:29,209 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:36:31,220 - INFO - Retrieved system hierarchy for ship 33f13701-849f-4030-8d71-a0f65eac992e: 4 systems, 16 components, 2 departments
2025-11-26 23:38:01,017 - INFO - Retrieved 1 configurations
2025-11-26 23:38:01,017 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:38:01,017 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:43:31,257 - INFO - Retrieved 1 configurations
2025-11-26 23:43:31,257 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:43:31,257 - DEBUG - Async get_all returned 1 configurations
2025-11-26 23:43:31,493 - INFO - Retrieved 1 configurations
2025-11-26 23:43:31,493 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-26 23:43:31,493 - DEBUG - Async get_all returned 1 configurations
2025-11-27 00:43:40,314 - INFO - Retrieved 1 configurations
2025-11-27 00:43:40,314 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 00:43:40,344 - DEBUG - Async get_all returned 1 configurations
2025-11-27 00:43:40,736 - INFO - Retrieved 1 configurations
2025-11-27 00:43:40,736 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 00:43:40,737 - DEBUG - Async get_all returned 1 configurations
2025-11-27 01:12:56,124 - INFO - Retrieved 1 configurations
2025-11-27 01:12:56,124 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 01:12:56,125 - DEBUG - Async get_all returned 1 configurations
2025-11-27 01:12:56,419 - INFO - Retrieved 1 configurations
2025-11-27 01:12:56,419 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 01:12:56,419 - DEBUG - Async get_all returned 1 configurations
2025-11-27 12:48:30,862 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 12:48:30,862 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 12:48:30,862 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 12:48:31,047 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 12:48:31,312 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 12:48:31,329 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 12:48:31,329 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 12:48:31,345 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 12:48:31,360 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 12:48:31,369 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 12:48:31,556 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 12:48:31,562 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 12:48:31,565 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 12:48:31,568 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 12:48:31,571 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 12:48:31,575 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 12:48:31,578 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 12:48:31,581 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 12:48:31,584 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 12:48:31,586 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 12:48:31,589 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 12:48:31,592 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 12:48:31,595 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 12:48:31,598 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 12:48:31,601 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 12:48:31,604 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 12:48:31,607 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 12:48:31,613 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 12:48:31,618 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:31,618 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 12:48:31,622 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 12:48:31,622 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 12:48:31,627 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:31,627 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 12:48:31,631 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:31,631 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 12:48:31,636 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:31,636 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 12:48:31,640 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:31,641 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 12:48:31,645 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 12:48:31,645 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 12:48:31,649 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:31,649 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 12:48:31,653 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 12:48:31,654 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 12:48:31,658 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 12:48:31,658 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 12:48:31,658 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 12:48:31,663 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 12:48:31,663 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 12:48:31,663 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 12:48:31,667 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 12:48:31,672 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 12:48:31,672 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 12:48:31,672 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 12:48:31,672 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 12:48:31,672 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 12:48:31,676 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 12:48:31,680 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 12:48:31,680 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 12:48:31,680 - DEBUG - ðŸ” Relationship Details:
2025-11-27 12:48:31,680 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 12:48:31,681 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 12:48:31,681 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 12:48:31,681 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 12:48:31,681 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 12:48:31,681 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 12:48:31,681 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 12:48:31,681 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 12:48:31,681 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 12:48:31,681 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 12:48:31,681 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 12:48:31,681 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 12:48:31,681 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 12:48:31,681 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 12:48:31,681 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 12:48:31,681 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 12:48:31,681 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 12:48:31,681 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 12:48:31,682 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 12:48:32,418 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 12:48:32,434 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 12:48:32,435 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 12:48:32,448 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 12:48:32,453 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 12:48:32,455 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 12:48:32,458 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 12:48:32,461 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 12:48:32,464 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 12:48:32,468 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 12:48:32,470 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 12:48:32,473 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 12:48:32,476 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 12:48:32,478 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 12:48:32,481 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 12:48:32,484 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 12:48:32,487 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 12:48:32,490 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 12:48:32,493 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 12:48:32,496 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 12:48:32,501 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 12:48:32,505 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:32,506 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 12:48:32,510 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 12:48:32,510 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 12:48:32,514 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:32,514 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 12:48:32,518 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:32,518 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 12:48:32,523 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:32,523 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 12:48:32,527 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:32,527 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 12:48:32,531 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 12:48:32,531 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 12:48:32,536 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 12:48:32,536 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 12:48:32,540 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 12:48:32,540 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 12:48:32,544 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 12:48:32,545 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 12:48:32,545 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 12:48:32,549 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 12:48:32,549 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 12:48:32,549 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 12:48:32,553 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 12:48:32,557 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 12:48:32,558 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 12:48:32,558 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 12:48:32,558 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 12:48:32,558 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 12:48:32,562 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 12:48:32,566 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 12:48:32,566 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 12:48:32,566 - DEBUG - ðŸ” Relationship Details:
2025-11-27 12:48:32,566 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 12:48:32,566 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 12:48:32,567 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 12:48:32,567 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 12:48:32,567 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 12:48:32,567 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 12:48:32,567 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 12:48:32,567 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 12:48:32,567 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 12:48:32,567 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 12:48:32,567 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 12:48:32,567 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 12:48:32,567 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 12:48:32,567 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 12:48:32,567 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 12:48:32,567 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 12:48:32,568 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 12:53:33,079 - INFO - Database engine created with pool_size=10
2025-11-27 12:53:33,079 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-11-27 12:53:33,080 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-11-27 12:53:33,114 - INFO - SQLModel query returned 55 rows
2025-11-27 12:53:33,114 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-11-27 12:53:33,114 - DEBUG - Starting to process and group results
2025-11-27 12:53:33,114 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-11-27 12:53:33,114 - DEBUG - Creating new command group: Western Naval Command
2025-11-27 12:53:33,114 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-11-27 12:53:33,114 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 12:53:33,114 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 12:53:33,114 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-11-27 12:53:33,114 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-11-27 12:53:33,114 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-11-27 12:53:33,114 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 12:53:33,114 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-11-27 12:53:33,115 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-11-27 12:53:33,115 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-11-27 12:53:33,115 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-11-27 12:53:33,115 - INFO - Processed 4 unique ships into 1 command groups
2025-11-27 12:53:33,115 - DEBUG - Converting to final data structure
2025-11-27 12:53:33,115 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-11-27 12:53:33,115 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 21 total items
2025-11-27 12:53:33,115 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-11-27 12:53:33,115 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-11-27 12:53:33,115 - INFO - Final data structure: 1 command groups, 4 total ships
2025-11-27 12:53:33,116 - DEBUG - Command groups: ['Western Naval Command']
2025-11-27 12:53:33,116 - INFO - Successfully retrieved hierarchical ship data
2025-11-27 12:54:38,077 - INFO - Retrieved 1 configurations
2025-11-27 12:54:38,077 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 12:54:38,078 - DEBUG - Async get_all returned 1 configurations
2025-11-27 12:54:38,226 - INFO - Retrieved 1 configurations
2025-11-27 12:54:38,227 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 12:54:38,227 - DEBUG - Async get_all returned 1 configurations
2025-11-27 12:54:51,781 - INFO - Retrieved 1 configurations
2025-11-27 12:54:51,781 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 12:54:51,781 - DEBUG - Async get_all returned 1 configurations
2025-11-27 12:54:52,057 - INFO - Retrieved 1 configurations
2025-11-27 12:54:52,058 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 12:54:52,058 - DEBUG - Async get_all returned 1 configurations
2025-11-27 16:18:36,692 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:18:36,692 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:18:36,692 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:18:36,882 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:18:37,117 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:18:37,135 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:18:37,135 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:18:37,150 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:18:37,166 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:18:37,175 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:18:37,536 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:18:37,542 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:18:37,545 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:18:37,548 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:18:37,551 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:18:37,555 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:18:37,559 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:18:37,561 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:18:37,564 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:18:37,567 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:18:37,570 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:18:37,573 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:18:37,576 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:18:37,579 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:18:37,582 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:18:37,586 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:18:37,589 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:18:37,595 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:18:37,599 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:37,599 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:18:37,604 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:18:37,604 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:18:37,608 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:37,609 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:18:37,613 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:37,614 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:18:37,618 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:37,618 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:18:37,623 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:37,623 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:18:37,627 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:18:37,627 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:18:37,631 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:37,632 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:18:37,636 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:18:37,636 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:18:37,641 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:18:37,641 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:18:37,641 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:18:37,646 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:18:37,646 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:18:37,646 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:18:37,651 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:18:37,655 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:18:37,656 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:18:37,656 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:18:37,656 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:18:37,656 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:18:37,660 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:18:37,665 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:18:37,665 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:18:37,665 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:18:37,665 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:18:37,665 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:18:37,665 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:18:37,666 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:18:37,666 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:18:37,666 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:18:37,666 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:18:37,666 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:18:37,666 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:18:37,666 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:18:37,666 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:18:37,666 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:18:37,666 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:18:37,666 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:18:37,666 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:18:37,666 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:18:37,666 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:18:37,667 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:18:37,667 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:18:38,360 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:18:38,376 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:18:38,377 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:18:38,390 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:18:38,395 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:18:38,398 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:18:38,401 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:18:38,404 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:18:38,408 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:18:38,411 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:18:38,413 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:18:38,417 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:18:38,420 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:18:38,423 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:18:38,426 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:18:38,429 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:18:38,432 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:18:38,435 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:18:38,438 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:18:38,441 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:18:38,446 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:18:38,452 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:38,452 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:18:38,456 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:18:38,457 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:18:38,461 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:38,461 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:18:38,465 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:38,465 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:18:38,469 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:38,470 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:18:38,474 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:38,474 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:18:38,480 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:18:38,480 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:18:38,484 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:18:38,484 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:18:38,489 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:18:38,489 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:18:38,493 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:18:38,493 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:18:38,493 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:18:38,498 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:18:38,498 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:18:38,498 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:18:38,502 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:18:38,509 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:18:38,509 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:18:38,509 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:18:38,509 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:18:38,509 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:18:38,513 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:18:38,517 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:18:38,518 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:18:38,518 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:18:38,518 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:18:38,518 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:18:38,518 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:18:38,518 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:18:38,518 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:18:38,518 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:18:38,518 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:18:38,518 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:18:38,518 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:18:38,518 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:18:38,518 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:18:38,518 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:18:38,519 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:18:38,519 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:18:38,519 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:18:38,519 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:18:38,519 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:18:49,113 - INFO - Database engine created with pool_size=10
2025-11-27 16:18:49,113 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-11-27 16:18:49,114 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-11-27 16:18:49,151 - INFO - SQLModel query returned 55 rows
2025-11-27 16:18:49,152 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-11-27 16:18:49,152 - DEBUG - Starting to process and group results
2025-11-27 16:18:49,152 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-11-27 16:18:49,152 - DEBUG - Creating new command group: Western Naval Command
2025-11-27 16:18:49,152 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-11-27 16:18:49,152 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 16:18:49,152 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 16:18:49,152 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-11-27 16:18:49,152 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-11-27 16:18:49,152 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-11-27 16:18:49,152 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 16:18:49,152 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-11-27 16:18:49,153 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-11-27 16:18:49,153 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-11-27 16:18:49,153 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-11-27 16:18:49,153 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-11-27 16:18:49,153 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 16:18:49,153 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-11-27 16:18:49,153 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-11-27 16:18:49,153 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-11-27 16:18:49,153 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-11-27 16:18:49,153 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-11-27 16:18:49,154 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-11-27 16:18:49,154 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-11-27 16:18:49,154 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-11-27 16:18:49,154 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-11-27 16:18:49,154 - INFO - Processed 4 unique ships into 1 command groups
2025-11-27 16:18:49,154 - DEBUG - Converting to final data structure
2025-11-27 16:18:49,154 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-11-27 16:18:49,154 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 21 total items
2025-11-27 16:18:49,154 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-11-27 16:18:49,154 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-11-27 16:18:49,154 - INFO - Final data structure: 1 command groups, 4 total ships
2025-11-27 16:18:49,154 - DEBUG - Command groups: ['Western Naval Command']
2025-11-27 16:18:49,155 - INFO - Successfully retrieved hierarchical ship data
2025-11-27 16:19:12,058 - INFO - Retrieved 1 configurations
2025-11-27 16:19:12,058 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 16:19:12,059 - DEBUG - Async get_all returned 1 configurations
2025-11-27 16:19:12,329 - INFO - Retrieved 1 configurations
2025-11-27 16:19:12,330 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 16:19:12,330 - DEBUG - Async get_all returned 1 configurations
2025-11-27 16:26:27,896 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:26:27,896 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:26:27,896 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:26:28,099 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:26:28,345 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:28,361 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:28,361 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:28,376 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:28,391 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:28,400 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:28,421 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:28,428 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:28,430 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:28,433 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:28,436 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:28,439 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:28,443 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:28,446 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:28,448 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:28,451 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:28,454 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:28,457 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:28,460 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:28,463 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:28,466 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:28,468 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:28,471 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:28,477 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:28,482 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:28,482 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:28,487 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:28,487 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:28,491 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:28,491 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:28,496 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:28,496 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:28,500 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:28,500 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:28,504 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:28,504 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:28,509 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:28,509 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:28,514 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:28,514 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:28,518 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:28,518 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:28,522 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:28,522 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:28,522 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:28,527 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:28,527 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:28,527 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:28,531 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:28,535 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:28,535 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:28,536 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:28,536 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:28,536 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:28,541 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:28,545 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:28,545 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:28,545 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:28,545 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:28,545 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:28,545 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:28,545 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:28,545 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:28,545 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:28,545 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:28,546 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:28,546 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:28,546 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:28,546 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:28,546 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:28,546 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:28,546 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:28,546 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:28,546 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:28,546 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:28,546 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:26:28,546 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:26:29,257 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:29,273 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:29,274 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:29,288 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:29,293 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:29,296 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:29,299 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:29,302 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:29,306 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:29,311 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:29,314 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:29,317 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:29,320 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:29,323 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:29,326 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:29,329 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:29,332 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:29,336 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:29,339 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:29,342 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:29,347 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:29,352 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:29,352 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:29,356 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:29,356 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:29,361 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:29,361 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:29,366 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:29,366 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:29,370 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:29,370 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:29,374 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:29,375 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:29,379 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:29,379 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:29,383 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:29,383 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:29,387 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:29,387 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:29,393 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:29,393 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:29,393 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:29,398 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:29,398 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:29,398 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:29,402 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:29,407 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:29,407 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:29,407 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:29,407 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:29,407 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:29,412 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:29,419 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:29,419 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:29,419 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:29,419 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:29,420 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:29,420 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:29,420 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:29,420 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:29,420 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:29,420 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:29,420 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:29,420 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:29,420 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:29,420 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:29,420 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:29,420 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:29,420 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:29,421 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:29,421 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:29,421 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:31,085 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:26:31,085 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:26:31,085 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:26:31,279 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:26:31,520 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:31,537 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:31,537 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:31,552 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:31,567 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:31,576 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:31,597 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:31,602 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:31,605 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:31,608 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:31,611 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:31,615 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:31,618 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:31,621 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:31,624 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:31,627 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:31,629 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:31,632 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:31,635 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:31,638 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:31,643 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:31,646 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:31,649 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:31,654 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:31,659 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:31,659 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:31,663 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:31,663 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:31,668 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:31,668 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:31,673 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:31,673 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:31,678 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:31,678 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:31,682 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:31,682 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:31,686 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:31,686 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:31,691 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:31,691 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:31,696 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:31,696 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:31,700 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:31,701 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:31,701 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:31,705 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:31,705 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:31,705 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:31,710 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:31,714 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:31,714 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:31,714 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:31,714 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:31,714 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:31,718 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:31,723 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:31,723 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:31,723 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:31,723 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:31,723 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:31,723 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:31,723 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:31,723 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:31,723 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:31,723 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:31,723 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:31,723 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:31,723 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:31,724 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:31,724 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:31,724 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:31,724 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:31,724 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:31,724 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:31,724 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:31,725 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:26:31,725 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:26:32,426 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:32,443 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:32,444 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:32,460 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:32,465 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:32,468 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:32,472 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:32,479 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:32,483 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:32,488 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:32,492 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:32,494 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:32,497 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:32,500 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:32,502 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:32,506 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:32,509 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:32,512 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:32,515 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:32,518 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:32,523 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:32,527 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:32,528 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:32,532 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:32,532 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:32,537 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:32,537 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:32,542 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:32,542 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:32,546 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:32,546 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:32,551 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:32,551 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:32,555 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:32,555 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:32,559 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:32,560 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:32,565 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:32,565 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:32,569 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:32,569 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:32,569 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:32,574 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:32,574 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:32,574 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:32,578 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:32,583 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:32,583 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:32,583 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:32,583 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:32,583 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:32,587 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:32,592 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:32,592 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:32,592 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:32,592 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:32,592 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:32,593 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:32,593 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:32,593 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:32,593 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:32,593 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:32,593 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:32,593 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:32,593 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:32,593 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:32,593 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:32,593 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:32,593 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:32,593 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:32,593 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:32,593 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:37,151 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:26:37,151 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:26:37,152 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:26:37,346 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:26:37,586 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:37,602 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:37,603 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:37,618 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:37,633 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:37,642 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:37,663 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:37,669 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:37,672 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:37,675 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:37,678 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:37,682 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:37,685 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:37,688 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:37,691 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:37,694 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:37,697 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:37,700 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:37,702 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:37,705 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:37,709 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:37,713 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:37,716 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:37,723 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:37,730 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:37,730 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:37,735 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:37,735 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:37,743 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:37,743 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:37,748 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:37,748 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:37,752 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:37,752 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:37,757 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:37,757 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:37,761 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:37,762 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:37,767 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:37,767 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:37,771 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:37,772 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:37,778 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:37,778 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:37,778 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:37,782 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:37,782 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:37,783 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:37,787 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:37,792 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:37,792 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:37,792 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:37,792 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:37,792 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:37,797 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:37,801 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:37,801 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:37,801 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:37,801 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:37,801 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:37,801 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:37,801 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:37,801 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:37,802 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:37,802 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:37,802 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:37,802 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:37,802 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:37,802 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:37,802 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:37,802 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:37,802 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:37,802 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:37,802 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:37,802 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:37,803 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:26:37,803 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:26:38,508 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:38,524 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:38,524 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:38,538 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:38,542 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:38,545 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:38,548 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:38,550 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:38,554 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:38,557 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:38,561 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:38,564 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:38,566 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:38,569 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:38,572 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:38,575 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:38,578 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:38,581 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:38,583 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:38,587 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:38,592 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:38,597 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:38,597 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:38,602 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:38,602 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:38,606 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:38,606 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:38,610 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:38,610 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:38,615 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:38,615 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:38,620 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:38,620 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:38,624 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:38,624 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:38,628 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:38,628 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:38,632 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:38,632 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:38,637 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:38,637 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:38,637 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:38,641 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:38,641 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:38,641 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:38,646 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:38,650 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:38,650 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:38,651 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:38,651 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:38,651 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:38,655 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:38,659 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:38,659 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:38,659 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:38,659 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:38,659 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:38,659 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:38,659 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:38,659 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:38,659 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:38,659 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:38,659 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:38,659 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:38,659 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:38,659 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:38,659 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:38,659 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:38,660 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:38,660 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:38,660 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:38,660 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:42,610 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:26:42,610 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:26:42,610 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:26:42,810 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:26:43,054 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:43,071 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:43,071 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:43,086 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:43,101 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:43,110 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:43,132 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:43,139 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:43,142 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:43,145 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:43,148 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:43,153 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:43,156 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:43,159 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:43,163 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:43,166 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:43,169 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:43,172 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:43,175 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:43,179 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:43,183 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:43,186 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:43,189 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:43,194 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:43,199 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:43,199 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:43,203 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:43,203 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:43,209 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:43,209 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:43,214 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:43,214 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:43,218 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:43,219 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:43,223 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:43,223 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:43,229 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:43,229 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:43,233 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:43,233 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:43,239 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:43,239 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:43,244 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:43,245 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:43,245 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:43,249 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:43,250 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:43,250 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:43,254 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:43,259 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:43,259 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:43,259 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:43,259 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:43,259 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:43,266 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:43,271 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:43,271 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:43,271 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:43,271 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:43,271 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:43,271 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:43,271 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:43,271 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:43,272 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:43,272 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:43,272 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:43,272 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:43,272 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:43,272 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:43,272 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:43,272 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:43,272 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:43,272 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:43,272 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:43,272 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:43,273 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:26:43,273 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:26:43,971 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:43,988 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:43,989 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:44,002 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:44,007 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:44,010 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:44,013 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:44,016 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:44,020 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:44,023 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:44,026 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:44,029 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:44,032 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:44,036 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:44,039 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:44,042 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:44,044 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:44,048 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:44,050 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:44,053 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:44,058 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:44,063 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:44,063 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:44,068 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:44,068 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:44,073 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:44,073 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:44,078 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:44,078 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:44,082 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:44,082 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:44,087 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:44,087 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:44,091 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:44,091 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:44,096 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:44,096 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:44,101 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:44,101 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:44,105 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:44,105 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:44,105 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:44,109 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:44,109 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:44,109 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:44,114 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:44,119 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:44,119 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:44,119 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:44,120 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:44,120 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:44,124 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:44,128 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:44,129 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:44,129 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:44,129 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:44,129 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:44,129 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:44,129 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:44,129 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:44,129 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:44,129 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:44,129 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:44,129 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:44,129 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:44,129 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:44,129 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:44,129 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:44,129 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:44,129 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:44,130 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:44,130 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:47,789 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:26:47,789 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:26:47,790 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:26:47,978 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:26:48,213 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:48,243 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:48,243 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:48,260 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:48,277 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:48,286 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:48,308 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:48,314 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:48,316 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:48,319 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:48,322 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:48,325 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:48,329 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:48,333 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:48,336 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:48,338 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:48,342 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:48,345 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:48,348 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:48,352 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:48,355 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:48,358 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:48,362 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:48,369 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:48,373 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:48,373 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:48,378 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:48,378 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:48,383 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:48,384 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:48,389 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:48,390 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:48,394 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:48,395 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:48,399 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:48,399 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:48,404 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:48,404 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:48,409 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:48,409 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:48,414 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:48,414 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:48,420 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:48,421 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:48,421 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:48,425 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:48,425 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:48,426 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:48,430 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:48,435 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:48,436 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:48,436 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:48,436 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:48,436 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:48,440 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:48,446 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:48,446 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:48,446 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:48,446 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:48,447 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:48,447 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:48,447 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:48,447 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:48,447 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:48,447 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:48,447 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:48,447 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:48,447 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:48,447 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:48,447 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:48,447 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:48,447 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:48,447 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:48,447 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:48,447 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:48,448 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:26:48,448 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:26:49,193 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:49,209 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:49,210 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:49,224 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:49,228 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:49,231 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:49,234 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:49,236 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:49,240 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:49,243 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:49,247 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:49,250 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:49,253 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:49,255 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:49,259 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:49,261 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:49,264 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:49,268 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:49,270 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:49,274 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:49,280 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:49,284 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:49,284 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:49,289 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:49,289 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:49,293 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:49,293 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:49,298 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:49,298 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:49,303 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:49,303 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:49,307 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:49,308 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:49,312 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:49,312 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:49,316 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:49,316 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:49,320 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:49,320 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:49,325 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:49,325 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:49,325 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:49,330 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:49,330 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:49,330 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:49,334 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:49,339 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:49,339 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:49,339 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:49,339 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:49,339 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:49,343 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:49,347 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:49,347 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:49,347 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:49,347 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:49,347 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:49,347 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:49,347 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:49,347 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:49,347 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:49,347 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:49,347 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:49,348 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:49,348 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:49,348 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:49,348 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:49,348 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:49,348 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:49,348 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:49,348 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:49,348 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:53,346 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:26:53,346 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:26:53,346 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:26:53,554 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:26:53,794 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:53,810 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:53,811 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:53,825 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:53,840 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:53,850 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:53,869 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:53,875 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:53,878 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:53,881 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:53,884 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:53,888 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:53,891 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:53,893 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:53,896 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:53,899 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:53,902 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:53,904 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:53,907 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:53,910 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:53,913 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:53,916 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:53,919 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:53,925 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:53,929 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:53,929 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:53,934 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:53,934 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:53,938 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:53,938 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:53,944 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:53,944 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:53,948 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:53,948 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:53,952 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:53,953 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:53,957 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:53,957 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:53,961 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:53,961 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:53,965 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:53,965 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:53,970 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:53,970 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:53,970 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:53,975 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:53,975 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:53,975 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:53,979 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:53,984 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:53,984 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:53,984 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:53,984 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:53,984 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:53,989 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:53,993 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:53,993 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:53,993 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:53,993 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:53,993 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:53,993 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:53,993 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:53,993 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:53,993 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:53,994 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:53,994 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:53,994 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:53,994 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:53,994 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:53,994 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:53,994 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:53,994 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:53,994 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:53,994 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:53,994 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:53,994 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:26:53,994 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:26:54,693 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:54,710 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:54,711 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:54,723 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:54,728 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:54,730 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:54,733 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:54,736 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:54,739 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:54,743 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:54,746 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:54,748 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:54,751 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:54,754 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:54,757 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:54,760 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:54,763 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:54,766 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:54,770 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:54,773 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:54,778 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:54,782 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:54,783 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:54,787 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:54,787 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:54,791 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:54,791 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:54,796 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:54,796 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:54,800 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:54,801 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:54,805 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:54,805 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:54,809 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:54,809 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:54,813 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:54,813 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:54,817 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:54,818 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:54,822 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:54,822 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:54,822 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:54,827 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:54,827 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:54,827 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:54,832 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:54,836 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:54,837 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:54,837 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:54,837 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:54,837 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:54,841 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:54,846 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:54,846 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:54,846 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:54,846 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:54,846 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:54,846 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:54,846 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:54,846 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:54,846 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:54,846 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:54,846 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:54,846 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:54,847 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:54,847 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:54,847 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:54,847 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:54,847 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:54,847 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:54,847 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:54,847 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:57,808 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:26:57,808 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:26:57,808 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:26:57,999 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:26:58,236 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:58,252 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:58,252 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:58,268 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:58,283 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:58,292 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:58,313 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:58,319 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:58,321 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:58,326 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:58,329 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:58,332 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:58,335 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:58,338 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:58,341 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:58,344 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:58,346 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:58,350 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:58,354 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:58,357 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:58,360 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:58,363 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:58,366 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:58,371 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:58,376 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:58,376 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:58,383 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:58,384 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:58,389 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:58,389 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:58,394 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:58,394 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:58,399 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:58,399 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:58,404 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:58,404 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:58,414 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:58,414 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:58,421 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:58,421 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:58,428 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:58,428 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:58,433 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:58,433 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:58,433 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:58,439 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:58,440 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:58,440 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:58,444 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:58,450 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:58,450 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:58,450 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:58,450 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:58,450 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:58,455 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:58,459 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:58,459 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:58,459 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:58,459 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:58,460 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:58,460 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:58,460 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:58,460 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:58,460 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:58,460 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:58,460 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:58,460 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:58,460 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:58,460 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:58,460 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:58,460 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:58,460 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:58,460 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:58,460 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:58,460 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:26:58,461 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:26:58,461 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:26:59,169 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:26:59,186 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:26:59,186 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:26:59,199 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:26:59,204 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:26:59,207 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:26:59,210 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:26:59,213 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:26:59,217 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:26:59,221 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:26:59,224 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:26:59,227 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:26:59,231 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:26:59,236 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:26:59,241 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:26:59,244 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:26:59,248 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:26:59,251 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:26:59,254 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:26:59,258 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:26:59,267 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:26:59,273 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:59,274 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:59,281 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:59,281 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:26:59,285 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:59,286 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:26:59,292 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:59,292 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:26:59,298 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:59,298 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:26:59,302 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:59,302 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:26:59,309 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:26:59,309 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:26:59,315 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:26:59,316 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:26:59,322 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:26:59,322 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:26:59,328 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:26:59,328 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:26:59,328 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:26:59,334 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:26:59,334 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:26:59,334 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:26:59,338 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:26:59,345 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:26:59,346 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:26:59,346 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:26:59,346 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:26:59,346 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:26:59,352 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:26:59,357 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:26:59,357 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:26:59,358 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:26:59,358 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:59,358 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:26:59,358 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:26:59,358 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:26:59,358 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:26:59,358 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:26:59,358 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:26:59,358 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:26:59,358 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:26:59,358 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:26:59,358 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:26:59,358 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:26:59,358 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:26:59,358 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:26:59,358 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:26:59,358 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:26:59,359 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:28:21,277 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:28:21,277 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:28:21,277 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:28:21,497 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:28:21,746 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:21,762 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:21,763 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:21,778 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:21,793 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:21,802 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:28:21,822 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:28:21,830 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:28:21,833 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:28:21,836 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:28:21,839 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:28:21,842 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:28:21,846 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:28:21,849 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:28:21,852 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:28:21,855 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:28:21,858 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:28:21,861 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:28:21,864 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:28:21,867 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:28:21,870 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:28:21,873 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:28:21,877 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:28:21,886 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:28:21,894 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:21,894 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:21,902 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:21,902 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:28:21,910 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:21,910 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:21,919 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:21,919 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:28:21,926 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:21,926 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:28:21,933 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:21,933 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:28:21,941 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:21,942 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:28:21,949 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:21,949 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:28:21,953 - ERROR - âŒ Error getting foreign keys for table refresh_tokens: (pyodbc.OperationalError) ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')
[SQL: WITH fk_info AS (
    SELECT
        ischema_ref_con.constraint_schema,
        ischema_ref_con.constraint_name,
        ischema_key_col.ordinal_position,
        ischema_key_col.table_schema,
        ischema_key_col.table_name,
        ischema_ref_con.unique_constraint_schema,
        ischema_ref_con.unique_constraint_name,
        ischema_ref_con.match_option,
        ischema_ref_con.update_rule,
        ischema_ref_con.delete_rule,
        ischema_key_col.column_name AS constrained_column
    FROM
        INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS ischema_ref_con
        INNER JOIN
        INFORMATION_SCHEMA.KEY_COLUMN_USAGE ischema_key_col ON
            ischema_key_col.table_schema = ischema_ref_con.constraint_schema
            AND ischema_key_col.constraint_name =
            ischema_ref_con.constraint_name
    WHERE ischema_key_col.table_name = CAST(? AS NVARCHAR(max))
        AND ischema_key_col.table_schema = CAST(? AS NVARCHAR(max))
),
constraint_info AS (
    SELECT
        ischema_key_col.constraint_schema,
        ischema_key_col.constraint_name,
        ischema_key_col.ordinal_position,
        ischema_key_col.table_schema,
        ischema_key_col.table_name,
        ischema_key_col.column_name
    FROM
        INFORMATION_SCHEMA.KEY_COLUMN_USAGE ischema_key_col
),
index_info AS (
    SELECT
        sys.schemas.name AS index_schema,
        sys.indexes.name AS index_name,
        sys.index_columns.key_ordinal AS ordinal_position,
        sys.schemas.name AS table_schema,
        sys.objects.name AS table_name,
        sys.columns.name AS column_name
    FROM
        sys.indexes
        INNER JOIN
        sys.objects ON
            sys.objects.object_id = sys.indexes.object_id
        INNER JOIN
        sys.schemas ON
            sys.schemas.schema_id = sys.objects.schema_id
        INNER JOIN
        sys.index_columns ON
            sys.index_columns.object_id = sys.objects.object_id
            AND sys.index_columns.index_id = sys.indexes.index_id
        INNER JOIN
        sys.columns ON
            sys.columns.object_id = sys.indexes.object_id
            AND sys.columns.column_id = sys.index_columns.column_id
)
    SELECT
        fk_info.constraint_schema,
        fk_info.constraint_name,
        fk_info.ordinal_position,
        fk_info.constrained_column,
        constraint_info.table_schema AS referred_table_schema,
        constraint_info.table_name AS referred_table_name,
        constraint_info.column_name AS referred_column,
        fk_info.match_option,
        fk_info.update_rule,
        fk_info.delete_rule
    FROM
        fk_info INNER JOIN constraint_info ON
            constraint_info.constraint_schema =
                fk_info.unique_constraint_schema
            AND constraint_info.constraint_name =
                fk_info.unique_constraint_name
            AND constraint_info.ordinal_position = fk_info.ordinal_position
    UNION
    SELECT
        fk_info.constraint_schema,
        fk_info.constraint_name,
        fk_info.ordinal_position,
        fk_info.constrained_column,
        index_info.table_schema AS referred_table_schema,
        index_info.table_name AS referred_table_name,
        index_info.column_name AS referred_column,
        fk_info.match_option,
        fk_info.update_rule,
        fk_info.delete_rule
    FROM
        fk_info INNER JOIN index_info ON
            index_info.index_schema = fk_info.unique_constraint_schema
            AND index_info.index_name = fk_info.unique_constraint_name
            AND index_info.ordinal_position = fk_info.ordinal_position

    ORDER BY fk_info.constraint_schema, fk_info.constraint_name,
        fk_info.ordinal_position
]
[parameters: ('refresh_tokens', 'dbo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-11-27 16:28:21,966 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:28:21,966 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:28:21,966 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:28:21,973 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:28:21,973 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:28:21,973 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:28:21,979 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:28:21,985 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:28:21,985 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:28:21,985 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:28:21,985 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:28:21,986 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:28:21,991 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:28:22,002 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:28:22,002 - INFO - âœ… Schema loading complete. Found 16 tables and 16 relationships
2025-11-27 16:28:22,002 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:28:22,002 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,002 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:28:22,002 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,002 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,002 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,002 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,003 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:28:22,003 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,003 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,003 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:28:22,003 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,003 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:28:22,003 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:28:22,003 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:28:22,003 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:28:22,003 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:28:22,004 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:28:22,004 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:28:22,776 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:22,792 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:22,793 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:28:22,806 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:28:22,810 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:28:22,813 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:28:22,817 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:28:22,819 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:28:22,823 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:28:22,826 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:28:22,828 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:28:22,831 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:28:22,834 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:28:22,836 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:28:22,839 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:28:22,843 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:28:22,846 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:28:22,850 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:28:22,853 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:28:22,856 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:28:22,862 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:28:22,867 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:22,868 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:22,874 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:22,874 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:28:22,879 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:22,880 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:22,885 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:22,885 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:28:22,890 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:22,891 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:28:22,895 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:22,895 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:28:22,903 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:22,903 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:28:22,909 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:22,909 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:28:22,915 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:28:22,915 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:28:22,921 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:28:22,921 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:28:22,921 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:28:22,926 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:28:22,926 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:28:22,926 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:28:22,933 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:28:22,939 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:28:22,939 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:28:22,939 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:28:22,939 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:28:22,940 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:28:22,945 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:28:22,952 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:28:22,952 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:28:22,953 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:28:22,953 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,953 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:28:22,953 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,953 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,953 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,953 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,953 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:28:22,953 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,953 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:28:22,953 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,953 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:28:22,953 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:28:22,954 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:28:22,954 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:28:22,954 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:28:22,954 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:28:22,954 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:28:23,968 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:28:23,968 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:28:23,968 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:28:24,181 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:28:24,445 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:24,465 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:24,466 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:24,482 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:24,498 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:24,509 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:28:24,529 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:28:24,538 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:28:24,541 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:28:24,544 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:28:24,548 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:28:24,553 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:28:24,557 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:28:24,562 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:28:24,565 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:28:24,568 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:28:24,571 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:28:24,575 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:28:24,579 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:28:24,582 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:28:24,586 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:28:24,590 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:28:24,594 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:28:24,600 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:28:24,606 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:24,606 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:24,613 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:24,613 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:28:24,619 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:24,620 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:24,625 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:24,625 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:28:24,630 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:24,630 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:28:24,635 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:24,636 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:28:24,640 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:24,640 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:28:24,646 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:24,646 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:28:24,651 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:28:24,651 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:28:24,656 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:28:24,656 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:28:24,656 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:28:24,662 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:28:24,662 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:28:24,662 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:28:24,667 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:28:24,672 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:28:24,672 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:28:24,672 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:28:24,673 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:28:24,673 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:28:24,677 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:28:24,682 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:28:24,683 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:28:24,683 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:28:24,683 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:24,683 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:28:24,683 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:24,683 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:28:24,683 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:28:24,683 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:28:24,683 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:28:24,683 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:28:24,683 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:28:24,683 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:28:24,683 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:28:24,683 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:28:24,684 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:28:24,684 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:28:24,684 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:28:24,684 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:28:24,684 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:28:24,685 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:28:24,685 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:28:25,543 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:25,562 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:25,562 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:28:25,577 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:28:25,582 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:28:25,586 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:28:25,589 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:28:25,593 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:28:25,596 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:28:25,601 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:28:25,605 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:28:25,610 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:28:25,613 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:28:25,617 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:28:25,621 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:28:25,624 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:28:25,629 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:28:25,634 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:28:25,638 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:28:25,642 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:28:25,650 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:28:25,655 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:25,655 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:25,662 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:25,662 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:28:25,667 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:25,667 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:25,673 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:25,673 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:28:25,678 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:25,678 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:28:25,683 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:25,683 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:28:25,691 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:25,691 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:28:25,697 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:25,697 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:28:25,703 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:28:25,703 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:28:25,708 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:28:25,708 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:28:25,708 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:28:25,715 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:28:25,715 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:28:25,715 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:28:25,721 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:28:25,729 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:28:25,730 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:28:25,730 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:28:25,730 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:28:25,730 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:28:25,737 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:28:25,745 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:28:25,745 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:28:25,745 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:28:25,745 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:25,745 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:28:25,745 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:25,745 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:28:25,745 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:28:25,746 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:28:25,746 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:28:25,746 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:28:25,746 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:28:25,746 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:28:25,746 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:28:25,746 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:28:25,746 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:28:25,746 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:28:25,746 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:28:25,746 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:28:25,746 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:28:26,748 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:28:26,748 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:28:26,748 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:28:26,943 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:28:27,182 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:27,199 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:27,199 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:27,215 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:27,230 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:27,240 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:28:27,259 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:28:27,265 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:28:27,268 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:28:27,271 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:28:27,274 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:28:27,278 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:28:27,281 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:28:27,284 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:28:27,287 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:28:27,291 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:28:27,295 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:28:27,298 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:28:27,301 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:28:27,305 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:28:27,309 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:28:27,312 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:28:27,315 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:28:27,323 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:28:27,329 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:27,329 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:27,335 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:27,335 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:28:27,342 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:27,342 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:27,347 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:27,347 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:28:27,352 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:27,352 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:28:27,358 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:27,358 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:28:27,362 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:27,363 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:28:27,367 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:27,367 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:28:27,372 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:28:27,372 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:28:27,377 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:28:27,377 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:28:27,377 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:28:27,382 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:28:27,382 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:28:27,382 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:28:27,388 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:28:27,394 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:28:27,394 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:28:27,394 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:28:27,395 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:28:27,395 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:28:27,399 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:28:27,405 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:28:27,405 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:28:27,405 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:28:27,405 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:27,405 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:28:27,405 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:27,406 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:28:27,406 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:28:27,406 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:28:27,406 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:28:27,406 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:28:27,406 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:28:27,406 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:28:27,406 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:28:27,406 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:28:27,406 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:28:27,406 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:28:27,406 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:28:27,406 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:28:27,406 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:28:27,406 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:28:27,406 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:28:28,139 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:28,156 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:28,156 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:28:28,169 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:28:28,174 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:28:28,176 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:28:28,179 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:28:28,182 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:28:28,185 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:28:28,188 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:28:28,191 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:28:28,194 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:28:28,197 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:28:28,199 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:28:28,202 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:28:28,205 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:28:28,208 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:28:28,211 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:28:28,213 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:28:28,216 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:28:28,222 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:28:28,227 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:28,227 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:28,231 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:28,232 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:28:28,236 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:28,236 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:28,240 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:28,240 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:28:28,244 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:28,244 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:28:28,250 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:28,250 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:28:28,254 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:28,255 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:28:28,259 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:28,259 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:28:28,263 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:28:28,263 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:28:28,267 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:28:28,267 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:28:28,268 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:28:28,272 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:28:28,272 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:28:28,272 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:28:28,276 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:28:28,281 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:28:28,281 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:28:28,281 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:28:28,282 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:28:28,282 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:28:28,286 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:28:28,290 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:28:28,290 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:28:28,290 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:28:28,291 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:28,291 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:28:28,291 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:28,291 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:28:28,291 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:28:28,291 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:28:28,291 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:28:28,291 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:28:28,291 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:28:28,291 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:28:28,291 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:28:28,291 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:28:28,291 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:28:28,291 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:28:28,291 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:28:28,291 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:28:28,291 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:28:29,229 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:28:29,229 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:28:29,229 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:28:29,420 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:28:29,658 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:29,675 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:29,675 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:29,690 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:29,706 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:29,715 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:28:29,736 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:28:29,741 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:28:29,744 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:28:29,747 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:28:29,750 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:28:29,753 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:28:29,756 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:28:29,759 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:28:29,763 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:28:29,766 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:28:29,769 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:28:29,772 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:28:29,775 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:28:29,777 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:28:29,780 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:28:29,783 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:28:29,786 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:28:29,793 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:28:29,797 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:29,798 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:29,802 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:29,802 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:28:29,806 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:29,807 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:29,811 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:29,811 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:28:29,816 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:29,816 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:28:29,820 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:29,821 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:28:29,826 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:29,826 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:28:29,830 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:29,830 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:28:29,835 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:28:29,835 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:28:29,839 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:28:29,839 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:28:29,839 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:28:29,844 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:28:29,844 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:28:29,844 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:28:29,849 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:28:29,854 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:28:29,854 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:28:29,854 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:28:29,854 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:28:29,854 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:28:29,859 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:28:29,863 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:28:29,863 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:28:29,863 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:28:29,863 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:29,863 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:28:29,863 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:29,864 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:28:29,864 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:28:29,864 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:28:29,864 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:28:29,864 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:28:29,864 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:28:29,864 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:28:29,864 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:28:29,864 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:28:29,864 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:28:29,864 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:28:29,864 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:28:29,864 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:28:29,864 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:28:29,864 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:28:29,864 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:28:30,548 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:30,563 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:30,564 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:28:30,576 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:28:30,581 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:28:30,584 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:28:30,587 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:28:30,589 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:28:30,593 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:28:30,596 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:28:30,599 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:28:30,602 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:28:30,604 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:28:30,607 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:28:30,611 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:28:30,614 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:28:30,617 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:28:30,620 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:28:30,623 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:28:30,626 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:28:30,632 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:28:30,636 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:30,637 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:30,642 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:30,642 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:28:30,647 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:30,647 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:30,651 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:30,651 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:28:30,656 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:30,656 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:28:30,661 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:30,661 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:28:30,665 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:30,665 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:28:30,671 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:30,671 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:28:30,676 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:28:30,676 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:28:30,680 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:28:30,680 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:28:30,680 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:28:30,685 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:28:30,685 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:28:30,685 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:28:30,689 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:28:30,693 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:28:30,694 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:28:30,694 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:28:30,694 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:28:30,694 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:28:30,698 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:28:30,703 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:28:30,703 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:28:30,704 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:28:30,704 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:30,704 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:28:30,704 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:30,704 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:28:30,704 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:28:30,704 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:28:30,704 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:28:30,704 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:28:30,704 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:28:30,704 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:28:30,704 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:28:30,704 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:28:30,704 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:28:30,704 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:28:30,704 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:28:30,705 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:28:30,705 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:28:33,773 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:28:33,773 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:28:33,773 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:28:33,961 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:28:34,194 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:34,210 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:34,210 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:34,225 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:34,240 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:34,249 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:28:34,269 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:28:34,275 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:28:34,278 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:28:34,281 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:28:34,283 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:28:34,287 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:28:34,290 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:28:34,293 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:28:34,296 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:28:34,298 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:28:34,301 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:28:34,304 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:28:34,307 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:28:34,310 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:28:34,314 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:28:34,318 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:28:34,321 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:28:34,327 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:28:34,332 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:34,332 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:34,336 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:34,336 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:28:34,340 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:34,340 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:34,347 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:34,347 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:28:34,352 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:34,352 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:28:34,357 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:34,357 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:28:34,362 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:34,362 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:28:34,366 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:34,366 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:28:34,372 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:28:34,372 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:28:34,376 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:28:34,377 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:28:34,377 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:28:34,381 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:28:34,381 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:28:34,381 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:28:34,386 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:28:34,391 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:28:34,391 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:28:34,391 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:28:34,391 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:28:34,392 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:28:34,396 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:28:34,401 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:28:34,402 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:28:34,402 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:28:34,402 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:34,402 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:28:34,402 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:34,402 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:28:34,402 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:28:34,402 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:28:34,402 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:28:34,402 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:28:34,402 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:28:34,402 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:28:34,402 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:28:34,402 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:28:34,403 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:28:34,403 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:28:34,403 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:28:34,403 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:28:34,403 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:28:34,403 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:28:34,404 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:28:35,116 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:28:35,134 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:28:35,134 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:28:35,147 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:28:35,151 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:28:35,154 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:28:35,157 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:28:35,159 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:28:35,164 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:28:35,167 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:28:35,170 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:28:35,173 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:28:35,175 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:28:35,178 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:28:35,181 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:28:35,183 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:28:35,186 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:28:35,190 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:28:35,192 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:28:35,195 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:28:35,201 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:28:35,205 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:35,205 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:35,210 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:35,210 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:28:35,214 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:35,214 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:28:35,219 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:35,219 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:28:35,224 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:35,224 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:28:35,229 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:35,229 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:28:35,233 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:28:35,234 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:28:35,238 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:28:35,238 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:28:35,242 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:28:35,242 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:28:35,248 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:28:35,248 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:28:35,248 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:28:35,252 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:28:35,253 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:28:35,253 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:28:35,257 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:28:35,262 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:28:35,262 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:28:35,262 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:28:35,262 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:28:35,262 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:28:35,266 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:28:35,270 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:28:35,270 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:28:35,271 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:28:35,271 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:35,271 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:28:35,271 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:28:35,271 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:28:35,271 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:28:35,271 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:28:35,271 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:28:35,271 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:28:35,271 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:28:35,271 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:28:35,271 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:28:35,271 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:28:35,271 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:28:35,272 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:28:35,272 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:28:35,272 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:28:35,272 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:39:41,079 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:39:41,079 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:39:41,079 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:39:41,276 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:39:41,511 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:41,527 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:41,527 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:41,542 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:41,557 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:41,566 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:39:41,709 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:39:41,715 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:39:41,718 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:39:41,721 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:39:41,724 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:39:41,727 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:39:41,730 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:39:41,733 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:39:41,736 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:39:41,738 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:39:41,741 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:39:41,744 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:39:41,748 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:39:41,751 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:39:41,755 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:39:41,757 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:39:41,760 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:39:41,766 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:39:41,771 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:41,771 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:41,776 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:41,776 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:39:41,780 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:41,780 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:41,785 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:41,785 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:39:41,790 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:41,790 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:39:41,794 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:41,794 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:39:41,798 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:41,798 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:39:41,803 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:41,803 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:39:41,807 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:39:41,808 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:39:41,812 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:39:41,812 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:39:41,812 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:39:41,817 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:39:41,817 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:39:41,817 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:39:41,822 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:39:41,826 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:39:41,826 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:39:41,826 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:39:41,826 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:39:41,827 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:39:41,832 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:39:41,836 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:39:41,837 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:39:41,837 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:39:41,837 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:41,837 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:39:41,837 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:41,837 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:39:41,837 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:39:41,837 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:39:41,837 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:39:41,837 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:39:41,837 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:39:41,837 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:39:41,837 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:39:41,837 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:39:41,837 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:39:41,837 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:39:41,837 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:39:41,837 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:39:41,837 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:39:41,838 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:39:41,838 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:39:42,522 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:42,538 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:42,539 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:39:42,552 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:39:42,557 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:39:42,560 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:39:42,562 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:39:42,565 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:39:42,568 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:39:42,571 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:39:42,574 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:39:42,577 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:39:42,579 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:39:42,583 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:39:42,586 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:39:42,589 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:39:42,591 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:39:42,594 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:39:42,597 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:39:42,600 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:39:42,606 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:39:42,611 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:42,611 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:42,616 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:42,616 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:39:42,621 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:42,621 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:42,625 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:42,625 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:39:42,630 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:42,630 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:39:42,635 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:42,635 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:39:42,640 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:42,640 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:39:42,644 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:42,645 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:39:42,649 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:39:42,649 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:39:42,654 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:39:42,654 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:39:42,654 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:39:42,659 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:39:42,659 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:39:42,659 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:39:42,663 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:39:42,669 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:39:42,669 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:39:42,669 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:39:42,669 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:39:42,669 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:39:42,674 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:39:42,678 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:39:42,679 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:39:42,679 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:39:42,679 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:42,679 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:39:42,679 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:42,679 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:39:42,679 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:39:42,679 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:39:42,679 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:39:42,679 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:39:42,679 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:39:42,679 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:39:42,679 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:39:42,679 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:39:42,679 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:39:42,679 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:39:42,679 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:39:42,679 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:39:42,679 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:39:49,856 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:39:49,856 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:39:49,856 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:39:50,049 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:39:50,326 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:50,344 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:50,344 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:50,359 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:50,375 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:50,385 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:39:50,405 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:39:50,411 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:39:50,413 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:39:50,417 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:39:50,420 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:39:50,424 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:39:50,427 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:39:50,430 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:39:50,433 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:39:50,435 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:39:50,439 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:39:50,442 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:39:50,445 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:39:50,449 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:39:50,453 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:39:50,455 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:39:50,458 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:39:50,465 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:39:50,471 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:50,472 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:50,481 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:50,481 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:39:50,489 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:50,489 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:50,497 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:50,497 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:39:50,505 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:50,505 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:39:50,512 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:50,513 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:39:50,520 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:50,520 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:39:50,527 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:50,527 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:39:50,536 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:39:50,536 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:39:50,543 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:39:50,543 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:39:50,543 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:39:50,551 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:39:50,551 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:39:50,551 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:39:50,558 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:39:50,566 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:39:50,566 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:39:50,567 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:39:50,567 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:39:50,567 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:39:50,573 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:39:50,581 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:39:50,582 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:39:50,582 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:39:50,582 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:50,582 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:39:50,582 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:50,582 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:39:50,582 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:39:50,582 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:39:50,582 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:39:50,582 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:39:50,582 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:39:50,582 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:39:50,582 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:39:50,583 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:39:50,583 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:39:50,583 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:39:50,583 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:39:50,583 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:39:50,583 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:39:50,584 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:39:50,584 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:39:51,285 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:51,301 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:51,302 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:39:51,314 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:39:51,319 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:39:51,322 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:39:51,325 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:39:51,328 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:39:51,331 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:39:51,334 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:39:51,337 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:39:51,340 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:39:51,343 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:39:51,345 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:39:51,348 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:39:51,352 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:39:51,354 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:39:51,358 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:39:51,361 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:39:51,363 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:39:51,369 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:39:51,374 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:51,374 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:51,378 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:51,379 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:39:51,383 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:51,383 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:51,387 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:51,388 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:39:51,392 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:51,392 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:39:51,396 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:51,396 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:39:51,400 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:51,401 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:39:51,406 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:51,406 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:39:51,410 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:39:51,410 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:39:51,414 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:39:51,415 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:39:51,415 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:39:51,419 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:39:51,419 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:39:51,419 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:39:51,423 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:39:51,428 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:39:51,428 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:39:51,428 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:39:51,428 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:39:51,428 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:39:51,433 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:39:51,438 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:39:51,438 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:39:51,438 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:39:51,438 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:51,439 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:39:51,439 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:51,439 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:39:51,439 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:39:51,439 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:39:51,439 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:39:51,439 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:39:51,439 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:39:51,439 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:39:51,439 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:39:51,439 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:39:51,439 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:39:51,439 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:39:51,439 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:39:51,439 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:39:51,439 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:39:52,447 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:39:52,447 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:39:52,447 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:39:52,659 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:39:52,910 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:52,928 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:52,928 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:52,943 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:52,959 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:52,968 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:39:52,989 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:39:52,995 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:39:52,998 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:39:53,000 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:39:53,004 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:39:53,008 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:39:53,011 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:39:53,014 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:39:53,016 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:39:53,019 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:39:53,022 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:39:53,025 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:39:53,028 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:39:53,032 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:39:53,035 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:39:53,038 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:39:53,045 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:39:53,051 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:39:53,055 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,055 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:53,060 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:53,060 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:39:53,065 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,065 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:53,070 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,070 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:39:53,075 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,075 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:39:53,080 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,080 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:39:53,084 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:53,085 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:39:53,089 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,090 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:39:53,094 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:39:53,094 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:39:53,099 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:39:53,099 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:39:53,099 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:39:53,104 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:39:53,104 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:39:53,104 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:39:53,108 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:39:53,114 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:39:53,114 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:39:53,114 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:39:53,114 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:39:53,114 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:39:53,119 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:39:53,124 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:39:53,124 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:39:53,124 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:39:53,124 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,124 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:39:53,124 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,125 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,125 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,125 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,125 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:39:53,125 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,125 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:39:53,125 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,125 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:39:53,125 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,125 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:39:53,125 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:39:53,125 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:39:53,125 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:39:53,125 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:39:53,126 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:39:53,126 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:39:53,820 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:53,836 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:53,837 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:39:53,850 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:39:53,854 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:39:53,857 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:39:53,860 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:39:53,863 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:39:53,867 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:39:53,870 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:39:53,873 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:39:53,875 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:39:53,878 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:39:53,881 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:39:53,884 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:39:53,887 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:39:53,891 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:39:53,894 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:39:53,897 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:39:53,900 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:39:53,905 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:39:53,910 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,910 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:53,915 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:53,915 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:39:53,919 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,920 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:53,924 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,924 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:39:53,929 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,929 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:39:53,933 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,933 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:39:53,939 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:53,939 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:39:53,944 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:53,944 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:39:53,950 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:39:53,950 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:39:53,955 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:39:53,955 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:39:53,955 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:39:53,960 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:39:53,960 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:39:53,960 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:39:53,965 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:39:53,970 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:39:53,970 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:39:53,970 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:39:53,970 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:39:53,970 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:39:53,975 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:39:53,980 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:39:53,980 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:39:53,980 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:39:53,980 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,980 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:39:53,980 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,981 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,981 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,981 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,981 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:39:53,981 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,981 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:39:53,981 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,981 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:39:53,981 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:39:53,981 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:39:53,981 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:39:53,981 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:39:53,981 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:39:53,982 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:39:54,939 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:39:54,939 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:39:54,939 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:39:55,128 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:39:55,361 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:55,377 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:55,377 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:55,392 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:55,407 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:55,416 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:39:55,436 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:39:55,442 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:39:55,445 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:39:55,448 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:39:55,451 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:39:55,454 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:39:55,458 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:39:55,460 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:39:55,463 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:39:55,466 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:39:55,468 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:39:55,471 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:39:55,474 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:39:55,478 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:39:55,481 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:39:55,484 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:39:55,487 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:39:55,492 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:39:55,496 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:55,497 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:55,501 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:55,501 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:39:55,507 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:55,507 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:55,511 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:55,511 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:39:55,516 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:55,516 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:39:55,520 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:55,521 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:39:55,525 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:55,525 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:39:55,529 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:55,529 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:39:55,534 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:39:55,534 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:39:55,539 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:39:55,539 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:39:55,539 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:39:55,543 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:39:55,543 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:39:55,543 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:39:55,548 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:39:55,552 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:39:55,552 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:39:55,552 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:39:55,552 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:39:55,552 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:39:55,557 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:39:55,561 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:39:55,562 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:39:55,562 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:39:55,562 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:55,562 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:39:55,562 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:55,562 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:39:55,562 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:39:55,562 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:39:55,562 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:39:55,562 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:39:55,562 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:39:55,562 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:39:55,562 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:39:55,562 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:39:55,562 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:39:55,562 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:39:55,563 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:39:55,563 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:39:55,563 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:39:55,563 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:39:55,563 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:39:56,271 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:39:56,287 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:39:56,288 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:39:56,302 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:39:56,306 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:39:56,309 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:39:56,312 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:39:56,314 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:39:56,318 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:39:56,322 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:39:56,325 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:39:56,327 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:39:56,330 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:39:56,333 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:39:56,336 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:39:56,338 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:39:56,341 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:39:56,345 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:39:56,349 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:39:56,352 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:39:56,358 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:39:56,362 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:56,363 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:56,367 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:56,367 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:39:56,371 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:56,371 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:39:56,377 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:56,377 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:39:56,382 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:56,382 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:39:56,386 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:56,386 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:39:56,390 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:39:56,391 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:39:56,395 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:39:56,395 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:39:56,400 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:39:56,400 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:39:56,405 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:39:56,405 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:39:56,405 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:39:56,410 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:39:56,410 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:39:56,410 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:39:56,414 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:39:56,419 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:39:56,419 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:39:56,419 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:39:56,419 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:39:56,419 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:39:56,423 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:39:56,428 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:39:56,428 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:39:56,428 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:39:56,428 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:56,428 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:39:56,428 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:39:56,428 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:39:56,429 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:39:56,429 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:39:56,429 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:39:56,429 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:39:56,429 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:39:56,429 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:39:56,429 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:39:56,429 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:39:56,429 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:39:56,429 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:39:56,429 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:39:56,429 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:39:56,429 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:13,423 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:40:13,423 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:40:13,423 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:40:13,622 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:40:13,861 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:13,878 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:13,878 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:13,893 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:13,908 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:13,918 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:13,938 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:13,944 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:13,947 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:13,950 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:13,953 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:13,957 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:13,960 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:13,962 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:13,966 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:13,968 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:13,971 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:13,974 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:13,977 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:13,979 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:13,982 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:13,985 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:13,988 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:13,994 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:13,999 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:13,999 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:14,004 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:14,004 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:14,008 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,008 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:14,014 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,014 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:14,018 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,018 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:14,023 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,023 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:14,028 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:14,028 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:14,032 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,032 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:14,037 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:14,037 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:14,041 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:14,042 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:14,042 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:14,046 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:14,046 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:14,047 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:14,051 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:14,056 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:14,056 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:14,056 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:14,056 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:14,057 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:14,061 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:14,065 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:14,065 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:14,065 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:14,065 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,065 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:14,066 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,066 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,066 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,066 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,066 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:14,066 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,066 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:14,066 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,066 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:14,066 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,066 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:14,066 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:14,066 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:14,066 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:14,067 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:14,067 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:40:14,067 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:40:14,757 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:14,773 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:14,774 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:14,789 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:14,793 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:14,796 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:14,799 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:14,801 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:14,805 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:14,809 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:14,812 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:14,814 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:14,817 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:14,819 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:14,823 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:14,825 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:14,828 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:14,832 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:14,834 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:14,838 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:14,844 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:14,848 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,848 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:14,852 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:14,852 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:14,857 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,857 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:14,863 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,863 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:14,867 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,867 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:14,871 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,872 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:14,876 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:14,876 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:14,880 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:14,880 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:14,884 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:14,884 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:14,891 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:14,891 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:14,891 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:14,896 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:14,896 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:14,896 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:14,900 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:14,905 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:14,905 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:14,905 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:14,905 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:14,905 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:14,910 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:14,914 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:14,914 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:14,914 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:14,914 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,914 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:14,914 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,914 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,914 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,914 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,914 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:14,914 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,914 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:14,914 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,914 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:14,914 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:14,914 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:14,914 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:14,914 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:14,915 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:14,915 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:38,727 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:40:38,727 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:40:38,727 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:40:38,924 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:40:39,167 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:39,184 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:39,184 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:39,199 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:39,214 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:39,224 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:39,244 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:39,250 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:39,254 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:39,257 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:39,260 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:39,263 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:39,266 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:39,269 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:39,272 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:39,274 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:39,277 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:39,281 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:39,284 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:39,287 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:39,290 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:39,293 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:39,295 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:39,301 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:39,306 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:39,306 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:39,312 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:39,312 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:39,316 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:39,316 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:39,321 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:39,321 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:39,326 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:39,326 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:39,330 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:39,330 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:39,334 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:39,334 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:39,342 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:39,342 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:39,348 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:39,348 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:39,354 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:39,355 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:39,355 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:39,360 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:39,361 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:39,361 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:39,369 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:39,375 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:39,376 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:39,376 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:39,376 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:39,376 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:39,381 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:39,387 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:39,388 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:39,388 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:39,388 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:39,388 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:39,388 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:39,388 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:39,388 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:39,388 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:39,388 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:39,388 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:39,388 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:39,388 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:39,389 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:39,389 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:39,389 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:39,389 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:39,389 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:39,389 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:39,389 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:39,390 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:40:39,390 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:40:40,152 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:40,168 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:40,169 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:40,182 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:40,186 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:40,189 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:40,191 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:40,194 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:40,197 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:40,201 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:40,204 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:40,207 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:40,210 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:40,212 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:40,215 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:40,218 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:40,221 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:40,224 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:40,227 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:40,231 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:40,236 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:40,240 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:40,240 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:40,245 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:40,245 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:40,249 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:40,249 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:40,253 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:40,253 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:40,258 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:40,258 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:40,262 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:40,263 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:40,267 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:40,267 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:40,271 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:40,271 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:40,275 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:40,276 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:40,280 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:40,280 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:40,280 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:40,285 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:40,285 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:40,285 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:40,290 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:40,294 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:40,295 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:40,295 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:40,295 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:40,295 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:40,299 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:40,303 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:40,303 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:40,303 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:40,303 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:40,304 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:40,304 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:40,304 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:40,304 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:40,304 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:40,304 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:40,304 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:40,304 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:40,304 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:40,304 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:40,304 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:40,304 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:40,304 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:40,304 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:40,305 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:40,305 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:41,249 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:40:41,249 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:40:41,249 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:40:41,439 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:40:41,681 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:41,698 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:41,699 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:41,714 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:41,729 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:41,741 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:41,763 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:41,770 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:41,775 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:41,779 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:41,783 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:41,787 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:41,793 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:41,796 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:41,800 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:41,803 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:41,807 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:41,811 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:41,816 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:41,821 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:41,826 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:41,829 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:41,833 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:41,839 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:41,847 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:41,847 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:41,854 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:41,855 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:41,859 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:41,859 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:41,863 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:41,864 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:41,868 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:41,868 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:41,872 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:41,872 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:41,877 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:41,877 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:41,881 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:41,881 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:41,885 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:41,886 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:41,890 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:41,890 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:41,890 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:41,894 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:41,894 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:41,894 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:41,898 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:41,903 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:41,904 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:41,904 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:41,904 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:41,904 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:41,908 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:41,913 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:41,913 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:41,913 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:41,913 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:41,913 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:41,913 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:41,913 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:41,913 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:41,913 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:41,913 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:41,913 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:41,913 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:41,913 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:41,913 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:41,913 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:41,913 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:41,913 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:41,913 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:41,913 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:41,913 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:41,914 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:40:41,914 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:40:42,604 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:42,619 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:42,620 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:42,632 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:42,637 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:42,640 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:42,643 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:42,646 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:42,649 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:42,652 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:42,655 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:42,657 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:42,660 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:42,663 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:42,665 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:42,669 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:42,672 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:42,675 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:42,677 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:42,680 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:42,685 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:42,690 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:42,690 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:42,694 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:42,694 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:42,699 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:42,700 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:42,704 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:42,704 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:42,708 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:42,709 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:42,713 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:42,713 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:42,717 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:42,717 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:42,722 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:42,722 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:42,727 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:42,728 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:42,732 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:42,732 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:42,732 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:42,737 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:42,737 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:42,737 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:42,741 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:42,746 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:42,746 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:42,746 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:42,746 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:42,746 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:42,750 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:42,756 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:42,756 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:42,756 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:42,756 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:42,756 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:42,756 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:42,756 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:42,756 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:42,756 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:42,756 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:42,756 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:42,756 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:42,756 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:42,756 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:42,756 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:42,757 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:42,757 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:42,757 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:42,757 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:42,757 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:43,692 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:40:43,692 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:40:43,692 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:40:43,880 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:40:44,113 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:44,129 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:44,129 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:44,144 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:44,159 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:44,168 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:44,189 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:44,194 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:44,197 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:44,200 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:44,203 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:44,207 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:44,210 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:44,212 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:44,215 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:44,218 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:44,221 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:44,224 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:44,227 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:44,230 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:44,233 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:44,236 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:44,239 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:44,244 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:44,249 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:44,249 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:44,253 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:44,253 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:44,258 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:44,258 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:44,263 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:44,263 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:44,267 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:44,267 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:44,272 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:44,272 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:44,277 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:44,277 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:44,281 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:44,281 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:44,286 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:44,286 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:44,290 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:44,290 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:44,290 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:44,295 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:44,295 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:44,295 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:44,299 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:44,304 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:44,304 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:44,304 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:44,304 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:44,304 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:44,309 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:44,314 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:44,314 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:44,314 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:44,314 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:44,314 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:44,314 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:44,314 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:44,314 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:44,314 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:44,314 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:44,314 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:44,315 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:44,315 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:44,315 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:44,315 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:44,315 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:44,315 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:44,315 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:44,315 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:44,315 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:44,315 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:40:44,315 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:40:45,000 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:45,015 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:45,016 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:45,028 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:45,033 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:45,036 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:45,039 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:45,041 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:45,045 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:45,048 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:45,051 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:45,053 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:45,056 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:45,059 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:45,063 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:45,066 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:45,069 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:45,072 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:45,075 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:45,078 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:45,084 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:45,090 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:45,090 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:45,094 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:45,094 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:45,098 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:45,099 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:45,103 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:45,103 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:45,107 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:45,107 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:45,112 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:45,112 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:45,116 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:45,116 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:45,121 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:45,121 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:45,126 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:45,126 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:45,130 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:45,130 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:45,131 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:45,135 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:45,135 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:45,135 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:45,139 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:45,145 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:45,145 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:45,145 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:45,145 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:45,145 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:45,150 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:45,154 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:45,154 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:45,154 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:45,154 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:45,154 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:45,154 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:45,154 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:45,154 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:45,154 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:45,154 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:45,154 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:45,155 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:45,155 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:45,155 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:45,155 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:45,155 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:45,155 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:45,155 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:45,155 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:45,155 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:47,208 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:40:47,208 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:40:47,208 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:40:47,402 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:40:47,649 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:47,668 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:47,668 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:47,684 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:47,701 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:47,712 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:47,738 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:47,746 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:47,750 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:47,755 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:47,758 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:47,762 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:47,766 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:47,769 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:47,772 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:47,774 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:47,777 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:47,781 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:47,783 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:47,787 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:47,791 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:47,794 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:47,797 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:47,802 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:47,807 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:47,807 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:47,812 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:47,812 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:47,817 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:47,817 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:47,821 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:47,822 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:47,826 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:47,826 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:47,830 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:47,830 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:47,835 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:47,835 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:47,840 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:47,840 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:47,844 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:47,844 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:47,849 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:47,849 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:47,849 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:47,854 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:47,854 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:47,854 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:47,859 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:47,865 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:47,865 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:47,865 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:47,865 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:47,865 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:47,870 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:47,875 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:47,875 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:47,875 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:47,875 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:47,875 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:47,875 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:47,875 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:47,875 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:47,875 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:47,875 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:47,876 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:47,876 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:47,876 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:47,876 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:47,876 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:47,876 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:47,876 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:47,876 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:47,876 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:47,876 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:47,876 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:40:47,876 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:40:48,565 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:48,581 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:48,581 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:48,595 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:48,599 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:48,602 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:48,605 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:48,607 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:48,611 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:48,614 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:48,617 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:48,620 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:48,623 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:48,625 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:48,628 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:48,631 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:48,634 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:48,637 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:48,639 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:48,644 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:48,649 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:48,654 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:48,654 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:48,659 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:48,659 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:48,664 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:48,664 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:48,669 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:48,669 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:48,675 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:48,675 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:48,679 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:48,680 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:48,684 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:48,684 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:48,688 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:48,689 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:48,693 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:48,693 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:48,698 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:48,698 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:48,698 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:48,703 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:48,703 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:48,703 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:48,708 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:48,712 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:48,712 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:48,712 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:48,713 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:48,713 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:48,717 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:48,721 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:48,721 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:48,721 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:48,721 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:48,722 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:48,722 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:48,722 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:48,722 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:48,722 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:48,722 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:48,722 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:48,722 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:48,722 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:48,722 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:48,722 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:48,722 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:48,722 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:48,722 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:48,722 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:48,722 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:53,201 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:40:53,202 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:40:53,202 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:40:53,392 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:40:53,641 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:53,657 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:53,657 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:53,672 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:53,687 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:53,697 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:53,717 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:53,725 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:53,728 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:53,731 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:53,733 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:53,737 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:53,740 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:53,742 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:53,745 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:53,748 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:53,751 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:53,755 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:53,758 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:53,760 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:53,764 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:53,766 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:53,769 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:53,775 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:53,780 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:53,781 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:53,785 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:53,785 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:53,790 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:53,790 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:53,794 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:53,794 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:53,798 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:53,798 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:53,802 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:53,802 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:53,808 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:53,808 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:53,813 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:53,813 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:53,817 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:53,817 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:53,821 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:53,821 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:53,822 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:53,826 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:53,826 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:53,826 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:53,831 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:53,838 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:53,838 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:53,838 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:53,838 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:53,838 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:53,843 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:53,847 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:53,847 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:53,848 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:53,848 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:53,848 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:53,848 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:53,848 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:53,848 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:53,848 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:53,848 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:53,848 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:53,848 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:53,848 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:53,848 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:53,848 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:53,848 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:53,848 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:53,848 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:53,848 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:53,848 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:53,849 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:40:53,849 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:40:54,580 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:54,597 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:54,597 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:54,610 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:54,614 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:54,617 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:54,621 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:54,624 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:54,628 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:54,631 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:54,633 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:54,636 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:54,639 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:54,642 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:54,645 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:54,648 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:54,651 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:54,654 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:54,657 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:54,660 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:54,666 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:54,671 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:54,671 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:54,676 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:54,677 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:54,681 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:54,681 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:54,685 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:54,686 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:54,690 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:54,690 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:54,694 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:54,694 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:54,698 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:54,698 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:54,703 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:54,703 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:54,708 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:54,708 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:54,712 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:54,712 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:54,712 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:54,717 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:54,717 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:54,717 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:54,721 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:54,725 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:54,725 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:54,726 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:54,726 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:54,726 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:54,730 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:54,734 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:54,735 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:54,735 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:54,735 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:54,735 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:54,735 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:54,735 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:54,735 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:54,735 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:54,735 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:54,735 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:54,735 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:54,735 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:54,735 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:54,735 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:54,736 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:54,736 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:54,736 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:54,736 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:54,736 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:55,665 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:40:55,665 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:40:55,665 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:40:55,851 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:40:56,084 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:56,100 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:56,100 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:56,115 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:56,130 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:56,140 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:56,160 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:56,166 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:56,169 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:56,173 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:56,176 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:56,179 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:56,182 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:56,184 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:56,187 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:56,190 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:56,193 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:56,196 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:56,199 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:56,202 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:56,205 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:56,208 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:56,211 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:56,217 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:56,222 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:56,222 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:56,228 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:56,228 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:56,232 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:56,232 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:56,237 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:56,237 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:56,241 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:56,241 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:56,246 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:56,246 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:56,250 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:56,250 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:56,256 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:56,256 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:56,260 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:56,261 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:56,265 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:56,265 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:56,265 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:56,269 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:56,269 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:56,269 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:56,274 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:56,278 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:56,278 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:56,278 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:56,279 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:56,279 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:56,283 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:56,288 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:56,288 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:56,288 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:56,288 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:56,288 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:56,288 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:56,288 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:56,288 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:56,288 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:56,288 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:56,288 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:56,288 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:56,288 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:56,288 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:56,289 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:56,289 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:56,289 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:56,289 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:56,289 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:56,289 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:40:56,289 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:40:56,289 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:40:57,010 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:40:57,028 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:40:57,029 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:40:57,041 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:40:57,046 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:40:57,050 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:40:57,053 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:40:57,055 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:40:57,059 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:40:57,062 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:40:57,065 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:40:57,067 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:40:57,070 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:40:57,073 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:40:57,076 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:40:57,081 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:40:57,083 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:40:57,086 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:40:57,089 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:40:57,092 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:40:57,097 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:40:57,101 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:57,102 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:57,106 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:57,107 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:40:57,111 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:57,111 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:40:57,115 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:57,116 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:40:57,120 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:57,120 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:40:57,124 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:57,124 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:40:57,129 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:40:57,129 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:40:57,134 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:40:57,134 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:40:57,138 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:40:57,138 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:40:57,143 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:40:57,143 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:40:57,143 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:40:57,147 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:40:57,147 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:40:57,147 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:40:57,152 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:40:57,156 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:40:57,156 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:40:57,157 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:40:57,157 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:40:57,157 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:40:57,162 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:40:57,166 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:40:57,166 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:40:57,166 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:40:57,166 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:57,166 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:40:57,166 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:40:57,166 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:40:57,166 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:40:57,166 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:40:57,167 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:40:57,167 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:40:57,167 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:40:57,167 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:40:57,167 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:40:57,167 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:40:57,167 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:40:57,167 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:40:57,167 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:40:57,167 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:40:57,167 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:21,453 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:47:21,453 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:47:21,453 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:47:21,646 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:47:21,884 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:21,900 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:21,900 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:21,915 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:21,930 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:21,940 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:21,959 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:21,965 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:21,969 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:21,971 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:21,974 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:21,978 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:21,981 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:21,983 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:21,986 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:21,989 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:21,992 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:21,995 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:21,998 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:22,001 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:22,004 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:22,006 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:22,009 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:22,014 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:22,019 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,019 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:22,024 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:22,025 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:22,029 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,029 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:22,034 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,034 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:22,038 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,038 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:22,043 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,043 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:22,047 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:22,047 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:22,052 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,052 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:22,056 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:22,057 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:22,061 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:22,061 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:22,061 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:22,066 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:22,066 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:22,066 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:22,070 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:22,075 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:22,075 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:22,075 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:22,075 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:22,075 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:22,080 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:22,084 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:22,084 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:22,084 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:22,084 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,084 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:22,084 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,084 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,084 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,084 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,084 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:22,084 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,085 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:22,085 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,085 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:22,085 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,085 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:22,085 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:22,085 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:22,085 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:22,085 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:22,086 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:47:22,086 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:47:22,768 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:22,784 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:22,785 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:22,797 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:22,803 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:22,806 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:22,808 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:22,811 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:22,814 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:22,817 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:22,820 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:22,823 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:22,825 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:22,828 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:22,832 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:22,835 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:22,838 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:22,841 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:22,844 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:22,847 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:22,852 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:22,857 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,857 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:22,862 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:22,862 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:22,867 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,867 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:22,871 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,871 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:22,875 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,875 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:22,880 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,880 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:22,884 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:22,884 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:22,889 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:22,889 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:22,893 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:22,893 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:22,898 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:22,898 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:22,898 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:22,903 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:22,903 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:22,903 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:22,907 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:22,911 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:22,911 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:22,912 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:22,912 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:22,912 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:22,916 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:22,921 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:22,921 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:22,921 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:22,921 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,921 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:22,921 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,921 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,921 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,921 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,921 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:22,921 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,922 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:22,922 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,922 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:22,922 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:22,922 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:22,922 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:22,922 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:22,922 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:22,922 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:27,053 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:47:27,053 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:47:27,053 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:47:27,244 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:47:27,492 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:27,509 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:27,509 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:27,525 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:27,540 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:27,553 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:27,577 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:27,584 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:27,588 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:27,591 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:27,594 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:27,600 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:27,604 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:27,607 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:27,612 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:27,616 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:27,620 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:27,625 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:27,631 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:27,634 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:27,638 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:27,641 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:27,645 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:27,652 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:27,659 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:27,659 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:27,665 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:27,665 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:27,671 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:27,671 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:27,676 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:27,676 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:27,681 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:27,681 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:27,688 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:27,688 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:27,693 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:27,694 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:27,699 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:27,699 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:27,705 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:27,705 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:27,710 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:27,710 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:27,710 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:27,718 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:27,718 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:27,718 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:27,723 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:27,729 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:27,729 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:27,729 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:27,729 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:27,729 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:27,736 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:27,743 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:27,743 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:27,743 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:27,743 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:27,743 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:27,743 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:27,743 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:27,743 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:27,743 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:27,743 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:27,743 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:27,743 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:27,743 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:27,743 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:27,743 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:27,743 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:27,743 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:27,744 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:27,744 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:27,744 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:27,744 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:47:27,744 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:47:28,525 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:28,542 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:28,542 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:28,555 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:28,560 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:28,563 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:28,566 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:28,568 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:28,572 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:28,575 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:28,578 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:28,580 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:28,583 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:28,586 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:28,589 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:28,592 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:28,595 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:28,598 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:28,601 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:28,605 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:28,611 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:28,616 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:28,616 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:28,622 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:28,622 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:28,627 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:28,627 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:28,633 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:28,633 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:28,638 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:28,638 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:28,643 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:28,643 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:28,647 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:28,648 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:28,652 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:28,652 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:28,656 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:28,656 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:28,661 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:28,661 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:28,661 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:28,665 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:28,665 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:28,666 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:28,670 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:28,677 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:28,677 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:28,677 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:28,677 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:28,677 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:28,682 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:28,688 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:28,688 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:28,689 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:28,689 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:28,689 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:28,689 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:28,689 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:28,689 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:28,689 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:28,689 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:28,689 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:28,689 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:28,689 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:28,689 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:28,689 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:28,689 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:28,689 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:28,690 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:28,690 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:28,690 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:30,272 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:47:30,273 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:47:30,273 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:47:30,465 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:47:30,705 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:30,721 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:30,721 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:30,737 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:30,752 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:30,763 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:30,783 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:30,789 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:30,793 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:30,795 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:30,798 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:30,802 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:30,805 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:30,808 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:30,810 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:30,813 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:30,817 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:30,820 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:30,823 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:30,826 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:30,829 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:30,832 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:30,834 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:30,840 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:30,846 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:30,846 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:30,850 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:30,850 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:30,855 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:30,855 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:30,860 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:30,860 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:30,864 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:30,864 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:30,869 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:30,869 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:30,875 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:30,875 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:30,879 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:30,879 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:30,884 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:30,884 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:30,888 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:30,888 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:30,888 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:30,893 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:30,893 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:30,893 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:30,897 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:30,903 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:30,903 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:30,903 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:30,903 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:30,903 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:30,908 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:30,913 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:30,913 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:30,913 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:30,913 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:30,913 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:30,913 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:30,913 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:30,913 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:30,913 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:30,914 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:30,914 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:30,914 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:30,914 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:30,914 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:30,914 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:30,914 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:30,914 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:30,914 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:30,914 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:30,914 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:30,915 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:47:30,915 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:47:31,625 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:31,641 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:31,642 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:31,656 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:31,660 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:31,663 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:31,666 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:31,669 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:31,672 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:31,676 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:31,679 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:31,683 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:31,685 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:31,688 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:31,692 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:31,695 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:31,697 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:31,701 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:31,704 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:31,708 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:31,714 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:31,719 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:31,719 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:31,723 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:31,724 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:31,728 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:31,728 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:31,735 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:31,736 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:31,741 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:31,741 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:31,747 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:31,747 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:31,753 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:31,753 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:31,759 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:31,759 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:31,765 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:31,765 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:31,772 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:31,772 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:31,772 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:31,778 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:31,778 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:31,778 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:31,786 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:31,796 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:31,796 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:31,796 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:31,796 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:31,796 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:31,804 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:31,812 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:31,812 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:31,812 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:31,812 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:31,812 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:31,813 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:31,813 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:31,813 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:31,813 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:31,813 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:31,813 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:31,813 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:31,813 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:31,813 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:31,813 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:31,813 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:31,813 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:31,813 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:31,814 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:31,814 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:32,828 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:47:32,828 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:47:32,828 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:47:33,019 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:47:33,254 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:33,270 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:33,270 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:33,285 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:33,300 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:33,309 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:33,330 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:33,336 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:33,340 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:33,343 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:33,346 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:33,349 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:33,352 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:33,355 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:33,358 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:33,360 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:33,363 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:33,366 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:33,369 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:33,372 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:33,375 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:33,378 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:33,381 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:33,386 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:33,391 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:33,391 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:33,396 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:33,396 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:33,400 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:33,400 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:33,405 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:33,405 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:33,409 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:33,409 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:33,414 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:33,414 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:33,418 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:33,418 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:33,423 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:33,423 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:33,428 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:33,428 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:33,433 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:33,433 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:33,433 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:33,438 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:33,438 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:33,438 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:33,442 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:33,447 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:33,447 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:33,447 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:33,447 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:33,447 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:33,452 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:33,456 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:33,456 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:33,456 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:33,456 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:33,457 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:33,457 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:33,457 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:33,457 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:33,457 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:33,457 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:33,457 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:33,457 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:33,457 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:33,457 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:33,457 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:33,457 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:33,457 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:33,457 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:33,457 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:33,457 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:33,458 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:47:33,458 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:47:34,172 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:34,188 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:34,189 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:34,203 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:34,207 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:34,210 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:34,212 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:34,215 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:34,219 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:34,223 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:34,226 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:34,229 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:34,231 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:34,234 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:34,238 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:34,240 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:34,243 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:34,247 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:34,250 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:34,254 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:34,259 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:34,264 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:34,264 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:34,269 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:34,269 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:34,274 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:34,274 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:34,279 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:34,279 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:34,283 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:34,283 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:34,288 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:34,288 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:34,292 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:34,292 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:34,296 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:34,296 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:34,302 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:34,302 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:34,308 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:34,308 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:34,308 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:34,312 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:34,312 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:34,312 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:34,317 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:34,322 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:34,322 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:34,322 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:34,322 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:34,322 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:34,327 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:34,331 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:34,331 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:34,332 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:34,332 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:34,332 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:34,332 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:34,332 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:34,332 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:34,332 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:34,332 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:34,332 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:34,332 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:34,332 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:34,332 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:34,332 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:34,332 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:34,332 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:34,332 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:34,332 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:34,332 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:35,272 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:47:35,272 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:47:35,272 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:47:35,463 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:47:35,698 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:35,715 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:35,715 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:35,731 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:35,746 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:35,755 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:35,776 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:35,782 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:35,785 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:35,788 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:35,791 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:35,795 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:35,799 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:35,801 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:35,804 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:35,807 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:35,810 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:35,813 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:35,815 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:35,818 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:35,821 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:35,825 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:35,828 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:35,834 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:35,838 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:35,838 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:35,843 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:35,843 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:35,847 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:35,847 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:35,852 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:35,852 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:35,857 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:35,857 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:35,861 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:35,862 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:35,866 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:35,866 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:35,871 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:35,871 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:35,875 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:35,875 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:35,880 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:35,880 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:35,880 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:35,884 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:35,884 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:35,885 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:35,889 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:35,893 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:35,893 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:35,894 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:35,894 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:35,894 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:35,898 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:35,902 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:35,903 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:35,903 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:35,903 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:35,903 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:35,903 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:35,903 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:35,903 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:35,903 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:35,903 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:35,903 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:35,903 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:35,903 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:35,903 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:35,903 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:35,904 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:35,904 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:35,904 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:35,904 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:35,904 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:35,905 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:47:35,905 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:47:36,590 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:36,606 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:36,607 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:36,619 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:36,624 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:36,627 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:36,630 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:36,633 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:36,637 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:36,639 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:36,642 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:36,645 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:36,648 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:36,650 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:36,654 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:36,657 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:36,660 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:36,664 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:36,666 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:36,669 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:36,675 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:36,679 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:36,679 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:36,684 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:36,684 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:36,688 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:36,688 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:36,693 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:36,693 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:36,697 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:36,697 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:36,701 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:36,701 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:36,706 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:36,706 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:36,710 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:36,710 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:36,714 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:36,715 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:36,719 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:36,719 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:36,719 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:36,724 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:36,724 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:36,724 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:36,728 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:36,733 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:36,733 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:36,733 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:36,733 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:36,733 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:36,737 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:36,741 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:36,742 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:36,742 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:36,742 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:36,742 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:36,742 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:36,742 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:36,742 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:36,742 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:36,743 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:36,743 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:36,743 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:36,743 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:36,743 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:36,743 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:36,743 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:36,743 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:36,743 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:36,743 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:36,744 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:58,902 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:47:58,902 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:47:58,902 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:47:59,101 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:47:59,336 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:59,352 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:59,353 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:59,368 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:47:59,383 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:47:59,392 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:47:59,412 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:47:59,418 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:47:59,421 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:47:59,423 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:47:59,426 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:47:59,429 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:47:59,433 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:47:59,436 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:47:59,439 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:47:59,442 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:47:59,445 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:47:59,448 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:47:59,451 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:47:59,453 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:47:59,456 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:47:59,459 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:47:59,462 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:47:59,468 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:47:59,473 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:59,473 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:59,477 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:59,477 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:47:59,481 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:59,482 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:47:59,486 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:59,486 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:47:59,491 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:59,491 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:47:59,497 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:59,497 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:47:59,501 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:47:59,502 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:47:59,506 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:47:59,506 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:47:59,510 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:47:59,511 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:47:59,515 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:47:59,515 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:47:59,515 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:47:59,519 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:47:59,519 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:47:59,520 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:47:59,525 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:47:59,530 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:47:59,530 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:47:59,530 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:47:59,530 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:47:59,530 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:47:59,534 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:47:59,539 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:47:59,539 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:47:59,539 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:47:59,539 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:59,539 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:47:59,539 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:47:59,539 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:47:59,539 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:47:59,539 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:47:59,539 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:47:59,539 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:47:59,539 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:47:59,539 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:47:59,539 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:47:59,539 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:47:59,539 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:47:59,539 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:47:59,540 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:47:59,540 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:47:59,540 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:47:59,540 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:47:59,540 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:48:00,230 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:00,246 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:00,247 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:00,260 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:00,265 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:00,268 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:00,271 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:00,274 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:00,277 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:00,280 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:00,284 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:00,287 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:00,290 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:00,293 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:00,296 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:00,299 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:00,302 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:00,305 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:00,308 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:00,312 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:00,318 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:00,322 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:00,322 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:00,326 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:00,326 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:00,331 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:00,331 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:00,335 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:00,335 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:00,340 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:00,340 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:00,344 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:00,344 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:00,349 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:00,349 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:00,353 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:00,353 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:00,358 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:00,358 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:00,362 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:00,362 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:00,362 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:00,367 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:00,367 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:00,367 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:00,372 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:00,376 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:00,376 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:00,377 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:00,377 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:00,377 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:00,381 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:00,385 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:00,385 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:00,385 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:00,386 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:00,386 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:00,386 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:00,386 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:00,386 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:00,386 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:00,386 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:00,386 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:00,386 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:00,386 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:00,386 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:00,386 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:00,386 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:00,386 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:00,386 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:00,387 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:00,387 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:48:01,323 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:48:01,323 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:48:01,323 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:48:01,508 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:48:01,740 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:01,756 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:01,756 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:01,771 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:01,786 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:01,795 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:01,816 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:01,822 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:01,824 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:01,827 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:01,830 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:01,834 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:01,837 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:01,840 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:01,843 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:01,846 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:01,849 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:01,852 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:01,856 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:01,859 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:01,862 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:01,864 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:01,867 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:01,873 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:01,877 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:01,877 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:01,883 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:01,883 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:01,888 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:01,888 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:01,893 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:01,893 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:01,898 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:01,898 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:01,903 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:01,903 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:01,907 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:01,908 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:01,912 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:01,912 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:01,918 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:01,918 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:01,922 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:01,922 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:01,923 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:01,927 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:01,927 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:01,927 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:01,932 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:01,937 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:01,937 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:01,937 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:01,937 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:01,937 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:01,942 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:01,947 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:01,947 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:01,947 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:01,947 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:01,947 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:01,947 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:01,947 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:01,947 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:01,947 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:01,947 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:01,947 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:01,947 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:01,947 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:01,948 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:01,948 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:01,948 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:01,948 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:01,948 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:01,948 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:01,948 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:48:01,948 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:48:01,948 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:48:02,630 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:02,646 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:02,647 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:02,660 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:02,664 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:02,667 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:02,670 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:02,672 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:02,676 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:02,680 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:02,683 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:02,685 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:02,688 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:02,691 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:02,694 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:02,696 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:02,699 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:02,702 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:02,705 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:02,709 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:02,714 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:02,719 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:02,719 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:02,723 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:02,724 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:02,728 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:02,728 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:02,733 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:02,733 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:02,737 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:02,737 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:02,742 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:02,742 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:02,746 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:02,746 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:02,750 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:02,750 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:02,755 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:02,755 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:02,760 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:02,760 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:02,760 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:02,764 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:02,765 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:02,765 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:02,769 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:02,774 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:02,774 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:02,774 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:02,774 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:02,774 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:02,778 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:02,782 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:02,783 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:02,783 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:02,783 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:02,783 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:02,783 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:02,783 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:02,783 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:02,783 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:02,783 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:02,783 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:02,783 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:02,783 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:02,783 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:02,783 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:02,783 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:02,783 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:02,783 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:02,783 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:02,783 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:48:05,843 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:48:05,843 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:48:05,843 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:48:06,036 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:48:06,274 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:06,290 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:06,291 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:06,306 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:06,321 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:06,330 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:06,350 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:06,356 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:06,359 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:06,362 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:06,364 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:06,368 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:06,371 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:06,374 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:06,376 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:06,379 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:06,382 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:06,385 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:06,388 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:06,391 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:06,394 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:06,397 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:06,400 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:06,405 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:06,410 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:06,410 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:06,415 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:06,415 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:06,420 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:06,420 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:06,424 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:06,424 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:06,429 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:06,429 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:06,433 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:06,433 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:06,438 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:06,438 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:06,443 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:06,443 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:06,448 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:06,448 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:06,453 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:06,453 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:06,453 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:06,457 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:06,457 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:06,457 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:06,461 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:06,466 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:06,466 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:06,467 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:06,467 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:06,467 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:06,471 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:06,476 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:06,476 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:06,476 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:06,476 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:06,476 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:06,476 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:06,476 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:06,476 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:06,476 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:06,476 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:06,476 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:06,476 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:06,476 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:06,476 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:06,476 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:06,477 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:06,477 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:06,477 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:06,477 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:06,477 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:48:06,478 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:48:06,478 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:48:07,171 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:07,188 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:07,188 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:07,201 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:07,205 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:07,208 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:07,211 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:07,214 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:07,217 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:07,220 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:07,223 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:07,226 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:07,228 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:07,231 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:07,234 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:07,237 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:07,240 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:07,244 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:07,247 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:07,250 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:07,255 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:07,260 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:07,260 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:07,264 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:07,264 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:07,269 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:07,269 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:07,274 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:07,274 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:07,279 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:07,279 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:07,283 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:07,283 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:07,287 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:07,287 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:07,291 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:07,292 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:07,296 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:07,297 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:07,302 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:07,302 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:07,302 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:07,306 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:07,306 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:07,306 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:07,311 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:07,315 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:07,315 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:07,315 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:07,316 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:07,316 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:07,320 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:07,326 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:07,327 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:07,327 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:07,327 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:07,327 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:07,327 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:07,327 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:07,327 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:07,327 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:07,327 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:07,327 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:07,327 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:07,327 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:07,328 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:07,328 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:07,328 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:07,328 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:07,328 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:07,328 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:07,328 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:48:24,505 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:48:24,505 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:48:24,505 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:48:24,704 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:48:24,951 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:24,968 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:24,968 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:24,983 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:24,999 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:25,009 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:25,029 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:25,035 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:25,038 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:25,041 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:25,044 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:25,048 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:25,051 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:25,054 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:25,057 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:25,060 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:25,063 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:25,066 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:25,069 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:25,072 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:25,075 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:25,077 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:25,080 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:25,087 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:25,091 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,091 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:25,096 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:25,096 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:25,100 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,100 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:25,105 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,105 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:25,110 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,110 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:25,115 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,115 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:25,120 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:25,120 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:25,124 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,124 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:25,129 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:25,129 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:25,133 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:25,133 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:25,133 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:25,138 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:25,138 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:25,138 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:25,144 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:25,148 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:25,148 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:25,148 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:25,149 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:25,149 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:25,153 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:25,158 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:25,158 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:25,158 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:25,158 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:25,158 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:25,158 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:25,158 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:25,158 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:25,158 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:25,158 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:25,158 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:25,158 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:25,158 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:25,158 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:25,158 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:25,158 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:25,158 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:25,158 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:25,158 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:25,159 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:48:25,159 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:48:25,159 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:48:25,859 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:25,876 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:25,876 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:25,889 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:25,893 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:25,896 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:25,899 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:25,902 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:25,906 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:25,909 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:25,912 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:25,914 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:25,917 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:25,920 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:25,923 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:25,925 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:25,928 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:25,932 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:25,935 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:25,938 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:25,943 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:25,947 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,947 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:25,951 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:25,952 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:25,956 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,956 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:25,960 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,960 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:25,965 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,965 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:25,969 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,969 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:25,973 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:25,973 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:25,977 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:25,978 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:25,982 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:25,982 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:25,986 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:25,986 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:25,986 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:25,991 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:25,991 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:25,991 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:25,995 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:26,000 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:26,000 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:26,000 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:26,000 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:26,000 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:26,004 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:26,010 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:26,010 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:26,010 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:26,010 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:26,010 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:26,010 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:26,010 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:26,011 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:26,011 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:26,011 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:26,011 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:26,011 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:26,011 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:26,011 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:26,011 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:26,011 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:26,011 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:26,011 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:26,011 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:26,011 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:48:32,278 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:48:32,279 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:48:32,279 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:48:32,488 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:48:32,724 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:32,740 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:32,740 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:32,755 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:32,770 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:32,779 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:32,800 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:32,806 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:32,809 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:32,812 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:32,815 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:32,818 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:32,821 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:32,824 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:32,828 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:32,831 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:32,834 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:32,837 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:32,840 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:32,842 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:32,845 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:32,848 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:32,851 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:32,858 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:32,862 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:32,862 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:32,867 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:32,867 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:32,872 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:32,872 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:32,876 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:32,876 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:32,882 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:32,882 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:32,887 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:32,887 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:32,892 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:32,892 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:32,896 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:32,896 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:32,901 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:32,901 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:32,905 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:32,905 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:32,905 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:32,910 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:32,910 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:32,910 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:32,915 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:32,920 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:32,920 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:32,920 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:32,920 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:32,920 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:32,925 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:32,929 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:32,929 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:32,929 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:32,929 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:32,929 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:32,929 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:32,929 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:32,929 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:32,929 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:32,929 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:32,930 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:32,930 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:32,930 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:32,930 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:32,930 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:32,930 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:32,930 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:32,930 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:32,930 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:32,930 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:48:32,931 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:48:32,931 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:48:33,642 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:33,658 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:33,659 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:33,672 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:33,676 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:33,679 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:33,682 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:33,684 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:33,690 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:33,693 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:33,696 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:33,699 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:33,701 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:33,704 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:33,707 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:33,710 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:33,712 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:33,716 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:33,720 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:33,723 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:33,728 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:33,733 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:33,733 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:33,737 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:33,737 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:33,742 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:33,742 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:33,747 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:33,747 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:33,752 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:33,752 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:33,756 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:33,756 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:33,760 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:33,761 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:33,765 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:33,765 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:33,769 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:33,769 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:33,775 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:33,775 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:33,775 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:33,779 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:33,780 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:33,780 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:33,784 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:33,789 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:33,789 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:33,789 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:33,789 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:33,789 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:33,793 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:33,798 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:33,798 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:33,798 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:33,798 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:33,798 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:33,798 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:33,798 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:33,798 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:33,798 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:33,798 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:33,798 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:33,798 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:33,798 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:33,798 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:33,798 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:33,798 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:33,798 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:33,798 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:33,798 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:33,798 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:48:37,263 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:48:37,263 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:48:37,263 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:48:37,457 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:48:37,694 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:37,711 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:37,711 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:37,726 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:37,742 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:37,751 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:37,771 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:37,777 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:37,780 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:37,783 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:37,786 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:37,790 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:37,793 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:37,795 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:37,798 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:37,801 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:37,804 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:37,807 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:37,810 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:37,812 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:37,816 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:37,819 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:37,822 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:37,827 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:37,832 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:37,832 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:37,836 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:37,836 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:37,841 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:37,841 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:37,846 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:37,846 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:37,851 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:37,851 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:37,855 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:37,855 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:37,860 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:37,860 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:37,864 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:37,864 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:37,869 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:37,869 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:37,874 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:37,874 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:37,874 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:37,878 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:37,878 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:37,878 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:37,883 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:37,887 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:37,887 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:37,887 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:37,887 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:37,888 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:37,891 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:37,896 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:37,896 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:37,896 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:37,896 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:37,896 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:37,896 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:37,896 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:37,896 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:37,896 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:37,896 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:37,896 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:37,896 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:37,896 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:37,897 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:37,897 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:37,897 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:37,897 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:37,897 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:37,897 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:37,897 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:48:37,897 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:48:37,897 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:48:38,585 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:48:38,601 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:48:38,601 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:48:38,614 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:48:38,618 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:48:38,621 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:48:38,623 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:48:38,626 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:48:38,630 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:48:38,634 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:48:38,636 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:48:38,639 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:48:38,642 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:48:38,644 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:48:38,647 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:48:38,650 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:48:38,653 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:48:38,657 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:48:38,660 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:48:38,663 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:48:38,668 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:48:38,673 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:38,673 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:38,677 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:38,677 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:48:38,681 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:38,682 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:48:38,687 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:38,687 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:48:38,692 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:38,692 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:48:38,696 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:38,696 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:48:38,701 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:48:38,701 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:48:38,705 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:48:38,705 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:48:38,709 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:48:38,709 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:48:38,714 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:48:38,714 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:48:38,714 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:48:38,719 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:48:38,719 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:48:38,719 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:48:38,723 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:48:38,728 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:48:38,728 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:48:38,728 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:48:38,728 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:48:38,728 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:48:38,732 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:48:38,736 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:48:38,736 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:48:38,737 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:48:38,737 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:38,737 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:48:38,737 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:48:38,737 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:48:38,737 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:48:38,737 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:48:38,737 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:48:38,737 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:48:38,737 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:48:38,737 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:48:38,737 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:48:38,737 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:48:38,737 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:48:38,737 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:48:38,737 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:48:38,737 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:48:38,737 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:50:24,154 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:50:24,154 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:50:24,154 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:50:24,349 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:50:24,584 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:24,606 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:24,606 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:24,630 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:24,653 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:24,669 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:50:24,697 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:50:24,705 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:50:24,711 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:50:24,716 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:50:24,721 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:50:24,725 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:50:24,729 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:50:24,732 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:50:24,734 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:50:24,738 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:50:24,742 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:50:24,744 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:50:24,747 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:50:24,750 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:50:24,754 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:50:24,757 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:50:24,760 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:50:24,766 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:50:24,770 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:24,770 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:24,774 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:24,774 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:50:24,779 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:24,779 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:24,784 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:24,784 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:50:24,789 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:24,789 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:50:24,793 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:24,793 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:50:24,797 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:24,797 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:50:24,802 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:24,802 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:50:24,806 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:50:24,806 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:50:24,811 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:50:24,811 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:50:24,811 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:50:24,815 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:50:24,815 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:50:24,815 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:50:24,820 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:50:24,824 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:50:24,824 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:50:24,824 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:50:24,824 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:50:24,825 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:50:24,829 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:50:24,833 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:50:24,833 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:50:24,833 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:50:24,833 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:24,833 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:50:24,833 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:24,833 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:50:24,833 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:50:24,833 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:50:24,833 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:50:24,833 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:50:24,834 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:50:24,834 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:50:24,834 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:50:24,834 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:50:24,834 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:50:24,834 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:50:24,834 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:50:24,834 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:50:24,834 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:50:24,834 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:50:24,834 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:50:25,524 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:25,540 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:25,541 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:50:25,554 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:50:25,558 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:50:25,561 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:50:25,564 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:50:25,566 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:50:25,571 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:50:25,574 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:50:25,577 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:50:25,580 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:50:25,582 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:50:25,585 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:50:25,588 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:50:25,591 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:50:25,593 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:50:25,597 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:50:25,600 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:50:25,603 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:50:25,609 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:50:25,613 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:25,613 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:25,617 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:25,617 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:50:25,622 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:25,622 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:25,627 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:25,627 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:50:25,633 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:25,633 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:50:25,637 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:25,637 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:50:25,642 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:25,642 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:50:25,649 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:25,649 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:50:25,654 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:50:25,654 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:50:25,659 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:50:25,659 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:50:25,659 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:50:25,664 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:50:25,664 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:50:25,664 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:50:25,668 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:50:25,673 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:50:25,673 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:50:25,673 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:50:25,673 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:50:25,673 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:50:25,677 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:50:25,682 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:50:25,682 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:50:25,683 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:50:25,683 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:25,683 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:50:25,683 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:25,683 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:50:25,683 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:50:25,683 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:50:25,683 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:50:25,683 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:50:25,683 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:50:25,683 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:50:25,683 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:50:25,683 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:50:25,683 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:50:25,683 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:50:25,683 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:50:25,684 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:50:25,684 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:50:27,372 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:50:27,372 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:50:27,372 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:50:27,563 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:50:27,807 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:27,824 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:27,824 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:27,839 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:27,854 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:27,863 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:50:27,884 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:50:27,890 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:50:27,892 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:50:27,895 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:50:27,898 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:50:27,901 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:50:27,904 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:50:27,907 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:50:27,910 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:50:27,913 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:50:27,915 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:50:27,918 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:50:27,921 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:50:27,924 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:50:27,927 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:50:27,929 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:50:27,932 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:50:27,939 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:50:27,943 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:27,943 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:27,947 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:27,947 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:50:27,951 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:27,951 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:27,956 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:27,956 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:50:27,961 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:27,961 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:50:27,965 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:27,965 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:50:27,970 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:27,970 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:50:27,974 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:27,974 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:50:27,978 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:50:27,978 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:50:27,983 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:50:27,983 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:50:27,983 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:50:27,987 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:50:27,987 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:50:27,987 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:50:27,992 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:50:27,997 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:50:27,997 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:50:27,997 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:50:27,997 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:50:27,997 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:50:28,001 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:50:28,006 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:50:28,006 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:50:28,006 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:50:28,006 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,006 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:50:28,006 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,006 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,006 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,006 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,006 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:50:28,006 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,006 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:50:28,006 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,006 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:50:28,006 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,006 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:50:28,006 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:50:28,006 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:50:28,007 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:50:28,007 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:50:28,007 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:50:28,007 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:50:28,711 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:28,728 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:28,729 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:50:28,741 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:50:28,746 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:50:28,748 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:50:28,751 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:50:28,754 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:50:28,757 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:50:28,760 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:50:28,763 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:50:28,766 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:50:28,768 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:50:28,771 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:50:28,774 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:50:28,777 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:50:28,780 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:50:28,783 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:50:28,786 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:50:28,789 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:50:28,795 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:50:28,800 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:28,800 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:28,804 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:28,804 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:50:28,809 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:28,809 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:28,814 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:28,814 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:50:28,819 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:28,819 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:50:28,823 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:28,823 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:50:28,828 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:28,828 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:50:28,832 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:28,833 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:50:28,837 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:50:28,838 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:50:28,843 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:50:28,843 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:50:28,843 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:50:28,848 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:50:28,848 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:50:28,848 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:50:28,852 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:50:28,857 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:50:28,857 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:50:28,857 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:50:28,857 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:50:28,857 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:50:28,862 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:50:28,867 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:50:28,867 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:50:28,867 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:50:28,867 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,867 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:50:28,867 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,867 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,867 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,867 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,867 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:50:28,867 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,867 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:50:28,867 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,867 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:50:28,867 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:50:28,867 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:50:28,867 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:50:28,867 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:50:28,867 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:50:28,868 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:50:29,806 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:50:29,806 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:50:29,806 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:50:29,994 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:50:30,225 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:30,241 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:30,242 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:30,256 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:30,271 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:30,280 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:50:30,301 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:50:30,307 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:50:30,310 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:50:30,313 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:50:30,315 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:50:30,319 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:50:30,323 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:50:30,325 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:50:30,328 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:50:30,331 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:50:30,334 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:50:30,337 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:50:30,340 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:50:30,344 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:50:30,348 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:50:30,351 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:50:30,354 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:50:30,361 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:50:30,365 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:30,365 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:30,370 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:30,370 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:50:30,375 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:30,376 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:30,381 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:30,381 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:50:30,387 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:30,387 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:50:30,394 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:30,394 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:50:30,403 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:30,403 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:50:30,411 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:30,411 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:50:30,416 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:50:30,416 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:50:30,422 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:50:30,422 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:50:30,422 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:50:30,428 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:50:30,428 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:50:30,428 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:50:30,436 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:50:30,444 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:50:30,444 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:50:30,444 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:50:30,444 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:50:30,445 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:50:30,450 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:50:30,456 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:50:30,456 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:50:30,456 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:50:30,456 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:30,456 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:50:30,456 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:30,457 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:50:30,457 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:50:30,457 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:50:30,457 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:50:30,457 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:50:30,457 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:50:30,457 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:50:30,457 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:50:30,457 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:50:30,457 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:50:30,457 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:50:30,457 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:50:30,457 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:50:30,457 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:50:30,458 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:50:30,458 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:50:31,175 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:31,191 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:31,191 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:50:31,204 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:50:31,208 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:50:31,211 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:50:31,214 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:50:31,218 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:50:31,221 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:50:31,224 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:50:31,227 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:50:31,230 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:50:31,232 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:50:31,235 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:50:31,238 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:50:31,241 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:50:31,245 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:50:31,248 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:50:31,250 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:50:31,253 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:50:31,259 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:50:31,264 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:31,264 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:31,270 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:31,271 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:50:31,275 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:31,276 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:31,280 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:31,280 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:50:31,285 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:31,285 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:50:31,289 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:31,289 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:50:31,294 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:31,294 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:50:31,299 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:31,299 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:50:31,304 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:50:31,304 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:50:31,308 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:50:31,309 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:50:31,309 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:50:31,313 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:50:31,313 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:50:31,313 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:50:31,318 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:50:31,322 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:50:31,322 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:50:31,322 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:50:31,322 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:50:31,322 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:50:31,327 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:50:31,331 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:50:31,331 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:50:31,332 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:50:31,332 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:31,332 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:50:31,332 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:31,332 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:50:31,332 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:50:31,332 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:50:31,332 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:50:31,332 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:50:31,332 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:50:31,332 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:50:31,332 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:50:31,332 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:50:31,332 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:50:31,332 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:50:31,332 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:50:31,332 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:50:31,332 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:50:32,270 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:50:32,270 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:50:32,270 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:50:32,458 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:50:32,690 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:32,707 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:32,707 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:32,722 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:32,737 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:32,746 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:50:32,766 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:50:32,772 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:50:32,775 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:50:32,777 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:50:32,780 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:50:32,783 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:50:32,786 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:50:32,789 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:50:32,792 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:50:32,795 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:50:32,797 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:50:32,800 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:50:32,803 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:50:32,805 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:50:32,808 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:50:32,811 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:50:32,814 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:50:32,820 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:50:32,825 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:32,825 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:32,829 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:32,829 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:50:32,833 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:32,834 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:32,838 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:32,838 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:50:32,842 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:32,842 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:50:32,846 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:32,846 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:50:32,852 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:32,852 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:50:32,856 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:32,856 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:50:32,860 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:50:32,860 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:50:32,865 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:50:32,865 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:50:32,865 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:50:32,869 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:50:32,869 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:50:32,869 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:50:32,873 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:50:32,878 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:50:32,879 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:50:32,879 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:50:32,879 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:50:32,879 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:50:32,883 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:50:32,888 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:50:32,888 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:50:32,888 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:50:32,888 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:32,888 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:50:32,888 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:32,888 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:50:32,888 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:50:32,888 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:50:32,888 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:50:32,888 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:50:32,888 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:50:32,888 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:50:32,888 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:50:32,888 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:50:32,889 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:50:32,889 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:50:32,889 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:50:32,889 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:50:32,889 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:50:32,889 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:50:32,890 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:50:33,574 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:50:33,590 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:50:33,591 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:50:33,605 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:50:33,609 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:50:33,612 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:50:33,615 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:50:33,617 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:50:33,621 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:50:33,624 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:50:33,627 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:50:33,630 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:50:33,633 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:50:33,636 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:50:33,638 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:50:33,641 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:50:33,644 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:50:33,647 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:50:33,650 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:50:33,653 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:50:33,659 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:50:33,663 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:33,663 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:33,668 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:33,668 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:50:33,672 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:33,672 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:50:33,677 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:33,677 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:50:33,681 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:33,681 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:50:33,687 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:33,687 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:50:33,691 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:50:33,691 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:50:33,695 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:50:33,695 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:50:33,700 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:50:33,700 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:50:33,704 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:50:33,704 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:50:33,704 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:50:33,709 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:50:33,709 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:50:33,709 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:50:33,714 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:50:33,718 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:50:33,718 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:50:33,719 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:50:33,719 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:50:33,719 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:50:33,723 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:50:33,727 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:50:33,727 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:50:33,728 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:50:33,728 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:33,728 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:50:33,728 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:50:33,728 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:50:33,728 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:50:33,728 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:50:33,728 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:50:33,728 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:50:33,728 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:50:33,728 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:50:33,728 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:50:33,728 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:50:33,728 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:50:33,728 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:50:33,728 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:50:33,728 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:50:33,728 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:51:39,806 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:51:39,806 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:51:39,807 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:51:40,001 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:51:40,236 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:40,253 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:40,253 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:40,268 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:40,283 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:40,293 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:51:40,313 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:51:40,318 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:51:40,321 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:51:40,324 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:51:40,327 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:51:40,330 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:51:40,334 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:51:40,337 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:51:40,340 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:51:40,342 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:51:40,345 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:51:40,348 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:51:40,351 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:51:40,354 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:51:40,357 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:51:40,359 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:51:40,363 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:51:40,369 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:51:40,374 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:40,374 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:40,378 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:40,378 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:51:40,382 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:40,382 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:40,386 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:40,386 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:51:40,392 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:40,392 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:51:40,396 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:40,396 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:51:40,400 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:40,400 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:51:40,404 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:40,404 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:51:40,409 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:51:40,409 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:51:40,413 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:51:40,413 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:51:40,413 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:51:40,417 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:51:40,418 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:51:40,418 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:51:40,422 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:51:40,427 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:51:40,427 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:51:40,427 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:51:40,427 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:51:40,427 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:51:40,431 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:51:40,436 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:51:40,436 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:51:40,436 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:51:40,436 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:40,436 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:51:40,436 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:40,436 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:51:40,436 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:51:40,436 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:51:40,436 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:51:40,436 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:51:40,436 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:51:40,436 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:51:40,436 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:51:40,436 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:51:40,437 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:51:40,437 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:51:40,437 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:51:40,437 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:51:40,437 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:51:40,437 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:51:40,437 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:51:41,129 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:41,145 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:41,146 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:51:41,159 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:51:41,163 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:51:41,166 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:51:41,169 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:51:41,171 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:51:41,175 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:51:41,178 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:51:41,181 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:51:41,183 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:51:41,186 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:51:41,189 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:51:41,192 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:51:41,194 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:51:41,197 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:51:41,200 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:51:41,202 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:51:41,205 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:51:41,211 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:51:41,215 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:41,216 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:41,220 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:41,220 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:51:41,224 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:41,224 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:41,228 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:41,228 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:51:41,232 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:41,232 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:51:41,237 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:41,237 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:51:41,241 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:41,242 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:51:41,246 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:41,246 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:51:41,250 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:51:41,251 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:51:41,255 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:51:41,255 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:51:41,255 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:51:41,259 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:51:41,259 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:51:41,259 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:51:41,264 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:51:41,269 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:51:41,269 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:51:41,269 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:51:41,269 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:51:41,269 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:51:41,273 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:51:41,277 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:51:41,277 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:51:41,277 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:51:41,278 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:41,278 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:51:41,278 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:41,278 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:51:41,278 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:51:41,278 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:51:41,278 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:51:41,278 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:51:41,278 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:51:41,278 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:51:41,278 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:51:41,278 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:51:41,278 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:51:41,278 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:51:41,278 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:51:41,278 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:51:41,278 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:51:43,776 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:51:43,776 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:51:43,776 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:51:43,965 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:51:44,206 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:44,227 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:44,227 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:44,245 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:44,260 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:44,270 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:51:44,290 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:51:44,296 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:51:44,299 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:51:44,302 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:51:44,305 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:51:44,308 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:51:44,312 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:51:44,314 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:51:44,317 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:51:44,320 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:51:44,323 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:51:44,326 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:51:44,328 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:51:44,331 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:51:44,334 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:51:44,337 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:51:44,340 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:51:44,346 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:51:44,350 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:44,351 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:44,355 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:44,355 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:51:44,360 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:44,360 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:44,365 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:44,365 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:51:44,370 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:44,370 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:51:44,374 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:44,375 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:51:44,379 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:44,379 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:51:44,383 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:44,383 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:51:44,388 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:51:44,388 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:51:44,392 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:51:44,393 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:51:44,393 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:51:44,398 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:51:44,398 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:51:44,398 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:51:44,402 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:51:44,407 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:51:44,407 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:51:44,407 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:51:44,407 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:51:44,407 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:51:44,411 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:51:44,416 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:51:44,416 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:51:44,416 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:51:44,416 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:44,416 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:51:44,416 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:44,416 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:51:44,416 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:51:44,416 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:51:44,416 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:51:44,416 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:51:44,416 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:51:44,417 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:51:44,417 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:51:44,417 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:51:44,417 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:51:44,417 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:51:44,417 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:51:44,417 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:51:44,417 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:51:44,417 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:51:44,417 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:51:45,154 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:45,172 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:45,173 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:51:45,187 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:51:45,191 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:51:45,194 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:51:45,197 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:51:45,199 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:51:45,203 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:51:45,206 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:51:45,208 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:51:45,211 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:51:45,214 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:51:45,217 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:51:45,220 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:51:45,222 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:51:45,225 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:51:45,228 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:51:45,230 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:51:45,234 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:51:45,240 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:51:45,244 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:45,245 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:45,249 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:45,249 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:51:45,254 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:45,254 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:45,258 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:45,258 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:51:45,263 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:45,263 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:51:45,268 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:45,269 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:51:45,274 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:45,274 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:51:45,279 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:45,279 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:51:45,283 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:51:45,283 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:51:45,288 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:51:45,288 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:51:45,288 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:51:45,293 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:51:45,293 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:51:45,293 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:51:45,298 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:51:45,303 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:51:45,303 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:51:45,303 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:51:45,303 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:51:45,304 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:51:45,308 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:51:45,312 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:51:45,312 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:51:45,312 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:51:45,312 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:45,312 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:51:45,312 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:45,313 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:51:45,313 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:51:45,313 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:51:45,313 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:51:45,313 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:51:45,313 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:51:45,313 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:51:45,313 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:51:45,313 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:51:45,313 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:51:45,313 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:51:45,313 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:51:45,313 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:51:45,313 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:51:49,276 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:51:49,277 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:51:49,277 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:51:49,477 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:51:49,732 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:49,749 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:49,749 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:49,764 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:49,779 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:49,789 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:51:49,815 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:51:49,823 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:51:49,827 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:51:49,830 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:51:49,833 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:51:49,837 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:51:49,841 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:51:49,845 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:51:49,849 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:51:49,852 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:51:49,856 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:51:49,860 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:51:49,863 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:51:49,867 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:51:49,872 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:51:49,876 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:51:49,879 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:51:49,885 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:51:49,889 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:49,890 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:49,894 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:49,894 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:51:49,899 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:49,900 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:49,905 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:49,905 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:51:49,910 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:49,910 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:51:49,914 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:49,914 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:51:49,920 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:49,920 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:51:49,926 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:49,927 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:51:49,934 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:51:49,934 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:51:49,940 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:51:49,940 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:51:49,940 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:51:49,944 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:51:49,945 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:51:49,945 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:51:49,949 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:51:49,957 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:51:49,957 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:51:49,957 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:51:49,957 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:51:49,957 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:51:49,963 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:51:49,969 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:51:49,969 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:51:49,969 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:51:49,969 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:49,969 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:51:49,970 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:49,970 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:51:49,970 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:51:49,970 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:51:49,970 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:51:49,970 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:51:49,970 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:51:49,970 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:51:49,970 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:51:49,970 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:51:49,970 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:51:49,970 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:51:49,970 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:51:49,970 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:51:49,970 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:51:49,971 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:51:49,971 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:51:50,681 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:50,698 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:50,699 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:51:50,712 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:51:50,717 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:51:50,720 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:51:50,723 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:51:50,725 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:51:50,729 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:51:50,732 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:51:50,735 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:51:50,737 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:51:50,740 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:51:50,743 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:51:50,746 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:51:50,749 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:51:50,752 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:51:50,755 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:51:50,757 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:51:50,761 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:51:50,766 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:51:50,772 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:50,772 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:50,776 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:50,776 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:51:50,781 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:50,781 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:51:50,785 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:50,785 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:51:50,790 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:50,790 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:51:50,794 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:50,794 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:51:50,798 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:51:50,799 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:51:50,804 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:51:50,804 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:51:50,808 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:51:50,808 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:51:50,812 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:51:50,812 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:51:50,813 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:51:50,817 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:51:50,817 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:51:50,817 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:51:50,821 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:51:50,826 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:51:50,826 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:51:50,826 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:51:50,826 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:51:50,826 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:51:50,832 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:51:50,836 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:51:50,836 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:51:50,836 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:51:50,836 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:50,836 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:51:50,836 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:51:50,837 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:51:50,837 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:51:50,837 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:51:50,837 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:51:50,837 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:51:50,837 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:51:50,837 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:51:50,837 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:51:50,837 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:51:50,837 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:51:50,837 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:51:50,837 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:51:50,837 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:51:50,837 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:51:59,421 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:51:59,421 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:51:59,421 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:51:59,607 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:51:59,846 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:59,864 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:59,864 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:59,880 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:51:59,897 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:51:59,907 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:51:59,934 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:51:59,943 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:51:59,947 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:51:59,952 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:51:59,956 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:51:59,961 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:51:59,969 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:51:59,977 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:51:59,981 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:51:59,988 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:51:59,995 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:00,003 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:00,009 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:00,015 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:00,021 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:00,028 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:00,034 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:00,042 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:00,048 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:00,048 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:00,058 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:00,058 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:00,066 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:00,066 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:00,075 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:00,075 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:00,082 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:00,082 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:00,089 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:00,090 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:00,097 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:00,097 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:00,105 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:00,105 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:00,113 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:00,113 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:00,119 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:00,119 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:00,119 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:00,126 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:00,127 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:00,127 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:00,133 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:00,139 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:00,140 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:00,140 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:00,140 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:00,140 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:00,145 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:00,152 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:00,152 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:00,152 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:00,152 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:00,152 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:00,152 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:00,152 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:00,152 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:00,152 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:00,152 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:00,152 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:00,152 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:00,153 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:00,153 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:00,153 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:00,153 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:00,153 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:00,153 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:00,153 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:00,153 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:00,154 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:52:00,154 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:52:00,936 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:00,952 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:00,953 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:00,966 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:00,970 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:00,973 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:00,976 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:00,979 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:00,983 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:00,986 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:00,989 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:00,991 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:00,994 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:00,997 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:01,000 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:01,003 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:01,005 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:01,009 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:01,011 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:01,014 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:01,020 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:01,024 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:01,025 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:01,029 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:01,029 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:01,034 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:01,034 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:01,040 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:01,040 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:01,044 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:01,044 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:01,048 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:01,049 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:01,053 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:01,053 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:01,057 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:01,058 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:01,062 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:01,062 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:01,068 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:01,068 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:01,068 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:01,073 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:01,073 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:01,073 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:01,077 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:01,081 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:01,081 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:01,082 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:01,082 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:01,082 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:01,086 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:01,090 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:01,091 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:01,091 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:01,091 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:01,091 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:01,091 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:01,091 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:01,091 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:01,091 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:01,091 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:01,091 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:01,091 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:01,092 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:01,092 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:01,092 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:01,092 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:01,092 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:01,092 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:01,092 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:01,092 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:02,337 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:52:02,338 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:52:02,338 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:52:02,526 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:52:02,758 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:02,775 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:02,775 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:02,790 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:02,804 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:02,813 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:02,835 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:02,841 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:02,844 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:02,847 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:02,850 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:02,853 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:02,856 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:02,859 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:02,862 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:02,864 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:02,867 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:02,870 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:02,874 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:02,877 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:02,880 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:02,882 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:02,885 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:02,891 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:02,896 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:02,896 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:02,900 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:02,901 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:02,906 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:02,906 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:02,910 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:02,910 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:02,914 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:02,915 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:02,919 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:02,919 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:02,924 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:02,924 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:02,928 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:02,929 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:02,934 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:02,934 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:02,942 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:02,942 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:02,942 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:02,949 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:02,949 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:02,949 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:02,954 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:02,959 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:02,959 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:02,959 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:02,959 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:02,959 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:02,963 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:02,968 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:02,968 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:02,968 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:02,968 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:02,968 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:02,968 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:02,968 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:02,968 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:02,968 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:02,968 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:02,968 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:02,968 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:02,968 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:02,968 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:02,968 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:02,968 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:02,969 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:02,969 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:02,969 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:02,969 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:02,969 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:52:02,970 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:52:03,652 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:03,668 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:03,669 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:03,682 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:03,687 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:03,689 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:03,692 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:03,695 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:03,700 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:03,703 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:03,707 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:03,710 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:03,712 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:03,715 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:03,718 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:03,721 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:03,723 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:03,727 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:03,729 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:03,732 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:03,739 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:03,743 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:03,743 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:03,747 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:03,747 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:03,752 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:03,752 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:03,756 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:03,757 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:03,762 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:03,762 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:03,767 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:03,767 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:03,772 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:03,772 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:03,776 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:03,776 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:03,781 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:03,781 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:03,785 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:03,785 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:03,785 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:03,791 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:03,792 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:03,792 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:03,796 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:03,801 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:03,801 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:03,801 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:03,801 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:03,801 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:03,805 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:03,810 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:03,810 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:03,810 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:03,810 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:03,810 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:03,810 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:03,810 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:03,810 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:03,810 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:03,810 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:03,810 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:03,811 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:03,811 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:03,811 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:03,811 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:03,811 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:03,811 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:03,811 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:03,811 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:03,811 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:07,629 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:52:07,629 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:52:07,629 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:52:07,828 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:52:08,085 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:08,102 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:08,102 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:08,117 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:08,132 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:08,142 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:08,162 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:08,168 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:08,171 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:08,173 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:08,176 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:08,179 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:08,182 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:08,185 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:08,188 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:08,191 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:08,194 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:08,197 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:08,200 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:08,203 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:08,206 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:08,208 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:08,211 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:08,219 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:08,223 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:08,223 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:08,228 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:08,228 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:08,232 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:08,233 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:08,237 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:08,237 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:08,242 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:08,242 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:08,247 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:08,247 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:08,251 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:08,251 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:08,256 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:08,256 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:08,260 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:08,260 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:08,264 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:08,264 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:08,264 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:08,269 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:08,269 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:08,269 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:08,275 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:08,280 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:08,280 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:08,280 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:08,280 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:08,280 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:08,284 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:08,288 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:08,288 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:08,288 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:08,288 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:08,288 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:08,289 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:08,289 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:08,289 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:08,289 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:08,289 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:08,289 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:08,289 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:08,289 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:08,289 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:08,289 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:08,289 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:08,289 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:08,289 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:08,289 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:08,289 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:08,289 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:52:08,290 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:52:09,002 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:09,018 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:09,019 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:09,033 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:09,037 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:09,040 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:09,042 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:09,045 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:09,048 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:09,051 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:09,055 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:09,058 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:09,061 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:09,064 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:09,067 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:09,070 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:09,072 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:09,075 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:09,078 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:09,081 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:09,087 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:09,092 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:09,092 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:09,096 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:09,096 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:09,100 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:09,100 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:09,104 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:09,105 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:09,109 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:09,110 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:09,115 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:09,115 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:09,120 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:09,120 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:09,124 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:09,124 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:09,128 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:09,128 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:09,133 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:09,133 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:09,133 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:09,137 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:09,137 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:09,138 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:09,143 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:09,148 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:09,148 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:09,148 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:09,148 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:09,148 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:09,153 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:09,157 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:09,157 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:09,157 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:09,157 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:09,157 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:09,157 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:09,157 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:09,157 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:09,158 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:09,158 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:09,158 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:09,158 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:09,158 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:09,158 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:09,158 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:09,158 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:09,158 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:09,158 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:09,158 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:09,158 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:10,099 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:52:10,100 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:52:10,100 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:52:10,318 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:52:10,573 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:10,590 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:10,591 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:10,606 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:10,622 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:10,631 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:10,653 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:10,659 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:10,662 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:10,664 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:10,667 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:10,671 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:10,675 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:10,678 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:10,680 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:10,683 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:10,686 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:10,688 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:10,691 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:10,694 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:10,698 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:10,702 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:10,705 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:10,711 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:10,715 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:10,715 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:10,720 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:10,720 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:10,724 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:10,724 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:10,729 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:10,730 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:10,734 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:10,734 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:10,739 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:10,739 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:10,743 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:10,743 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:10,747 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:10,747 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:10,752 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:10,752 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:10,757 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:10,757 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:10,757 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:10,761 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:10,761 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:10,761 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:10,766 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:10,770 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:10,770 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:10,770 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:10,770 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:10,770 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:10,774 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:10,779 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:10,779 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:10,779 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:10,779 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:10,779 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:10,779 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:10,779 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:10,779 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:10,779 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:10,779 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:10,779 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:10,779 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:10,779 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:10,779 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:10,779 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:10,779 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:10,779 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:10,779 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:10,779 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:10,779 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:10,780 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:52:10,780 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:52:11,470 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:11,485 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:11,486 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:11,499 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:11,503 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:11,506 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:11,510 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:11,512 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:11,516 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:11,519 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:11,522 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:11,525 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:11,528 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:11,531 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:11,534 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:11,537 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:11,541 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:11,544 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:11,546 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:11,549 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:11,555 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:11,559 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:11,559 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:11,563 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:11,563 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:11,568 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:11,568 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:11,573 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:11,573 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:11,577 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:11,577 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:11,581 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:11,581 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:11,586 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:11,586 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:11,590 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:11,590 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:11,595 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:11,595 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:11,599 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:11,599 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:11,600 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:11,604 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:11,604 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:11,604 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:11,608 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:11,612 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:11,613 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:11,613 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:11,613 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:11,613 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:11,617 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:11,621 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:11,621 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:11,622 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:11,622 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:11,622 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:11,622 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:11,622 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:11,622 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:11,622 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:11,622 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:11,622 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:11,622 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:11,622 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:11,622 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:11,622 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:11,622 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:11,622 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:11,622 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:11,622 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:11,622 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:14,956 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:52:14,956 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:52:14,956 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:52:15,155 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:52:15,398 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:15,415 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:15,415 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:15,431 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:15,446 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:15,455 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:15,476 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:15,481 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:15,484 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:15,487 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:15,490 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:15,493 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:15,496 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:15,499 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:15,503 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:15,506 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:15,509 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:15,512 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:15,515 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:15,518 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:15,521 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:15,525 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:15,529 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:15,535 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:15,539 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:15,540 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:15,544 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:15,544 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:15,549 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:15,549 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:15,554 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:15,555 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:15,560 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:15,560 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:15,564 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:15,564 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:15,569 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:15,569 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:15,574 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:15,574 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:15,578 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:15,579 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:15,585 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:15,585 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:15,585 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:15,590 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:15,590 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:15,590 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:15,595 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:15,600 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:15,600 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:15,600 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:15,600 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:15,600 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:15,605 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:15,610 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:15,611 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:15,611 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:15,611 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:15,611 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:15,611 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:15,611 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:15,611 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:15,611 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:15,611 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:15,611 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:15,611 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:15,611 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:15,611 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:15,611 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:15,611 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:15,611 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:15,612 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:15,612 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:15,612 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:15,612 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:52:15,612 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:52:16,332 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:16,348 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:16,349 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:16,364 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:16,369 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:16,373 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:16,376 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:16,380 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:16,385 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:16,389 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:16,392 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:16,396 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:16,399 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:16,402 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:16,405 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:16,409 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:16,413 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:16,418 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:16,422 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:16,425 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:16,431 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:16,435 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:16,435 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:16,440 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:16,441 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:16,445 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:16,445 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:16,450 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:16,450 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:16,454 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:16,454 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:16,459 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:16,459 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:16,464 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:16,464 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:16,469 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:16,469 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:16,474 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:16,474 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:16,478 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:16,478 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:16,478 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:16,483 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:16,483 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:16,483 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:16,487 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:16,492 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:16,492 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:16,492 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:16,493 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:16,493 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:16,497 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:16,502 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:16,502 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:16,502 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:16,502 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:16,502 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:16,502 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:16,502 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:16,502 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:16,502 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:16,502 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:16,502 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:16,502 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:16,503 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:16,503 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:16,503 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:16,503 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:16,503 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:16,503 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:16,503 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:16,503 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:17,449 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:52:17,449 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:52:17,449 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:52:17,637 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:52:17,871 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:17,888 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:17,888 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:17,903 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:17,917 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:17,927 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:17,948 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:17,955 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:17,958 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:17,961 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:17,964 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:17,967 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:17,970 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:17,973 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:17,976 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:17,978 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:17,982 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:17,986 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:17,989 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:17,993 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:17,996 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:17,999 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:18,002 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:18,007 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:18,013 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,013 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:18,017 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:18,017 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:18,022 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,022 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:18,027 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,027 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:18,031 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,031 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:18,035 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,035 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:18,040 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:18,040 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:18,045 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,045 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:18,049 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:18,049 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:18,054 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:18,054 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:18,054 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:18,058 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:18,058 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:18,058 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:18,062 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:18,068 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:18,068 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:18,068 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:18,068 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:18,069 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:18,073 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:18,077 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:18,077 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:18,077 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:18,077 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,078 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:18,078 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,078 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,078 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,078 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,078 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:18,078 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,078 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:18,078 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,078 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:18,078 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,078 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:18,078 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:18,078 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:18,078 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:18,078 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:18,079 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:52:18,079 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:52:18,765 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:18,781 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:18,782 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:18,794 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:18,799 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:18,802 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:18,805 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:18,808 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:18,811 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:18,814 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:18,817 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:18,820 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:18,822 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:18,825 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:18,828 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:18,832 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:18,835 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:18,838 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:18,840 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:18,843 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:18,849 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:18,853 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,853 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:18,858 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:18,858 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:18,863 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,863 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:18,867 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,868 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:18,872 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,872 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:18,877 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,877 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:18,881 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:18,881 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:18,886 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:18,886 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:18,891 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:18,891 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:18,896 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:18,896 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:18,896 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:18,900 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:18,900 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:18,900 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:18,905 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:18,909 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:18,909 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:18,910 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:18,910 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:18,910 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:18,915 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:18,919 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:18,919 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:18,920 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:18,920 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,920 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:18,920 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,920 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,920 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,920 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,920 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:18,920 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,920 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:18,920 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,920 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:18,920 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:18,920 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:18,920 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:18,920 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:18,920 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:18,920 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:40,506 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:52:40,506 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:52:40,506 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:52:40,700 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:52:40,978 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:40,995 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:40,995 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:41,010 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:41,025 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:41,034 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:41,054 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:41,059 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:41,062 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:41,065 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:41,069 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:41,072 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:41,075 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:41,078 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:41,080 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:41,083 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:41,086 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:41,088 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:41,091 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:41,094 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:41,097 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:41,100 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:41,103 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:41,108 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:41,113 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,113 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:41,117 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:41,117 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:41,121 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,121 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:41,126 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,126 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:41,130 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,131 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:41,135 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,135 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:41,139 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:41,139 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:41,143 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,144 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:41,148 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:41,148 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:41,153 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:41,153 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:41,153 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:41,157 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:41,157 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:41,157 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:41,161 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:41,166 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:41,166 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:41,166 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:41,166 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:41,166 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:41,170 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:41,174 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:41,174 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:41,174 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:41,175 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:41,175 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:41,175 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:41,175 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:41,175 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:41,175 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:41,175 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:41,175 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:41,175 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:41,175 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:41,175 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:41,175 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:41,175 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:41,175 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:41,175 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:41,176 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:41,176 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:41,176 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:52:41,176 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:52:41,857 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:41,873 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:41,874 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:41,886 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:41,891 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:41,894 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:41,897 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:41,899 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:41,904 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:41,907 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:41,910 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:41,912 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:41,915 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:41,917 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:41,920 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:41,923 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:41,926 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:41,929 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:41,932 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:41,935 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:41,941 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:41,945 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,945 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:41,949 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:41,949 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:41,954 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,954 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:41,959 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,959 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:41,964 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,964 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:41,969 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,969 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:41,976 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:41,976 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:41,981 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:41,982 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:41,989 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:41,989 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:41,994 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:41,994 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:41,994 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:41,999 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:41,999 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:41,999 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:42,004 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:42,008 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:42,008 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:42,008 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:42,008 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:42,008 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:42,013 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:42,019 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:42,019 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:42,019 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:42,019 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:42,019 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:42,020 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:42,020 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:42,020 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:42,020 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:42,020 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:42,020 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:42,020 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:42,020 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:42,020 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:42,020 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:42,020 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:42,020 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:42,020 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:42,020 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:42,020 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:48,291 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:52:48,291 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:52:48,291 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:52:48,482 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:52:48,720 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:48,737 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:48,737 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:48,752 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:48,767 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:48,777 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:48,797 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:48,804 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:48,807 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:48,809 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:48,812 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:48,815 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:48,818 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:48,821 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:48,824 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:48,827 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:48,831 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:48,834 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:48,837 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:48,840 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:48,843 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:48,845 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:48,848 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:48,856 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:48,860 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:48,860 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:48,865 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:48,865 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:48,869 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:48,869 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:48,874 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:48,874 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:48,878 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:48,879 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:48,884 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:48,884 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:48,889 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:48,889 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:48,893 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:48,893 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:48,898 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:48,898 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:48,903 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:48,903 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:48,903 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:48,907 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:48,907 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:48,908 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:48,912 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:48,917 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:48,917 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:48,917 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:48,917 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:48,918 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:48,922 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:48,927 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:48,927 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:48,927 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:48,927 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:48,927 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:48,927 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:48,927 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:48,927 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:48,927 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:48,927 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:48,927 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:48,927 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:48,927 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:48,927 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:48,927 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:48,927 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:48,927 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:48,927 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:48,927 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:48,927 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:52:48,928 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:52:48,928 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:52:49,641 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:52:49,657 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:52:49,658 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:52:49,671 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:52:49,676 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:52:49,678 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:52:49,681 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:52:49,685 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:52:49,689 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:52:49,691 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:52:49,694 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:52:49,697 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:52:49,700 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:52:49,703 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:52:49,706 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:52:49,709 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:52:49,712 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:52:49,716 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:52:49,719 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:52:49,722 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:52:49,727 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:52:49,731 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:49,732 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:49,736 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:49,736 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:52:49,741 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:49,741 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:52:49,746 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:49,746 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:52:49,750 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:49,750 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:52:49,755 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:49,755 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:52:49,759 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:52:49,759 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:52:49,763 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:52:49,763 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:52:49,768 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:52:49,769 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:52:49,774 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:52:49,774 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:52:49,774 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:52:49,778 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:52:49,779 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:52:49,779 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:52:49,783 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:52:49,787 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:52:49,788 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:52:49,788 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:52:49,788 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:52:49,788 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:52:49,792 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:52:49,796 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:52:49,797 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:52:49,797 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:52:49,797 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:49,797 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:52:49,797 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:52:49,797 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:52:49,797 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:52:49,797 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:52:49,797 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:52:49,797 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:52:49,798 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:52:49,798 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:52:49,798 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:52:49,798 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:52:49,798 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:52:49,798 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:52:49,798 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:52:49,798 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:52:49,798 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:11,574 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:54:11,574 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:54:11,574 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:54:11,768 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:54:12,034 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:12,051 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:12,051 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:12,066 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:12,081 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:12,090 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:12,111 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:12,116 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:12,119 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:12,122 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:12,125 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:12,129 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:12,132 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:12,135 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:12,138 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:12,140 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:12,143 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:12,146 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:12,149 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:12,152 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:12,156 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:12,159 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:12,162 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:12,167 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:12,172 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:12,172 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:12,176 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:12,176 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:12,181 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:12,181 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:12,186 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:12,186 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:12,190 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:12,191 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:12,195 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:12,195 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:12,199 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:12,199 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:12,204 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:12,204 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:12,208 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:12,208 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:12,213 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:12,213 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:12,213 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:12,218 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:12,218 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:12,218 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:12,222 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:12,227 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:12,227 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:12,227 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:12,227 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:12,227 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:12,231 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:12,235 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:12,235 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:12,236 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:12,236 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:12,236 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:12,236 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:12,236 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:12,236 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:12,236 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:12,236 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:12,236 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:12,236 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:12,236 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:12,236 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:12,236 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:12,236 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:12,236 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:12,236 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:12,236 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:12,236 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:12,237 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:54:12,237 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:54:12,923 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:12,939 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:12,939 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:12,952 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:12,956 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:12,959 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:12,961 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:12,964 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:12,968 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:12,972 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:12,974 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:12,977 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:12,980 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:12,982 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:12,985 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:12,988 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:12,991 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:12,994 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:12,997 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:13,000 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:13,005 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:13,010 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:13,010 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:13,014 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:13,014 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:13,018 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:13,019 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:13,024 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:13,025 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:13,029 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:13,029 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:13,033 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:13,034 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:13,038 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:13,038 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:13,043 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:13,043 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:13,047 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:13,047 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:13,054 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:13,054 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:13,054 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:13,058 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:13,058 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:13,059 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:13,063 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:13,067 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:13,067 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:13,068 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:13,068 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:13,068 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:13,072 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:13,077 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:13,078 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:13,078 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:13,078 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:13,078 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:13,078 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:13,078 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:13,078 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:13,078 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:13,078 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:13,078 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:13,078 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:13,078 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:13,078 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:13,078 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:13,078 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:13,079 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:13,079 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:13,079 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:13,079 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:17,579 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:54:17,579 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:54:17,579 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:54:17,771 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:54:18,014 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:18,031 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:18,031 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:18,046 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:18,061 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:18,071 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:18,090 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:18,097 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:18,099 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:18,102 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:18,105 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:18,108 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:18,111 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:18,114 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:18,117 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:18,120 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:18,123 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:18,126 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:18,129 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:18,132 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:18,135 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:18,138 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:18,141 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:18,148 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:18,152 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:18,152 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:18,157 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:18,157 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:18,161 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:18,161 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:18,166 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:18,166 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:18,170 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:18,170 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:18,175 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:18,175 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:18,179 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:18,180 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:18,184 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:18,184 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:18,188 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:18,188 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:18,192 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:18,192 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:18,192 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:18,197 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:18,197 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:18,197 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:18,201 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:18,206 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:18,206 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:18,206 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:18,206 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:18,207 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:18,211 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:18,215 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:18,215 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:18,215 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:18,215 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:18,215 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:18,215 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:18,215 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:18,215 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:18,215 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:18,215 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:18,215 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:18,215 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:18,215 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:18,215 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:18,215 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:18,216 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:18,216 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:18,216 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:18,216 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:18,216 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:18,216 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:54:18,216 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:54:18,921 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:18,937 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:18,937 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:18,950 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:18,955 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:18,957 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:18,960 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:18,962 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:18,966 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:18,969 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:18,972 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:18,975 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:18,978 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:18,980 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:18,983 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:18,986 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:18,989 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:18,992 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:18,994 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:18,997 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:19,004 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:19,009 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:19,009 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:19,013 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:19,013 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:19,017 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:19,017 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:19,022 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:19,022 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:19,026 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:19,027 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:19,031 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:19,031 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:19,035 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:19,035 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:19,039 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:19,039 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:19,043 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:19,043 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:19,048 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:19,048 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:19,048 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:19,052 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:19,052 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:19,052 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:19,057 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:19,062 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:19,062 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:19,062 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:19,062 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:19,062 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:19,066 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:19,070 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:19,070 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:19,070 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:19,070 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:19,071 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:19,071 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:19,071 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:19,071 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:19,071 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:19,071 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:19,071 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:19,071 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:19,071 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:19,071 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:19,071 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:19,071 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:19,071 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:19,071 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:19,071 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:19,071 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:23,856 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:54:23,856 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:54:23,856 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:54:24,046 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:54:24,285 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:24,302 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:24,302 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:24,317 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:24,332 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:24,342 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:24,362 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:24,368 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:24,371 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:24,374 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:24,376 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:24,380 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:24,383 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:24,386 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:24,389 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:24,392 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:24,395 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:24,398 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:24,401 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:24,403 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:24,407 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:24,409 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:24,412 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:24,419 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:24,424 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:24,424 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:24,429 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:24,429 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:24,433 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:24,433 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:24,438 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:24,438 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:24,443 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:24,443 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:24,448 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:24,448 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:24,453 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:24,453 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:24,457 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:24,458 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:24,462 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:24,462 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:24,466 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:24,466 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:24,466 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:24,471 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:24,472 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:24,472 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:24,476 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:24,481 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:24,481 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:24,481 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:24,481 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:24,481 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:24,486 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:24,490 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:24,490 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:24,491 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:24,491 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:24,491 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:24,491 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:24,491 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:24,491 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:24,491 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:24,491 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:24,491 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:24,491 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:24,491 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:24,491 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:24,491 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:24,491 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:24,491 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:24,492 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:24,492 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:24,492 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:24,492 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:54:24,492 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:54:25,205 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:25,224 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:25,224 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:25,243 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:25,249 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:25,253 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:25,256 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:25,260 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:25,265 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:25,270 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:25,275 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:25,279 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:25,283 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:25,287 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:25,291 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:25,296 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:25,300 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:25,303 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:25,306 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:25,309 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:25,314 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:25,319 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:25,319 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:25,324 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:25,324 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:25,328 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:25,328 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:25,333 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:25,333 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:25,338 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:25,338 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:25,342 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:25,342 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:25,347 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:25,347 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:25,351 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:25,352 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:25,356 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:25,357 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:25,361 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:25,361 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:25,361 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:25,365 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:25,366 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:25,366 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:25,370 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:25,374 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:25,375 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:25,375 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:25,375 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:25,375 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:25,379 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:25,384 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:25,384 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:25,384 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:25,384 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:25,385 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:25,385 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:25,385 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:25,385 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:25,385 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:25,385 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:25,385 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:25,385 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:25,385 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:25,385 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:25,385 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:25,385 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:25,385 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:25,385 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:25,386 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:25,386 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:26,531 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:54:26,531 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:54:26,531 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:54:26,718 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:54:26,960 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:26,983 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:26,983 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:27,000 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:27,015 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:27,025 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:27,048 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:27,055 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:27,059 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:27,062 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:27,065 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:27,070 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:27,074 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:27,077 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:27,082 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:27,085 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:27,089 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:27,092 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:27,096 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:27,100 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:27,104 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:27,107 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:27,112 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:27,118 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:27,122 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,123 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:27,127 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:27,127 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:27,132 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,132 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:27,137 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,137 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:27,141 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,141 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:27,145 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,145 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:27,149 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:27,150 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:27,154 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,154 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:27,158 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:27,158 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:27,162 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:27,162 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:27,162 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:27,167 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:27,167 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:27,167 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:27,171 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:27,175 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:27,176 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:27,176 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:27,176 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:27,176 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:27,180 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:27,184 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:27,184 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:27,184 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:27,184 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:27,184 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:27,184 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:27,185 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:27,185 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:27,185 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:27,185 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:27,185 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:27,185 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:27,185 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:27,185 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:27,185 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:27,185 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:27,185 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:27,185 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:27,185 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:27,185 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:27,185 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:54:27,185 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:54:27,870 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:27,885 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:27,886 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:27,900 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:27,904 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:27,907 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:27,909 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:27,912 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:27,915 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:27,918 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:27,921 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:27,925 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:27,927 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:27,930 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:27,933 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:27,936 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:27,938 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:27,941 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:27,944 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:27,947 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:27,954 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:27,958 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,958 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:27,963 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:27,963 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:27,967 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,967 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:27,971 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,971 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:27,976 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,976 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:27,981 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,981 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:27,985 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:27,985 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:27,990 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:27,990 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:27,994 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:27,995 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:27,999 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:27,999 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:27,999 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:28,004 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:28,004 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:28,004 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:28,009 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:28,013 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:28,013 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:28,014 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:28,014 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:28,014 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:28,018 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:28,022 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:28,022 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:28,022 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:28,023 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:28,023 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:28,023 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:28,023 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:28,023 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:28,023 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:28,023 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:28,023 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:28,023 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:28,023 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:28,023 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:28,023 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:28,023 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:28,023 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:28,023 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:28,024 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:28,024 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:29,986 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:54:29,986 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:54:29,986 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:54:30,176 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:54:30,415 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:30,432 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:30,432 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:30,448 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:30,463 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:30,472 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:30,493 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:30,499 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:30,502 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:30,506 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:30,509 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:30,512 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:30,515 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:30,518 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:30,521 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:30,524 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:30,526 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:30,529 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:30,533 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:30,536 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:30,539 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:30,542 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:30,545 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:30,551 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:30,556 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:30,556 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:30,560 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:30,560 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:30,565 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:30,565 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:30,570 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:30,570 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:30,574 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:30,574 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:30,578 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:30,578 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:30,583 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:30,583 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:30,587 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:30,588 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:30,592 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:30,592 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:30,597 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:30,597 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:30,597 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:30,601 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:30,601 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:30,601 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:30,605 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:30,610 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:30,610 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:30,610 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:30,610 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:30,610 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:30,614 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:30,619 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:30,620 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:30,620 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:30,620 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:30,620 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:30,620 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:30,620 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:30,620 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:30,620 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:30,620 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:30,620 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:30,620 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:30,620 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:30,620 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:30,620 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:30,620 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:30,620 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:30,620 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:30,620 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:30,620 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:30,621 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:54:30,621 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:54:31,307 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:31,323 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:31,324 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:31,337 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:31,342 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:31,345 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:31,349 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:31,351 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:31,355 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:31,358 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:31,360 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:31,363 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:31,366 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:31,369 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:31,372 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:31,375 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:31,378 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:31,381 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:31,384 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:31,387 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:31,392 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:31,397 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:31,397 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:31,402 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:31,402 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:31,407 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:31,407 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:31,411 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:31,411 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:31,415 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:31,415 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:31,420 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:31,420 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:31,424 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:31,424 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:31,429 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:31,429 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:31,434 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:31,434 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:31,439 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:31,439 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:31,439 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:31,444 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:31,444 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:31,444 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:31,449 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:31,454 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:31,454 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:31,454 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:31,454 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:31,454 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:31,460 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:31,465 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:31,465 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:31,465 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:31,465 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:31,465 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:31,465 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:31,465 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:31,465 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:31,465 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:31,465 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:31,465 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:31,466 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:31,466 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:31,466 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:31,466 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:31,466 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:31,466 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:31,466 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:31,466 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:31,466 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:33,217 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:54:33,217 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:54:33,217 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:54:33,403 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:54:33,634 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:33,650 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:33,650 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:33,665 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:33,680 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:33,689 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:33,710 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:33,715 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:33,718 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:33,721 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:33,723 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:33,727 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:33,729 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:33,732 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:33,736 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:33,738 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:33,741 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:33,744 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:33,747 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:33,750 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:33,753 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:33,756 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:33,759 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:33,765 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:33,770 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:33,770 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:33,774 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:33,774 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:33,779 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:33,779 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:33,784 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:33,784 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:33,789 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:33,789 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:33,795 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:33,795 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:33,799 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:33,800 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:33,804 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:33,804 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:33,809 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:33,809 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:33,814 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:33,814 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:33,814 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:33,819 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:33,819 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:33,820 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:33,824 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:33,829 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:33,829 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:33,829 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:33,829 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:33,829 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:33,834 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:33,838 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:33,838 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:33,838 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:33,839 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:33,839 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:33,839 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:33,839 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:33,839 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:33,839 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:33,839 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:33,839 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:33,839 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:33,839 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:33,839 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:33,839 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:33,839 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:33,839 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:33,839 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:33,839 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:33,839 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:33,840 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:54:33,840 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:54:34,550 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:34,566 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:34,567 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:34,582 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:34,586 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:34,589 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:34,592 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:34,595 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:34,599 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:34,602 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:34,605 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:34,608 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:34,610 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:34,613 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:34,616 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:34,619 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:34,622 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:34,625 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:34,628 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:34,631 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:34,636 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:34,641 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:34,641 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:34,645 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:34,645 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:34,650 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:34,650 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:34,655 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:34,655 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:34,660 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:34,660 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:34,664 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:34,665 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:34,669 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:34,669 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:34,674 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:34,674 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:34,678 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:34,678 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:34,683 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:34,684 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:34,684 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:34,689 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:34,689 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:34,689 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:34,693 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:34,697 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:34,697 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:34,697 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:34,697 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:34,698 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:34,702 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:34,706 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:34,706 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:34,707 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:34,707 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:34,707 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:34,707 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:34,707 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:34,707 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:34,707 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:34,707 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:34,707 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:34,707 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:34,707 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:34,707 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:34,707 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:34,707 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:34,707 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:34,707 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:34,707 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:34,707 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:58,354 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:54:58,354 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:54:58,354 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:54:58,554 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:54:58,789 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:58,805 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:58,805 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:58,820 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:58,835 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:58,844 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:58,865 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:58,870 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:58,873 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:58,876 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:58,879 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:58,882 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:58,886 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:58,889 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:58,892 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:58,894 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:58,897 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:58,899 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:58,902 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:58,905 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:58,908 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:58,911 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:58,914 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:58,920 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:58,925 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:58,925 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:58,929 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:58,929 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:58,934 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:58,934 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:58,939 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:58,940 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:58,945 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:58,945 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:58,949 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:58,949 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:58,954 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:58,954 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:58,958 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:58,958 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:58,963 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:58,963 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:58,968 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:58,968 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:58,968 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:58,973 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:58,973 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:58,973 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:58,978 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:58,982 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:58,982 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:58,982 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:58,982 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:58,982 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:58,987 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:58,991 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:58,991 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:58,991 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:58,991 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:58,991 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:58,991 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:58,991 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:58,991 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:58,991 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:58,991 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:58,991 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:58,992 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:58,992 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:58,992 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:58,992 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:58,992 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:58,992 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:58,992 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:58,992 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:58,992 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:54:58,992 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:54:58,992 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:54:59,707 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:54:59,723 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:54:59,724 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:54:59,736 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:54:59,741 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:54:59,743 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:54:59,746 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:54:59,749 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:54:59,753 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:54:59,757 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:54:59,759 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:54:59,762 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:54:59,764 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:54:59,767 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:54:59,770 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:54:59,773 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:54:59,776 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:54:59,780 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:54:59,782 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:54:59,786 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:54:59,791 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:54:59,796 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:59,796 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:59,800 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:59,801 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:54:59,805 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:59,805 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:54:59,810 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:59,810 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:54:59,814 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:59,815 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:54:59,819 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:59,819 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:54:59,823 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:54:59,823 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:54:59,828 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:54:59,828 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:54:59,832 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:54:59,832 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:54:59,837 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:54:59,837 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:54:59,837 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:54:59,842 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:54:59,842 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:54:59,842 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:54:59,847 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:54:59,852 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:54:59,852 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:54:59,852 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:54:59,852 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:54:59,852 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:54:59,856 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:54:59,860 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:54:59,861 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:54:59,861 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:54:59,861 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:59,861 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:54:59,861 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:54:59,861 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:54:59,861 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:54:59,861 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:54:59,861 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:54:59,861 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:54:59,861 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:54:59,861 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:54:59,861 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:54:59,861 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:54:59,861 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:54:59,861 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:54:59,861 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:54:59,861 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:54:59,861 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:55:01,004 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:55:01,004 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:55:01,005 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:55:01,213 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:55:01,462 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:01,480 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:01,480 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:01,495 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:01,510 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:01,519 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:55:01,539 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:55:01,545 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:55:01,548 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:55:01,552 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:55:01,555 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:55:01,558 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:55:01,561 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:55:01,564 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:55:01,567 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:55:01,570 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:55:01,573 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:55:01,576 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:55:01,579 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:55:01,583 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:55:01,586 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:55:01,588 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:55:01,591 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:55:01,597 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:55:01,602 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:01,602 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:01,606 - ERROR - âŒ Error getting foreign keys for table departments: (pyodbc.OperationalError) ('08S01', '[08S01] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider: Error code 0x2714 (10004) (SQLExecDirectW)')
[SQL: WITH fk_info AS (
    SELECT
        ischema_ref_con.constraint_schema,
        ischema_ref_con.constraint_name,
        ischema_key_col.ordinal_position,
        ischema_key_col.table_schema,
        ischema_key_col.table_name,
        ischema_ref_con.unique_constraint_schema,
        ischema_ref_con.unique_constraint_name,
        ischema_ref_con.match_option,
        ischema_ref_con.update_rule,
        ischema_ref_con.delete_rule,
        ischema_key_col.column_name AS constrained_column
    FROM
        INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS ischema_ref_con
        INNER JOIN
        INFORMATION_SCHEMA.KEY_COLUMN_USAGE ischema_key_col ON
            ischema_key_col.table_schema = ischema_ref_con.constraint_schema
            AND ischema_key_col.constraint_name =
            ischema_ref_con.constraint_name
    WHERE ischema_key_col.table_name = CAST(? AS NVARCHAR(max))
        AND ischema_key_col.table_schema = CAST(? AS NVARCHAR(max))
),
constraint_info AS (
    SELECT
        ischema_key_col.constraint_schema,
        ischema_key_col.constraint_name,
        ischema_key_col.ordinal_position,
        ischema_key_col.table_schema,
        ischema_key_col.table_name,
        ischema_key_col.column_name
    FROM
        INFORMATION_SCHEMA.KEY_COLUMN_USAGE ischema_key_col
),
index_info AS (
    SELECT
        sys.schemas.name AS index_schema,
        sys.indexes.name AS index_name,
        sys.index_columns.key_ordinal AS ordinal_position,
        sys.schemas.name AS table_schema,
        sys.objects.name AS table_name,
        sys.columns.name AS column_name
    FROM
        sys.indexes
        INNER JOIN
        sys.objects ON
            sys.objects.object_id = sys.indexes.object_id
        INNER JOIN
        sys.schemas ON
            sys.schemas.schema_id = sys.objects.schema_id
        INNER JOIN
        sys.index_columns ON
            sys.index_columns.object_id = sys.objects.object_id
            AND sys.index_columns.index_id = sys.indexes.index_id
        INNER JOIN
        sys.columns ON
            sys.columns.object_id = sys.indexes.object_id
            AND sys.columns.column_id = sys.index_columns.column_id
)
    SELECT
        fk_info.constraint_schema,
        fk_info.constraint_name,
        fk_info.ordinal_position,
        fk_info.constrained_column,
        constraint_info.table_schema AS referred_table_schema,
        constraint_info.table_name AS referred_table_name,
        constraint_info.column_name AS referred_column,
        fk_info.match_option,
        fk_info.update_rule,
        fk_info.delete_rule
    FROM
        fk_info INNER JOIN constraint_info ON
            constraint_info.constraint_schema =
                fk_info.unique_constraint_schema
            AND constraint_info.constraint_name =
                fk_info.unique_constraint_name
            AND constraint_info.ordinal_position = fk_info.ordinal_position
    UNION
    SELECT
        fk_info.constraint_schema,
        fk_info.constraint_name,
        fk_info.ordinal_position,
        fk_info.constrained_column,
        index_info.table_schema AS referred_table_schema,
        index_info.table_name AS referred_table_name,
        index_info.column_name AS referred_column,
        fk_info.match_option,
        fk_info.update_rule,
        fk_info.delete_rule
    FROM
        fk_info INNER JOIN index_info ON
            index_info.index_schema = fk_info.unique_constraint_schema
            AND index_info.index_name = fk_info.unique_constraint_name
            AND index_info.ordinal_position = fk_info.ordinal_position

    ORDER BY fk_info.constraint_schema, fk_info.constraint_name,
        fk_info.ordinal_position
]
[parameters: ('departments', 'dbo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-11-27 16:55:01,618 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:01,619 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:01,623 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:01,623 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:55:01,627 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:01,627 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:55:01,631 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:01,631 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:55:01,638 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:01,638 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:55:01,642 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:01,642 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:55:01,646 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:55:01,646 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:55:01,651 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:55:01,651 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:55:01,651 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:55:01,656 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:55:01,656 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:55:01,656 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:55:01,660 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:55:01,665 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:55:01,665 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:55:01,665 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:55:01,665 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:55:01,666 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:55:01,670 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:55:01,674 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:55:01,675 - INFO - âœ… Schema loading complete. Found 16 tables and 16 relationships
2025-11-27 16:55:01,675 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:55:01,675 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:01,675 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:01,675 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:55:01,675 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:55:01,675 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:55:01,675 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:55:01,675 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:55:01,675 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:55:01,675 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:55:01,675 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:55:01,675 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:55:01,675 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:55:01,675 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:55:01,676 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:55:01,676 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:55:01,676 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:55:01,676 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:55:01,676 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:55:02,369 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:02,385 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:02,386 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:55:02,399 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:55:02,403 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:55:02,406 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:55:02,408 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:55:02,411 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:55:02,414 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:55:02,417 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:55:02,420 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:55:02,422 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:55:02,425 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:55:02,428 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:55:02,431 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:55:02,434 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:55:02,436 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:55:02,439 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:55:02,442 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:55:02,445 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:55:02,450 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:55:02,455 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:02,456 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:02,460 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:02,460 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:55:02,464 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:02,464 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:02,469 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:02,469 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:55:02,473 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:02,473 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:55:02,477 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:02,477 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:55:02,482 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:02,482 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:55:02,486 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:02,486 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:55:02,490 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:55:02,490 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:55:02,495 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:55:02,495 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:55:02,495 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:55:02,499 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:55:02,499 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:55:02,499 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:55:02,503 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:55:02,508 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:55:02,508 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:55:02,508 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:55:02,508 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:55:02,508 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:55:02,513 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:55:02,517 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:55:02,517 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:55:02,518 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:55:02,518 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:02,518 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:55:02,518 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:02,518 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:55:02,518 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:55:02,518 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:55:02,518 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:55:02,518 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:55:02,518 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:55:02,518 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:55:02,518 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:55:02,518 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:55:02,518 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:55:02,518 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:55:02,518 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:55:02,519 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:55:02,519 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:55:03,517 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:55:03,517 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:55:03,517 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:55:03,722 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:55:03,961 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:03,977 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:03,977 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:03,992 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:04,007 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:04,016 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:55:04,038 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:55:04,044 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:55:04,046 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:55:04,049 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:55:04,052 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:55:04,056 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:55:04,060 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:55:04,062 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:55:04,065 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:55:04,068 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:55:04,071 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:55:04,074 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:55:04,077 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:55:04,079 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:55:04,082 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:55:04,086 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:55:04,089 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:55:04,095 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:55:04,100 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,100 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:04,105 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:04,105 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:55:04,110 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,110 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:04,116 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,116 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:55:04,121 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,121 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:55:04,126 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,126 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:55:04,131 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:04,131 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:55:04,135 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,135 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:55:04,140 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:55:04,141 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:55:04,145 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:55:04,145 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:55:04,145 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:55:04,150 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:55:04,150 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:55:04,150 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:55:04,155 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:55:04,160 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:55:04,160 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:55:04,160 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:55:04,160 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:55:04,160 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:55:04,164 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:55:04,169 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:55:04,170 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:55:04,170 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:55:04,170 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:04,170 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:55:04,170 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:04,170 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:55:04,170 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:55:04,170 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:55:04,170 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:55:04,170 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:55:04,171 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:55:04,171 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:55:04,171 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:55:04,171 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:55:04,171 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:55:04,171 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:55:04,171 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:55:04,171 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:55:04,171 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:55:04,172 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:55:04,172 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:55:04,868 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:04,884 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:04,884 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:55:04,898 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:55:04,902 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:55:04,905 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:55:04,908 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:55:04,911 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:55:04,914 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:55:04,917 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:55:04,920 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:55:04,924 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:55:04,926 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:55:04,929 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:55:04,932 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:55:04,935 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:55:04,937 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:55:04,940 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:55:04,943 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:55:04,946 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:55:04,952 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:55:04,956 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,957 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:04,961 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:04,961 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:55:04,965 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,965 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:04,969 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,970 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:55:04,974 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,974 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:55:04,978 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,979 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:55:04,983 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:04,983 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:55:04,987 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:04,987 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:55:04,991 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:55:04,991 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:55:04,996 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:55:04,997 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:55:04,997 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:55:05,001 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:55:05,001 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:55:05,001 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:55:05,006 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:55:05,010 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:55:05,011 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:55:05,011 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:55:05,011 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:55:05,011 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:55:05,015 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:55:05,020 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:55:05,020 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:55:05,020 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:55:05,020 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:05,020 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:55:05,020 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:05,020 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:55:05,020 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:55:05,020 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:55:05,020 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:55:05,020 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:55:05,020 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:55:05,020 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:55:05,020 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:55:05,020 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:55:05,020 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:55:05,020 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:55:05,020 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:55:05,020 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:55:05,021 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:55:05,995 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:55:05,995 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:55:05,995 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:55:06,191 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:55:06,429 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:06,446 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:06,446 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:06,461 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:06,476 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:06,485 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:55:06,506 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:55:06,512 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:55:06,515 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:55:06,518 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:55:06,520 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:55:06,524 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:55:06,528 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:55:06,530 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:55:06,533 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:55:06,536 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:55:06,539 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:55:06,542 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:55:06,544 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:55:06,547 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:55:06,550 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:55:06,553 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:55:06,556 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:55:06,562 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:55:06,566 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:06,566 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:06,570 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:06,570 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:55:06,575 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:06,575 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:06,579 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:06,580 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:55:06,584 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:06,584 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:55:06,589 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:06,589 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:55:06,593 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:06,593 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:55:06,598 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:06,598 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:55:06,602 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:55:06,602 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:55:06,606 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:55:06,607 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:55:06,607 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:55:06,612 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:55:06,612 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:55:06,612 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:55:06,616 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:55:06,621 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:55:06,621 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:55:06,621 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:55:06,621 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:55:06,621 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:55:06,625 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:55:06,630 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:55:06,630 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:55:06,630 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:55:06,630 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:06,630 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:55:06,630 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:06,630 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:55:06,630 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:55:06,630 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:55:06,630 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:55:06,630 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:55:06,630 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:55:06,630 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:55:06,630 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:55:06,630 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:55:06,631 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:55:06,631 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:55:06,631 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:55:06,631 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:55:06,631 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:55:06,631 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:55:06,631 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:55:07,334 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:07,351 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:07,351 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:55:07,364 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:55:07,369 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:55:07,372 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:55:07,375 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:55:07,377 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:55:07,381 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:55:07,383 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:55:07,386 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:55:07,389 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:55:07,391 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:55:07,395 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:55:07,398 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:55:07,400 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:55:07,403 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:55:07,406 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:55:07,409 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:55:07,412 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:55:07,417 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:55:07,422 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:07,422 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:07,427 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:07,427 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:55:07,432 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:07,432 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:07,437 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:07,437 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:55:07,441 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:07,442 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:55:07,446 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:07,447 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:55:07,451 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:07,452 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:55:07,456 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:07,456 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:55:07,460 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:55:07,461 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:55:07,465 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:55:07,465 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:55:07,465 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:55:07,469 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:55:07,469 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:55:07,469 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:55:07,473 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:55:07,479 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:55:07,479 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:55:07,479 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:55:07,479 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:55:07,479 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:55:07,484 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:55:07,488 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:55:07,488 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:55:07,488 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:55:07,488 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:07,488 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:55:07,488 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:07,488 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:55:07,489 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:55:07,489 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:55:07,489 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:55:07,489 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:55:07,489 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:55:07,489 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:55:07,489 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:55:07,489 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:55:07,489 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:55:07,489 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:55:07,489 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:55:07,489 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:55:07,489 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:55:08,932 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:55:08,932 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:55:08,932 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:55:09,142 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:55:09,382 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:09,399 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:09,399 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:09,414 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:09,429 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:09,438 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:55:09,458 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:55:09,464 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:55:09,467 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:55:09,470 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:55:09,472 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:55:09,476 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:55:09,479 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:55:09,482 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:55:09,485 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:55:09,488 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:55:09,491 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:55:09,494 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:55:09,497 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:55:09,500 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:55:09,503 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:55:09,506 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:55:09,509 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:55:09,515 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:55:09,520 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:09,520 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:09,524 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:09,525 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:55:09,529 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:09,529 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:09,534 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:09,534 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:55:09,541 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:09,541 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:55:09,545 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:09,546 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:55:09,550 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:09,550 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:55:09,555 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:09,555 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:55:09,559 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:55:09,559 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:55:09,564 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:55:09,564 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:55:09,564 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:55:09,569 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:55:09,569 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:55:09,569 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:55:09,574 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:55:09,579 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:55:09,579 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:55:09,579 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:55:09,579 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:55:09,579 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:55:09,583 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:55:09,588 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:55:09,589 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:55:09,589 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:55:09,589 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:09,589 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:55:09,589 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:09,589 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:55:09,589 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:55:09,589 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:55:09,589 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:55:09,589 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:55:09,589 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:55:09,589 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:55:09,589 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:55:09,589 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:55:09,589 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:55:09,590 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:55:09,590 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:55:09,590 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:55:09,590 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:55:09,590 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:55:09,591 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:55:10,283 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:55:10,299 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:55:10,300 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:55:10,312 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:55:10,317 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:55:10,319 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:55:10,322 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:55:10,325 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:55:10,329 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:55:10,332 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:55:10,335 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:55:10,338 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:55:10,340 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:55:10,343 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:55:10,346 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:55:10,349 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:55:10,352 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:55:10,355 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:55:10,358 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:55:10,361 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:55:10,367 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:55:10,371 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:10,372 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:10,376 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:10,376 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:55:10,381 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:10,381 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:55:10,386 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:10,386 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:55:10,390 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:10,391 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:55:10,395 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:10,395 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:55:10,400 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:55:10,400 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:55:10,404 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:55:10,404 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:55:10,409 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:55:10,409 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:55:10,415 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:55:10,415 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:55:10,415 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:55:10,419 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:55:10,419 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:55:10,419 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:55:10,424 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:55:10,428 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:55:10,428 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:55:10,428 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:55:10,428 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:55:10,429 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:55:10,433 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:55:10,437 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:55:10,437 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:55:10,437 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:55:10,437 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:10,437 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:55:10,437 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:55:10,437 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:55:10,437 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:55:10,437 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:55:10,437 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:55:10,437 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:55:10,437 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:55:10,437 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:55:10,438 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:55:10,438 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:55:10,438 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:55:10,438 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:55:10,438 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:55:10,438 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:55:10,438 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:55:12,387 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:55:12,387 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:55:12,387 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:56:15,383 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:56:15,383 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:56:15,383 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:56:20,745 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 16:56:20,745 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 16:56:20,745 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 16:56:20,949 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 16:56:21,189 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:56:21,205 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:56:21,205 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:56:21,221 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:56:21,235 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:56:21,245 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:56:21,265 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:56:21,271 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:56:21,274 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:56:21,277 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:56:21,280 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:56:21,284 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:56:21,287 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:56:21,290 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:56:21,293 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:56:21,295 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:56:21,298 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:56:21,301 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:56:21,304 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:56:21,308 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:56:21,311 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:56:21,314 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:56:21,317 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:56:21,323 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:56:21,327 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:21,327 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:56:21,331 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:56:21,331 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:56:21,338 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:21,338 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:56:21,342 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:21,342 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:56:21,347 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:21,347 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:56:21,351 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:21,351 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:56:21,355 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:56:21,356 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:56:21,360 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:21,360 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:56:21,366 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:56:21,366 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:56:21,370 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:56:21,370 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:56:21,370 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:56:21,375 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:56:21,375 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:56:21,375 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:56:21,379 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:56:21,384 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:56:21,384 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:56:21,384 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:56:21,384 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:56:21,384 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:56:21,388 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:56:21,394 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:56:21,394 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:56:21,394 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:56:21,394 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:56:21,395 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:56:21,395 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:56:21,395 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:56:21,395 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:56:21,395 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:56:21,395 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:56:21,395 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:56:21,395 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:56:21,395 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:56:21,395 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:56:21,395 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:56:21,395 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:56:21,395 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:56:21,395 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:56:21,395 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:56:21,395 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 16:56:21,396 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 16:56:21,396 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 16:56:22,104 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 16:56:22,120 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 16:56:22,121 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 16:56:22,134 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 16:56:22,138 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 16:56:22,141 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 16:56:22,144 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 16:56:22,146 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 16:56:22,150 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 16:56:22,153 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 16:56:22,156 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 16:56:22,159 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 16:56:22,161 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 16:56:22,164 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 16:56:22,167 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 16:56:22,169 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 16:56:22,172 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 16:56:22,175 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 16:56:22,178 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 16:56:22,181 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 16:56:22,187 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 16:56:22,191 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:22,191 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 16:56:22,195 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:56:22,196 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 16:56:22,200 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:22,200 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 16:56:22,204 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:22,204 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 16:56:22,209 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:22,209 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 16:56:22,213 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:22,214 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 16:56:22,218 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 16:56:22,218 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 16:56:22,223 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 16:56:22,223 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 16:56:22,227 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 16:56:22,227 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 16:56:22,232 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 16:56:22,232 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 16:56:22,232 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 16:56:22,238 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 16:56:22,238 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 16:56:22,238 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 16:56:22,242 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 16:56:22,246 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 16:56:22,246 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 16:56:22,246 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 16:56:22,246 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 16:56:22,246 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 16:56:22,251 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 16:56:22,255 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 16:56:22,255 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 16:56:22,255 - DEBUG - ðŸ” Relationship Details:
2025-11-27 16:56:22,255 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:56:22,255 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 16:56:22,255 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 16:56:22,256 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 16:56:22,256 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 16:56:22,256 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 16:56:22,256 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 16:56:22,256 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 16:56:22,256 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 16:56:22,256 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 16:56:22,256 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 16:56:22,256 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 16:56:22,256 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 16:56:22,256 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 16:56:22,256 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 16:56:22,256 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 16:56:22,256 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 17:01:49,925 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 17:01:49,925 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 17:01:49,925 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 17:01:50,120 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 17:01:50,355 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 17:01:50,371 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 17:01:50,372 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 17:01:50,387 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 17:01:50,402 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 17:01:50,411 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 17:01:50,432 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 17:01:50,438 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 17:01:50,441 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 17:01:50,443 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 17:01:50,446 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 17:01:50,449 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 17:01:50,452 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 17:01:50,455 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 17:01:50,458 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 17:01:50,461 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 17:01:50,464 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 17:01:50,467 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 17:01:50,469 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 17:01:50,472 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 17:01:50,475 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 17:01:50,478 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 17:01:50,481 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 17:01:50,487 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 17:01:50,492 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:50,492 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 17:01:50,496 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 17:01:50,496 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 17:01:50,500 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:50,501 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 17:01:50,505 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:50,505 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 17:01:50,509 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:50,509 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 17:01:50,515 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:50,515 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 17:01:50,519 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 17:01:50,519 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 17:01:50,524 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:50,524 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 17:01:50,528 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 17:01:50,529 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 17:01:50,533 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 17:01:50,533 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 17:01:50,533 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 17:01:50,537 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 17:01:50,538 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 17:01:50,538 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 17:01:50,542 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 17:01:50,547 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 17:01:50,548 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 17:01:50,548 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 17:01:50,548 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 17:01:50,548 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 17:01:50,552 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 17:01:50,556 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 17:01:50,556 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 17:01:50,556 - DEBUG - ðŸ” Relationship Details:
2025-11-27 17:01:50,556 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 17:01:50,557 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 17:01:50,557 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 17:01:50,557 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 17:01:50,557 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 17:01:50,557 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 17:01:50,557 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 17:01:50,557 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 17:01:50,557 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 17:01:50,557 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 17:01:50,557 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 17:01:50,557 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 17:01:50,557 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 17:01:50,557 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 17:01:50,557 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 17:01:50,557 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 17:01:50,557 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 17:01:50,558 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 17:01:50,558 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 17:01:51,251 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 17:01:51,267 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 17:01:51,269 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 17:01:51,282 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 17:01:51,286 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 17:01:51,289 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 17:01:51,291 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 17:01:51,294 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 17:01:51,298 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 17:01:51,301 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 17:01:51,304 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 17:01:51,306 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 17:01:51,309 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 17:01:51,311 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 17:01:51,314 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 17:01:51,317 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 17:01:51,319 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 17:01:51,322 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 17:01:51,325 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 17:01:51,328 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 17:01:51,333 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 17:01:51,338 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:51,338 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 17:01:51,342 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 17:01:51,342 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 17:01:51,346 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:51,346 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 17:01:51,350 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:51,350 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 17:01:51,355 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:51,356 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 17:01:51,360 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:51,360 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 17:01:51,364 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 17:01:51,364 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 17:01:51,369 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:51,369 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 17:01:51,373 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 17:01:51,373 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 17:01:51,378 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 17:01:51,378 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 17:01:51,378 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 17:01:51,383 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 17:01:51,383 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 17:01:51,383 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 17:01:51,387 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 17:01:51,392 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 17:01:51,392 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 17:01:51,392 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 17:01:51,392 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 17:01:51,392 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 17:01:51,397 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 17:01:51,401 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 17:01:51,401 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 17:01:51,401 - DEBUG - ðŸ” Relationship Details:
2025-11-27 17:01:51,401 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 17:01:51,401 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 17:01:51,401 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 17:01:51,401 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 17:01:51,401 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 17:01:51,401 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 17:01:51,401 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 17:01:51,401 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 17:01:51,401 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 17:01:51,401 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 17:01:51,401 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 17:01:51,402 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 17:01:51,402 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 17:01:51,402 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 17:01:51,402 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 17:01:51,402 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 17:01:51,402 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 17:01:52,333 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 17:01:52,334 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 17:01:52,334 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 17:01:52,528 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 17:01:52,778 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 17:01:52,794 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 17:01:52,794 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 17:01:52,809 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 17:01:52,824 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 17:01:52,834 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 17:01:52,853 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 17:01:52,860 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 17:01:52,863 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 17:01:52,866 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 17:01:52,868 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 17:01:52,872 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 17:01:52,875 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 17:01:52,877 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 17:01:52,880 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 17:01:52,882 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 17:01:52,885 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 17:01:52,888 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 17:01:52,891 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 17:01:52,894 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 17:01:52,897 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 17:01:52,899 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 17:01:52,902 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 17:01:52,907 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 17:01:52,911 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:52,912 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 17:01:52,916 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 17:01:52,916 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 17:01:52,922 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:52,922 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 17:01:52,927 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:52,927 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 17:01:52,931 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:52,931 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 17:01:52,935 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:52,936 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 17:01:52,940 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 17:01:52,940 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 17:01:52,945 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:52,945 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 17:01:52,950 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 17:01:52,950 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 17:01:52,954 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 17:01:52,954 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 17:01:52,955 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 17:01:52,959 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 17:01:52,959 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 17:01:52,959 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 17:01:52,963 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 17:01:52,968 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 17:01:52,968 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 17:01:52,968 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 17:01:52,968 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 17:01:52,968 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 17:01:52,977 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 17:01:52,983 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 17:01:52,984 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 17:01:52,984 - DEBUG - ðŸ” Relationship Details:
2025-11-27 17:01:52,984 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 17:01:52,984 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 17:01:52,984 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 17:01:52,984 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 17:01:52,984 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 17:01:52,984 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 17:01:52,984 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 17:01:52,984 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 17:01:52,984 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 17:01:52,984 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 17:01:52,984 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 17:01:52,984 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 17:01:52,984 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 17:01:52,984 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 17:01:52,984 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 17:01:52,985 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 17:01:52,985 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 17:01:52,985 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 17:01:52,985 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 17:01:53,674 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 17:01:53,690 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 17:01:53,690 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 17:01:53,704 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 17:01:53,709 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 17:01:53,711 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 17:01:53,714 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 17:01:53,717 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 17:01:53,720 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 17:01:53,723 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 17:01:53,726 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 17:01:53,728 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 17:01:53,732 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 17:01:53,734 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 17:01:53,737 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 17:01:53,740 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 17:01:53,743 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 17:01:53,746 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 17:01:53,748 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 17:01:53,751 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 17:01:53,757 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 17:01:53,762 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:53,762 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 17:01:53,767 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 17:01:53,767 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 17:01:53,772 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:53,772 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 17:01:53,776 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:53,776 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 17:01:53,780 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:53,780 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 17:01:53,785 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:53,785 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 17:01:53,790 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 17:01:53,790 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 17:01:53,794 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 17:01:53,794 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 17:01:53,798 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 17:01:53,799 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 17:01:53,803 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 17:01:53,803 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 17:01:53,803 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 17:01:53,808 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 17:01:53,808 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 17:01:53,808 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 17:01:53,814 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 17:01:53,820 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 17:01:53,820 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 17:01:53,820 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 17:01:53,820 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 17:01:53,820 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 17:01:53,824 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 17:01:53,829 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 17:01:53,829 - INFO - âœ… Schema loading complete. Found 16 tables and 17 relationships
2025-11-27 17:01:53,829 - DEBUG - ðŸ” Relationship Details:
2025-11-27 17:01:53,829 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 17:01:53,829 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 17:01:53,829 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 17:01:53,829 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 17:01:53,829 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 17:01:53,829 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 17:01:53,829 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 17:01:53,829 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 17:01:53,829 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 17:01:53,829 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 17:01:53,830 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 17:01:53,830 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 17:01:53,830 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 17:01:53,830 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 17:01:53,830 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 17:01:53,830 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 17:01:53,830 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:33:18,538 - INFO - Database engine created with pool_size=10
2025-11-27 21:33:18,588 - ERROR - Failed to retrieve system hierarchy: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:33:18,588 - ERROR - Database session error: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:33:18,589 - ERROR - Database session error in FastAPI dependency: 500: Failed to fetch hierarchical ship data
2025-11-27 21:38:59,767 - ERROR - Failed to retrieve system hierarchy: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Overhaul_metadata(Overhaul_metadata)]'. Original exception was: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:38:59,767 - ERROR - Database session error: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Overhaul_metadata(Overhaul_metadata)]'. Original exception was: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:38:59,768 - ERROR - Database session error in FastAPI dependency: 500: Failed to fetch hierarchical ship data
2025-11-27 21:40:16,454 - ERROR - Failed to retrieve system hierarchy: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Overhaul_metadata(Overhaul_metadata)]'. Original exception was: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:40:16,455 - ERROR - Database session error: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Overhaul_metadata(Overhaul_metadata)]'. Original exception was: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:40:16,455 - ERROR - Database session error in FastAPI dependency: 500: Failed to fetch hierarchical ship data
2025-11-27 21:46:22,845 - ERROR - Failed to retrieve system hierarchy: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Overhaul_metadata(Overhaul_metadata)]'. Original exception was: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:46:22,845 - ERROR - Database session error: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Overhaul_metadata(Overhaul_metadata)]'. Original exception was: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:46:22,845 - ERROR - Database session error in FastAPI dependency: 500: Failed to fetch hierarchical ship data
2025-11-27 21:47:42,997 - ERROR - Failed to retrieve system hierarchy: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Overhaul_metadata(Overhaul_metadata)]'. Original exception was: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:47:42,997 - ERROR - Database session error: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Overhaul_metadata(Overhaul_metadata)]'. Original exception was: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:47:42,998 - ERROR - Database session error in FastAPI dependency: 500: Failed to fetch hierarchical ship data
2025-11-27 21:48:28,924 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 21:48:28,924 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 21:48:28,924 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 21:48:29,308 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 21:48:29,818 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:48:29,845 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:48:29,845 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:48:29,860 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:48:29,875 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:48:29,934 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:48:30,131 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:48:30,136 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:48:30,139 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:48:30,142 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:48:30,145 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:48:30,148 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:48:30,151 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:48:30,154 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:48:30,157 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:48:30,159 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:48:30,162 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:48:30,165 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:48:30,167 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:48:30,170 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:48:30,173 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:48:30,176 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:48:30,179 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:48:30,181 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:48:30,184 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:48:30,190 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:48:30,195 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:30,195 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:48:30,199 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:48:30,199 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:48:30,204 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:30,204 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:48:30,208 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:30,208 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:48:30,212 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:30,212 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:48:30,217 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:30,217 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:48:30,221 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:48:30,221 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:48:30,226 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:30,226 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:48:30,230 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:30,230 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:48:30,234 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:30,234 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:48:30,239 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:48:30,239 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:48:30,243 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:48:30,243 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:48:30,243 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:48:30,248 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:48:30,248 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:48:30,248 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:48:30,252 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:48:30,256 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:48:30,257 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:48:30,257 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:48:30,257 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:48:30,257 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:48:30,261 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:48:30,265 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:48:30,265 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:48:30,265 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:48:30,265 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:48:30,265 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:48:30,265 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:48:30,265 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:48:30,265 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:48:30,265 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:48:30,265 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:48:30,265 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:48:30,266 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:48:30,266 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:48:30,266 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:48:30,266 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:48:30,266 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:48:30,266 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:48:30,266 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:48:30,266 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:48:30,266 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:48:30,266 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:48:30,266 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:48:30,295 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 21:48:30,295 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 21:48:34,743 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:48:34,759 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:48:34,759 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:48:34,772 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:48:34,777 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:48:34,779 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:48:34,782 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:48:34,784 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:48:34,788 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:48:34,791 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:48:34,794 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:48:34,796 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:48:34,799 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:48:34,801 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:48:34,804 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:48:34,807 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:48:34,810 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:48:34,812 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:48:34,815 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:48:34,818 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:48:34,821 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:48:34,824 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:48:34,830 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:48:34,834 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:34,834 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:48:34,839 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:48:34,839 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:48:34,844 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:34,844 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:48:34,848 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:34,848 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:48:34,852 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:34,853 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:48:34,857 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:34,857 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:48:34,862 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:48:34,862 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:48:34,866 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:34,866 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:48:34,870 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:34,870 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:48:34,875 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:48:34,875 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:48:34,879 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:48:34,879 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:48:34,883 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:48:34,883 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:48:34,883 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:48:34,888 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:48:34,888 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:48:34,888 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:48:34,892 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:48:34,897 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:48:34,897 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:48:34,897 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:48:34,897 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:48:34,897 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:48:34,901 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:48:34,905 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:48:34,905 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:48:34,905 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:48:34,905 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:48:34,905 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:48:34,905 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:48:34,905 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:48:34,905 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:48:34,906 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:48:34,906 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:48:34,906 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:48:34,906 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:48:34,906 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:48:34,906 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:48:34,906 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:48:34,906 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:48:34,906 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:48:34,906 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:48:34,906 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:48:34,906 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:48:34,906 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:48:34,906 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:49:39,583 - INFO - Database engine created with pool_size=10
2025-11-27 21:49:39,605 - ERROR - Failed to retrieve system hierarchy: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:49:39,605 - ERROR - Database session error: Mapper 'Mapper[SystemConfiguration(system_configuration)]' has no property 'overhaul_metadata_records'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-27 21:49:39,606 - ERROR - Database session error in FastAPI dependency: 500: Failed to fetch hierarchical ship data
2025-11-27 21:50:27,038 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 21:50:27,038 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 21:50:27,038 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 21:50:27,235 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 21:50:27,495 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:27,511 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:27,511 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:27,525 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:27,540 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:27,549 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:50:27,569 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:50:27,575 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:50:27,578 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:50:27,581 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:50:27,583 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:50:27,587 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:50:27,590 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:50:27,593 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:50:27,595 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:50:27,598 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:50:27,601 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:50:27,603 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:50:27,606 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:50:27,609 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:50:27,611 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:50:27,614 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:50:27,617 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:50:27,620 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:50:27,623 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:50:27,628 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:50:27,633 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:27,633 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:27,637 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:27,637 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:50:27,642 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:27,642 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:27,646 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:27,646 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:50:27,651 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:27,651 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:50:27,655 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:27,655 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:50:27,660 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:27,660 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:50:27,664 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:27,664 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:50:27,668 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:27,669 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:27,673 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:27,673 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:50:27,677 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:50:27,677 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:50:27,682 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:50:27,682 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:27,682 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:50:27,686 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:50:27,686 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:50:27,686 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:50:27,691 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:50:27,695 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:50:27,696 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:50:27,696 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:50:27,696 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:50:27,696 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:50:27,700 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:50:27,704 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:50:27,704 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:50:27,704 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:50:27,704 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:27,704 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:50:27,704 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:27,704 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:50:27,704 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:50:27,704 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:50:27,704 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:50:27,705 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:50:27,705 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:27,705 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:27,705 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:50:27,705 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:27,705 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:50:27,705 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:27,705 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:50:27,705 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:50:27,705 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:50:27,705 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:50:27,705 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:50:27,705 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 21:50:27,705 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 21:50:28,382 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:28,397 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:28,398 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:50:28,411 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:50:28,415 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:50:28,418 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:50:28,421 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:50:28,424 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:50:28,427 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:50:28,430 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:50:28,433 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:50:28,436 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:50:28,438 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:50:28,441 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:50:28,444 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:50:28,446 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:50:28,449 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:50:28,452 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:50:28,455 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:50:28,458 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:50:28,460 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:50:28,463 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:50:28,469 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:50:28,473 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:28,473 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:28,478 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:28,478 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:50:28,482 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:28,482 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:28,486 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:28,487 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:50:28,491 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:28,491 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:50:28,496 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:28,496 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:50:28,500 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:28,500 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:50:28,504 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:28,504 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:50:28,509 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:28,509 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:28,513 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:28,513 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:50:28,517 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:50:28,518 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:50:28,522 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:50:28,522 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:28,522 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:50:28,527 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:50:28,527 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:50:28,527 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:50:28,531 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:50:28,535 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:50:28,536 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:50:28,536 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:50:28,536 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:50:28,536 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:50:28,540 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:50:28,545 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:50:28,545 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:50:28,545 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:50:28,545 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:28,545 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:50:28,545 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:28,545 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:50:28,545 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:50:28,545 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:50:28,545 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:50:28,545 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:50:28,545 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:28,545 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:28,545 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:50:28,545 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:28,545 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:50:28,545 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:28,545 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:50:28,546 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:50:28,546 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:50:28,546 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:50:28,546 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:50:43,214 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 21:50:43,214 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 21:50:43,214 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 21:50:43,410 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 21:50:43,659 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:43,675 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:43,676 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:43,691 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:43,707 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:43,717 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:50:43,739 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:50:43,745 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:50:43,748 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:50:43,751 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:50:43,754 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:50:43,757 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:50:43,760 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:50:43,763 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:50:43,766 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:50:43,769 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:50:43,772 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:50:43,774 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:50:43,777 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:50:43,780 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:50:43,783 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:50:43,785 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:50:43,788 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:50:43,791 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:50:43,794 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:50:43,800 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:50:43,804 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:43,804 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:43,809 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:43,809 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:50:43,813 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:43,813 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:43,819 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:43,819 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:50:43,824 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:43,824 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:50:43,829 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:43,829 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:50:43,833 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:43,833 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:50:43,837 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:43,838 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:50:43,842 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:43,842 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:43,846 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:43,847 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:50:43,851 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:50:43,851 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:50:43,855 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:50:43,856 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:43,856 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:50:43,860 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:50:43,860 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:50:43,860 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:50:43,864 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:50:43,869 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:50:43,869 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:50:43,869 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:50:43,869 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:50:43,869 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:50:43,874 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:50:43,878 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:50:43,878 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:50:43,878 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:50:43,878 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:43,878 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:50:43,878 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:43,878 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:50:43,879 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:50:43,879 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:50:43,879 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:50:43,879 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:50:43,879 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:43,879 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:43,879 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:50:43,879 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:43,879 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:50:43,879 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:43,879 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:50:43,879 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:50:43,879 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:50:43,879 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:50:43,880 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:50:43,880 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 21:50:43,880 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 21:50:44,544 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:44,559 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:44,560 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:50:44,573 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:50:44,578 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:50:44,581 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:50:44,583 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:50:44,586 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:50:44,590 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:50:44,593 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:50:44,596 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:50:44,599 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:50:44,602 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:50:44,604 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:50:44,608 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:50:44,612 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:50:44,615 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:50:44,618 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:50:44,621 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:50:44,624 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:50:44,627 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:50:44,630 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:50:44,635 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:50:44,640 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:44,640 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:44,644 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:44,644 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:50:44,649 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:44,649 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:44,653 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:44,653 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:50:44,658 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:44,658 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:50:44,662 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:44,662 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:50:44,667 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:44,667 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:50:44,671 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:44,671 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:50:44,676 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:44,676 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:44,680 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:44,680 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:50:44,685 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:50:44,685 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:50:44,689 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:50:44,689 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:44,689 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:50:44,694 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:50:44,694 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:50:44,694 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:50:44,698 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:50:44,703 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:50:44,703 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:50:44,703 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:50:44,703 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:50:44,703 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:50:44,707 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:50:44,712 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:50:44,712 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:50:44,712 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:50:44,712 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:44,712 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:50:44,712 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:44,712 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:50:44,712 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:50:44,712 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:50:44,712 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:50:44,712 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:50:44,712 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:44,712 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:44,712 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:50:44,712 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:44,712 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:50:44,712 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:44,712 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:50:44,712 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:50:44,713 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:50:44,713 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:50:44,713 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:50:49,968 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 21:50:49,968 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 21:50:49,968 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 21:50:50,158 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 21:50:50,393 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:50,409 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:50,409 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:50,423 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:50,438 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:50,447 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:50:50,467 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:50:50,472 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:50:50,475 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:50:50,479 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:50:50,483 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:50:50,487 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:50:50,490 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:50:50,493 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:50:50,496 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:50:50,498 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:50:50,501 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:50:50,504 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:50:50,506 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:50:50,509 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:50:50,512 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:50:50,515 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:50:50,518 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:50:50,520 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:50:50,523 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:50:50,529 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:50:50,533 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:50,533 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:50,538 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:50,538 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:50:50,543 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:50,543 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:50,550 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:50,550 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:50:50,555 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:50,555 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:50:50,561 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:50,561 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:50:50,566 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:50,566 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:50:50,572 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:50,572 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:50:50,578 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:50,578 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:50,583 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:50,583 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:50:50,589 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:50:50,589 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:50:50,595 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:50:50,595 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:50,595 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:50:50,601 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:50:50,601 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:50:50,601 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:50:50,607 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:50:50,613 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:50:50,613 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:50:50,613 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:50:50,613 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:50:50,613 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:50:50,619 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:50:50,624 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:50:50,624 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:50:50,625 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:50:50,625 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:50,625 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:50:50,625 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:50,625 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:50:50,625 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:50:50,625 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:50:50,625 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:50:50,625 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:50:50,625 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:50,625 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:50,625 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:50:50,625 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:50,626 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:50:50,626 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:50,626 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:50:50,626 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:50:50,626 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:50:50,626 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:50:50,626 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:50:50,627 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 21:50:50,627 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 21:50:51,332 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:51,348 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:51,348 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:50:51,361 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:50:51,365 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:50:51,368 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:50:51,370 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:50:51,373 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:50:51,377 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:50:51,380 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:50:51,382 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:50:51,385 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:50:51,387 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:50:51,390 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:50:51,393 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:50:51,395 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:50:51,398 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:50:51,401 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:50:51,404 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:50:51,407 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:50:51,409 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:50:51,412 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:50:51,418 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:50:51,423 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:51,423 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:51,427 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:51,427 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:50:51,431 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:51,431 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:51,436 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:51,436 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:50:51,440 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:51,440 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:50:51,444 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:51,445 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:50:51,449 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:51,449 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:50:51,453 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:51,453 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:50:51,457 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:51,458 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:51,462 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:51,462 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:50:51,466 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:50:51,466 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:50:51,471 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:50:51,471 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:51,471 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:50:51,475 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:50:51,475 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:50:51,475 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:50:51,480 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:50:51,484 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:50:51,485 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:50:51,485 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:50:51,485 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:50:51,485 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:50:51,489 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:50:51,493 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:50:51,494 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:50:51,494 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:50:51,494 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:50:51,494 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:50:51,494 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:50:51,494 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:50:51,494 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:50:51,494 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:50:51,494 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:50:51,494 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:50:51,494 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:50:52,430 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 21:50:52,430 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 21:50:52,430 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 21:50:52,620 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 21:50:52,850 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:52,866 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:52,866 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:52,880 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:52,895 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:52,904 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:50:52,924 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:50:52,929 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:50:52,932 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:50:52,935 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:50:52,937 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:50:52,941 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:50:52,944 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:50:52,947 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:50:52,949 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:50:52,952 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:50:52,955 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:50:52,957 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:50:52,960 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:50:52,963 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:50:52,965 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:50:52,968 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:50:52,971 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:50:52,974 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:50:52,977 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:50:52,982 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:50:52,987 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:52,987 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:52,991 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:52,991 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:50:52,995 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:52,996 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:53,000 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,000 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:50:53,004 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,004 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:50:53,009 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,009 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:50:53,013 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:53,013 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:50:53,018 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,018 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:50:53,022 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,022 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:53,027 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,027 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:50:53,032 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:50:53,032 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:50:53,038 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:50:53,038 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:53,038 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:50:53,042 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:50:53,042 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:50:53,042 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:50:53,047 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:50:53,051 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:50:53,051 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:50:53,052 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:50:53,052 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:50:53,052 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:50:53,056 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:50:53,061 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:50:53,061 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:50:53,061 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:50:53,061 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,061 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:50:53,061 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,061 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,061 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,061 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,061 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:50:53,061 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,062 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,062 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,062 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:50:53,062 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,062 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:50:53,062 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,062 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:50:53,062 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:50:53,062 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:50:53,062 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:50:53,062 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:50:53,062 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 21:50:53,062 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 21:50:53,732 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:50:53,747 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:50:53,748 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:50:53,760 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:50:53,764 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:50:53,766 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:50:53,769 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:50:53,772 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:50:53,775 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:50:53,778 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:50:53,781 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:50:53,783 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:50:53,786 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:50:53,789 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:50:53,791 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:50:53,794 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:50:53,796 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:50:53,799 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:50:53,802 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:50:53,805 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:50:53,807 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:50:53,810 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:50:53,815 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:50:53,819 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,819 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:53,824 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:53,824 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:50:53,828 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,828 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:50:53,832 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,832 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:50:53,837 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,837 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:50:53,841 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,841 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:50:53,845 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:50:53,845 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:50:53,849 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,850 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:50:53,854 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,854 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:53,858 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:50:53,858 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:50:53,862 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:50:53,863 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:50:53,867 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:50:53,867 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:50:53,867 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:50:53,871 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:50:53,871 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:50:53,871 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:50:53,875 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:50:53,880 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:50:53,880 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:50:53,880 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:50:53,880 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:50:53,880 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:50:53,884 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:50:53,888 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:50:53,888 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:50:53,889 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:50:53,889 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:50:53,889 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:50:53,889 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:50:53,889 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:50:53,889 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:50:53,889 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:50:53,889 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:50:53,889 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:50:53,889 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:50:57,629 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 21:50:57,629 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 21:50:57,629 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 21:50:59,672 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 21:50:59,672 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 21:50:59,672 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 21:51:02,720 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-11-27 21:51:02,720 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-11-27 21:51:02,720 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-11-27 21:51:02,908 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-11-27 21:51:03,149 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:51:03,164 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:51:03,165 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:51:03,179 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:51:03,194 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:51:03,203 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:51:03,223 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:51:03,229 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:51:03,231 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:51:03,234 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:51:03,237 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:51:03,240 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:51:03,243 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:51:03,246 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:51:03,248 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:51:03,251 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:51:03,253 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:51:03,256 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:51:03,259 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:51:03,262 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:51:03,264 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:51:03,267 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:51:03,270 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:51:03,272 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:51:03,275 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:51:03,281 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:51:03,285 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:03,285 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:51:03,290 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:51:03,290 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:51:03,294 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:03,294 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:51:03,299 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:03,299 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:51:03,303 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:03,303 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:51:03,308 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:03,308 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:51:03,313 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:51:03,313 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:51:03,317 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:03,317 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:51:03,322 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:03,322 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:51:03,326 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:03,326 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:51:03,331 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:51:03,331 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:51:03,335 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:51:03,335 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:51:03,335 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:51:03,340 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:51:03,340 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:51:03,340 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:51:03,344 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:51:03,349 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:51:03,350 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:51:03,350 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:51:03,350 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:51:03,350 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:51:03,355 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:51:03,360 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:51:03,360 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:51:03,360 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:51:03,360 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:51:03,360 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:51:03,360 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:51:03,361 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:51:03,361 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:51:03,361 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:51:03,361 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:51:03,361 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:51:03,361 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:51:03,361 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:51:03,361 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:51:03,361 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:51:03,361 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:51:03,361 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:51:03,361 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:51:03,361 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:51:03,362 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:51:03,362 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:51:03,362 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:51:03,362 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-11-27 21:51:03,362 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-11-27 21:51:04,050 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-11-27 21:51:04,066 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-11-27 21:51:04,066 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-11-27 21:51:04,080 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-11-27 21:51:04,084 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-11-27 21:51:04,087 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-11-27 21:51:04,090 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-11-27 21:51:04,093 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-11-27 21:51:04,097 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-11-27 21:51:04,101 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-11-27 21:51:04,104 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-11-27 21:51:04,107 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-11-27 21:51:04,110 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-11-27 21:51:04,113 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-11-27 21:51:04,116 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-11-27 21:51:04,119 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-11-27 21:51:04,123 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-11-27 21:51:04,126 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-11-27 21:51:04,129 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-11-27 21:51:04,132 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-11-27 21:51:04,135 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-11-27 21:51:04,138 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-11-27 21:51:04,143 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-11-27 21:51:04,148 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:04,148 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-11-27 21:51:04,152 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:51:04,152 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-11-27 21:51:04,157 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:04,157 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-11-27 21:51:04,161 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:04,161 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-11-27 21:51:04,166 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:04,166 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-11-27 21:51:04,170 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:04,170 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-11-27 21:51:04,174 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-11-27 21:51:04,174 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-11-27 21:51:04,179 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:04,179 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-11-27 21:51:04,183 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:04,183 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-11-27 21:51:04,187 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-11-27 21:51:04,187 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-11-27 21:51:04,191 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-11-27 21:51:04,192 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-11-27 21:51:04,196 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-11-27 21:51:04,196 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-11-27 21:51:04,196 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-11-27 21:51:04,200 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-11-27 21:51:04,200 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-11-27 21:51:04,200 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-11-27 21:51:04,205 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-11-27 21:51:04,209 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-11-27 21:51:04,209 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-11-27 21:51:04,209 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-11-27 21:51:04,210 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-11-27 21:51:04,210 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-11-27 21:51:04,214 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-11-27 21:51:04,218 - DEBUG - ðŸ”— Foreign keys for users: []
2025-11-27 21:51:04,218 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-11-27 21:51:04,219 - DEBUG - ðŸ” Relationship Details:
2025-11-27 21:51:04,219 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-11-27 21:51:04,219 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-11-27 21:51:04,219 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-11-27 21:51:04,219 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-11-27 21:51:04,219 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-11-27 21:51:04,219 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-11-27 21:51:04,219 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-11-27 21:51:04,219 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-11-27 21:51:04,219 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-11-27 21:51:07,577 - INFO - Database engine created with pool_size=10
2025-11-27 21:51:07,626 - INFO - Retrieved system hierarchy for ship 33f13701-849f-4030-8d71-a0f65eac992e: 4 systems, 16 components, 2 departments
2025-11-27 21:51:16,131 - INFO - Retrieved 1 configurations
2025-11-27 21:51:16,131 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:51:16,132 - DEBUG - Async get_all returned 1 configurations
2025-11-27 21:51:16,586 - INFO - Retrieved system hierarchy for ship 33f13701-849f-4030-8d71-a0f65eac992e: 4 systems, 16 components, 2 departments
2025-11-27 21:51:17,397 - INFO - Retrieved 1 configurations
2025-11-27 21:51:17,398 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:51:17,398 - DEBUG - Async get_all returned 1 configurations
2025-11-27 21:51:17,717 - INFO - Retrieved system hierarchy for ship 33f13701-849f-4030-8d71-a0f65eac992e: 4 systems, 16 components, 2 departments
2025-11-27 21:51:18,588 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-11-27 21:51:18,588 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-11-27 21:51:18,594 - INFO - SQLModel query returned 55 rows
2025-11-27 21:51:18,594 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-11-27 21:51:18,594 - DEBUG - Starting to process and group results
2025-11-27 21:51:18,594 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-11-27 21:51:18,595 - DEBUG - Creating new command group: Western Naval Command
2025-11-27 21:51:18,595 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-11-27 21:51:18,595 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 21:51:18,595 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 21:51:18,595 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-11-27 21:51:18,595 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-11-27 21:51:18,595 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-11-27 21:51:18,595 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 21:51:18,595 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-11-27 21:51:18,595 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-11-27 21:51:18,595 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-11-27 21:51:18,595 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-11-27 21:51:18,595 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-11-27 21:51:18,596 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 21:51:18,596 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-11-27 21:51:18,596 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-11-27 21:51:18,596 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-11-27 21:51:18,596 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-11-27 21:51:18,596 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-11-27 21:51:18,596 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-11-27 21:51:18,596 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-11-27 21:51:18,596 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-11-27 21:51:18,596 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-11-27 21:51:18,596 - INFO - Processed 4 unique ships into 1 command groups
2025-11-27 21:51:18,596 - DEBUG - Converting to final data structure
2025-11-27 21:51:18,597 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-11-27 21:51:18,597 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 21 total items
2025-11-27 21:51:18,597 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-11-27 21:51:18,597 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-11-27 21:51:18,597 - INFO - Final data structure: 1 command groups, 4 total ships
2025-11-27 21:51:18,597 - DEBUG - Command groups: ['Western Naval Command']
2025-11-27 21:51:18,598 - INFO - Successfully retrieved hierarchical ship data
2025-11-27 21:51:21,881 - INFO - Retrieved 1 configurations
2025-11-27 21:51:21,881 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:51:21,882 - DEBUG - Async get_all returned 1 configurations
2025-11-27 21:51:22,395 - INFO - Retrieved 1 configurations
2025-11-27 21:51:22,395 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:51:22,396 - DEBUG - Async get_all returned 1 configurations
2025-11-27 21:51:27,918 - INFO - Retrieved system hierarchy for ship 33f13701-849f-4030-8d71-a0f65eac992e: 4 systems, 16 components, 2 departments
2025-11-27 21:51:55,004 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-11-27 21:51:55,004 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-11-27 21:51:55,006 - INFO - SQLModel query returned 55 rows
2025-11-27 21:51:55,006 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-11-27 21:51:55,006 - DEBUG - Starting to process and group results
2025-11-27 21:51:55,007 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-11-27 21:51:55,007 - DEBUG - Creating new command group: Western Naval Command
2025-11-27 21:51:55,007 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-11-27 21:51:55,007 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 21:51:55,007 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 21:51:55,007 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-11-27 21:51:55,007 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-11-27 21:51:55,007 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-11-27 21:51:55,007 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 21:51:55,007 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-11-27 21:51:55,007 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-11-27 21:51:55,007 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-11-27 21:51:55,007 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-11-27 21:51:55,008 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-11-27 21:51:55,008 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 21:51:55,008 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-11-27 21:51:55,008 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-11-27 21:51:55,008 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-11-27 21:51:55,008 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-11-27 21:51:55,008 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-11-27 21:51:55,008 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-11-27 21:51:55,008 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-11-27 21:51:55,008 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-11-27 21:51:55,008 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-11-27 21:51:55,009 - INFO - Processed 4 unique ships into 1 command groups
2025-11-27 21:51:55,009 - DEBUG - Converting to final data structure
2025-11-27 21:51:55,009 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-11-27 21:51:55,009 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 21 total items
2025-11-27 21:51:55,009 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-11-27 21:51:55,009 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-11-27 21:51:55,009 - INFO - Final data structure: 1 command groups, 4 total ships
2025-11-27 21:51:55,009 - DEBUG - Command groups: ['Western Naval Command']
2025-11-27 21:51:55,009 - INFO - Successfully retrieved hierarchical ship data
2025-11-27 21:52:45,528 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-11-27 21:52:45,528 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-11-27 21:52:45,531 - INFO - SQLModel query returned 55 rows
2025-11-27 21:52:45,531 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-11-27 21:52:45,531 - DEBUG - Starting to process and group results
2025-11-27 21:52:45,531 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-11-27 21:52:45,531 - DEBUG - Creating new command group: Western Naval Command
2025-11-27 21:52:45,531 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-11-27 21:52:45,531 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 21:52:45,531 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 21:52:45,531 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-11-27 21:52:45,531 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-11-27 21:52:45,532 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-11-27 21:52:45,532 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 21:52:45,532 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-11-27 21:52:45,532 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-11-27 21:52:45,532 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-11-27 21:52:45,532 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-11-27 21:52:45,532 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-11-27 21:52:45,532 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 21:52:45,532 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-11-27 21:52:45,532 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-11-27 21:52:45,532 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-11-27 21:52:45,532 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-11-27 21:52:45,533 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-11-27 21:52:45,533 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-11-27 21:52:45,533 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-11-27 21:52:45,533 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-11-27 21:52:45,533 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-11-27 21:52:45,533 - INFO - Processed 4 unique ships into 1 command groups
2025-11-27 21:52:45,533 - DEBUG - Converting to final data structure
2025-11-27 21:52:45,533 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-11-27 21:52:45,533 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 21 total items
2025-11-27 21:52:45,533 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-11-27 21:52:45,533 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-11-27 21:52:45,534 - INFO - Final data structure: 1 command groups, 4 total ships
2025-11-27 21:52:45,534 - DEBUG - Command groups: ['Western Naval Command']
2025-11-27 21:52:45,534 - INFO - Successfully retrieved hierarchical ship data
2025-11-27 21:52:54,929 - INFO - Retrieved 1 configurations
2025-11-27 21:52:54,929 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:52:54,930 - DEBUG - Async get_all returned 1 configurations
2025-11-27 21:52:55,227 - INFO - Retrieved 1 configurations
2025-11-27 21:52:55,227 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:52:55,228 - DEBUG - Async get_all returned 1 configurations
2025-11-27 21:52:57,427 - INFO - Retrieved system hierarchy for ship 33f13701-849f-4030-8d71-a0f65eac992e: 4 systems, 16 components, 2 departments
2025-11-27 21:54:03,078 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-11-27 21:54:03,078 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-11-27 21:54:03,080 - INFO - SQLModel query returned 55 rows
2025-11-27 21:54:03,080 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-11-27 21:54:03,081 - DEBUG - Starting to process and group results
2025-11-27 21:54:03,081 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-11-27 21:54:03,081 - DEBUG - Creating new command group: Western Naval Command
2025-11-27 21:54:03,081 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-11-27 21:54:03,081 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 21:54:03,081 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 21:54:03,081 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-11-27 21:54:03,081 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-11-27 21:54:03,081 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-11-27 21:54:03,081 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 21:54:03,081 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-11-27 21:54:03,081 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-11-27 21:54:03,081 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-11-27 21:54:03,082 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-11-27 21:54:03,082 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-11-27 21:54:03,082 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 21:54:03,082 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-11-27 21:54:03,082 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-11-27 21:54:03,082 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-11-27 21:54:03,082 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-11-27 21:54:03,082 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-11-27 21:54:03,082 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-11-27 21:54:03,082 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-11-27 21:54:03,082 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-11-27 21:54:03,082 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-11-27 21:54:03,083 - INFO - Processed 4 unique ships into 1 command groups
2025-11-27 21:54:03,083 - DEBUG - Converting to final data structure
2025-11-27 21:54:03,083 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-11-27 21:54:03,083 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 21 total items
2025-11-27 21:54:03,083 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-11-27 21:54:03,083 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-11-27 21:54:03,083 - INFO - Final data structure: 1 command groups, 4 total ships
2025-11-27 21:54:03,083 - DEBUG - Command groups: ['Western Naval Command']
2025-11-27 21:54:03,084 - INFO - Successfully retrieved hierarchical ship data
2025-11-27 21:54:07,397 - INFO - Retrieved 1 configurations
2025-11-27 21:54:07,397 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:54:07,397 - DEBUG - Async get_all returned 1 configurations
2025-11-27 21:54:07,688 - INFO - Retrieved 1 configurations
2025-11-27 21:54:07,689 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:54:07,689 - DEBUG - Async get_all returned 1 configurations
2025-11-27 21:54:13,163 - INFO - Retrieved system hierarchy for ship 33f13701-849f-4030-8d71-a0f65eac992e: 4 systems, 16 components, 2 departments
2025-11-27 21:56:57,952 - INFO - Retrieved 1 configurations
2025-11-27 21:56:57,952 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:56:57,953 - DEBUG - Async get_all returned 1 configurations
2025-11-27 21:57:00,211 - INFO - Retrieved 1 configurations
2025-11-27 21:57:00,211 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:57:00,211 - DEBUG - Async get_all returned 1 configurations
2025-11-27 21:57:47,636 - INFO - Retrieved 1 configurations
2025-11-27 21:57:47,636 - DEBUG - Sample config: {'config_name': 'jjk', 'ship_id': UUID('33f13701-849f-4030-8d71-a0f65eac992e'), 'ship_name': 'INS ONE', 'configuration': {'id': '1764173950181', 'config_name': 'jjk', 'ship_id': '33f13701-849f-4030-8d71-a0f65eac992e', 'ship_name': 'INS ONE', 'created_date': '2025-11-26T16:19:10.181Z', 'modified_date': '2025-11-26T16:19:10.181Z', 'configuration': {'propulsion': {'system_id': '64044bde-5b46-4ab3-b44d-2d140833284b', 'selected_equipment': [{'id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'name': 'Gas Turbine', 'nomenclature': 'GT 3', 'component_id': 'ab055ca1-2aa1-4c55-a1b1-39ead450a131', 'component_name': 'Gas Turbine'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'power_generation': {'system_id': '017bdf6b-d9f2-4f31-869d-842ad61a9627', 'selected_equipment': [{'id': '443360a0-6218-486b-a34c-1813963177b7', 'name': 'Generator', 'nomenclature': 'GTG 1', 'component_id': '443360a0-6218-486b-a34c-1813963177b7', 'component_name': 'Generator'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'support': {'system_id': '6b3a59eb-4cc2-4480-b512-9357aed35540', 'selected_equipment': [{'id': '308804ec-bca2-45e9-b665-515de88ffa70', 'name': 'Air Conditioner', 'nomenclature': 'AC 6', 'component_id': '308804ec-bca2-45e9-b665-515de88ffa70', 'component_name': 'Air Conditioner'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}, 'firing': {'system_id': 'a2b3e95b-c3b8-43ce-af79-eb445794f7ab', 'selected_equipment': [{'id': '1c16dacf-69cd-4061-b004-113d85948c61', 'name': 'Missile', 'nomenclature': 'BrahMos', 'component_id': '1c16dacf-69cd-4061-b004-113d85948c61', 'component_name': 'Missile'}], 'phases': [{'phase_number': 1, 'phase_name': 'Action', 'k': 1, 'n': 1}]}}}, 'id': 'ba97c299-0446-4921-8a18-f222b458bfe8', 'created_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000), 'modified_date': datetime.datetime(2025, 11, 26, 16, 19, 10, 357000)}
2025-11-27 21:57:47,637 - DEBUG - Async get_all returned 1 configurations
2025-11-27 22:01:59,240 - INFO - Created config: popui (ID: 9a893bae-d815-4cd3-afb3-e3d7194ea33e)
2025-11-27 22:01:59,269 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-11-27 22:01:59,270 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-11-27 22:01:59,272 - INFO - SQLModel query returned 55 rows
2025-11-27 22:01:59,272 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-11-27 22:01:59,272 - DEBUG - Starting to process and group results
2025-11-27 22:01:59,272 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-11-27 22:01:59,272 - DEBUG - Creating new command group: Western Naval Command
2025-11-27 22:01:59,272 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-11-27 22:01:59,272 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 22:01:59,273 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-11-27 22:01:59,273 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-11-27 22:01:59,273 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-11-27 22:01:59,273 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-11-27 22:01:59,273 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-11-27 22:01:59,273 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-11-27 22:01:59,273 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-11-27 22:01:59,273 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-11-27 22:01:59,274 - INFO - Processed 4 unique ships into 1 command groups
2025-11-27 22:01:59,274 - DEBUG - Converting to final data structure
2025-11-27 22:01:59,274 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-11-27 22:01:59,274 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 21 total items
2025-11-27 22:01:59,274 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-11-27 22:01:59,274 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-11-27 22:01:59,274 - INFO - Final data structure: 1 command groups, 4 total ships
2025-11-27 22:01:59,274 - DEBUG - Command groups: ['Western Naval Command']
2025-11-27 22:01:59,274 - INFO - Successfully retrieved hierarchical ship data
