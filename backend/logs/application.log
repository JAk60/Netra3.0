2025-12-01 23:52:40,425 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-01 23:52:40,503 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-01 23:52:40,503 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-01 23:52:40,503 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-01 23:52:40,507 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-01 23:52:40,507 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-01 23:52:40,507 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-01 23:52:40,512 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-01 23:52:40,516 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-01 23:52:40,516 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-01 23:52:40,516 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-01 23:52:40,516 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-01 23:52:40,517 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-01 23:52:40,521 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-01 23:52:40,525 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-01 23:52:40,525 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-01 23:52:40,525 - DEBUG - ðŸ” Relationship Details:
2025-12-01 23:52:40,525 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-01 23:52:40,525 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-01 23:52:40,525 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-01 23:52:40,525 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-01 23:52:40,526 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-01 23:52:40,526 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-01 23:52:40,526 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-01 23:52:40,526 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-01 23:52:40,526 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-01 23:52:40,526 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-01 23:52:40,526 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-01 23:52:40,526 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-01 23:52:40,526 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-01 23:52:40,526 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-01 23:52:40,526 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-01 23:52:40,526 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-01 23:52:40,526 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-01 23:52:40,526 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-01 23:52:40,526 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-01 23:53:19,237 - INFO - Database engine created with pool_size=10
2025-12-01 23:53:19,278 - INFO - Retrieved 17 overhaul metadata records for ship_id: 33f13701-849f-4030-8d71-a0f65eac992e
2025-12-01 23:56:02,297 - INFO - Created overhaul metadata for component: 5358d044-9f4f-44cf-a975-341221f7189d (ID: 867f0260-de75-46ea-b390-2f2521688980)
2025-12-01 23:56:02,322 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-12-01 23:56:02,323 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-12-01 23:56:02,327 - INFO - SQLModel query returned 56 rows
2025-12-01 23:56:02,327 - DEBUG - First row sample: (UUID('6b16ae77-07e5-4b98-a398-6b5de1763b0b'), 'ins ssxxxxx', 'ss', None, None, None, None, None)
2025-12-01 23:56:02,327 - DEBUG - Starting to process and group results
2025-12-01 23:56:02,327 - DEBUG - Initializing new ship: ins ssxxxxx (ID: 6b16ae77-07e5-4b98-a398-6b5de1763b0b, Command: ss)
2025-12-01 23:56:02,327 - DEBUG - Creating new command group: ss
2025-12-01 23:56:02,327 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-12-01 23:56:02,327 - DEBUG - Creating new command group: Western Naval Command
2025-12-01 23:56:02,327 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-12-01 23:56:02,327 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-01 23:56:02,327 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-01 23:56:02,327 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-12-01 23:56:02,327 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-12-01 23:56:02,327 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-12-01 23:56:02,328 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-01 23:56:02,328 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-12-01 23:56:02,328 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-12-01 23:56:02,328 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-12-01 23:56:02,328 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-12-01 23:56:02,328 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-12-01 23:56:02,328 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-01 23:56:02,328 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-12-01 23:56:02,328 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-12-01 23:56:02,328 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-12-01 23:56:02,328 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-12-01 23:56:02,328 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-12-01 23:56:02,329 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-12-01 23:56:02,329 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-12-01 23:56:02,329 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-12-01 23:56:02,329 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-12-01 23:56:02,329 - INFO - Processed 5 unique ships into 2 command groups
2025-12-01 23:56:02,329 - DEBUG - Converting to final data structure
2025-12-01 23:56:02,329 - DEBUG - Ship 6b16ae77-07e5-4b98-a398-6b5de1763b0b: 0 equipment groups, 0 total items
2025-12-01 23:56:02,329 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-12-01 23:56:02,329 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 21 total items
2025-12-01 23:56:02,329 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-12-01 23:56:02,329 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-12-01 23:56:02,329 - INFO - Final data structure: 2 command groups, 5 total ships
2025-12-01 23:56:02,329 - DEBUG - Command groups: ['ss', 'Western Naval Command']
2025-12-01 23:56:02,330 - INFO - Successfully retrieved hierarchical ship data
2025-12-02 00:19:33,217 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:19:33,217 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:19:33,217 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:19:33,413 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:19:33,645 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:19:33,661 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:19:33,661 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:19:33,676 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:19:33,691 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:19:33,700 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:19:33,720 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:19:33,726 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:19:33,729 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:19:33,731 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:19:33,734 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:19:33,737 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:19:33,741 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:19:33,743 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:19:33,746 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:19:33,748 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:19:33,751 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:19:33,754 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:19:33,757 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:19:33,759 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:19:33,762 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:19:33,765 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:19:33,767 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-12-02 00:19:33,770 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:19:33,773 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:19:33,779 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:19:33,783 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:33,783 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:19:33,788 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:19:33,788 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:19:33,792 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:33,792 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:19:33,796 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:33,797 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:19:33,801 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:33,801 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:19:33,806 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:33,806 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:19:33,810 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:19:33,810 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:19:33,815 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:33,815 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:19:33,819 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:33,819 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:19:33,824 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:33,824 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:19:33,828 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:19:33,828 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:19:33,833 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:19:33,833 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:19:33,833 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:19:33,838 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:19:33,838 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:19:33,838 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:19:33,842 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:19:33,847 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:19:33,847 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:19:33,847 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:19:33,847 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:19:33,847 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:19:33,852 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:19:33,856 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:19:33,856 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:19:33,857 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:19:33,857 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:19:33,857 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:19:33,857 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:19:33,857 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:19:33,857 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:19:33,857 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:19:33,857 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:19:33,857 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:19:33,857 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:19:33,857 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:19:33,857 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:19:33,857 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:19:33,858 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:19:33,858 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:19:33,858 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:19:33,858 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:19:33,858 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:19:33,858 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:19:33,858 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:19:33,859 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:19:33,859 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:19:34,472 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:19:34,563 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:19:34,579 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:19:34,580 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:19:34,592 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:19:34,597 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:19:34,600 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:19:34,603 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:19:34,606 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:19:34,609 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:19:34,612 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:19:34,615 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:19:34,618 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:19:34,621 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:19:34,624 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:19:34,628 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:19:34,631 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:19:34,636 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:19:34,640 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:19:34,643 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:19:34,647 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-12-02 00:19:34,650 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:19:34,654 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:19:34,660 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:19:34,665 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:34,665 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:19:34,671 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:19:34,671 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:19:34,676 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:34,676 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:19:34,681 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:34,681 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:19:34,688 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:34,689 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:19:34,695 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:34,696 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:19:34,701 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:19:34,701 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:19:34,706 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:34,706 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:19:34,711 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:34,711 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:19:34,717 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:34,717 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:19:34,722 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:19:34,722 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:19:34,727 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:19:34,728 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:19:34,728 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:19:34,733 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:19:34,733 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:19:34,733 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:19:34,738 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:19:34,743 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:19:34,743 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:19:34,743 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:19:34,743 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:19:34,743 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:19:34,748 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:19:34,753 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:19:34,753 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:19:34,753 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:19:34,753 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:19:34,753 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:19:34,753 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:19:34,753 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:19:34,753 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:19:34,753 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:19:34,754 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:19:34,754 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:19:34,754 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:19:34,754 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:19:34,754 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:19:34,754 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:19:34,754 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:19:34,754 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:19:34,754 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:19:34,754 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:19:34,754 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:19:34,754 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:19:34,754 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:19:37,076 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:19:37,076 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:19:37,076 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:19:38,285 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:19:38,285 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:19:38,285 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:19:39,825 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:19:39,825 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:19:39,825 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:19:43,889 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:19:44,476 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:19:44,477 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:19:46,397 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:19:46,397 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:19:46,397 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:19:52,763 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:19:52,764 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:19:52,764 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:19:52,957 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:19:53,193 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:19:53,209 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:19:53,209 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:19:53,224 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:19:53,239 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:19:53,248 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:19:53,268 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:19:53,274 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:19:53,276 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:19:53,279 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:19:53,282 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:19:53,285 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:19:53,288 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:19:53,291 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:19:53,294 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:19:53,297 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:19:53,299 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:19:53,302 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:19:53,305 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:19:53,307 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:19:53,310 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:19:53,313 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:19:53,316 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-12-02 00:19:53,318 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:19:53,321 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:19:53,327 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:19:53,332 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:53,332 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:19:53,336 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:19:53,336 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:19:53,340 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:53,340 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:19:53,345 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:53,345 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:19:53,349 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:53,349 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:19:53,354 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:53,354 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:19:53,358 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:19:53,358 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:19:53,363 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:53,363 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:19:53,367 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:53,367 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:19:53,372 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:53,372 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:19:53,376 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:19:53,376 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:19:53,381 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:19:53,381 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:19:53,381 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:19:53,386 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:19:53,386 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:19:53,386 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:19:53,390 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:19:53,395 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:19:53,395 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:19:53,395 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:19:53,395 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:19:53,395 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:19:53,400 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:19:53,404 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:19:53,405 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:19:53,405 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:19:53,405 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:19:53,405 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:19:53,405 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:19:53,405 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:19:53,405 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:19:53,405 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:19:53,405 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:19:53,405 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:19:53,406 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:19:53,406 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:19:53,406 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:19:54,010 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:19:54,101 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:19:54,116 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:19:54,116 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:19:54,129 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:19:54,134 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:19:54,136 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:19:54,139 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:19:54,141 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:19:54,145 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:19:54,148 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:19:54,150 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:19:54,153 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:19:54,156 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:19:54,158 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:19:54,161 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:19:54,164 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:19:54,167 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:19:54,169 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:19:54,172 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:19:54,175 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-12-02 00:19:54,177 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:19:54,180 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:19:54,186 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:19:54,190 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:54,190 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:19:54,195 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:19:54,195 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:19:54,199 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:54,199 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:19:54,204 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:54,204 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:19:54,208 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:54,208 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:19:54,213 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:54,213 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:19:54,217 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:19:54,217 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:19:54,221 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:54,222 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:19:54,226 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:54,226 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:19:54,230 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:19:54,230 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:19:54,235 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:19:54,235 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:19:54,239 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:19:54,239 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:19:54,239 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:19:54,243 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:19:54,244 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:19:54,244 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:19:54,248 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:19:54,252 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:19:54,253 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:19:54,253 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:19:54,253 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:19:54,253 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:19:54,257 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:19:54,261 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:19:54,261 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:19:54,261 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:19:54,261 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:19:54,261 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:19:54,261 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:19:54,261 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:19:54,261 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:19:54,261 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:19:54,261 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:19:54,261 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:19:54,261 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:19:54,261 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:19:54,261 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:19:54,261 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:19:54,261 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:19:54,261 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:19:54,262 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:19:54,262 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:19:54,262 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:19:54,262 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:19:54,262 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:20:44,023 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:20:44,023 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:20:44,023 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:20:44,218 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:20:44,454 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:20:44,469 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:20:44,469 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:20:44,484 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:20:44,499 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:20:44,508 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:20:44,528 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:20:44,534 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:20:44,536 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:20:44,539 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:20:44,542 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:20:44,545 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:20:44,548 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:20:44,551 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:20:44,553 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:20:44,556 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:20:44,558 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:20:44,561 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:20:44,564 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:20:44,567 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:20:44,569 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:20:44,572 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:20:44,575 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-12-02 00:20:44,577 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:20:44,581 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:20:44,586 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:20:44,591 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:44,591 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:20:44,595 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:20:44,595 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:20:44,600 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:44,600 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:20:44,604 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:44,604 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:20:44,609 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:44,609 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:20:44,613 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:44,613 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:20:44,618 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:20:44,618 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:20:44,622 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:44,622 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:20:44,627 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:44,627 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:20:44,631 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:44,631 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:20:44,635 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:20:44,635 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:20:44,640 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:20:44,640 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:20:44,640 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:20:44,644 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:20:44,644 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:20:44,644 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:20:44,649 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:20:44,653 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:20:44,653 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:20:44,653 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:20:44,653 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:20:44,653 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:20:44,657 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:20:44,661 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:20:44,662 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:20:44,662 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:20:44,662 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:20:44,662 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:20:44,662 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:20:44,662 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:20:44,662 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:20:44,662 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:20:44,662 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:20:44,662 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:20:44,662 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:20:44,662 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:20:44,662 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:20:44,662 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:20:44,662 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:20:44,662 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:20:44,662 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:20:44,663 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:20:44,663 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:20:44,663 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:20:44,663 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:20:44,663 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:20:44,663 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:20:45,261 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:20:45,350 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:20:45,364 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:20:45,365 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:20:45,378 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:20:45,384 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:20:45,387 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:20:45,390 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:20:45,393 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:20:45,396 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:20:45,400 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:20:45,402 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:20:45,405 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:20:45,408 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:20:45,410 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:20:45,413 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:20:45,416 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:20:45,419 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:20:45,422 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:20:45,424 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:20:45,427 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-12-02 00:20:45,430 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:20:45,433 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:20:45,438 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:20:45,443 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:45,443 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:20:45,447 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:20:45,447 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:20:45,452 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:45,452 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:20:45,456 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:45,456 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:20:45,460 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:45,460 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:20:45,465 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:45,465 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:20:45,469 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:20:45,469 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:20:45,474 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:45,474 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:20:45,478 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:45,478 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:20:45,482 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:45,482 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:20:45,487 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:20:45,487 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:20:45,491 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:20:45,491 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:20:45,491 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:20:45,495 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:20:45,496 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:20:45,496 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:20:45,500 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:20:45,505 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:20:45,505 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:20:45,505 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:20:45,505 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:20:45,505 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:20:45,509 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:20:45,513 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:20:45,513 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:20:45,514 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:20:45,514 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:20:45,514 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:20:45,514 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:20:45,514 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:20:45,514 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:20:45,514 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:20:45,514 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:20:45,514 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:20:45,514 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:20:54,368 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:20:54,368 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:20:54,368 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:20:57,162 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:20:57,163 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:20:57,163 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:20:57,355 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:20:57,587 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:20:57,603 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:20:57,603 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:20:57,618 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:20:57,633 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:20:57,642 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:20:57,662 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:20:57,668 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:20:57,671 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:20:57,673 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:20:57,676 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:20:57,679 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:20:57,682 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:20:57,685 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:20:57,687 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:20:57,690 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:20:57,693 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:20:57,695 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:20:57,698 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:20:57,701 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:20:57,703 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:20:57,706 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:20:57,709 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-12-02 00:20:57,711 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:20:57,714 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:20:57,720 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:20:57,725 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:57,725 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:20:57,729 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:20:57,729 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:20:57,734 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:57,734 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:20:57,738 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:57,738 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:20:57,743 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:57,743 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:20:57,747 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:57,747 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:20:57,752 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:20:57,752 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:20:57,756 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:57,756 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:20:57,761 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:57,761 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:20:57,765 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:57,766 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:20:57,770 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:20:57,770 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:20:57,775 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:20:57,775 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:20:57,775 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:20:57,779 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:20:57,779 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:20:57,779 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:20:57,784 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:20:57,788 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:20:57,788 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:20:57,788 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:20:57,788 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:20:57,788 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:20:57,793 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:20:57,797 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:20:57,797 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:20:57,797 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:20:57,797 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:20:57,797 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:20:57,797 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:20:57,797 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:20:57,797 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:20:57,797 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:20:57,797 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:20:57,797 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:20:57,797 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:20:57,798 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:20:57,798 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:20:57,798 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:20:57,798 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:20:57,798 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:20:57,798 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:20:57,798 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:20:57,798 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:20:57,798 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:20:57,798 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:20:57,798 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:20:57,798 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:20:58,402 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:20:58,493 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:20:58,509 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:20:58,510 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:20:58,522 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:20:58,527 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:20:58,530 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:20:58,533 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:20:58,535 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:20:58,539 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:20:58,541 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:20:58,544 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:20:58,547 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:20:58,550 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:20:58,552 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:20:58,555 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:20:58,558 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:20:58,561 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:20:58,563 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:20:58,566 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:20:58,569 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id']
2025-12-02 00:20:58,572 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:20:58,574 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:20:58,580 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:20:58,584 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:58,584 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:20:58,588 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:20:58,588 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:20:58,593 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:58,593 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:20:58,597 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:58,597 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:20:58,601 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:58,601 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:20:58,606 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:58,606 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:20:58,610 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:20:58,610 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:20:58,615 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:58,615 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:20:58,619 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:58,619 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:20:58,623 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:20:58,623 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:20:58,627 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:20:58,628 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:20:58,632 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:20:58,632 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:20:58,632 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:20:58,637 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:20:58,637 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:20:58,637 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:20:58,641 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:20:58,646 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:20:58,646 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:20:58,646 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:20:58,646 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:20:58,646 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:20:58,650 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:20:58,654 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:20:58,654 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:20:58,655 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:20:58,655 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:20:58,655 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:20:58,655 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:20:58,655 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:20:58,655 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:20:58,655 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:20:58,655 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:20:58,655 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:20:58,655 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:36:02,078 - INFO - Database engine created with pool_size=10
2025-12-02 00:36:02,081 - ERROR - Database session error in FastAPI dependency: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object SystemConfigurationRepository.create at 0x7a8dabbb0900>}

2025-12-02 00:36:30,856 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:36:30,856 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:36:30,856 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:36:31,052 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:36:31,293 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:36:31,309 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:36:31,309 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:36:31,324 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:36:31,339 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:36:31,348 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:36:31,820 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:36:31,826 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:36:31,829 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:36:31,831 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:36:31,834 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:36:31,838 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:36:31,841 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:36:31,844 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:36:31,846 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:36:31,849 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:36:31,851 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:36:31,854 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:36:31,857 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:36:31,860 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:36:31,863 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:36:31,865 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:36:31,868 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:36:31,871 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:36:31,874 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:36:31,880 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:36:31,884 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:31,884 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:36:31,889 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:36:31,889 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:36:31,893 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:31,893 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:36:31,898 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:31,898 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:36:31,902 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:31,902 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:36:31,906 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:31,907 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:36:31,911 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:36:31,911 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:36:31,915 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:31,915 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:36:31,919 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:31,919 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:36:31,924 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:31,924 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:36:31,928 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:36:31,928 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:36:31,932 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:36:31,932 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:36:31,932 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:36:31,937 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:36:31,937 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:36:31,937 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:36:31,941 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:36:31,946 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:36:31,946 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:36:31,946 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:36:31,946 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:36:31,946 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:36:31,950 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:36:31,954 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:36:31,954 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:36:31,954 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:36:31,954 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:36:31,955 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:36:31,955 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:36:31,955 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:36:31,955 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:36:31,955 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:36:31,955 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:36:31,955 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:36:31,955 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:36:31,956 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:36:31,956 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:36:32,561 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:36:32,653 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:36:32,668 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:36:32,669 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:36:32,681 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:36:32,686 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:36:32,689 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:36:32,692 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:36:32,694 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:36:32,698 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:36:32,701 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:36:32,704 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:36:32,706 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:36:32,709 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:36:32,711 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:36:32,714 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:36:32,717 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:36:32,720 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:36:32,723 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:36:32,726 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:36:32,729 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:36:32,731 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:36:32,734 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:36:32,740 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:36:32,744 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:32,744 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:36:32,749 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:36:32,749 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:36:32,753 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:32,753 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:36:32,758 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:32,758 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:36:32,762 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:32,762 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:36:32,766 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:32,766 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:36:32,771 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:36:32,771 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:36:32,775 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:32,775 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:36:32,780 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:32,780 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:36:32,784 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:32,784 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:36:32,788 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:36:32,788 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:36:32,793 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:36:32,793 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:36:32,793 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:36:32,797 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:36:32,797 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:36:32,797 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:36:32,801 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:36:32,806 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:36:32,806 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:36:32,806 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:36:32,806 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:36:32,807 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:36:32,811 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:36:32,815 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:36:32,815 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:36:32,815 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:36:32,815 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:36:32,815 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:36:32,815 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:36:32,815 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:36:32,815 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:36:32,815 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:36:32,815 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:36:32,815 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:36:32,815 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:36:32,815 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:36:32,815 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:36:32,815 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:36:32,816 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:36:32,816 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:36:32,816 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:36:32,816 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:36:32,816 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:36:32,816 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:36:32,816 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:36:33,757 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:36:33,757 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:36:33,757 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:36:33,950 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:36:34,186 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:36:34,201 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:36:34,202 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:36:34,216 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:36:34,231 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:36:34,241 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:36:34,260 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:36:34,266 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:36:34,269 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:36:34,272 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:36:34,275 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:36:34,278 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:36:34,281 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:36:34,284 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:36:34,287 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:36:34,289 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:36:34,292 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:36:34,295 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:36:34,298 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:36:34,301 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:36:34,303 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:36:34,306 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:36:34,309 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:36:34,312 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:36:34,315 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:36:34,321 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:36:34,325 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:34,325 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:36:34,330 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:36:34,330 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:36:34,334 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:34,334 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:36:34,339 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:34,339 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:36:34,343 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:34,343 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:36:34,348 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:34,348 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:36:34,352 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:36:34,352 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:36:34,357 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:34,357 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:36:34,361 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:34,361 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:36:34,366 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:34,366 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:36:34,370 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:36:34,370 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:36:34,375 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:36:34,375 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:36:34,375 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:36:34,380 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:36:34,380 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:36:34,380 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:36:34,384 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:36:34,389 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:36:34,389 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:36:34,389 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:36:34,389 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:36:34,389 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:36:34,393 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:36:34,398 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:36:34,398 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:36:34,398 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:36:34,398 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:36:34,398 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:36:34,398 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:36:34,398 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:36:34,398 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:36:34,398 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:36:34,398 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:36:34,398 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:36:34,398 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:36:34,398 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:36:34,398 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:36:34,398 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:36:34,398 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:36:34,398 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:36:34,399 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:36:34,399 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:36:34,399 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:36:34,399 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:36:34,399 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:36:34,399 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:36:34,399 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:36:34,998 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:36:35,089 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:36:35,104 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:36:35,105 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:36:35,118 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:36:35,123 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:36:35,126 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:36:35,128 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:36:35,131 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:36:35,134 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:36:35,137 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:36:35,140 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:36:35,143 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:36:35,145 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:36:35,148 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:36:35,150 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:36:35,153 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:36:35,156 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:36:35,159 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:36:35,162 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:36:35,165 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:36:35,168 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:36:35,171 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:36:35,177 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:36:35,182 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:35,182 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:36:35,186 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:36:35,186 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:36:35,191 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:35,191 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:36:35,196 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:35,196 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:36:35,200 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:35,200 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:36:35,204 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:35,205 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:36:35,209 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:36:35,209 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:36:35,214 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:35,214 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:36:35,218 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:35,218 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:36:35,223 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:36:35,223 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:36:35,227 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:36:35,227 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:36:35,232 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:36:35,232 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:36:35,232 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:36:35,236 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:36:35,236 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:36:35,236 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:36:35,241 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:36:35,246 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:36:35,246 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:36:35,246 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:36:35,246 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:36:35,246 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:36:35,250 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:36:35,255 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:36:35,255 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:36:35,255 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:36:35,255 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:36:35,255 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:36:35,255 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:36:35,255 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:36:35,255 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:36:35,255 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:36:35,255 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:36:35,255 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:36:35,256 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:36:38,877 - INFO - Database engine created with pool_size=10
2025-12-02 00:36:39,024 - INFO - Created component: Gas Turbine (ID: 9e5ae69f-1269-4833-af94-d2e7e990c734)
2025-12-02 00:40:03,869 - INFO - Created component: Gas Turbine (ID: d67b05aa-20b8-4648-9c61-ce13a0b38b63)
2025-12-02 00:41:14,407 - INFO - Created overhaul metadata for component: 73c81f0b-5c0f-4203-84eb-95bc0af1eeb8 (ID: 16397e88-7485-4e18-8037-c885b26cf07c)
2025-12-02 00:41:14,444 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-12-02 00:41:14,445 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-12-02 00:41:14,451 - INFO - SQLModel query returned 58 rows
2025-12-02 00:41:14,451 - DEBUG - First row sample: (UUID('6b16ae77-07e5-4b98-a398-6b5de1763b0b'), 'ins ssxxxxx', 'ss', None, None, None, None, None)
2025-12-02 00:41:14,451 - DEBUG - Starting to process and group results
2025-12-02 00:41:14,451 - DEBUG - Initializing new ship: ins ssxxxxx (ID: 6b16ae77-07e5-4b98-a398-6b5de1763b0b, Command: ss)
2025-12-02 00:41:14,451 - DEBUG - Creating new command group: ss
2025-12-02 00:41:14,451 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-12-02 00:41:14,451 - DEBUG - Creating new command group: Western Naval Command
2025-12-02 00:41:14,451 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-12-02 00:41:14,452 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:41:14,452 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:41:14,452 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-12-02 00:41:14,452 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-12-02 00:41:14,452 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-12-02 00:41:14,452 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:41:14,452 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-12-02 00:41:14,452 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-12-02 00:41:14,452 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-12-02 00:41:14,452 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-12-02 00:41:14,452 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-12-02 00:41:14,452 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:41:14,452 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-12-02 00:41:14,453 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-12-02 00:41:14,453 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-12-02 00:41:14,453 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-12-02 00:41:14,453 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-12-02 00:41:14,453 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-12-02 00:41:14,453 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-12-02 00:41:14,453 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-12-02 00:41:14,453 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-12-02 00:41:14,453 - INFO - Processed 5 unique ships into 2 command groups
2025-12-02 00:41:14,453 - DEBUG - Converting to final data structure
2025-12-02 00:41:14,453 - DEBUG - Ship 6b16ae77-07e5-4b98-a398-6b5de1763b0b: 0 equipment groups, 0 total items
2025-12-02 00:41:14,453 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-12-02 00:41:14,454 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 23 total items
2025-12-02 00:41:14,454 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-12-02 00:41:14,454 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-12-02 00:41:14,454 - INFO - Final data structure: 2 command groups, 5 total ships
2025-12-02 00:41:14,454 - DEBUG - Command groups: ['ss', 'Western Naval Command']
2025-12-02 00:41:14,454 - INFO - Successfully retrieved hierarchical ship data
2025-12-02 00:48:19,996 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:48:19,996 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:48:19,996 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:48:20,189 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:48:20,428 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:48:20,444 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:48:20,444 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:48:20,459 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:48:20,474 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:48:20,483 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:48:20,503 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:48:20,509 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:48:20,511 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:48:20,514 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:48:20,517 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:48:20,520 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:48:20,523 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:48:20,526 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:48:20,528 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:48:20,531 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:48:20,534 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:48:20,537 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:48:20,539 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:48:20,542 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:48:20,545 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:48:20,548 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:48:20,551 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:48:20,553 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:48:20,556 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:48:20,562 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:48:20,567 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:20,567 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:48:20,572 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:48:20,572 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:48:20,576 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:20,577 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:48:20,581 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:20,581 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:48:20,586 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:20,586 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:48:20,590 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:20,590 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:48:20,594 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:48:20,595 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:48:20,599 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:20,599 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:48:20,604 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:20,604 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:48:20,610 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:20,610 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:48:20,615 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:48:20,615 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:48:20,620 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:48:20,620 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:48:20,620 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:48:20,626 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:48:20,626 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:48:20,626 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:48:20,630 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:48:20,635 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:48:20,635 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:48:20,635 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:48:20,635 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:48:20,635 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:48:20,639 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:48:20,644 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:48:20,644 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:48:20,644 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:48:20,644 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:48:20,644 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:48:20,644 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:48:20,644 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:48:20,644 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:48:20,644 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:48:20,644 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:48:20,644 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:48:20,644 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:48:20,644 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:48:20,644 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:48:20,644 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:48:20,644 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:48:20,644 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:48:20,644 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:48:20,644 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:48:20,645 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:48:20,645 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:48:20,645 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:48:20,645 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:48:20,645 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:48:21,248 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:48:21,338 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:48:21,353 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:48:21,354 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:48:21,366 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:48:21,371 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:48:21,374 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:48:21,376 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:48:21,379 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:48:21,382 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:48:21,385 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:48:21,388 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:48:21,390 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:48:21,393 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:48:21,396 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:48:21,398 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:48:21,401 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:48:21,404 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:48:21,406 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:48:21,409 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:48:21,412 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:48:21,414 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:48:21,417 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:48:21,423 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:48:21,427 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:21,427 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:48:21,431 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:48:21,431 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:48:21,436 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:21,436 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:48:21,440 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:21,440 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:48:21,444 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:21,445 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:48:21,449 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:21,449 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:48:21,453 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:48:21,454 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:48:21,458 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:21,458 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:48:21,462 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:21,463 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:48:21,467 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:48:21,467 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:48:21,471 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:48:21,472 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:48:21,476 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:48:21,476 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:48:21,476 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:48:21,480 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:48:21,480 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:48:21,480 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:48:21,485 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:48:21,489 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:48:21,489 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:48:21,489 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:48:21,489 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:48:21,490 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:48:21,494 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:48:21,499 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:48:21,499 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:48:21,499 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:48:21,499 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:48:21,499 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:48:21,499 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:48:21,499 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:48:21,499 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:48:21,499 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:48:21,499 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:48:21,499 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:48:21,500 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:49:51,340 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:49:51,340 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:49:51,340 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:49:51,541 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:49:51,785 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:49:51,801 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:49:51,801 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:49:51,818 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:49:51,833 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:49:51,843 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:49:51,862 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:49:51,869 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:49:51,871 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:49:51,874 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:49:51,877 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:49:51,880 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:49:51,883 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:49:51,886 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:49:51,889 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:49:51,891 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:49:51,894 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:49:51,897 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:49:51,900 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:49:51,903 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:49:51,905 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:49:51,908 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:49:51,911 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:49:51,913 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:49:51,916 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:49:51,922 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:49:51,926 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:51,927 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:49:51,931 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:49:51,931 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:49:51,935 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:51,936 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:49:51,940 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:51,940 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:49:51,944 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:51,944 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:49:51,948 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:51,949 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:49:51,955 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:49:51,956 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:49:51,960 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:51,960 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:49:51,965 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:51,965 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:49:51,969 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:51,969 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:49:51,973 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:49:51,973 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:49:51,978 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:49:51,978 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:49:51,978 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:49:51,982 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:49:51,982 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:49:51,982 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:49:51,987 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:49:51,992 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:49:51,992 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:49:51,992 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:49:51,992 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:49:51,992 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:49:51,996 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:49:52,001 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:49:52,001 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:49:52,001 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:49:52,001 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,001 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:49:52,001 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,001 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,001 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,001 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,001 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:49:52,001 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,002 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,002 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,002 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:49:52,002 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,002 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:49:52,002 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,002 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:49:52,002 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:49:52,002 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:49:52,002 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:49:52,002 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:49:52,002 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:49:52,002 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:49:52,603 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:49:52,693 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:49:52,708 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:49:52,709 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:49:52,721 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:49:52,726 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:49:52,729 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:49:52,731 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:49:52,734 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:49:52,737 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:49:52,740 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:49:52,743 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:49:52,746 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:49:52,748 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:49:52,751 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:49:52,754 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:49:52,756 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:49:52,759 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:49:52,762 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:49:52,765 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:49:52,768 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:49:52,771 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:49:52,774 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:49:52,779 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:49:52,784 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:52,784 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:49:52,788 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:49:52,788 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:49:52,793 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:52,793 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:49:52,798 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:52,798 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:49:52,802 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:52,802 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:49:52,807 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:52,807 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:49:52,811 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:49:52,811 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:49:52,816 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:52,816 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:49:52,820 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:52,820 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:49:52,825 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:49:52,825 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:49:52,830 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:49:52,830 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:49:52,834 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:49:52,834 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:49:52,834 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:49:52,839 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:49:52,839 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:49:52,839 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:49:52,844 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:49:52,849 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:49:52,849 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:49:52,849 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:49:52,850 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:49:52,850 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:49:52,854 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:49:52,858 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:49:52,858 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:49:52,859 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:49:52,859 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:49:52,859 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:49:52,859 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:49:52,859 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:49:52,859 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:49:52,859 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:49:52,859 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:49:52,859 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:49:52,859 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:49:55,633 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:49:55,633 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:49:55,633 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:49:55,827 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:50:00,925 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:50:00,925 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:50:00,926 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:50:01,117 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:50:10,063 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:50:10,063 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:50:10,063 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:50:10,253 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:50:16,963 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:50:16,963 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:50:16,963 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:50:17,153 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:50:17,389 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:50:17,404 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:50:17,405 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:50:17,419 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:50:17,434 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:50:17,443 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:50:17,463 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:50:17,468 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:50:17,471 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:50:17,474 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:50:17,476 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:50:17,480 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:50:17,483 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:50:17,485 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:50:17,488 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:50:17,490 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:50:17,493 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:50:17,495 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:50:17,498 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:50:17,501 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:50:17,503 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:50:17,506 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:50:17,509 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:50:17,512 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:50:17,515 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:50:17,520 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:50:17,525 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:17,525 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:50:17,530 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:50:17,530 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:50:17,535 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:17,535 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:50:17,539 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:17,539 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:50:17,543 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:17,544 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:50:17,548 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:17,548 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:50:17,552 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:50:17,552 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:50:17,557 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:17,557 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:50:17,562 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:17,562 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:50:17,566 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:17,567 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:50:17,571 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:50:17,571 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:50:17,576 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:50:17,576 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:50:17,576 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:50:17,580 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:50:17,580 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:50:17,580 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:50:17,585 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:50:17,589 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:50:17,589 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:50:17,589 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:50:17,589 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:50:17,589 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:50:17,594 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:50:17,598 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:50:17,598 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:50:17,598 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:50:17,598 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:50:17,598 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:50:17,599 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:50:17,599 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:50:17,599 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:50:17,599 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:50:17,599 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:50:17,599 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:50:17,599 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:50:17,599 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:50:17,599 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:50:17,599 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:50:17,599 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:50:17,599 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:50:17,599 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:50:17,599 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:50:17,599 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:50:17,599 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:50:17,599 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:50:17,600 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:50:17,600 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:50:18,213 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:50:18,304 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:50:18,319 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:50:18,320 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:50:18,333 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:50:18,338 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:50:18,340 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:50:18,343 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:50:18,346 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:50:18,349 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:50:18,352 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:50:18,354 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:50:18,357 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:50:18,360 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:50:18,362 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:50:18,365 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:50:18,367 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:50:18,370 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:50:18,373 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:50:18,376 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:50:18,379 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:50:18,381 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:50:18,384 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:50:18,390 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:50:18,394 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:18,394 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:50:18,398 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:50:18,398 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:50:18,403 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:18,403 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:50:18,407 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:18,407 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:50:18,411 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:18,412 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:50:18,416 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:18,416 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:50:18,420 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:50:18,420 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:50:18,425 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:18,425 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:50:18,429 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:18,429 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:50:18,433 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:18,434 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:50:18,438 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:50:18,438 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:50:18,442 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:50:18,442 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:50:18,442 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:50:18,447 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:50:18,447 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:50:18,447 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:50:18,451 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:50:18,456 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:50:18,456 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:50:18,456 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:50:18,456 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:50:18,456 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:50:18,460 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:50:18,465 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:50:18,465 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:50:18,465 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:50:18,465 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:50:18,465 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:50:18,465 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:50:18,465 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:50:18,465 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:50:18,465 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:50:18,465 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:50:18,465 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:50:18,465 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:50:27,993 - INFO - Database engine created with pool_size=10
2025-12-02 00:50:27,994 - ERROR - Database session error in FastAPI dependency: 'ShipRepository' object has no attribute 'delete'
2025-12-02 00:50:52,186 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:50:52,186 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:50:52,186 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:50:52,382 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:50:52,617 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:50:52,632 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:50:52,633 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:50:52,647 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:50:52,662 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:50:52,671 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:50:52,691 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:50:52,697 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:50:52,699 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:50:52,702 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:50:52,705 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:50:52,708 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:50:52,711 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:50:52,713 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:50:52,716 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:50:52,718 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:50:52,721 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:50:52,724 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:50:52,726 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:50:52,729 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:50:52,732 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:50:52,735 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:50:52,738 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:50:52,740 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:50:52,743 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:50:52,749 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:50:52,753 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:52,753 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:50:52,758 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:50:52,758 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:50:52,762 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:52,762 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:50:52,766 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:52,766 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:50:52,770 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:52,771 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:50:52,775 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:52,775 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:50:52,779 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:50:52,779 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:50:52,784 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:52,784 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:50:52,788 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:52,788 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:50:52,793 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:52,793 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:50:52,797 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:50:52,797 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:50:52,802 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:50:52,802 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:50:52,802 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:50:52,806 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:50:52,806 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:50:52,807 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:50:52,811 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:50:52,816 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:50:52,816 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:50:52,816 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:50:52,816 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:50:52,816 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:50:52,820 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:50:52,825 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:50:52,825 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:50:52,825 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:50:52,825 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:50:52,825 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:50:52,825 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:50:52,825 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:50:52,825 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:50:52,825 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:50:52,825 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:50:52,825 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:50:52,825 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:50:52,826 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:50:52,826 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:50:52,826 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:50:52,826 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:50:52,826 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:50:52,826 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:50:52,826 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:50:52,826 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:50:52,826 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:50:52,826 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:50:52,827 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:50:52,827 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:50:53,424 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:50:53,513 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:50:53,529 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:50:53,529 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:50:53,542 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:50:53,549 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:50:53,552 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:50:53,554 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:50:53,557 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:50:53,560 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:50:53,564 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:50:53,566 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:50:53,569 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:50:53,571 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:50:53,574 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:50:53,577 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:50:53,579 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:50:53,582 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:50:53,585 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:50:53,588 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:50:53,591 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:50:53,594 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:50:53,596 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:50:53,602 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:50:53,606 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:53,606 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:50:53,611 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:50:53,611 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:50:53,615 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:53,615 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:50:53,619 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:53,619 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:50:53,623 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:53,624 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:50:53,628 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:53,628 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:50:53,632 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:50:53,632 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:50:53,636 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:53,636 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:50:53,641 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:53,641 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:50:53,645 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:50:53,645 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:50:53,649 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:50:53,650 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:50:53,654 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:50:53,654 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:50:53,654 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:50:53,658 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:50:53,659 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:50:53,659 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:50:53,663 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:50:53,667 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:50:53,667 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:50:53,667 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:50:53,667 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:50:53,668 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:50:53,672 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:50:53,676 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:50:53,676 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:50:53,676 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:50:53,676 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:50:53,676 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:50:53,676 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:50:53,676 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:50:53,676 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:50:53,677 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:50:53,677 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:50:53,677 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:50:53,677 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:50:53,677 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:50:53,677 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:50:53,677 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:50:53,677 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:50:53,677 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:50:53,677 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:50:53,677 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:50:53,677 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:50:53,677 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:50:53,677 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:50:57,706 - INFO - Database engine created with pool_size=10
2025-12-02 00:50:57,742 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-12-02 00:50:57,743 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-12-02 00:50:57,781 - INFO - SQLModel query returned 58 rows
2025-12-02 00:50:57,781 - DEBUG - First row sample: (UUID('6b16ae77-07e5-4b98-a398-6b5de1763b0b'), 'ins ssxxxxx', 'ss', None, None, None, None, None)
2025-12-02 00:50:57,781 - DEBUG - Starting to process and group results
2025-12-02 00:50:57,781 - DEBUG - Initializing new ship: ins ssxxxxx (ID: 6b16ae77-07e5-4b98-a398-6b5de1763b0b, Command: ss)
2025-12-02 00:50:57,781 - DEBUG - Creating new command group: ss
2025-12-02 00:50:57,781 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-12-02 00:50:57,781 - DEBUG - Creating new command group: Western Naval Command
2025-12-02 00:50:57,781 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-12-02 00:50:57,781 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:50:57,781 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:50:57,781 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-12-02 00:50:57,782 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-12-02 00:50:57,782 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-12-02 00:50:57,782 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:50:57,782 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-12-02 00:50:57,782 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-12-02 00:50:57,782 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-12-02 00:50:57,782 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-12-02 00:50:57,782 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-12-02 00:50:57,782 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:50:57,782 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-12-02 00:50:57,782 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-12-02 00:50:57,782 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-12-02 00:50:57,782 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-12-02 00:50:57,782 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-12-02 00:50:57,783 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-12-02 00:50:57,783 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-12-02 00:50:57,783 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-12-02 00:50:57,783 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-12-02 00:50:57,783 - INFO - Processed 5 unique ships into 2 command groups
2025-12-02 00:50:57,783 - DEBUG - Converting to final data structure
2025-12-02 00:50:57,783 - DEBUG - Ship 6b16ae77-07e5-4b98-a398-6b5de1763b0b: 0 equipment groups, 0 total items
2025-12-02 00:50:57,783 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-12-02 00:50:57,783 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 23 total items
2025-12-02 00:50:57,783 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-12-02 00:50:57,783 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-12-02 00:50:57,783 - INFO - Final data structure: 2 command groups, 5 total ships
2025-12-02 00:50:57,783 - DEBUG - Command groups: ['ss', 'Western Naval Command']
2025-12-02 00:50:57,784 - INFO - Successfully retrieved hierarchical ship data
2025-12-02 00:51:09,625 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-12-02 00:51:09,625 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-12-02 00:51:09,628 - INFO - SQLModel query returned 58 rows
2025-12-02 00:51:09,628 - DEBUG - First row sample: (UUID('6b16ae77-07e5-4b98-a398-6b5de1763b0b'), 'ins ssxxxxx', 'ss', None, None, None, None, None)
2025-12-02 00:51:09,628 - DEBUG - Starting to process and group results
2025-12-02 00:51:09,628 - DEBUG - Initializing new ship: ins ssxxxxx (ID: 6b16ae77-07e5-4b98-a398-6b5de1763b0b, Command: ss)
2025-12-02 00:51:09,628 - DEBUG - Creating new command group: ss
2025-12-02 00:51:09,628 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-12-02 00:51:09,628 - DEBUG - Creating new command group: Western Naval Command
2025-12-02 00:51:09,628 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-12-02 00:51:09,628 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:51:09,628 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:51:09,628 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-12-02 00:51:09,628 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-12-02 00:51:09,628 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-12-02 00:51:09,628 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:51:09,628 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-12-02 00:51:09,628 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-12-02 00:51:09,628 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-12-02 00:51:09,629 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-12-02 00:51:09,629 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-12-02 00:51:09,629 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:51:09,629 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-12-02 00:51:09,629 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-12-02 00:51:09,629 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-12-02 00:51:09,629 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-12-02 00:51:09,629 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-12-02 00:51:09,629 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-12-02 00:51:09,629 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-12-02 00:51:09,629 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-12-02 00:51:09,629 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-12-02 00:51:09,629 - INFO - Processed 5 unique ships into 2 command groups
2025-12-02 00:51:09,629 - DEBUG - Converting to final data structure
2025-12-02 00:51:09,629 - DEBUG - Ship 6b16ae77-07e5-4b98-a398-6b5de1763b0b: 0 equipment groups, 0 total items
2025-12-02 00:51:09,629 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-12-02 00:51:09,629 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 23 total items
2025-12-02 00:51:09,629 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-12-02 00:51:09,629 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-12-02 00:51:09,629 - INFO - Final data structure: 2 command groups, 5 total ships
2025-12-02 00:51:09,630 - DEBUG - Command groups: ['ss', 'Western Naval Command']
2025-12-02 00:51:09,630 - INFO - Successfully retrieved hierarchical ship data
2025-12-02 00:51:58,013 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-12-02 00:51:58,013 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-12-02 00:51:58,016 - INFO - SQLModel query returned 58 rows
2025-12-02 00:51:58,016 - DEBUG - First row sample: (UUID('6b16ae77-07e5-4b98-a398-6b5de1763b0b'), 'ins ssxxxxx', 'ss', None, None, None, None, None)
2025-12-02 00:51:58,016 - DEBUG - Starting to process and group results
2025-12-02 00:51:58,016 - DEBUG - Initializing new ship: ins ssxxxxx (ID: 6b16ae77-07e5-4b98-a398-6b5de1763b0b, Command: ss)
2025-12-02 00:51:58,016 - DEBUG - Creating new command group: ss
2025-12-02 00:51:58,016 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-12-02 00:51:58,016 - DEBUG - Creating new command group: Western Naval Command
2025-12-02 00:51:58,016 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-12-02 00:51:58,016 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:51:58,016 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-12-02 00:51:58,017 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-12-02 00:51:58,017 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-12-02 00:51:58,017 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:51:58,017 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-12-02 00:51:58,017 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-12-02 00:51:58,017 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-12-02 00:51:58,017 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-12-02 00:51:58,017 - INFO - Processed 5 unique ships into 2 command groups
2025-12-02 00:51:58,017 - DEBUG - Converting to final data structure
2025-12-02 00:51:58,018 - DEBUG - Ship 6b16ae77-07e5-4b98-a398-6b5de1763b0b: 0 equipment groups, 0 total items
2025-12-02 00:51:58,018 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-12-02 00:51:58,018 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 23 total items
2025-12-02 00:51:58,018 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-12-02 00:51:58,018 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-12-02 00:51:58,018 - INFO - Final data structure: 2 command groups, 5 total ships
2025-12-02 00:51:58,018 - DEBUG - Command groups: ['ss', 'Western Naval Command']
2025-12-02 00:51:58,018 - INFO - Successfully retrieved hierarchical ship data
2025-12-02 00:52:35,140 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-12-02 00:52:35,141 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-12-02 00:52:35,144 - INFO - SQLModel query returned 58 rows
2025-12-02 00:52:35,144 - DEBUG - First row sample: (UUID('6b16ae77-07e5-4b98-a398-6b5de1763b0b'), 'ins ssxxxxx', 'ss', None, None, None, None, None)
2025-12-02 00:52:35,144 - DEBUG - Starting to process and group results
2025-12-02 00:52:35,144 - DEBUG - Initializing new ship: ins ssxxxxx (ID: 6b16ae77-07e5-4b98-a398-6b5de1763b0b, Command: ss)
2025-12-02 00:52:35,144 - DEBUG - Creating new command group: ss
2025-12-02 00:52:35,144 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-12-02 00:52:35,144 - DEBUG - Creating new command group: Western Naval Command
2025-12-02 00:52:35,144 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-12-02 00:52:35,144 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:52:35,144 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:52:35,144 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-12-02 00:52:35,144 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-12-02 00:52:35,144 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-12-02 00:52:35,144 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:52:35,144 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-12-02 00:52:35,144 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-12-02 00:52:35,144 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-12-02 00:52:35,144 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-12-02 00:52:35,145 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-12-02 00:52:35,145 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:52:35,145 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-12-02 00:52:35,145 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-12-02 00:52:35,145 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-12-02 00:52:35,145 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-12-02 00:52:35,145 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-12-02 00:52:35,145 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-12-02 00:52:35,145 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-12-02 00:52:35,145 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-12-02 00:52:35,145 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-12-02 00:52:35,145 - INFO - Processed 5 unique ships into 2 command groups
2025-12-02 00:52:35,145 - DEBUG - Converting to final data structure
2025-12-02 00:52:35,145 - DEBUG - Ship 6b16ae77-07e5-4b98-a398-6b5de1763b0b: 0 equipment groups, 0 total items
2025-12-02 00:52:35,145 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-12-02 00:52:35,145 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 23 total items
2025-12-02 00:52:35,145 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-12-02 00:52:35,145 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-12-02 00:52:35,145 - INFO - Final data structure: 2 command groups, 5 total ships
2025-12-02 00:52:35,145 - DEBUG - Command groups: ['ss', 'Western Naval Command']
2025-12-02 00:52:35,146 - INFO - Successfully retrieved hierarchical ship data
2025-12-02 00:55:12,165 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 00:55:12,165 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 00:55:12,165 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 00:55:12,364 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 00:55:12,603 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:55:12,619 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:55:12,619 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:55:12,634 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:55:12,650 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:55:12,659 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:55:12,679 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:55:12,684 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:55:12,687 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:55:12,690 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:55:12,692 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:55:12,696 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:55:12,700 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:55:12,702 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:55:12,705 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:55:12,708 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:55:12,710 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:55:12,713 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:55:12,716 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:55:12,719 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:55:12,722 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:55:12,725 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:55:12,728 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:55:12,730 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:55:12,734 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:55:12,739 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:55:12,744 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:12,744 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:55:12,749 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:55:12,749 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:55:12,753 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:12,753 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:55:12,758 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:12,758 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:55:12,762 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:12,762 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:55:12,767 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:12,767 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:55:12,771 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:55:12,771 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:55:12,775 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:12,776 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:55:12,780 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:12,780 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:55:12,784 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:12,784 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:55:12,789 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:55:12,789 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:55:12,793 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:55:12,793 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:55:12,793 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:55:12,798 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:55:12,798 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:55:12,798 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:55:12,802 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:55:12,807 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:55:12,807 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:55:12,807 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:55:12,807 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:55:12,807 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:55:12,812 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:55:12,816 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:55:12,816 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:55:12,816 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:55:12,816 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:55:12,817 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:55:12,817 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:55:12,817 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:55:12,817 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:55:12,817 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:55:12,817 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:55:12,817 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:55:12,817 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:55:12,818 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 00:55:12,818 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 00:55:13,421 - INFO - MissionReliabilityCalculator initialized
2025-12-02 00:55:13,510 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 00:55:13,529 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 00:55:13,529 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 00:55:13,542 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 00:55:13,546 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 00:55:13,549 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 00:55:13,552 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 00:55:13,554 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 00:55:13,558 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 00:55:13,561 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 00:55:13,563 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 00:55:13,566 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 00:55:13,569 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 00:55:13,571 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 00:55:13,574 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 00:55:13,577 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 00:55:13,580 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 00:55:13,582 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 00:55:13,585 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 00:55:13,588 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 00:55:13,591 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 00:55:13,594 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 00:55:13,599 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 00:55:13,603 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:13,604 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 00:55:13,608 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:55:13,608 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 00:55:13,612 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:13,613 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 00:55:13,617 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:13,617 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 00:55:13,621 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:13,621 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 00:55:13,626 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:13,626 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 00:55:13,630 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 00:55:13,630 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 00:55:13,634 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:13,634 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 00:55:13,638 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:13,638 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 00:55:13,643 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 00:55:13,643 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 00:55:13,647 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 00:55:13,647 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 00:55:13,651 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 00:55:13,651 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 00:55:13,651 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 00:55:13,656 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 00:55:13,656 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 00:55:13,656 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 00:55:13,660 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 00:55:13,665 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 00:55:13,665 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 00:55:13,665 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 00:55:13,665 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 00:55:13,665 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 00:55:13,669 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 00:55:13,674 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 00:55:13,674 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 00:55:13,674 - DEBUG - ðŸ” Relationship Details:
2025-12-02 00:55:13,674 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:55:13,674 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 00:55:13,674 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 00:55:13,674 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 00:55:13,674 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 00:55:13,674 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 00:55:13,674 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 00:55:13,674 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 00:55:13,674 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:55:13,674 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 00:55:13,674 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 00:55:13,674 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 00:55:13,674 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 00:55:13,674 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 00:55:13,675 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 00:55:13,675 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 00:55:13,675 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 00:55:13,675 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 00:55:13,675 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 00:55:20,772 - INFO - Database engine created with pool_size=10
2025-12-02 00:55:21,279 - INFO - Deleted ship with ID: 6b16ae77-07e5-4b98-a398-6b5de1763b0b
2025-12-02 00:55:21,304 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-12-02 00:55:21,305 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-12-02 00:55:21,309 - INFO - SQLModel query returned 57 rows
2025-12-02 00:55:21,309 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-12-02 00:55:21,309 - DEBUG - Starting to process and group results
2025-12-02 00:55:21,309 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-12-02 00:55:21,309 - DEBUG - Creating new command group: Western Naval Command
2025-12-02 00:55:21,309 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-12-02 00:55:21,309 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:55:21,309 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:55:21,310 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-12-02 00:55:21,310 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-12-02 00:55:21,310 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-12-02 00:55:21,310 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 00:55:21,310 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-12-02 00:55:21,310 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-12-02 00:55:21,310 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-12-02 00:55:21,310 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-12-02 00:55:21,310 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-12-02 00:55:21,310 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 00:55:21,310 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-12-02 00:55:21,310 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-12-02 00:55:21,310 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-12-02 00:55:21,311 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-12-02 00:55:21,311 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-12-02 00:55:21,311 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-12-02 00:55:21,311 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-12-02 00:55:21,311 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-12-02 00:55:21,311 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-12-02 00:55:21,311 - INFO - Processed 4 unique ships into 1 command groups
2025-12-02 00:55:21,311 - DEBUG - Converting to final data structure
2025-12-02 00:55:21,311 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-12-02 00:55:21,311 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 23 total items
2025-12-02 00:55:21,311 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-12-02 00:55:21,311 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-12-02 00:55:21,311 - INFO - Final data structure: 1 command groups, 4 total ships
2025-12-02 00:55:21,312 - DEBUG - Command groups: ['Western Naval Command']
2025-12-02 00:55:21,312 - INFO - Successfully retrieved hierarchical ship data
2025-12-02 01:05:12,904 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-12-02 01:05:12,904 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-12-02 01:05:12,913 - INFO - SQLModel query returned 57 rows
2025-12-02 01:05:12,913 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-12-02 01:05:12,913 - DEBUG - Starting to process and group results
2025-12-02 01:05:12,913 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-12-02 01:05:12,913 - DEBUG - Creating new command group: Western Naval Command
2025-12-02 01:05:12,913 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-12-02 01:05:12,913 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 01:05:12,913 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 01:05:12,913 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-12-02 01:05:12,913 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-12-02 01:05:12,913 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-12-02 01:05:12,913 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 01:05:12,913 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-12-02 01:05:12,914 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-12-02 01:05:12,914 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-12-02 01:05:12,914 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-12-02 01:05:12,914 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-12-02 01:05:12,914 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 01:05:12,914 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-12-02 01:05:12,914 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-12-02 01:05:12,914 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-12-02 01:05:12,914 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-12-02 01:05:12,914 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-12-02 01:05:12,914 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-12-02 01:05:12,914 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-12-02 01:05:12,915 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-12-02 01:05:12,915 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-12-02 01:05:12,915 - INFO - Processed 4 unique ships into 1 command groups
2025-12-02 01:05:12,915 - DEBUG - Converting to final data structure
2025-12-02 01:05:12,915 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-12-02 01:05:12,915 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 23 total items
2025-12-02 01:05:12,915 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-12-02 01:05:12,915 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-12-02 01:05:12,915 - INFO - Final data structure: 1 command groups, 4 total ships
2025-12-02 01:05:12,915 - DEBUG - Command groups: ['Western Naval Command']
2025-12-02 01:05:12,916 - INFO - Successfully retrieved hierarchical ship data
2025-12-02 01:05:33,395 - INFO - Retrieved system hierarchy for ship 33f13701-849f-4030-8d71-a0f65eac992e: 4 systems, 18 components, 2 departments
2025-12-02 01:08:34,828 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 01:08:34,828 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 01:08:34,828 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 01:08:35,022 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 01:08:35,255 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 01:08:35,271 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 01:08:35,271 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 01:08:35,286 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 01:08:35,301 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 01:08:35,353 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 01:08:35,418 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 01:08:35,424 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 01:08:35,427 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 01:08:35,429 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 01:08:35,432 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 01:08:35,435 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 01:08:35,439 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 01:08:35,441 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 01:08:35,444 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 01:08:35,446 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 01:08:35,449 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 01:08:35,452 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 01:08:35,454 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 01:08:35,458 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 01:08:35,460 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 01:08:35,463 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 01:08:35,466 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 01:08:35,470 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 01:08:35,475 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 01:08:35,483 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 01:08:35,489 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:35,489 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 01:08:35,493 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 01:08:35,493 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 01:08:35,498 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:35,498 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 01:08:35,502 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:35,502 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 01:08:35,507 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:35,507 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 01:08:35,511 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:35,511 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 01:08:35,515 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 01:08:35,516 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 01:08:35,520 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:35,520 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 01:08:35,524 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:35,525 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 01:08:35,529 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:35,529 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 01:08:35,533 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 01:08:35,533 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 01:08:35,538 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 01:08:35,538 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 01:08:35,538 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 01:08:35,542 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 01:08:35,542 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 01:08:35,542 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 01:08:35,547 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 01:08:35,551 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 01:08:35,551 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 01:08:35,551 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 01:08:35,551 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 01:08:35,551 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 01:08:35,556 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 01:08:35,560 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 01:08:35,560 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 01:08:35,560 - DEBUG - ðŸ” Relationship Details:
2025-12-02 01:08:35,560 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 01:08:35,560 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 01:08:35,560 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 01:08:35,560 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 01:08:35,560 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 01:08:35,561 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 01:08:35,561 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 01:08:35,561 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 01:08:35,561 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 01:08:35,561 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 01:08:35,561 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 01:08:35,561 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 01:08:35,561 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 01:08:35,561 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 01:08:35,561 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 01:08:35,561 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 01:08:35,561 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 01:08:35,561 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 01:08:35,561 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 01:08:35,562 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 01:08:35,562 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 01:08:36,411 - INFO - MissionReliabilityCalculator initialized
2025-12-02 01:08:36,500 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 01:08:36,516 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 01:08:36,516 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 01:08:36,529 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 01:08:36,534 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 01:08:36,537 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 01:08:36,539 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 01:08:36,542 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 01:08:36,545 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 01:08:36,548 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 01:08:36,551 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 01:08:36,554 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 01:08:36,556 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 01:08:36,559 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 01:08:36,561 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 01:08:36,564 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 01:08:36,567 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 01:08:36,570 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 01:08:36,572 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 01:08:36,575 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 01:08:36,578 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 01:08:36,581 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 01:08:36,586 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 01:08:36,591 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:36,591 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 01:08:36,595 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 01:08:36,595 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 01:08:36,600 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:36,600 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 01:08:36,604 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:36,604 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 01:08:36,609 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:36,609 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 01:08:36,613 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:36,613 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 01:08:36,618 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 01:08:36,618 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 01:08:36,622 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:36,622 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 01:08:36,627 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:36,627 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 01:08:36,631 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:36,631 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 01:08:36,635 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 01:08:36,635 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 01:08:36,640 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 01:08:36,640 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 01:08:36,640 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 01:08:36,645 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 01:08:36,645 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 01:08:36,645 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 01:08:36,649 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 01:08:36,654 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 01:08:36,654 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 01:08:36,654 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 01:08:36,654 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 01:08:36,654 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 01:08:36,659 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 01:08:36,663 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 01:08:36,663 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 01:08:36,663 - DEBUG - ðŸ” Relationship Details:
2025-12-02 01:08:36,663 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 01:08:36,663 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 01:08:36,663 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 01:08:36,664 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 01:08:36,664 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 01:08:36,664 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 01:08:36,664 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 01:08:36,664 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 01:08:36,664 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 01:08:36,664 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 01:08:36,664 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 01:08:36,664 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 01:08:36,664 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 01:08:36,664 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 01:08:36,664 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 01:08:36,664 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 01:08:36,664 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 01:08:36,664 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 01:08:36,665 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 01:08:37,585 - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-12-02 01:08:37,585 - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-12-02 01:08:37,585 - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-12-02 01:08:37,776 - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-12-02 01:08:38,008 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 01:08:38,024 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 01:08:38,024 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 01:08:38,039 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 01:08:38,054 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 01:08:38,063 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 01:08:38,083 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 01:08:38,088 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 01:08:38,091 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 01:08:38,094 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 01:08:38,096 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 01:08:38,100 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 01:08:38,102 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 01:08:38,105 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 01:08:38,108 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 01:08:38,110 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 01:08:38,113 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 01:08:38,115 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 01:08:38,118 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 01:08:38,121 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 01:08:38,123 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 01:08:38,126 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 01:08:38,129 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 01:08:38,132 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 01:08:38,134 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 01:08:38,140 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 01:08:38,145 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:38,145 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 01:08:38,149 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 01:08:38,149 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 01:08:38,153 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:38,153 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 01:08:38,158 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:38,158 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 01:08:38,162 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:38,162 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 01:08:38,166 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:38,167 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 01:08:38,171 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 01:08:38,171 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 01:08:38,175 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:38,175 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 01:08:38,180 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:38,180 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 01:08:38,184 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:38,184 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 01:08:38,188 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 01:08:38,188 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 01:08:38,193 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 01:08:38,193 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 01:08:38,193 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 01:08:38,198 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 01:08:38,198 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 01:08:38,198 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 01:08:38,203 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 01:08:38,208 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 01:08:38,208 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 01:08:38,208 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 01:08:38,208 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 01:08:38,208 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 01:08:38,213 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 01:08:38,217 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 01:08:38,217 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 01:08:38,217 - DEBUG - ðŸ” Relationship Details:
2025-12-02 01:08:38,217 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 01:08:38,217 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 01:08:38,217 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 01:08:38,217 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 01:08:38,218 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 01:08:38,218 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 01:08:38,218 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 01:08:38,218 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 01:08:38,218 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 01:08:38,218 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 01:08:38,218 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 01:08:38,218 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 01:08:38,218 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 01:08:38,218 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 01:08:38,218 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 01:08:38,218 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 01:08:38,218 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 01:08:38,218 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 01:08:38,218 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 01:08:38,219 - INFO - ðŸ“Œ Loaded conversation memory from disk.
2025-12-02 01:08:38,219 - INFO - ðŸ“Œ Initialized memory: Last 5 exchanges
2025-12-02 01:08:38,815 - INFO - MissionReliabilityCalculator initialized
2025-12-02 01:08:38,905 - INFO - Loading configuration from: /home/user/IITB/netra/backend/utils/config.yaml
2025-12-02 01:08:38,920 - INFO - Initializing LLMClient with Ollama model: codellama:7b-instruct
2025-12-02 01:08:38,921 - INFO - âœ… Database engine created with URL: mssql+pyodbc://sa:Camlab110@localhost:1433/NetraKoshx?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes&timeout=300
2025-12-02 01:08:38,933 - INFO - ðŸ” Found tables: ['alembic_version', 'alphabeta', 'departments', 'etabeta', 'etl_audit_log', 'etl_schedule', 'failure_modes', 'Mission_configurations', 'monthly_utilization', 'Overhaul_metadata', 'Overhaul_Readings', 'refresh_tokens', 'sensor_metadata', 'sensor_readings', 'ships', 'system_configuration', 'systems', 'users']
2025-12-02 01:08:38,938 - DEBUG - ðŸ“Š Table alembic_version columns: ['version_num']
2025-12-02 01:08:38,941 - DEBUG - ðŸ“Š Table alphabeta columns: ['id', 'alpha', 'beta', 'component_id']
2025-12-02 01:08:38,944 - DEBUG - ðŸ“Š Table departments columns: ['ship_id', 'department_name', 'department_code', 'department_id', 'created_date', 'modified_date']
2025-12-02 01:08:38,947 - DEBUG - ðŸ“Š Table etabeta columns: ['id', 'eta', 'beta', 'component_id', 'priority']
2025-12-02 01:08:38,950 - DEBUG - ðŸ“Š Table etl_audit_log columns: ['log_id', 'run_id', 'component_id', 'ship_name', 'nomenclature', 'start_time', 'end_time', 'duration_ms', 'rows_processed', 'rows_inserted', 'rows_updated', 'status', 'error_details', 'retry_attempt', 'created_at']
2025-12-02 01:08:38,953 - DEBUG - ðŸ“Š Table etl_schedule columns: ['component_id', 'frequency_minutes', 'last_run_time', 'next_run_time', 'status', 'retry_count', 'max_retries', 'error_message', 'created_at', 'updated_at']
2025-12-02 01:08:38,956 - DEBUG - ðŸ“Š Table failure_modes columns: ['name', 'severity', 'component_id', 'failure_mode_id']
2025-12-02 01:08:38,959 - DEBUG - ðŸ“Š Table Mission_configurations columns: ['config_name', 'id', 'created_date', 'modified_date', 'configuration', 'ship_id', 'ship_name']
2025-12-02 01:08:38,961 - DEBUG - ðŸ“Š Table monthly_utilization columns: ['id', 'operation_date', 'utlization', 'component_id']
2025-12-02 01:08:38,964 - DEBUG - ðŸ“Š Table Overhaul_metadata columns: ['id', 'component_id', 'overhaul_frequency_hours', 'total_overhaul_events', 'last_overhaul_date']
2025-12-02 01:08:38,966 - DEBUG - ðŸ“Š Table Overhaul_Readings columns: ['id', 'component_id', 'maintenance_type', 'defect_date', 'cmms_running_age', 'running_age']
2025-12-02 01:08:38,969 - DEBUG - ðŸ“Š Table refresh_tokens columns: ['id', 'token', 'user_id', 'expires_at', 'created_at', 'is_revoked']
2025-12-02 01:08:38,972 - DEBUG - ðŸ“Š Table sensor_metadata columns: ['sensor_name', 'unit', 'min_value', 'max_value', 'frequency', 'P', 'F', 'component_id', 'sensor_id', 'failure_mode_id']
2025-12-02 01:08:38,974 - DEBUG - ðŸ“Š Table sensor_readings columns: ['value', 'operating_hours', 'alert', 'id', 'date', 'component_id', 'sensor_id']
2025-12-02 01:08:38,977 - DEBUG - ðŸ“Š Table ships columns: ['ship_name', 'ship_category', 'ship_class', 'command', 'ship_id', 'created_date', 'modified_date']
2025-12-02 01:08:38,980 - DEBUG - ðŸ“Š Table system_configuration columns: ['component_name', 'parent_id', 'department_id', 'CMMS_EquipmentCode', 'is_lmu', 'parent_name', 'nomenclature', 'etl', 'component_id', 'created_date', 'modified_date', 'ship_id', 'system_id', 'RepairType']
2025-12-02 01:08:38,983 - DEBUG - ðŸ“Š Table systems columns: ['system_id', 'system_type', 'created_date']
2025-12-02 01:08:38,985 - DEBUG - ðŸ“Š Table users columns: ['email', 'username', 'full_name', 'role', 'is_active', 'id', 'hashed_password', 'created_at', 'updated_at', 'last_login']
2025-12-02 01:08:38,991 - DEBUG - ðŸ”— Foreign keys for alembic_version: []
2025-12-02 01:08:38,995 - DEBUG - ðŸ”— Foreign keys for alphabeta: [{'name': 'FK__alphabeta__compo__3E1D39E1', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:38,995 - DEBUG - ðŸ”— Added relationship: alphabeta.component_id -> system_configuration.component_id
2025-12-02 01:08:39,000 - DEBUG - ðŸ”— Foreign keys for departments: [{'name': 'FK__departmen__ship___47DBAE45', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 01:08:39,000 - DEBUG - ðŸ”— Added relationship: departments.ship_id -> ships.ship_id
2025-12-02 01:08:39,004 - DEBUG - ðŸ”— Foreign keys for etabeta: [{'name': 'FK__etabeta__compone__40F9A68C', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:39,004 - DEBUG - ðŸ”— Added relationship: etabeta.component_id -> system_configuration.component_id
2025-12-02 01:08:39,008 - DEBUG - ðŸ”— Foreign keys for etl_audit_log: [{'name': 'FK__etl_audit__compo__55009F39', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:39,009 - DEBUG - ðŸ”— Added relationship: etl_audit_log.component_id -> system_configuration.component_id
2025-12-02 01:08:39,013 - DEBUG - ðŸ”— Foreign keys for etl_schedule: [{'name': 'FK__etl_sched__compo__57DD0BE4', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:39,013 - DEBUG - ðŸ”— Added relationship: etl_schedule.component_id -> system_configuration.component_id
2025-12-02 01:08:39,017 - DEBUG - ðŸ”— Foreign keys for failure_modes: [{'name': 'FK__failure_m__compo__37703C52', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:39,017 - DEBUG - ðŸ”— Added relationship: failure_modes.component_id -> system_configuration.component_id
2025-12-02 01:08:39,021 - DEBUG - ðŸ”— Foreign keys for Mission_configurations: [{'name': 'fk_mission_ship', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}]
2025-12-02 01:08:39,022 - DEBUG - ðŸ”— Added relationship: Mission_configurations.ship_id -> ships.ship_id
2025-12-02 01:08:39,026 - DEBUG - ðŸ”— Foreign keys for monthly_utilization: [{'name': 'FK__monthly_u__compo__2EDAF651', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:39,026 - DEBUG - ðŸ”— Added relationship: monthly_utilization.component_id -> system_configuration.component_id
2025-12-02 01:08:39,030 - DEBUG - ðŸ”— Foreign keys for Overhaul_metadata: [{'name': 'FK__Overhaul___compo__214BF109', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:39,030 - DEBUG - ðŸ”— Added relationship: Overhaul_metadata.component_id -> system_configuration.component_id
2025-12-02 01:08:39,035 - DEBUG - ðŸ”— Foreign keys for Overhaul_Readings: [{'name': 'FK__Overhaul___compo__1E6F845E', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}]
2025-12-02 01:08:39,035 - DEBUG - ðŸ”— Added relationship: Overhaul_Readings.component_id -> system_configuration.component_id
2025-12-02 01:08:39,039 - DEBUG - ðŸ”— Foreign keys for refresh_tokens: [{'name': 'FK__refresh_t__user___49C3F6B7', 'constrained_columns': ['user_id'], 'referred_schema': None, 'referred_table': 'users', 'referred_columns': ['id'], 'options': {}}]
2025-12-02 01:08:39,039 - DEBUG - ðŸ”— Added relationship: refresh_tokens.user_id -> users.id
2025-12-02 01:08:39,043 - DEBUG - ðŸ”— Foreign keys for sensor_metadata: [{'name': 'FK__sensor_me__compo__31B762FC', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_me__failu__32AB8735', 'constrained_columns': ['failure_mode_id'], 'referred_schema': None, 'referred_table': 'failure_modes', 'referred_columns': ['failure_mode_id'], 'options': {}}]
2025-12-02 01:08:39,044 - DEBUG - ðŸ”— Added relationship: sensor_metadata.component_id -> system_configuration.component_id
2025-12-02 01:08:39,044 - DEBUG - ðŸ”— Added relationship: sensor_metadata.failure_mode_id -> failure_modes.failure_mode_id
2025-12-02 01:08:39,048 - DEBUG - ðŸ”— Foreign keys for sensor_readings: [{'name': 'FK__sensor_re__compo__3587F3E0', 'constrained_columns': ['component_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__sensor_re__senso__367C1819', 'constrained_columns': ['sensor_id'], 'referred_schema': None, 'referred_table': 'sensor_metadata', 'referred_columns': ['sensor_id'], 'options': {}}]
2025-12-02 01:08:39,048 - DEBUG - ðŸ”— Added relationship: sensor_readings.component_id -> system_configuration.component_id
2025-12-02 01:08:39,048 - DEBUG - ðŸ”— Added relationship: sensor_readings.sensor_id -> sensor_metadata.sensor_id
2025-12-02 01:08:39,052 - DEBUG - ðŸ”— Foreign keys for ships: []
2025-12-02 01:08:39,057 - DEBUG - ðŸ”— Foreign keys for system_configuration: [{'name': 'FK__system_co__depar__4BAC3F29', 'constrained_columns': ['department_id'], 'referred_schema': None, 'referred_table': 'departments', 'referred_columns': ['department_id'], 'options': {}}, {'name': 'FK__system_co__paren__4CA06362', 'constrained_columns': ['parent_id'], 'referred_schema': None, 'referred_table': 'system_configuration', 'referred_columns': ['component_id'], 'options': {}}, {'name': 'FK__system_co__ship___3864608B', 'constrained_columns': ['ship_id'], 'referred_schema': None, 'referred_table': 'ships', 'referred_columns': ['ship_id'], 'options': {}}, {'name': 'FK__system_co__syste__47A6A41B', 'constrained_columns': ['system_id'], 'referred_schema': None, 'referred_table': 'systems', 'referred_columns': ['system_id'], 'options': {}}]
2025-12-02 01:08:39,057 - DEBUG - ðŸ”— Added relationship: system_configuration.department_id -> departments.department_id
2025-12-02 01:08:39,057 - DEBUG - ðŸ”— Added relationship: system_configuration.parent_id -> system_configuration.component_id
2025-12-02 01:08:39,057 - DEBUG - ðŸ”— Added relationship: system_configuration.ship_id -> ships.ship_id
2025-12-02 01:08:39,057 - DEBUG - ðŸ”— Added relationship: system_configuration.system_id -> systems.system_id
2025-12-02 01:08:39,061 - DEBUG - ðŸ”— Foreign keys for systems: []
2025-12-02 01:08:39,065 - DEBUG - ðŸ”— Foreign keys for users: []
2025-12-02 01:08:39,066 - INFO - âœ… Schema loading complete. Found 18 tables and 19 relationships
2025-12-02 01:08:39,066 - DEBUG - ðŸ” Relationship Details:
2025-12-02 01:08:39,066 - DEBUG -   ('alphabeta', 'system_configuration') -> ('alphabeta.component_id', 'system_configuration.component_id')
2025-12-02 01:08:39,066 - DEBUG -   ('departments', 'ships') -> ('departments.ship_id', 'ships.ship_id')
2025-12-02 01:08:39,066 - DEBUG -   ('etabeta', 'system_configuration') -> ('etabeta.component_id', 'system_configuration.component_id')
2025-12-02 01:08:39,066 - DEBUG -   ('etl_audit_log', 'system_configuration') -> ('etl_audit_log.component_id', 'system_configuration.component_id')
2025-12-02 01:08:39,066 - DEBUG -   ('etl_schedule', 'system_configuration') -> ('etl_schedule.component_id', 'system_configuration.component_id')
2025-12-02 01:08:39,066 - DEBUG -   ('failure_modes', 'system_configuration') -> ('failure_modes.component_id', 'system_configuration.component_id')
2025-12-02 01:08:39,066 - DEBUG -   ('Mission_configurations', 'ships') -> ('Mission_configurations.ship_id', 'ships.ship_id')
2025-12-02 01:08:39,066 - DEBUG -   ('monthly_utilization', 'system_configuration') -> ('monthly_utilization.component_id', 'system_configuration.component_id')
2025-12-02 01:08:39,066 - DEBUG -   ('Overhaul_metadata', 'system_configuration') -> ('Overhaul_metadata.component_id', 'system_configuration.component_id')
2025-12-02 01:08:39,066 - DEBUG -   ('Overhaul_Readings', 'system_configuration') -> ('Overhaul_Readings.component_id', 'system_configuration.component_id')
2025-12-02 01:08:39,066 - DEBUG -   ('refresh_tokens', 'users') -> ('refresh_tokens.user_id', 'users.id')
2025-12-02 01:08:39,066 - DEBUG -   ('sensor_metadata', 'system_configuration') -> ('sensor_metadata.component_id', 'system_configuration.component_id')
2025-12-02 01:08:39,066 - DEBUG -   ('sensor_metadata', 'failure_modes') -> ('sensor_metadata.failure_mode_id', 'failure_modes.failure_mode_id')
2025-12-02 01:08:39,066 - DEBUG -   ('sensor_readings', 'system_configuration') -> ('sensor_readings.component_id', 'system_configuration.component_id')
2025-12-02 01:08:39,066 - DEBUG -   ('sensor_readings', 'sensor_metadata') -> ('sensor_readings.sensor_id', 'sensor_metadata.sensor_id')
2025-12-02 01:08:39,067 - DEBUG -   ('system_configuration', 'departments') -> ('system_configuration.department_id', 'departments.department_id')
2025-12-02 01:08:39,067 - DEBUG -   ('system_configuration', 'system_configuration') -> ('system_configuration.parent_id', 'system_configuration.component_id')
2025-12-02 01:08:39,067 - DEBUG -   ('system_configuration', 'ships') -> ('system_configuration.ship_id', 'ships.ship_id')
2025-12-02 01:08:39,067 - DEBUG -   ('system_configuration', 'systems') -> ('system_configuration.system_id', 'systems.system_id')
2025-12-02 01:08:39,069 - INFO - Database engine created with pool_size=10
2025-12-02 01:08:39,106 - INFO - Retrieved AlphaBeta records for component 8e7c0c15-f44e-42be-bbf4-e04a62fc242e: [AlphaBetaRead(id=UUID('1bb49d75-1e92-4f5b-9578-058be9a2185b'), alpha=8e-06, beta=1.15, component_id=UUID('8e7c0c15-f44e-42be-bbf4-e04a62fc242e'))]
2025-12-02 01:12:03,652 - INFO - Created AlphaBeta record for component: ca0d1566-48ef-4581-a791-09372008a868
2025-12-02 01:18:35,571 - DEBUG - Starting _get_hierarchical_ship_data_sync
2025-12-02 01:18:35,571 - DEBUG - Executing SQLModel query for hierarchical ship data
2025-12-02 01:18:35,582 - INFO - SQLModel query returned 57 rows
2025-12-02 01:18:35,582 - DEBUG - First row sample: (UUID('f1250bac-b929-4620-9541-93cf0e612e34'), 'EX - MAGAR', 'Western Naval Command', UUID('9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba'), 'MAIN ENGINE DIESEL (8PC 2 V400 MKIII) CROSSLY', 'MAIN ENGINE (PORT)', UUID('64044bde-5b46-4ab3-b44d-2d140833284b'), <SystemType.PROPULSION: 'propulsion'>)
2025-12-02 01:18:35,582 - DEBUG - Starting to process and group results
2025-12-02 01:18:35,582 - DEBUG - Initializing new ship: EX - MAGAR (ID: f1250bac-b929-4620-9541-93cf0e612e34, Command: Western Naval Command)
2025-12-02 01:18:35,582 - DEBUG - Creating new command group: Western Naval Command
2025-12-02 01:18:35,582 - DEBUG - Creating new equipment group 'Propulsion' for ship EX - MAGAR
2025-12-02 01:18:35,582 - DEBUG - Initializing new ship: INS ONE (ID: 33f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 01:18:35,582 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 01:18:35,582 - DEBUG - Creating new equipment group 'Other' for ship INS ONE
2025-12-02 01:18:35,582 - DEBUG - Component motor 1 has no system_type, assigning to 'Other' group
2025-12-02 01:18:35,582 - DEBUG - Component pump3 has no system_type, assigning to 'Other' group
2025-12-02 01:18:35,582 - DEBUG - Component pump2 has no system_type, assigning to 'Other' group
2025-12-02 01:18:35,582 - DEBUG - Component pump1 has no system_type, assigning to 'Other' group
2025-12-02 01:18:35,582 - DEBUG - Creating new equipment group 'Firing' for ship INS ONE
2025-12-02 01:18:35,582 - DEBUG - Creating new equipment group 'Power Generation' for ship INS ONE
2025-12-02 01:18:35,582 - DEBUG - Creating new equipment group 'Propulsion' for ship INS ONE
2025-12-02 01:18:35,582 - DEBUG - Creating new equipment group 'Support' for ship INS ONE
2025-12-02 01:18:35,582 - DEBUG - Initializing new ship: INS THREE (ID: 53f13701-849f-4030-8d71-a0f65eac992e, Command: Western Naval Command)
2025-12-02 01:18:35,583 - DEBUG - Creating new equipment group 'Firing' for ship INS THREE
2025-12-02 01:18:35,583 - DEBUG - Creating new equipment group 'Power Generation' for ship INS THREE
2025-12-02 01:18:35,583 - DEBUG - Creating new equipment group 'Propulsion' for ship INS THREE
2025-12-02 01:18:35,583 - DEBUG - Creating new equipment group 'Support' for ship INS THREE
2025-12-02 01:18:35,583 - DEBUG - Initializing new ship: INS TWO (ID: fdc1f9a0-d380-42bb-9ee5-7990a46ddff5, Command: Western Naval Command)
2025-12-02 01:18:35,583 - DEBUG - Creating new equipment group 'Firing' for ship INS TWO
2025-12-02 01:18:35,583 - DEBUG - Creating new equipment group 'Power Generation' for ship INS TWO
2025-12-02 01:18:35,583 - DEBUG - Creating new equipment group 'Propulsion' for ship INS TWO
2025-12-02 01:18:35,583 - DEBUG - Creating new equipment group 'Support' for ship INS TWO
2025-12-02 01:18:35,583 - INFO - Processed 4 unique ships into 1 command groups
2025-12-02 01:18:35,583 - DEBUG - Converting to final data structure
2025-12-02 01:18:35,583 - DEBUG - Ship f1250bac-b929-4620-9541-93cf0e612e34: 1 equipment groups, 2 total items
2025-12-02 01:18:35,583 - DEBUG - Ship 33f13701-849f-4030-8d71-a0f65eac992e: 5 equipment groups, 23 total items
2025-12-02 01:18:35,583 - DEBUG - Ship 53f13701-849f-4030-8d71-a0f65eac992e: 4 equipment groups, 16 total items
2025-12-02 01:18:35,583 - DEBUG - Ship fdc1f9a0-d380-42bb-9ee5-7990a46ddff5: 4 equipment groups, 16 total items
2025-12-02 01:18:35,583 - INFO - Final data structure: 1 command groups, 4 total ships
2025-12-02 01:18:35,583 - DEBUG - Command groups: ['Western Naval Command']
2025-12-02 01:18:35,584 - INFO - Successfully retrieved hierarchical ship data
2025-12-02 01:18:42,333 - INFO - Retrieved system hierarchy for ship 33f13701-849f-4030-8d71-a0f65eac992e: 4 systems, 18 components, 2 departments
2025-12-02 01:23:42,978 - INFO - Retrieved AlphaBeta records for component 5358d044-9f4f-44cf-a975-341221f7189d: [AlphaBetaRead(id=UUID('a39c33d1-194c-4edd-af98-4b4320b552c7'), alpha=0.001790438, beta=1.17557219884629, component_id=UUID('5358d044-9f4f-44cf-a975-341221f7189d'))]
2025-12-02 01:24:12,283 - INFO - Retrieved AlphaBeta records for component daec57c6-2de5-4558-b9ae-39a6bb8f200e: [AlphaBetaRead(id=UUID('6854f7ac-8e35-423d-984c-67e6c13c5b8f'), alpha=8e-06, beta=1.26, component_id=UUID('daec57c6-2de5-4558-b9ae-39a6bb8f200e'))]
2025-12-02 01:26:36,452 - INFO - Retrieved AlphaBeta records for component daec57c6-2de5-4558-b9ae-39a6bb8f200e: [AlphaBetaRead(id=UUID('6854f7ac-8e35-423d-984c-67e6c13c5b8f'), alpha=8e-06, beta=1.26, component_id=UUID('daec57c6-2de5-4558-b9ae-39a6bb8f200e'))]
2025-12-02 01:27:29,288 - INFO - Retrieved AlphaBeta records for component daec57c6-2de5-4558-b9ae-39a6bb8f200e: [AlphaBetaRead(id=UUID('6854f7ac-8e35-423d-984c-67e6c13c5b8f'), alpha=8e-06, beta=1.26, component_id=UUID('daec57c6-2de5-4558-b9ae-39a6bb8f200e'))]
2025-12-02 01:27:52,500 - INFO - Retrieved AlphaBeta records for component 5358d044-9f4f-44cf-a975-341221f7189d: [AlphaBetaRead(id=UUID('a39c33d1-194c-4edd-af98-4b4320b552c7'), alpha=0.001790438, beta=1.17557219884629, component_id=UUID('5358d044-9f4f-44cf-a975-341221f7189d'))]
2025-12-02 01:28:09,502 - INFO - Retrieved AlphaBeta records for component daec57c6-2de5-4558-b9ae-39a6bb8f200e: [AlphaBetaRead(id=UUID('6854f7ac-8e35-423d-984c-67e6c13c5b8f'), alpha=8e-06, beta=1.26, component_id=UUID('daec57c6-2de5-4558-b9ae-39a6bb8f200e'))]
2025-12-02 01:28:33,123 - INFO - Retrieved AlphaBeta records for component 9b4d3914-bfb8-4d5b-99ec-9e8d3447b5ba: []
